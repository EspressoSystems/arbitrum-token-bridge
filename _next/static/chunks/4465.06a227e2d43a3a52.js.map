{"version":3,"file":"static/chunks/4465.06a227e2d43a3a52.js","mappings":"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AAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,gBACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,WACN7U,KAAM,SACR,EACD,CACD6U,KAAM,2BACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,gBACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,WACN7U,KAAM,SACR,EACD,CACD6U,KAAM,uBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,EAAE,CACVviB,KAAM,QACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,aACN7U,KAAM,SACR,EACD,CACD6U,KAAM,gBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,aACN7U,KAAM,SACR,EACD,CACD6U,KAAM,iBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,QACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,sBACN7U,KAAM,SACR,EACD,CACD6U,KAAM,yBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,kBACN7U,KAAM,SACR,EACD,CACD6U,KAAM,qBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,aACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,SACdxiB,KAAM,eACN7U,KAAM,QACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,cACN7U,KAAM,SACR,EACD,CACD6U,KAAM,kBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,aACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,SACdxiB,KAAM,eACN7U,KAAM,QACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,cACN7U,KAAM,SACR,EACD,CACD6U,KAAM,oBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,EAAE,CACVviB,KAAM,UACN7U,KAAM,OACR,EACA,CACEo3B,OAAQ,EAAE,CACVviB,KAAM,kBACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,UACdxiB,KAAM,yBACN7U,KAAM,SACR,EACD,CACD6U,KAAM,yBACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,UACdxiB,KAAM,YACN7U,KAAM,SACR,EACA,CACEq3B,aAAc,UACdxiB,KAAM,aACN7U,KAAM,SACR,EACD,CACD6U,KAAM,OACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,UACdxiB,KAAM,GACN7U,KAAM,SACR,EACD,CACD6U,KAAM,uBACN4iB,QAAS,CACP,CACEJ,aAAc,UACdxiB,KAAM,GACN7U,KAAM,SACR,EACD,CACDs3B,gBAAiB,OACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,SACdxiB,KAAM,eACN7U,KAAM,QACR,EACA,CACEq3B,aAAc,UACdxiB,KAAM,cACN7U,KAAM,SACR,EACD,CACD6U,KAAM,gBACN4iB,QAAS,CACP,CACEJ,aAAc,UACdxiB,KAAM,GACN7U,KAAM,SACR,EACD,CACDs3B,gBAAiB,OACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,UACdxiB,KAAM,aACN7U,KAAM,SACR,EACA,CACEq3B,aAAc,SACdxiB,KAAM,eACN7U,KAAM,QACR,EACA,CACEq3B,aAAc,UACdxiB,KAAM,cACN7U,KAAM,SACR,EACD,CACD6U,KAAM,gBACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,EAAE,CACVviB,KAAM,sBACN4iB,QAAS,CACP,CACEJ,aAAc,UACdxiB,KAAM,GACN7U,KAAM,SACR,EACD,CACDs3B,gBAAiB,OACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,SACdxiB,KAAM,eACN7U,KAAM,QACR,EACA,CACEq3B,aAAc,UACdxiB,KAAM,YACN7U,KAAM,SACR,EACA,CACEq3B,aAAc,UACdxiB,KAAM,KACN7U,KAAM,SACR,EACA,CACEq3B,aAAc,UACdxiB,KAAM,SACN7U,KAAM,SACR,EACD,CACD6U,KAAM,OACN4iB,QAAS,CACP,CACEJ,aAAc,UACdxiB,KAAM,YACN7U,KAAM,SACR,EACD,CACDs3B,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,EAAE,CACVviB,KAAM,QACN4iB,QAAS,CACP,CACEJ,aAAc,UACdxiB,KAAM,GACN7U,KAAM,SACR,EACD,CACDs3B,gBAAiB,OACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,EAAE,CACVviB,KAAM,QACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,EAAE,CACVviB,KAAM,SACN4iB,QAAS,CACP,CACEJ,aAAc,OACdxiB,KAAM,GACN7U,KAAM,MACR,EACD,CACDs3B,gBAAiB,OACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,EAAE,CACVviB,KAAM,SACN4iB,QAAS,CACP,CACEJ,aAAc,UACdxiB,KAAM,GACN7U,KAAM,SACR,EACD,CACDs3B,gBAAiB,OACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,EAAE,CACVviB,KAAM,eACN4iB,QAAS,CACP,CACEJ,aAAc,UACdxiB,KAAM,GACN7U,KAAM,SACR,EACD,CACDs3B,gBAAiB,OACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,UACdxiB,KAAM,GACN7U,KAAM,SACR,EACD,CACD6U,KAAM,4BACN4iB,QAAS,CACP,CACEJ,aAAc,UACdxiB,KAAM,GACN7U,KAAM,SACR,EACD,CACDs3B,gBAAiB,OACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,EAAE,CACVviB,KAAM,4BACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,kBACdxiB,KAAM,gBACN7U,KAAM,SACR,EACA,CACEq3B,aAAc,UACdxiB,KAAM,KACN7U,KAAM,SACR,EACA,CACEq3B,aAAc,UACdxiB,KAAM,SACN7U,KAAM,SACR,EACD,CACD6U,KAAM,cACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,EAAE,CACVviB,KAAM,UACN4iB,QAAS,CACP,CACEJ,aAAc,UACdxiB,KAAM,GACN7U,KAAM,SACR,EACD,CACDs3B,gBAAiB,OACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,UACdxiB,KAAM,aACN7U,KAAM,SACR,EACA,CACEq3B,aAAc,UACdxiB,KAAM,sBACN7U,KAAM,SACR,EACD,CACD6U,KAAM,6BACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,UACdxiB,KAAM,qBACN7U,KAAM,SACR,EACD,CACD6U,KAAM,qBACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,EAAE,CACVviB,KAAM,kBACN4iB,QAAS,CACP,CACEJ,aAAc,UACdxiB,KAAM,GACN7U,KAAM,SACR,EACD,CACDs3B,gBAAiB,OACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,UACdxiB,KAAM,WACN7U,KAAM,SACR,EACD,CACD6U,KAAM,oBACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,UACdxiB,KAAM,aACN7U,KAAM,SACR,EACA,CACEq3B,aAAc,SACdxiB,KAAM,eACN7U,KAAM,QACR,EACA,CACEq3B,aAAc,UACdxiB,KAAM,cACN7U,KAAM,SACR,EACD,CACD6U,KAAM,kBACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,EAAE,CACVviB,KAAM,UACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,UACdxiB,KAAM,aACN7U,KAAM,SACR,EACD,CACD6U,KAAM,eACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CACEC,aAAc,UACdxiB,KAAM,aACN7U,KAAM,SACR,EACD,CACD6U,KAAM,gBACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACD,gBCzjB6B03B,CAAAA,GAAQC,GAAG,CAACC,yBAAyB,CAElCF,GAAQC,GAAG,CAACE,4BAA4B,ECO7D95B,EAAAA,GAAAA,CAAAA,EAAAA,CAAAA,CAAAA,6DCrBL,IAAM+5B,GAAwB,CACnC,CACEV,OAAQ,CACN,CAAEC,aAAc,SAAUxiB,KAAM,eAAgB7U,KAAM,QAAS,EAC/D,CAAEq3B,aAAc,UAAWxiB,KAAM,YAAa7U,KAAM,SAAU,EAC9D,CAAEq3B,aAAc,SAAUxiB,KAAM,sBAAuB7U,KAAM,QAAS,EACtE,CAAEq3B,aAAc,SAAUxiB,KAAM,WAAY7U,KAAM,QAAS,EAC5D,CACDs3B,gBAAiB,aACjBt3B,KAAM,aACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,WACN7U,KAAM,SACR,EACD,CACD6U,KAAM,mBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,WACN7U,KAAM,SACR,EACD,CACD6U,KAAM,kBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,0BACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,qBACN7U,KAAM,SACR,EACD,CACD6U,KAAM,yBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,wBACN7U,KAAM,SACR,EACD,CACD6U,KAAM,4BACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,SACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,SACdxiB,KAAM,eACN7U,KAAM,QACR,EACA,CAAEw3B,QAAS,GAAMH,aAAc,SAAUxiB,KAAM,QAAS7U,KAAM,QAAS,EACvE,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,SACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,QACdxiB,KAAM,cACN7U,KAAM,OACR,EACD,CACD6U,KAAM,kBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CAAEI,QAAS,GAAOH,aAAc,QAASxiB,KAAM,UAAW7U,KAAM,OAAQ,EACzE,CACD6U,KAAM,cACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,gBACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,WACN7U,KAAM,SACR,EACD,CACD6U,KAAM,2BACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,gBACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,WACN7U,KAAM,SACR,EACD,CACD6U,KAAM,uBACN7U,KAAM,OACR,EACA,CAAEu3B,U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CA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,gBACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,SACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,YACN7U,KAAM,SACR,EACD,CACD6U,KAAM,kBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,gBACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,WACN7U,KAAM,SACR,EACD,CACD6U,KAAM,2BACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,gBACN7U,KAAM,SACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,WACN7U,KAAM,SACR,EACD,CACD6U,KAAM,uBACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,SACdxiB,KAAM,SACN7U,KAAM,QACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,iBACN7U,KAAM,SACR,EACD,CACD6U,KAAM,4BACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,SACdxiB,KAAM,SACN7U,KAAM,QACR,EACA,CACEw3B,QAAS,GACTH,aAAc,UACdxiB,KAAM,iBACN7U,KAAM,SACR,EACD,CACD6U,KAAM,8BACN7U,KAAM,OACR,EACA,CACEu3B,UAAW,GACXH,OAAQ,CACN,CACEI,QAAS,GACTH,aAAc,UACdxiB,KAAM,aACN7U,KAAM,SACR,EACD,CACD6U,KAAM,iBACN7U,KAAM,OACR,EACA,CACEo3B,OAAQ,EAAE,CACVviB,KAAM,kBACN4iB,QAAS,EAAE,CACXH,gBAAiB,aACjBt3B,KAAM,UACR,EACA,CACEo3B,OAAQ,CACN,CAAEC,a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","sources":["webpack://_N_E/./src/components/common/ExternalLink.tsx","webpack://_N_E/./src/components/common/Button.tsx","webpack://_N_E/./src/util/SentryUtils.ts","webpack://_N_E/./src/components/App/WelcomeDialog.tsx","webpack://_N_E/./src/components/common/Dialog.tsx","webpack://_N_E/./src/components/App/BlockedDialog.tsx","webpack://_N_E/./src/components/App/AppContext.tsx","webpack://_N_E/./src/state/app/state.ts","webpack://_N_E/./src/state/app/actions.ts","webpack://_N_E/./src/state/app/index.ts","webpack://_N_E/./src/state/index.ts","webpack://_N_E/./src/components/common/NoteBox.tsx","webpack://_N_E/./src/util/wagmi/getWagmiChain.ts","webpack://_N_E/./src/util/AddressUtils.ts","webpack://_N_E/./src/token-bridge-sdk/teleport.ts","webpack://_N_E/./src/token-bridge-sdk/utils.ts","webpack://_N_E/./src/hooks/useNetworks.ts","webpack://_N_E/./src/components/TransferPanel/TokenDepositCheckDialog.tsx","webpack://_N_E/./src/util/CommonAddressUtils.ts","webpack://_N_E/./src/defaults.ts","webpack://_N_E/./src/hooks/arbTokenBridge.types.ts","webpack://_N_E/./src/util/TokenUtils.ts","webpack://_N_E/./src/hooks/useERC20L1Address.ts","webpack://_N_E/./public/images/lists/uniswap.png","webpack://_N_E/./public/images/lists/cmc.png","webpack://_N_E/./public/images/lists/coinGecko.svg","webpack://_N_E/./public/images/lists/ArbitrumLogo.png","webpack://_N_E/./src/util/TokenListUtils.ts","webpack://_N_E/./src/hooks/useTokenLists.ts","webpack://_N_E/./src/util/isDepositMode.ts","webpack://_N_E/./src/hooks/useNetworksRelationship.ts","webpack://_N_E/./src/components/TransferPanel/TokenSearchUtils.ts","webpack://_N_E/./src/util/WithdrawOnlyUtils.ts","webpack://_N_E/./src/util/TokenTransferDisabledUtils.ts","webpack://_N_E/./src/components/TransferPanel/TransferDisabledDialog.tsx","webpack://_N_E/./src/util/CommonUtils.ts","webpack://_N_E/./src/util/L2NativeUtils.ts","webpack://_N_E/./src/hooks/useBalance.ts","webpack://_N_E/./src/hooks/useAccountType.ts","webpack://_N_E/./src/components/common/Transition.tsx","webpack://_N_E/./src/components/TransferPanel/AdvancedSettings.tsx","webpack://_N_E/./src/hooks/useBalances.ts","webpack://_N_E/./src/hooks/CCTP/useUpdateUSDCBalances.ts","webpack://_N_E/./src/hooks/useNativeCurrency.ts","webpack://_N_E/./src/components/common/SearchPanel/SearchPanelTable.tsx","webpack://_N_E/./src/components/common/SearchPanel/SearchPanel.tsx","webpack://_N_E/./src/util/NumberUtils.ts","webpack://_N_E/./src/components/common/SafeImage.tsx","webpack://_N_E/./src/components/common/Tooltip.tsx","webpack://_N_E/./src/components/common/StatusBadge.tsx","webpack://_N_E/./src/hooks/useBalanceOnSourceChain.ts","webpack://_N_E/./src/components/TransferPanel/TokenRow.tsx","webpack://_N_E/./src/components/TransferPanel/TransferPanelUtils.ts","webpack://_N_E/./src/components/common/atoms/Switch.tsx","webpack://_N_E/./src/util/TokenTeleportEnabledUtils.ts","webpack://_N_E/./src/components/TransferPanel/TokenSearch.tsx","webpack://_N_E/./src/components/TransferPanel/TokenInfo.tsx","webpack://_N_E/./src/components/TransferPanel/TokenImportDialog.tsx","webpack://_N_E/./src/components/common/Checkbox.tsx","webpack://_N_E/./src/hooks/useETHPrice.ts","webpack://_N_E/./src/hooks/useChainId.ts","webpack://_N_E/./src/hooks/useGasPrice.ts","webpack://_N_E/./src/token-bridge-sdk/BridgeTransferStarter.ts","webpack://_N_E/./src/util/cctp/TokenMinterAbi.ts","webpack://_N_E/./src/api-utils/ServerSubgraphUtils.ts","webpack://_N_E/./src/pages/api/cctp/[type].ts","webpack://_N_E/./src/util/cctp/MessageTransmitterAbi.ts","webpack://_N_E/./src/token-bridge-sdk/cctp.ts","webpack://_N_E/./src/util/cctp/TokenMessengerAbi.ts","webpack://_N_E/./src/token-bridge-sdk/CctpTransferStarter.ts","webpack://_N_E/./src/util/EthDepositUtils.ts","webpack://_N_E/./src/token-bridge-sdk/EthDepositStarter.ts","webpack://_N_E/./src/util/TokenDepositUtils.ts","webpack://_N_E/./src/token-bridge-sdk/Erc20DepositStarter.ts","webpack://_N_E/./src/util/WithdrawalUtils.ts","webpack://_N_E/./src/token-bridge-sdk/EthWithdrawalStarter.ts","webpack://_N_E/./src/util/L2ApprovalUtils.ts","webpack://_N_E/./src/token-bridge-sdk/Erc20WithdrawalStarter.ts","webpack://_N_E/./src/token-bridge-sdk/EthTeleportStarter.ts","webpack://_N_E/./src/token-bridge-sdk/Erc20TeleportStarter.ts","webpack://_N_E/./src/token-bridge-sdk/BridgeTransferStarterFactory.ts","webpack://_N_E/./src/components/TransferPanel/TokenApprovalDialog.tsx","webpack://_N_E/./src/components/common/Tab.tsx","webpack://_N_E/./src/util/AnalyticsUtils.ts","webpack://_N_E/./src/components/common/BridgesTable.tsx","webpack://_N_E/./public/images/bridge/hop.png","webpack://_N_E/./public/images/bridge/celer.png","webpack://_N_E/./public/images/bridge/connext.png","webpack://_N_E/./public/images/bridge/across.png","webpack://_N_E/./public/images/bridge/stargate.png","webpack://_N_E/./public/images/bridge/synapse.png","webpack://_N_E/./public/images/bridge/wormhole.svg","webpack://_N_E/./public/images/bridge/router.webp","webpack://_N_E/./src/util/fastBridges.ts","webpack://_N_E/./src/components/TransferPanel/SecurityLabels.tsx","webpack://_N_E/./src/util/cctp/fetchCCTP.ts","webpack://_N_E/./src/hooks/useTransactions.ts","webpack://_N_E/./src/hooks/useArbTokenBridge.ts","webpack://_N_E/./src/util/RetryableUtils.ts","webpack://_N_E/./src/state/app/utils.ts","webpack://_N_E/./src/util/withdrawals/fetchETHWithdrawalsFromEventLogs.ts","webpack://_N_E/./src/util/SubgraphUtils.ts","webpack://_N_E/./src/util/withdrawals/fetchWithdrawalsFromSubgraph.ts","webpack://_N_E/./src/util/withdrawals/fetchTokenWithdrawalsFromEventLogs.ts","webpack://_N_E/./src/util/fetchL2Gateways.ts","webpack://_N_E/./src/util/withdrawals/helpers.ts","webpack://_N_E/./src/util/withdrawals/fetchWithdrawals.ts","webpack://_N_E/./src/util/deposits/fetchDepositsFromSubgraph.ts","webpack://_N_E/./src/util/deposits/fetchDeposits.ts","webpack://_N_E/./src/util/deposits/helpers.ts","webpack://_N_E/./src/util/cctp/getAttestationHashAndMessageFromReceipt.ts","webpack://_N_E/./src/components/TransactionHistory/helpers.ts","webpack://_N_E/./src/hooks/useIsTestnetMode.ts","webpack://_N_E/./src/util/teleports/fetchEthTeleportsFromSubgraph.ts","webpack://_N_E/./src/util/teleports/fetchErc20TeleportsFromSubgraph.ts","webpack://_N_E/./src/util/teleports/fetchTeleports.ts","webpack://_N_E/./src/util/teleports/helpers.ts","webpack://_N_E/./src/hooks/useTransactionHistory.ts","webpack://_N_E/./src/state/cctpState.ts","webpack://_N_E/./src/hooks/useTransferDuration.ts","webpack://_N_E/./src/components/TransferPanel/WithdrawalConfirmationDialog.tsx","webpack://_N_E/./src/hooks/TransferPanel/useGasEstimates.ts","webpack://_N_E/./src/hooks/TransferPanel/useSelectedTokenDecimals.ts","webpack://_N_E/./src/hooks/TransferPanel/useGasSummary.ts","webpack://_N_E/./src/components/common/TokenSymbolWithExplorerLink.tsx","webpack://_N_E/./src/components/TransferPanel/NativeCurrencyPrice.tsx","webpack://_N_E/./src/components/TransferPanel/useTransferReadinessUtils.ts","webpack://_N_E/./src/components/TransferPanel/useTransferReadiness.ts","webpack://_N_E/./src/components/TransferPanel/TransferPanelSummary.tsx","webpack://_N_E/./src/components/TransferPanel/OneNovaTransferDialog.tsx","webpack://_N_E/./src/components/TransferPanel/TransferPanelMain/hooks.ts","webpack://_N_E/./src/components/common/NetworkImage.tsx","webpack://_N_E/./src/components/TransferPanel/NetworkListbox.tsx","webpack://_N_E/./src/components/TransferPanel/TransferPanelMain/utils.ts","webpack://_N_E/./src/components/TransferPanel/TransferPanelMain/TokenBalance.tsx","webpack://_N_E/./src/components/TransferPanel/EstimatedGas.tsx","webpack://_N_E/./src/hooks/TransferPanel/useSelectedTokenBalances.ts","webpack://_N_E/./src/components/TransferPanel/TransferPanelMain/DestinationNetworkBox.tsx","webpack://_N_E/./src/components/common/TestnetToggle.tsx","webpack://_N_E/./src/components/common/SearchPanel/SearchPanelUtils.ts","webpack://_N_E/./src/components/common/NetworkSelectionContainer.tsx","webpack://_N_E/./src/components/TransferPanel/TokenButton.tsx","webpack://_N_E/./src/hooks/TransferPanel/useSetInputAmount.ts","webpack://_N_E/./src/components/TransferPanel/TransferPanelMainInput.tsx","webpack://_N_E/./src/components/TransferPanel/TransferPanelMain/useMaxAmount.ts","webpack://_N_E/./src/components/TransferPanel/TransferPanelMain/SourceNetworkBox.tsx","webpack://_N_E/./src/components/TransferPanel/TransferPanelMain.tsx","webpack://_N_E/./src/hooks/useSwitchNetworkWithConfig.tsx","webpack://_N_E/./src/hooks/useIsConnectedToArbitrum.ts","webpack://_N_E/./src/hooks/useIsConnectedToOrbitChain.ts","webpack://_N_E/./src/components/TransferPanel/USDCDeposit/USDCDepositConfirmationDialogCheckbox.tsx","webpack://_N_E/./src/hooks/CCTP/useCCTPIsBlocked.ts","webpack://_N_E/./src/components/TransferPanel/CctpTabContent.tsx","webpack://_N_E/./src/components/TransferPanel/USDCDeposit/USDCDepositConfirmationDialog.tsx","webpack://_N_E/./src/components/TransferPanel/USDCWithdrawal/USDCWithdrawalConfirmationDialogCheckbox.tsx","webpack://_N_E/./src/components/TransferPanel/USDCWithdrawal/USDCWithdrawalConfirmationDialog.tsx","webpack://_N_E/./src/components/TransferPanel/CustomFeeTokenApprovalDialog.tsx","webpack://_N_E/./src/hooks/TransferPanel/useImportTokenModal.ts","webpack://_N_E/./src/components/TransferPanel/bridgeSdkConversionUtils.ts","webpack://_N_E/./src/components/TransferPanel/TransferPanel.tsx","webpack://_N_E/./src/components/common/SidePanel.tsx","webpack://_N_E/./src/hooks/useNetworkTPS.ts","webpack://_N_E/./src/components/MainContent/ArbitrumStats.tsx","webpack://_N_E/./src/components/common/AddCustomChain.tsx","webpack://_N_E/./src/components/common/SettingsDialog.tsx","webpack://_N_E/./src/components/TransactionHistory/PendingDepositWarning.tsx","webpack://_N_E/./src/hooks/useClaimWithdrawal.ts","webpack://_N_E/./src/hooks/useRedeemRetryable.ts","webpack://_N_E/./src/components/common/TransferCountdown.tsx","webpack://_N_E/./src/hooks/useRedeemTeleporter.ts","webpack://_N_E/./src/components/TransactionHistory/TransactionsTableRowAction.tsx","webpack://_N_E/./public/images/EthereumLogoRoundLight.svg","webpack://_N_E/./src/components/TransactionHistory/TransactionsTableTokenImage.tsx","webpack://_N_E/./src/components/TransactionHistory/TransactionsTableExternalLink.tsx","webpack://_N_E/./src/components/TransactionHistory/TransactionsTableRow.tsx","webpack://_N_E/./src/components/TransactionHistory/EmptyTransactionHistory.tsx","webpack://_N_E/./src/components/TransactionHistory/TransactionHistoryTable.tsx","webpack://_N_E/./public/images/CctpLogoColor.svg","webpack://_N_E/./public/images/ArbitrumLogo.svg","webpack://_N_E/./src/components/TransactionHistory/TransactionsTableDetailsTeleporterSteps.tsx","webpack://_N_E/./src/components/TransactionHistory/TransactionsTableDetailsSteps.tsx","webpack://_N_E/./src/components/TransactionHistory/TransactionsTableDetails.tsx","webpack://_N_E/./src/components/TransactionHistory/TransactionHistory.tsx","webpack://_N_E/./public/images/arrows.svg","webpack://_N_E/./src/components/TransactionHistory/TransactionStatusInfo.tsx","webpack://_N_E/./src/components/MainContent/MainContent.tsx","webpack://_N_E/./src/components/syncers/ArbTokenBridgeStoreSync.tsx","webpack://_N_E/./src/components/syncers/BalanceUpdater.tsx","webpack://_N_E/./src/components/syncers/TokenListSyncer.tsx","webpack://_N_E/./src/hooks/useDestinationChainStyle.ts","webpack://_N_E/./src/util/walletConnectUtils.ts","webpack://_N_E/./src/hooks/useAccountMenu.ts","webpack://_N_E/./src/components/common/CustomBoringAvatar.tsx","webpack://_N_E/./src/components/Sidebar/AccountMenuItem.tsx","webpack://_N_E/./src/components/Sidebar/AppMobileSidebar.tsx","webpack://_N_E/./src/components/common/Header.tsx","webpack://_N_E/./src/components/common/HeaderAccountPopover.tsx","webpack://_N_E/./src/util/wagmi/setup.ts","webpack://_N_E/./src/hooks/useAccountIsBlocked.ts","webpack://_N_E/./src/components/common/HeaderConnectWalletButton.tsx","webpack://_N_E/./src/components/App/App.tsx","webpack://_N_E/ignored|/home/runner/work/arbitrum-token-bridge/arbitrum-token-bridge/node_modules/@unstoppabledomains/resolution/node_modules/bn.js/lib|buffer","webpack://_N_E/ignored|/home/runner/work/arbitrum-token-bridge/arbitrum-token-bridge/node_modules/brorand|crypto","webpack://_N_E/ignored|/home/runner/work/arbitrum-token-bridge/arbitrum-token-bridge/node_modules/crypto-js|crypto","webpack://_N_E/ignored|/home/runner/work/arbitrum-token-bridge/arbitrum-token-bridge/node_modules/elliptic/node_modules/bn.js/lib|buffer"],"sourcesContent":["export function ExternalLink({\n  children,\n  href,\n  ...props\n}: React.AnchorHTMLAttributes<HTMLAnchorElement>) {\n  if (!href) {\n    return children\n  }\n\n  return (\n    <a target=\"_blank\" href={href} rel=\"noopener noreferrer\" {...props}>\n      {children}\n    </a>\n  )\n}\n","import React, { forwardRef, useState } from 'react'\nimport { twMerge } from 'tailwind-merge'\nimport { ArrowRightIcon } from '@heroicons/react/24/outline'\n\nimport { Loader, LoaderProps } from './atoms/Loader'\n\ntype ButtonVariant = 'primary' | 'secondary' | 'tertiary'\n\nfunction getClassNameForVariant(variant: ButtonVariant) {\n  switch (variant) {\n    case 'primary':\n      return 'border-dark'\n\n    case 'secondary':\n      return 'hover:(not:disabled):opacity-70 active:(not:disabled):opacity-80'\n\n    case 'tertiary':\n      return 'bg-transparent border-transparent text-white'\n  }\n}\n\ntype ButtonLoadingProps = Partial<{\n  loaderColor: string\n  loaderSize: LoaderProps['size']\n}>\n\nexport type ButtonProps = React.ButtonHTMLAttributes<HTMLButtonElement> & {\n  variant: ButtonVariant\n  loading?: boolean\n  loadingProps?: ButtonLoadingProps\n  textLeft?: boolean\n  showArrow?: boolean\n  truncate?: boolean\n}\n\nexport const Button = forwardRef<HTMLButtonElement, ButtonProps>(\n  (\n    {\n      variant,\n      loading,\n      loadingProps,\n      // eslint-disable-next-line react/prop-types\n      disabled,\n      // eslint-disable-next-line react/prop-types\n      className: customClassName,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [hovered, setHovered] = useState(false)\n\n    const showLoader = loading || false\n    const truncate = props.truncate ?? true\n\n    return (\n      <button\n        ref={ref}\n        type=\"button\"\n        disabled={disabled}\n        className={twMerge(\n          'arb-hover relative w-max rounded border bg-dark p-2 text-sm',\n          'text-white disabled:cursor-not-allowed disabled:border disabled:border-white/10 disabled:bg-white/10 disabled:text-white/50',\n          getClassNameForVariant(variant),\n          customClassName\n        )}\n        onMouseEnter={() => setHovered(true)}\n        onMouseLeave={() => setHovered(false)}\n        {...props}\n      >\n        <div\n          className={twMerge(\n            'flex flex-row items-center space-x-3',\n            props.textLeft ? 'justify-start' : 'justify-center',\n            props.showArrow && 'pr-4'\n          )}\n        >\n          {showLoader && (\n            <Loader\n              color={loadingProps?.loaderColor || 'white'}\n              size={loadingProps?.loaderSize || 'small'}\n            />\n          )}\n          <span className={twMerge(truncate && 'truncate')}>{children}</span>\n        </div>\n        {props.showArrow && (\n          <ArrowRightIcon\n            className={twMerge(\n              'absolute right-3 top-[50%] translate-y-[-50%] transition-transform duration-300',\n              hovered && 'translate-x-[3px]'\n            )}\n            width={16}\n          />\n        )}\n      </button>\n    )\n  }\n)\n\nButton.displayName = 'Button'\n","import * as Sentry from '@sentry/react'\n\nexport function captureSentryErrorWithExtraData({\n  error,\n  originFunction,\n  additionalData\n}: {\n  error: unknown\n  originFunction: string\n  additionalData?: Record<string, string>\n}) {\n  Sentry.configureScope(function (scope) {\n    // tags only allow primitive values\n    scope.setTag('origin function', originFunction)\n    if (additionalData) {\n      scope.setTags(additionalData)\n    }\n    Sentry.captureException(error, () => scope)\n  })\n}\n","import { useConnectModal } from '@rainbow-me/rainbowkit'\nimport { useCallback } from 'react'\nimport { useLocalStorage } from '@uidotdev/usehooks'\n\nimport { ExternalLink } from '../common/ExternalLink'\nimport { errorToast } from '../common/atoms/Toast'\nimport { TOS_LOCALSTORAGE_KEY } from '../../constants'\nimport { Button } from '../common/Button'\nimport { captureSentryErrorWithExtraData } from '../../util/SentryUtils'\n\nexport function WelcomeDialog() {\n  const [, setTosAccepted] = useLocalStorage<boolean>(\n    TOS_LOCALSTORAGE_KEY,\n    false\n  )\n\n  const { openConnectModal } = useConnectModal()\n\n  const closeHandler = useCallback(() => {\n    setTosAccepted(true)\n\n    try {\n      openConnectModal?.()\n    } catch (error) {\n      errorToast('Failed to open up RainbowKit Connect Modal')\n      captureSentryErrorWithExtraData({\n        error,\n        originFunction: 'WelcomeDialog closeHandler'\n      })\n    }\n  }, [openConnectModal, setTosAccepted])\n\n  return (\n    <div className=\"mx-4 my-16 max-w-[380px] overflow-hidden rounded border border-gray-dark bg-gray-1 pt-3 text-white sm:mx-auto\">\n      <p className=\"px-4 text-xl\">Welcome</p>\n      <div className=\"flex flex-col gap-3 p-4\">\n        <div className=\"flex flex-col gap-1 rounded bg-white/10 p-3 text-sm\">\n          <p className=\"font-medium\">Safety Tip</p>\n          <p>NEVER share your seed phrase or private keys.</p>\n        </div>\n        <p className=\"text-sm\">\n          Click the button below to agree to our{' '}\n          <ExternalLink\n            href=\"https://arbitrum.io/tos\"\n            className=\"arb-hover underline\"\n          >\n            Terms of Service\n          </ExternalLink>\n          .\n        </p>\n      </div>\n      <div className=\"flex flex-row justify-end space-x-2 bg-[#3B3B3B] px-4 py-2\">\n        <Button\n          variant=\"primary\"\n          onClick={closeHandler}\n          aria-label=\"Agree to Terms and Continue\"\n        >\n          Agree to Terms and Continue\n        </Button>\n      </div>\n    </div>\n  )\n}\n","import { Dialog as HeadlessUIDialog, Transition } from '@headlessui/react'\nimport { Fragment, useCallback, useRef, useState } from 'react'\nimport { XMarkIcon } from '@heroicons/react/24/outline'\nimport { twMerge } from 'tailwind-merge'\n\nimport { Button, ButtonProps } from './Button'\n/**\n * Returns a promise which resolves to an array [boolean, unknown] value,\n * `false` if the action was canceled and `true` if it was confirmed.\n * Second index contain any additional information\n */\ntype WaitForInputFunction = () => Promise<[boolean, unknown]>\n\n/**\n * Opens the dialog and returns a function which can be called to retreive a {@link WaitForInputFunction}.\n */\nexport type OpenDialogFunction = () => WaitForInputFunction\n\n/**\n * Contains two props, `isOpen` and `onClose`, which should be passed down to a Dialog component.\n */\nexport type UseDialogProps = Pick<DialogProps, 'isOpen' | 'onClose'>\n\n/**\n * Contains additional info about the dialog.\n */\nexport type OtherDialogInfo = { didOpen: boolean }\n\n/**\n * Returns an array containing {@link UseDialogProps} and {@link OpenDialogFunction}.\n */\nexport type UseDialogResult = [\n  UseDialogProps,\n  OpenDialogFunction,\n  OtherDialogInfo\n]\n\n/**\n * Initial parameters for the dialog.\n */\ntype UseDialogParams = {\n  /**\n   * Whether the dialog should be open by default.\n   */\n  defaultIsOpen?: boolean\n}\n\nexport function useDialog(params?: UseDialogParams): UseDialogResult {\n  const resolveRef =\n    useRef<\n      (value: [boolean, unknown] | PromiseLike<[boolean, unknown]>) => void\n    >()\n\n  // Whether the dialog is currently open\n  const [isOpen, setIsOpen] = useState(params?.defaultIsOpen ?? false)\n  // Whether the dialog was ever open\n  const [didOpen, setDidOpen] = useState(params?.defaultIsOpen ?? false)\n\n  const openDialog: OpenDialogFunction = useCallback(() => {\n    setIsOpen(true)\n    setDidOpen(true)\n\n    return () => {\n      return new Promise(resolve => {\n        resolveRef.current = resolve\n      })\n    }\n  }, [])\n\n  const closeDialog = useCallback(\n    (confirmed: boolean, onCloseData?: unknown) => {\n      if (typeof resolveRef.current !== 'undefined') {\n        resolveRef.current([confirmed, onCloseData])\n      }\n\n      setIsOpen(false)\n    },\n    []\n  )\n\n  return [{ isOpen, onClose: closeDialog }, openDialog, { didOpen }]\n}\n\nexport type DialogProps = {\n  isOpen: boolean\n  closeable?: boolean\n  title?: string | JSX.Element\n  initialFocus?: React.MutableRefObject<HTMLElement | null>\n  cancelButtonProps?: Partial<ButtonProps>\n  actionButtonProps?: Partial<ButtonProps>\n  actionButtonTitle?: string\n  isFooterHidden?: boolean\n  onClose: (confirmed: boolean, onCloseData?: unknown) => void\n  className?: string\n  children?: React.ReactNode\n}\n\nexport function Dialog(props: DialogProps) {\n  const isFooterHidden = props.isFooterHidden || false\n  const closeable = props.closeable ?? true\n  const className = props.className || ''\n  const cancelButtonRef = useRef(null)\n\n  // separate state to track transition state and have a smooth exit animation\n  const [isClosing, setIsClosing] = useState(false)\n  const [isConfirmed, setIsConfirmed] = useState(false)\n\n  const handleCloseStart = useCallback(\n    (confirmed: boolean) => {\n      if (!confirmed && !closeable) {\n        return\n      }\n\n      setIsConfirmed(confirmed)\n      setIsClosing(true)\n    },\n    [setIsClosing, setIsConfirmed, closeable]\n  )\n\n  const handleCloseEnd = useCallback(() => {\n    props.onClose(isConfirmed)\n    // prevents race conditions that could cause a flicker of the dialog after close\n    setTimeout(() => {\n      setIsClosing(false)\n    }, 0)\n  }, [props, isConfirmed, setIsClosing])\n\n  return (\n    <Transition show={props.isOpen && !isClosing} as={Fragment}>\n      <HeadlessUIDialog\n        as=\"div\"\n        open={props.isOpen}\n        initialFocus={props.initialFocus || cancelButtonRef}\n        onClose={() => handleCloseStart(false)}\n        className=\"fixed inset-0 z-50 flex text-white md:items-center md:justify-center\"\n      >\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-400\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-80\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-80\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black\" aria-hidden=\"true\" />\n        </Transition.Child>\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-400\"\n          enterFrom=\"opacity-0 scale-95\"\n          enterTo=\"opacity-100 scale-100\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-100 scale-100\"\n          leaveTo=\"opacity-0 scale-95\"\n          afterLeave={handleCloseEnd}\n        >\n          <HeadlessUIDialog.Panel\n            className={twMerge(\n              'z-10 max-h-screen w-screen overflow-y-auto border border-gray-dark bg-gray-1 md:max-w-[727px] md:rounded',\n              className\n            )}\n          >\n            <div className=\"flex items-start justify-between px-6 pt-4\">\n              <HeadlessUIDialog.Title className=\"text-xl text-gray-2\">\n                {props.title}\n              </HeadlessUIDialog.Title>\n              {closeable && (\n                <button type=\"button\" onClick={() => handleCloseStart(false)}>\n                  <XMarkIcon className=\"arb-hover h-6 w-6 text-gray-7\" />\n                </button>\n              )}\n            </div>\n\n            <div className=\"flex-grow px-6\">{props.children}</div>\n\n            {!isFooterHidden && (\n              <div className=\"flex flex-row justify-end space-x-2 bg-[#3B3B3B] px-6 py-2\">\n                {closeable && (\n                  <Button\n                    ref={cancelButtonRef}\n                    variant=\"tertiary\"\n                    onClick={() => handleCloseStart(false)}\n                    aria-label=\"Dialog Cancel\"\n                    className=\"text-white\"\n                    {...(props.cancelButtonProps || {})}\n                  >\n                    Cancel\n                  </Button>\n                )}\n                <Button\n                  variant=\"primary\"\n                  onClick={() => handleCloseStart(true)}\n                  {...(props.actionButtonProps || {})}\n                  aria-label={props.actionButtonTitle || 'Dialog Continue'}\n                >\n                  {props.actionButtonTitle || 'Continue'}\n                </Button>\n              </div>\n            )}\n          </HeadlessUIDialog.Panel>\n        </Transition.Child>\n      </HeadlessUIDialog>\n    </Transition>\n  )\n}\n","import { ExclamationTriangleIcon } from '@heroicons/react/24/outline'\n\nimport { Dialog, DialogProps } from '../common/Dialog'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { GET_HELP_LINK } from '../../constants'\n\nexport function BlockedDialog(props: DialogProps & { address: string }) {\n  return (\n    <Dialog\n      {...props}\n      title={\n        <div className=\"flex flex-row items-center space-x-2\">\n          <ExclamationTriangleIcon height={25} width={25} />\n          <span>This wallet address is blocked</span>\n        </div>\n      }\n      isFooterHidden={true}\n    >\n      <div className=\"flex flex-col space-y-4 break-words py-4 text-gray-3\">\n        <span>{props.address.toLowerCase()}</span>\n        <span>This address is affiliated with a blocked activity.</span>\n        <span>\n          If you think this was an error, you can request a review by filing a{' '}\n          <ExternalLink\n            href={GET_HELP_LINK}\n            className=\"arb-hover text-white underline\"\n          >\n            support ticket\n          </ExternalLink>\n          .\n        </span>\n      </div>\n    </Dialog>\n  )\n}\n","import { createContext, useContext, useReducer, Dispatch } from 'react'\n\nexport enum TransactionHistoryTab {\n  DEPOSITS = 0,\n  WITHDRAWALS = 1,\n  CCTP = 2\n}\ntype AppContextState = {\n  layout: {\n    isTransferPanelVisible: boolean\n    isTransferring: boolean\n    isTransactionHistoryPanelVisible: boolean\n  }\n}\n\nconst initialState: AppContextState = {\n  layout: {\n    isTransferPanelVisible: true,\n    isTransferring: false,\n    isTransactionHistoryPanelVisible: false\n  }\n}\n\ntype AppContextValue = [AppContextState, Dispatch<Action>]\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst AppContext = createContext<AppContextValue>([initialState, () => {}])\n\ntype Action =\n  | { type: 'layout.set_is_transfer_panel_visible'; payload: boolean }\n  | { type: 'layout.set_is_transferring'; payload: boolean }\n  | { type: 'layout.set_txhistory_panel_visible'; payload: boolean }\n\nfunction reducer(state: AppContextState, action: Action) {\n  switch (action.type) {\n    case 'layout.set_is_transfer_panel_visible':\n      return {\n        ...state,\n        layout: { ...state.layout, isTransferPanelVisible: action.payload }\n      }\n\n    case 'layout.set_txhistory_panel_visible':\n      return {\n        ...state,\n        layout: {\n          ...state.layout,\n          isTransactionHistoryPanelVisible: action.payload\n        }\n      }\n\n    case 'layout.set_is_transferring':\n      return {\n        ...state,\n        layout: { ...state.layout, isTransferring: action.payload }\n      }\n\n    default:\n      return state\n  }\n}\n\nexport function AppContextProvider({\n  children\n}: {\n  children: React.ReactNode\n}) {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  return (\n    <AppContext.Provider value={[state, dispatch]}>\n      {children}\n    </AppContext.Provider>\n  )\n}\n\nexport function useAppContextState(): AppContextState {\n  const [state] = useContext(AppContext)\n  return state\n}\n\n// exports actions in a more readable and succinct format\n// deprecates the direct use of `dispatch` in code, unless trying to override\nexport const useAppContextActions = (dispatchOverride?: Dispatch<Action>) => {\n  const [, dispatchContext] = useContext(AppContext)\n  const dispatch = dispatchOverride ?? dispatchContext\n\n  const setTransferring = (payload: boolean) => {\n    dispatch({ type: 'layout.set_is_transferring', payload })\n  }\n\n  const openTransactionHistoryPanel = () => {\n    dispatch({ type: 'layout.set_txhistory_panel_visible', payload: true })\n  }\n\n  const closeTransactionHistoryPanel = () => {\n    dispatch({ type: 'layout.set_txhistory_panel_visible', payload: false })\n  }\n\n  return {\n    setTransferring,\n    openTransactionHistoryPanel,\n    closeTransactionHistoryPanel\n  }\n}\n","import { BigNumber } from 'ethers'\nimport {\n  ArbTokenBridge,\n  AssetType,\n  ERC20BridgeToken,\n  NodeBlockDeadlineStatus\n} from '../../hooks/arbTokenBridge.types'\nimport {\n  ParentToChildMessageData,\n  ChildToParentMessageData,\n  L2ToL3MessageData,\n  TxnType\n} from '../../hooks/useTransactions'\nimport { ConnectionState } from '../../util'\nimport { CCTPSupportedChainId } from '../cctpState'\nimport { Address } from '../../util/AddressUtils'\n\nexport enum WhiteListState {\n  VERIFYING,\n  ALLOWED,\n  DISALLOWED\n}\n\nexport enum DepositStatus {\n  L1_PENDING = 1,\n  L1_FAILURE = 2,\n  L2_PENDING = 3,\n  L2_SUCCESS = 4,\n  L2_FAILURE = 5,\n  CREATION_FAILED = 6,\n  EXPIRED = 7,\n  CCTP_DEFAULT_STATE = 8 // Cctp only relies on tx.status\n}\n\nexport enum WithdrawalStatus {\n  EXECUTED = 'Executed',\n  UNCONFIRMED = 'Unconfirmed',\n  CONFIRMED = 'Confirmed',\n  EXPIRED = 'Expired',\n  FAILURE = 'Failure'\n}\n\nexport interface MergedTransaction {\n  // TODO: https://github.com/OffchainLabs/arbitrum-token-bridge/blob/master/packages/arb-token-bridge-ui/src/util/withdrawals/helpers.ts#L31\n  // should return sender as well, then we can make it non-optional\n  sender?: string\n  destination?: string\n  direction: TxnType\n  status: string | undefined // TODO: Use enums\n  createdAt: number | null\n  resolvedAt: number | null\n  txId: string\n  asset: string\n  assetType: AssetType\n  value: string | null\n  uniqueId: BigNumber | null\n  isWithdrawal: boolean\n  blockNum: number | null\n  tokenAddress: string | null\n  isCctp?: boolean\n  nodeBlockDeadline?: NodeBlockDeadlineStatus\n  parentToChildMsgData?: ParentToChildMessageData\n  childToParentMsgData?: ChildToParentMessageData\n  depositStatus?: DepositStatus\n  childChainId: number\n  parentChainId: number\n  sourceChainId: number\n  destinationChainId: number\n  cctpData?: {\n    sourceChainId?: CCTPSupportedChainId\n    attestationHash?: Address | null\n    messageBytes?: string | null\n    receiveMessageTransactionHash?: Address | null\n    receiveMessageTimestamp?: number | null\n  }\n}\n\nexport interface TeleporterMergedTransaction extends MergedTransaction {\n  l1ToL2MsgData?: ParentToChildMessageData\n  l2ToL3MsgData: L2ToL3MessageData\n}\n\nexport interface WarningTokens {\n  [address: string]: {\n    address: string\n    type: number\n  }\n}\n\nexport type AppState = {\n  arbTokenBridge: ArbTokenBridge\n  warningTokens: WarningTokens\n  connectionState: number\n  selectedToken: ERC20BridgeToken | null\n  verifying: WhiteListState\n  l1NetworkChainId: number | null\n  l2NetworkChainId: number | null\n  arbTokenBridgeLoaded: boolean\n}\n\nexport const defaultState: AppState = {\n  arbTokenBridge: {} as ArbTokenBridge,\n  warningTokens: {} as WarningTokens,\n  connectionState: ConnectionState.LOADING,\n  l1NetworkChainId: null,\n  l2NetworkChainId: null,\n  verifying: WhiteListState.ALLOWED,\n  selectedToken: null,\n  arbTokenBridgeLoaded: false\n}\nexport const state: AppState = {\n  ...defaultState\n}\n","import {\n  ArbTokenBridge,\n  ERC20BridgeToken\n} from '../../hooks/arbTokenBridge.types'\nimport { Context } from '..'\nimport { ConnectionState } from '../../util'\nimport { WhiteListState, WarningTokens } from './state'\n\nexport const setConnectionState = (\n  { state }: Context,\n  connectionState: ConnectionState\n) => {\n  state.app.connectionState = connectionState\n}\n\nexport const setChainIds = (\n  { state }: Context,\n  payload: { l1NetworkChainId: number; l2NetworkChainId: number }\n) => {\n  state.app.l1NetworkChainId = payload.l1NetworkChainId\n  state.app.l2NetworkChainId = payload.l2NetworkChainId\n}\n\nexport const setSelectedToken = (\n  { state }: Context,\n  token: ERC20BridgeToken | null\n) => {\n  state.app.selectedToken = token ? { ...token } : null\n}\n\nexport const reset = ({ state }: Context, newChainId: number) => {\n  if (\n    state.app.l1NetworkChainId !== newChainId &&\n    state.app.l2NetworkChainId !== newChainId\n  ) {\n    // only reset the selected token if we are not switching between the pair of l1-l2 networks.\n    // we dont want to reset the token if we are switching from Mainnet to Arbitrum One for example\n    // because we are maybe in the process of auto switching the network and triggering deposit or withdraw\n    state.app.selectedToken = null\n  }\n\n  state.app.arbTokenBridge = {} as ArbTokenBridge\n  state.app.verifying = WhiteListState.ALLOWED\n  state.app.connectionState = ConnectionState.LOADING\n  state.app.arbTokenBridgeLoaded = false\n}\n\nexport const setWarningTokens = (\n  { state }: Context,\n  warningTokens: WarningTokens\n) => {\n  state.app.warningTokens = warningTokens\n}\n\nexport const setWhitelistState = (\n  { state }: Context,\n  verifying: WhiteListState\n) => {\n  state.app.verifying = verifying\n}\n\nexport const setArbTokenBridgeLoaded = (\n  { state }: Context,\n  loaded: boolean\n) => {\n  state.app.arbTokenBridgeLoaded = loaded\n}\n\nexport const setArbTokenBridge = (\n  { state, actions }: Context,\n  atb: ArbTokenBridge\n) => {\n  state.app.arbTokenBridge = atb\n  if (atb && !state.app.arbTokenBridgeLoaded) {\n    actions.app.setArbTokenBridgeLoaded(true)\n  }\n}\n","import * as actions from './actions'\nimport { state } from './state'\n\nexport const config = {\n  state,\n  actions\n}\n","import { IContext } from 'overmind'\nimport {\n  createActionsHook,\n  createStateHook,\n  createEffectsHook\n} from 'overmind-react'\nimport { namespaced } from 'overmind/config'\n\nimport * as app from './app'\n\nexport const config = namespaced({\n  app: app.config\n})\n\nexport type Context = IContext<{\n  state: typeof config.state\n  actions: typeof config.actions\n  effects: typeof config.effects\n}>\n\nexport const useAppState = createStateHook<Context>()\nexport const useActions = createActionsHook<Context>()\nexport const useEffects = createEffectsHook<Context>()\n","import {\n  ExclamationTriangleIcon,\n  InformationCircleIcon,\n  XCircleIcon\n} from '@heroicons/react/24/outline'\nimport { PropsWithChildren } from 'react'\nimport { twMerge } from 'tailwind-merge'\n\ntype NoteBoxProps = PropsWithChildren<{\n  variant?: 'info' | 'warning' | 'error'\n  className?: string\n}>\n\nconst iconClassName = 'h-3 w-3 shrink-0 mt-[2px]'\n\nconst wrapperClassNames = {\n  info: 'bg-cyan text-cyan-dark',\n  warning: 'bg-orange text-orange-dark',\n  error: 'bg-brick text-brick-dark'\n}\n\nexport const NoteBox = ({\n  children,\n  variant = 'info',\n  className\n}: NoteBoxProps) => {\n  return (\n    <div\n      className={twMerge(\n        'flex flex-row space-x-2 rounded p-2',\n        wrapperClassNames[variant],\n        className\n      )}\n    >\n      {variant === 'info' && (\n        <InformationCircleIcon className={iconClassName} />\n      )}\n      {variant === 'warning' && (\n        <ExclamationTriangleIcon className={iconClassName} />\n      )}\n      {variant === 'error' && <XCircleIcon className={iconClassName} />}\n      <span className=\"text-sm font-light\">{children}</span>\n    </div>\n  )\n}\n","import { Chain } from 'wagmi'\nimport { mainnet, arbitrum } from 'wagmi/chains'\n\nimport {\n  chainToWagmiChain,\n  sepolia,\n  holesky,\n  arbitrumNova,\n  arbitrumSepolia,\n  localL1Network,\n  localL2Network,\n  localL3Network\n} from './wagmiAdditionalNetworks'\nimport { ChainId } from '../networks'\nimport { getCustomChainFromLocalStorageById } from '../networks'\nimport { orbitChains } from '../orbitChainsList'\n\nexport function getWagmiChain(chainId: number): Chain {\n  const customChain = getCustomChainFromLocalStorageById(chainId)\n  const orbitChain = orbitChains[chainId]\n\n  if (customChain) {\n    return chainToWagmiChain(customChain)\n  }\n\n  if (orbitChain) {\n    return chainToWagmiChain(orbitChain)\n  }\n\n  switch (chainId) {\n    case ChainId.Ethereum:\n      return mainnet\n\n    case ChainId.ArbitrumOne:\n      return arbitrum\n\n    case ChainId.ArbitrumNova:\n      return arbitrumNova\n\n    // Testnets\n    case ChainId.Sepolia:\n      return sepolia\n\n    case ChainId.Holesky:\n      return holesky\n\n    case ChainId.ArbitrumSepolia:\n      return arbitrumSepolia\n\n    // Local networks\n    case ChainId.Local:\n      return localL1Network\n\n    case ChainId.ArbitrumLocal:\n      return localL2Network\n\n    case ChainId.L3Local:\n      return localL3Network\n\n    default:\n      throw new Error(`[getWagmiChain] Unexpected chain id: ${chainId}`)\n  }\n}\n","import { getAPIBaseUrl } from '.'\nimport { getProviderForChainId } from '../token-bridge-sdk/utils'\n\nexport type Address = `0x${string}`\n\nexport async function addressIsSmartContract(address: string, chainId: number) {\n  const provider = getProviderForChainId(chainId)\n  try {\n    return (await provider.getCode(address)).length > 2\n  } catch (_) {\n    return false\n  }\n}\n\nexport async function addressIsDenylisted(address: string) {\n  // The denylist consists of an array of addresses from Ethereum, Arbitrum One and Sepolia.\n  // We do not separate them as it's unlikely for anyone to have a wallet address matching our contract addresses.\n  try {\n    const denylistResponse = await fetch(\n      `${getAPIBaseUrl()}/api/denylist?address=${address}`,\n      {\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' }\n      }\n    )\n    return (await denylistResponse.json()).data as boolean\n  } catch (error) {\n    console.error(error)\n    return false\n  }\n}\n","// utils for teleport type transactions\n\nimport { Provider } from '@ethersproject/providers'\nimport {\n  Erc20L1L3Bridger,\n  EthL1L3Bridger,\n  getArbitrumNetwork\n} from '@arbitrum/sdk'\nimport { L1GatewayRouter__factory } from '@arbitrum/sdk/dist/lib/abi/factories/L1GatewayRouter__factory'\nimport { IInbox__factory } from '@arbitrum/sdk/dist/lib/abi/factories/IInbox__factory'\nimport { IBridge__factory } from '@arbitrum/sdk/dist/lib/abi/factories/IBridge__factory'\nimport { IRollupCore__factory } from '@arbitrum/sdk/dist/lib/abi/factories/IRollupCore__factory'\nimport { getChainIdFromProvider, getProviderForChainId } from './utils'\nimport { TELEPORT_ALLOWLIST } from '../util/networks'\nimport { addressIsSmartContract } from '../util/AddressUtils'\n\nexport const isTeleport = ({\n  sourceChainId,\n  destinationChainId\n}: {\n  sourceChainId: number\n  destinationChainId: number\n}) => {\n  return !!TELEPORT_ALLOWLIST[sourceChainId]?.includes(destinationChainId)\n}\n\nexport const getL2ConfigForTeleport = async ({\n  destinationChainProvider\n}: {\n  destinationChainProvider: Provider\n}) => {\n  const l3Network = await getArbitrumNetwork(destinationChainProvider)\n  const l2ChainId = l3Network.parentChainId\n  const l2Provider = getProviderForChainId(l2ChainId)\n  return { l2ChainId, l2Provider }\n}\n\nexport const fetchTeleportStatusFromTxId = async ({\n  txId,\n  sourceChainProvider,\n  destinationChainProvider,\n  isNativeCurrencyTransfer\n}: {\n  txId: string\n  sourceChainProvider: Provider // L1 Provider\n  destinationChainProvider: Provider // L3 Provider\n  isNativeCurrencyTransfer: boolean\n}) => {\n  // get the intermediate L2 chain provider\n  const { l2Provider } = await getL2ConfigForTeleport({\n    destinationChainProvider\n  })\n  const l3Network = await getArbitrumNetwork(destinationChainProvider)\n\n  // just the type of bridger changes in case of Eth vs Erc20 teleport\n  const l1l3Bridger = isNativeCurrencyTransfer\n    ? new EthL1L3Bridger(l3Network)\n    : new Erc20L1L3Bridger(l3Network)\n\n  return l1l3Bridger.getDepositStatus({\n    txHash: txId,\n    l1Provider: sourceChainProvider,\n    l2Provider,\n    l3Provider: destinationChainProvider\n  })\n}\n\nasync function tryGetInboxFromRouter(\n  address: string,\n  provider: Provider\n): Promise<string | undefined> {\n  const chainId = await getChainIdFromProvider(provider)\n\n  if (!(await addressIsSmartContract(address, chainId))) {\n    throw new Error(\n      '[tryGetInboxFromRouter]: address passed is not a smart contract'\n    )\n  }\n\n  const maybeRouter = L1GatewayRouter__factory.connect(address, provider)\n\n  try {\n    return await maybeRouter.inbox()\n  } catch (e: any) {\n    if (e.code === 'CALL_EXCEPTION') {\n      return undefined\n    }\n    throw e\n  }\n}\n\nasync function getChainIdFromInbox(\n  address: string,\n  provider: Provider\n): Promise<number> {\n  const inbox = IInbox__factory.connect(address, provider)\n  const bridge = IBridge__factory.connect(await inbox.bridge(), provider)\n  const rollup = IRollupCore__factory.connect(await bridge.rollup(), provider)\n  const chainIdBigNumber = await rollup.chainId()\n  return Number(chainIdBigNumber.toString())\n}\n\nasync function getChainIdFromInboxOrRouter(\n  address: string,\n  provider: Provider\n): Promise<number> {\n  const maybeInbox = await tryGetInboxFromRouter(address, provider)\n  if (maybeInbox) {\n    return getChainIdFromInbox(maybeInbox, provider)\n  }\n\n  return getChainIdFromInbox(address, provider)\n}\n\nconst cache: { [id: string]: number } = {}\nexport const getL3ChainIdFromTeleportEvents = async (\n  {\n    l2l3RouterOrInbox,\n    l1l2Router\n  }: {\n    l2l3RouterOrInbox: string\n    l1l2Router: string\n  },\n  l1Provider: Provider\n): Promise<number> => {\n  const cacheKey = `${l2l3RouterOrInbox}-${l1l2Router}`\n\n  const cachedValue = cache[cacheKey]\n  if (typeof cachedValue !== 'undefined') {\n    return cachedValue\n  }\n\n  // get the chain id for the l2 network\n  const l2ChainId = await getChainIdFromInboxOrRouter(l1l2Router, l1Provider)\n\n  const l2Provider = getProviderForChainId(l2ChainId)\n\n  // get the chain id for the l3 network\n  const l3ChainId = await getChainIdFromInboxOrRouter(\n    l2l3RouterOrInbox,\n    l2Provider\n  )\n\n  // cache this value for faster fetches and saving RPC calls\n  cache[cacheKey] = l3ChainId\n\n  return l3ChainId\n}\n\nexport const fetchTeleportInputParametersFromTxId = async ({\n  txId, // source chain tx id\n  sourceChainProvider,\n  destinationChainProvider,\n  isNativeCurrencyTransfer\n}: {\n  txId: string\n  sourceChainProvider: Provider\n  destinationChainProvider: Provider\n  isNativeCurrencyTransfer: boolean\n}) => {\n  const l3Network = await getArbitrumNetwork(destinationChainProvider)\n\n  // get Eth deposit request\n  if (isNativeCurrencyTransfer) {\n    return await new EthL1L3Bridger(l3Network).getDepositParameters({\n      txHash: txId,\n      l1Provider: sourceChainProvider\n    })\n  }\n\n  // get Erc20 deposit request\n  const { l2Provider } = await getL2ConfigForTeleport({\n    destinationChainProvider\n  })\n  return await new Erc20L1L3Bridger(l3Network).getDepositParameters({\n    txHash: txId,\n    l1Provider: sourceChainProvider,\n    l2Provider\n  })\n}\n","import { BigNumber, Signer } from 'ethers'\nimport { Provider, StaticJsonRpcProvider } from '@ethersproject/providers'\n\nimport { ChainId, isNetwork, rpcURLs } from '../util/networks'\nimport { BridgeTransferStarterPropsWithChainIds } from './BridgeTransferStarter'\nimport { isTeleport as isTeleportTransfer } from './teleport'\nimport {\n  Erc20Bridger,\n  Erc20L1L3Bridger,\n  EthBridger,\n  EthL1L3Bridger,\n  getArbitrumNetwork\n} from '@arbitrum/sdk'\n\nexport const getAddressFromSigner = async (signer: Signer) => {\n  const address = await signer.getAddress()\n  return address\n}\n\nexport const getChainIdFromProvider = async (provider: Provider) => {\n  const network = await provider.getNetwork()\n  return network.chainId\n}\n\nexport const getBridgeTransferProperties = (\n  props: BridgeTransferStarterPropsWithChainIds\n) => {\n  const sourceChainId = props.sourceChainId\n  const destinationChainId = props.destinationChainId\n\n  const isSourceChainEthereumMainnetOrTestnet =\n    isNetwork(sourceChainId).isEthereumMainnetOrTestnet\n  const isDestinationChainEthereumMainnetOrTestnet =\n    isNetwork(destinationChainId).isEthereumMainnetOrTestnet\n\n  const isSourceChainArbitrum = isNetwork(sourceChainId).isArbitrum\n  const isDestinationChainArbitrum = isNetwork(destinationChainId).isArbitrum\n\n  const isSourceChainOrbit = isNetwork(sourceChainId).isOrbitChain\n  const isDestinationChainOrbit = isNetwork(destinationChainId).isOrbitChain\n\n  const isDeposit =\n    isSourceChainEthereumMainnetOrTestnet ||\n    (isSourceChainArbitrum && isDestinationChainOrbit)\n\n  const isWithdrawal =\n    (isSourceChainArbitrum && isDestinationChainEthereumMainnetOrTestnet) || //  l2 arbitrum chains to l1\n    (isSourceChainOrbit && isDestinationChainEthereumMainnetOrTestnet) || // l2 orbit chains to l1\n    (isSourceChainOrbit && isDestinationChainArbitrum) // l3 orbit chains to l1\n\n  const isTeleport = isTeleportTransfer({ sourceChainId, destinationChainId })\n\n  const isNativeCurrencyTransfer =\n    typeof props.sourceChainErc20Address === 'undefined'\n\n  return {\n    isDeposit,\n    isWithdrawal,\n    isNativeCurrencyTransfer,\n    isTeleport,\n    isSupported: isDeposit || isWithdrawal || isTeleport\n  }\n}\n\n// https://github.com/OffchainLabs/arbitrum-sdk/blob/main/src/lib/message/L1ToL2MessageGasEstimator.ts#L76\nexport function percentIncrease(\n  num: BigNumber,\n  increase: BigNumber\n): BigNumber {\n  return num.add(num.mul(increase).div(100))\n}\n\n// We cannot hardcode Erc20Bridger anymore in code, especially while dealing with tokens\n// this function returns the Bridger matching the set providers\nexport const getBridger = async ({\n  sourceChainId,\n  destinationChainId,\n  isNativeCurrencyTransfer = false\n}: {\n  sourceChainId: number\n  destinationChainId: number\n  isNativeCurrencyTransfer?: boolean\n}) => {\n  const destinationChainProvider = getProviderForChainId(destinationChainId)\n\n  if (isTeleportTransfer({ sourceChainId, destinationChainId })) {\n    const l3Network = await getArbitrumNetwork(destinationChainId)\n\n    return isNativeCurrencyTransfer\n      ? new EthL1L3Bridger(l3Network)\n      : new Erc20L1L3Bridger(l3Network)\n  }\n\n  return isNativeCurrencyTransfer\n    ? EthBridger.fromProvider(destinationChainProvider)\n    : Erc20Bridger.fromProvider(destinationChainProvider)\n}\n\nconst getProviderForChainCache: {\n  [chainId: number]: StaticJsonRpcProvider\n} = {\n  // start with empty cache\n}\n\nfunction createProviderWithCache(chainId: ChainId) {\n  const rpcUrl = rpcURLs[chainId]\n  const provider = new StaticJsonRpcProvider(rpcUrl, chainId)\n  getProviderForChainCache[chainId] = provider\n  return provider\n}\n\nexport function getProviderForChainId(chainId: ChainId): StaticJsonRpcProvider {\n  const cachedProvider = getProviderForChainCache[chainId]\n\n  if (typeof cachedProvider !== 'undefined') {\n    return cachedProvider\n  }\n\n  return createProviderWithCache(chainId)\n}\n","import { Chain } from 'wagmi'\nimport { StaticJsonRpcProvider } from '@ethersproject/providers'\nimport { useCallback, useMemo } from 'react'\nimport { mainnet, arbitrum } from '@wagmi/core/chains'\n\nimport { useArbQueryParams } from './useArbQueryParams'\nimport { ChainId, getCustomChainsFromLocalStorage } from '../util/networks'\nimport {\n  sepolia,\n  holesky,\n  arbitrumNova,\n  arbitrumSepolia,\n  localL1Network as local,\n  localL2Network as arbitrumLocal,\n  localL3Network as l3Local\n} from '../util/wagmi/wagmiAdditionalNetworks'\n\nimport { getDestinationChainIds } from '../util/networks'\nimport { getWagmiChain } from '../util/wagmi/getWagmiChain'\nimport { getOrbitChains } from '../util/orbitChainsList'\nimport { getProviderForChainId } from '@/token-bridge-sdk/utils'\n\nexport function isSupportedChainId(\n  chainId: ChainId | undefined\n): chainId is ChainId {\n  if (!chainId) {\n    return false\n  }\n\n  const customChainIds = getCustomChainsFromLocalStorage().map(\n    chain => chain.chainId\n  )\n\n  return [\n    mainnet.id,\n    sepolia.id,\n    holesky.id,\n    arbitrum.id,\n    arbitrumNova.id,\n    arbitrumSepolia.id,\n    arbitrumLocal.id,\n    l3Local.id,\n    local.id,\n    ...getOrbitChains().map(chain => chain.chainId),\n    ...customChainIds\n  ].includes(chainId)\n}\n\nexport function sanitizeQueryParams({\n  sourceChainId,\n  destinationChainId\n}: {\n  sourceChainId: ChainId | number | undefined\n  destinationChainId: ChainId | number | undefined\n}): {\n  sourceChainId: ChainId | number\n  destinationChainId: ChainId | number\n} {\n  // when both `sourceChain` and `destinationChain` are undefined or invalid, default to Ethereum and Arbitrum One\n  if (\n    (!sourceChainId && !destinationChainId) ||\n    (!isSupportedChainId(sourceChainId) &&\n      !isSupportedChainId(destinationChainId))\n  ) {\n    return {\n      sourceChainId: ChainId.Ethereum,\n      destinationChainId: ChainId.ArbitrumOne\n    }\n  }\n\n  // destinationChainId is valid and sourceChainId is undefined\n  if (\n    !isSupportedChainId(sourceChainId) &&\n    isSupportedChainId(destinationChainId)\n  ) {\n    const [defaultSourceChainId] = getDestinationChainIds(destinationChainId)\n    return { sourceChainId: defaultSourceChainId!, destinationChainId }\n  }\n\n  // sourceChainId is valid and destinationChainId is undefined\n  if (\n    isSupportedChainId(sourceChainId) &&\n    !isSupportedChainId(destinationChainId)\n  ) {\n    const [defaultDestinationChainId] = getDestinationChainIds(sourceChainId)\n    return {\n      sourceChainId: sourceChainId,\n      destinationChainId: defaultDestinationChainId!\n    }\n  }\n\n  // destinationChainId is not a partner of sourceChainId\n  if (!getDestinationChainIds(sourceChainId!).includes(destinationChainId!)) {\n    const [defaultDestinationChainId] = getDestinationChainIds(sourceChainId!)\n    return {\n      sourceChainId: sourceChainId!,\n      destinationChainId: defaultDestinationChainId!\n    }\n  }\n\n  return {\n    sourceChainId: sourceChainId!,\n    destinationChainId: destinationChainId!\n  }\n}\n\nexport type UseNetworksState = {\n  sourceChain: Chain\n  sourceChainProvider: StaticJsonRpcProvider\n  destinationChain: Chain\n  destinationChainProvider: StaticJsonRpcProvider\n}\n\nexport type UseNetworksSetStateParams = {\n  sourceChainId: ChainId\n  destinationChainId?: ChainId\n}\nexport type UseNetworksSetState = (params: UseNetworksSetStateParams) => void\n\nexport function useNetworks(): [UseNetworksState, UseNetworksSetState] {\n  const [\n    { sourceChain: sourceChainId, destinationChain: destinationChainId },\n    setQueryParams\n  ] = useArbQueryParams()\n\n  const {\n    sourceChainId: validSourceChainId,\n    destinationChainId: validDestinationChainId\n  } = sanitizeQueryParams({\n    sourceChainId,\n    destinationChainId\n  })\n\n  const setState = useCallback(\n    ({\n      sourceChainId: newSourceChainId,\n      destinationChainId: newDestinationChainId\n    }: UseNetworksSetStateParams) => {\n      const {\n        sourceChainId: validSourceChainId,\n        destinationChainId: validDestinationChainId\n      } = sanitizeQueryParams({\n        sourceChainId: newSourceChainId,\n        destinationChainId: newDestinationChainId\n      })\n      setQueryParams({\n        sourceChain: validSourceChainId,\n        destinationChain: validDestinationChainId\n      })\n    },\n    [setQueryParams]\n  )\n\n  // The return values of the hook will always be the sanitized values\n  return useMemo(() => {\n    const sourceChain = getWagmiChain(validSourceChainId)\n    const destinationChain = getWagmiChain(validDestinationChainId)\n\n    return [\n      {\n        sourceChain,\n        sourceChainProvider: getProviderForChainId(validSourceChainId),\n        destinationChain,\n        destinationChainProvider: getProviderForChainId(validDestinationChainId)\n      },\n      setState\n    ]\n  }, [validSourceChainId, validDestinationChainId, setState])\n}\n","import { useMemo } from 'react'\n\nimport { Dialog, UseDialogProps } from '../common/Dialog'\nimport { DOCS_DOMAIN } from '../../constants'\nimport { NoteBox } from '../common/NoteBox'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { getNetworkName } from '../../util/networks'\n\nexport type TokenDepositCheckDialogType = 'user-added-token' | 'new-token'\n\nexport type TokenDepositCheckDialogProps = UseDialogProps & {\n  type: TokenDepositCheckDialogType\n  symbol: string\n}\n\nexport function TokenDepositCheckDialog(props: TokenDepositCheckDialogProps) {\n  const { type, symbol } = props\n\n  const [networks] = useNetworks()\n\n  const networkName = getNetworkName(networks.destinationChain.id)\n\n  const textContent = useMemo(() => {\n    switch (type) {\n      case 'user-added-token':\n        return (\n          <p className=\"pb-2\">\n            You are about to deposit {symbol} to {networkName}\n          </p>\n        )\n\n      case 'new-token':\n        return (\n          <div className=\"mb-4\">\n            <p className=\"pb-2\">\n              You are the first to bridge {symbol} to {networkName} \n            </p>\n            <span className=\"font-medium\">Important facts</span>\n            <ol>\n              <li>1. Some tokens are not compatible with the bridge</li>\n              <li>\n                2. The initial bridge is more expensive than following ones\n              </li>\n            </ol>\n          </div>\n        )\n    }\n  }, [type, symbol, networkName])\n\n  const title = useMemo(() => {\n    switch (type) {\n      case 'user-added-token':\n        return `Depositing ${symbol} to ${networkName}`\n\n      case 'new-token':\n        return 'New Token Detected'\n    }\n  }, [type, symbol, networkName])\n\n  return (\n    <Dialog {...props} title={title} className=\"flex flex-col gap-4\">\n      <p>{textContent}</p>\n      <NoteBox variant=\"error\">\n        <p className=\"mb-2\">\n          <span className=\"font-medium\">Do not bridge</span> if your token does\n          something non-standard like generates passive interest or is a\n          rebasing stablecoin.\n        </p>\n        <p>Not sure if your token is compatible?</p>\n        <p>\n          Check the{' '}\n          <ExternalLink\n            className=\"arb-hover underline\"\n            href={`${DOCS_DOMAIN}/for-devs/concepts/token-bridge/token-bridge-erc20#the-arbitrum-generic-custom-gateway`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <span className=\"font-medium\">docs</span>\n          </ExternalLink>{' '}\n          or ask on{' '}\n          <ExternalLink\n            className=\"arb-hover underline\"\n            href=\"https://discord.gg/ZpZuw7p\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <span className=\"font-medium\">Discord</span>\n          </ExternalLink>\n          .\n        </p>\n      </NoteBox>\n    </Dialog>\n  )\n}\n","export const CommonAddress = {\n  Ethereum: {\n    USDC: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',\n    tokenMessengerContractAddress: '0xbd3fa81b58ba92a82136038b25adec7066af3155'\n  },\n  ArbitrumOne: {\n    USDC: '0xaf88d065e77c8cc2239327c5edb3a432268e5831',\n    'USDC.e': '0xff970a61a04b1ca14834a43f5de4533ebddb5cc8',\n    tokenMessengerContractAddress: '0x19330d10d9cc8751218eaf51e8885d058642e08a',\n\n    CU: '0x89c49a3fa372920ac23ce757a029e6936c0b8e02'\n  },\n  // Xai Mainnet\n  660279: {\n    CU: '0x89c49a3fa372920ac23ce757a029e6936c0b8e02'\n  },\n  Sepolia: {\n    USDC: '0x1c7d4b196cb0c7b01d743fbc6116a902379c7238',\n    tokenMessengerContractAddress: '0x9f3B8679c73C2Fef8b59B4f3444d4e156fb70AA5'\n  },\n  ArbitrumSepolia: {\n    USDC: '0x75faf114eafb1bdbe2f0316df893fd58ce46aa4d',\n    'USDC.e': '0x119f0e6303bec7021b295ecab27a4a1a5b37ecf0',\n    tokenMessengerContractAddress: '0x9f3B8679c73C2Fef8b59B4f3444d4e156fb70AA5'\n  }\n} as const\n","export const defaultErc20Decimals = 0\n","import { Signer } from '@ethersproject/abstract-signer'\nimport { TransactionReceipt } from '@ethersproject/abstract-provider'\nimport { BigNumber, ContractReceipt, ethers } from 'ethers'\nimport { TokenList } from '@uniswap/token-lists'\nimport {\n  EventArgs,\n  ParentEthDepositTransaction,\n  ParentEthDepositTransactionReceipt,\n  ParentContractCallTransaction,\n  ParentContractCallTransactionReceipt,\n  ChildContractTransaction,\n  ChildTransactionReceipt,\n  ChildToParentMessageStatus as OutgoingMessageState,\n  ChildToParentTransactionEvent\n} from '@arbitrum/sdk'\nimport { StandardArbERC20 } from '@arbitrum/sdk/dist/lib/abi/StandardArbERC20'\nimport { WithdrawalInitiatedEvent } from '@arbitrum/sdk/dist/lib/abi/L2ArbitrumGateway'\n\nimport {\n  NewTransaction,\n  Transaction,\n  ParentToChildMessageData\n} from './useTransactions'\n\nexport { OutgoingMessageState }\n\nexport enum TokenType {\n  ERC20 = 'ERC20'\n}\n\nexport enum AssetType {\n  ERC20 = 'ERC20',\n  ETH = 'ETH'\n}\n\nexport type TransactionLifecycle<Tx, TxReceipt> = Partial<{\n  onTxSubmit: (tx: Tx) => void\n  onTxConfirm: (txReceipt: TxReceipt) => void\n  onTxError: (error: any) => void\n}>\n\nexport type L1EthDepositTransactionLifecycle = TransactionLifecycle<\n  ParentEthDepositTransaction,\n  ParentEthDepositTransactionReceipt\n>\n\nexport type L1ContractCallTransactionLifecycle = TransactionLifecycle<\n  ParentContractCallTransaction,\n  ParentContractCallTransactionReceipt\n>\n\nexport type L2ContractCallTransactionLifecycle = TransactionLifecycle<\n  ChildContractTransaction,\n  ChildTransactionReceipt\n>\n\nexport enum NodeBlockDeadlineStatusTypes {\n  NODE_NOT_CREATED,\n  EXECUTE_CALL_EXCEPTION\n}\n\nexport type NodeBlockDeadlineStatus =\n  | number\n  | NodeBlockDeadlineStatusTypes.NODE_NOT_CREATED\n  | NodeBlockDeadlineStatusTypes.EXECUTE_CALL_EXCEPTION\n\nexport type L2ToL1EventResult = ChildToParentTransactionEvent\n\nexport type L2ToL1EventResultPlus = L2ToL1EventResult & {\n  sender?: string\n  destinationAddress?: string\n  l2TxHash?: string\n  type: AssetType\n  value: BigNumber\n  tokenAddress?: string\n  outgoingMessageState: OutgoingMessageState\n  symbol: string\n  decimals: number\n  nodeBlockDeadline?: NodeBlockDeadlineStatus\n  parentChainId: number\n  childChainId: number\n}\n\nexport type WithdrawalInitiated = EventArgs<WithdrawalInitiatedEvent> & {\n  txHash: string\n  timestamp?: BigNumber\n  direction: 'deposit' | 'withdrawal'\n  source: 'subgraph' | 'event_logs' | 'local_storage_cache'\n  parentChainId: number\n  childChainId: number\n}\n\nexport interface BridgeToken {\n  type: TokenType\n  name: string\n  symbol: string\n  address: string\n  l2Address?: string\n  logoURI?: string\n  listIds: Set<number> // no listID indicates added by user\n  isL2Native?: boolean\n}\n\nexport interface ERC20BridgeToken extends BridgeToken {\n  type: TokenType.ERC20\n  decimals: number\n}\n\nexport interface L2TokenData {\n  balance: BigNumber\n  contract: StandardArbERC20\n}\n\nexport interface ContractStorage<T> {\n  [contractAddress: string]: T | undefined\n}\nexport interface BridgeBalance {\n  balance: BigNumber | null\n\n  arbChainBalance: BigNumber | null\n}\n\n// removing 'tokens' / 'balance' could result in one interface\nexport interface AddressToSymbol {\n  [tokenAddress: string]: string\n}\nexport interface AddressToDecimals {\n  [tokenAddress: string]: number\n}\n\nexport type GasEstimates = {\n  estimatedParentChainGas: BigNumber\n  estimatedChildChainGas: BigNumber\n}\n\nexport type DepositGasEstimates = GasEstimates & {\n  estimatedChildChainSubmissionCost: BigNumber\n}\n\nexport interface ArbTokenBridgeEth {\n  triggerOutbox: (params: {\n    event: L2ToL1EventResultPlus\n    l1Signer: Signer\n  }) => Promise<void | ContractReceipt>\n}\n\nexport interface ArbTokenBridgeToken {\n  add: (erc20L1orL2Address: string) => Promise<void>\n  addL2NativeToken: (erc20L2Address: string) => void\n  addTokensFromList: (tokenList: TokenList, listID: number) => void\n  removeTokensFromList: (listID: number) => void\n  updateTokenData: (l1Address: string) => Promise<void>\n  triggerOutbox: (params: {\n    event: L2ToL1EventResultPlus\n    l1Signer: Signer\n  }) => Promise<void | ContractReceipt>\n}\n\nexport interface TransactionActions {\n  addTransaction: (transaction: NewTransaction) => void\n  updateTransaction: (\n    txReceipt: TransactionReceipt,\n    tx?: ethers.ContractTransaction,\n    l1ToL2MsgData?: ParentToChildMessageData\n  ) => void\n}\n\nexport type ArbTokenBridgeTransactions = {\n  transactions: Transaction[]\n} & Pick<TransactionActions, 'addTransaction' | 'updateTransaction'>\n\nexport interface ArbTokenBridge {\n  bridgeTokens: ContractStorage<ERC20BridgeToken> | undefined\n  eth: ArbTokenBridgeEth\n  token: ArbTokenBridgeToken\n  transactions: ArbTokenBridgeTransactions\n}\n","import { constants } from 'ethers'\nimport { Provider } from '@ethersproject/providers'\nimport {\n  Erc20Bridger,\n  Erc20L1L3Bridger,\n  EthBridger,\n  EthL1L3Bridger,\n  MultiCaller,\n  getArbitrumNetwork\n} from '@arbitrum/sdk'\nimport { ERC20__factory } from '@arbitrum/sdk/dist/lib/abi/factories/ERC20__factory'\n\nimport { CommonAddress } from './CommonAddressUtils'\nimport { ChainId, isNetwork } from './networks'\nimport { defaultErc20Decimals } from '../defaults'\nimport { ERC20BridgeToken, TokenType } from '../hooks/arbTokenBridge.types'\nimport { getBridger, getChainIdFromProvider } from '../token-bridge-sdk/utils'\nimport {\n  getL2ConfigForTeleport,\n  isTeleport\n} from '../token-bridge-sdk/teleport'\nimport { captureSentryErrorWithExtraData } from './SentryUtils'\n\nexport function getDefaultTokenName(address: string) {\n  const lowercased = address.toLowerCase()\n  return (\n    lowercased.substring(0, 5) +\n    '...' +\n    lowercased.substring(lowercased.length - 3)\n  )\n}\n\nexport function getDefaultTokenSymbol(address: string) {\n  const lowercased = address.toLowerCase()\n  return (\n    lowercased.substring(0, 5) +\n    '...' +\n    lowercased.substring(lowercased.length - 3)\n  )\n}\n\nexport type Erc20Data = {\n  name: string\n  symbol: string\n  decimals: number\n  address: string\n}\n\nconst erc20DataCacheLocalStorageKey = 'arbitrum:bridge:erc20-cache'\n\ntype Erc20DataCache = {\n  [cacheKey: string]: Erc20Data\n}\n\ntype GetErc20DataCacheParams = {\n  chainId: number\n  address: string\n}\n\nfunction getErc20DataCacheKey({ chainId, address }: GetErc20DataCacheParams) {\n  return `${chainId}:${address}`\n}\n\nfunction getErc20DataCache(): Erc20DataCache\nfunction getErc20DataCache(params: GetErc20DataCacheParams): Erc20Data | null\nfunction getErc20DataCache(\n  params?: GetErc20DataCacheParams\n): Erc20DataCache | (Erc20Data | null) {\n  const cache: Erc20DataCache = JSON.parse(\n    // intentionally using || instead of ?? for it to work with an empty string\n    localStorage.getItem(erc20DataCacheLocalStorageKey) || '{}'\n  )\n\n  if (typeof params !== 'undefined') {\n    return cache[getErc20DataCacheKey(params)] ?? null\n  }\n\n  return cache\n}\n\ntype SetErc20DataCacheParams = GetErc20DataCacheParams & {\n  erc20Data: Erc20Data\n}\n\nfunction setErc20DataCache({ erc20Data, ...params }: SetErc20DataCacheParams) {\n  const cache = getErc20DataCache()\n  cache[getErc20DataCacheKey(params)] = erc20Data\n  localStorage.setItem(erc20DataCacheLocalStorageKey, JSON.stringify(cache))\n}\n\nexport type FetchErc20DataProps = {\n  /**\n   * Address of the ERC-20 token contract.\n   */\n  address: string\n  /**\n   * Provider for the chain where the ERC-20 token contract is deployed.\n   */\n  provider: Provider\n}\n\nexport async function fetchErc20Data({\n  address,\n  provider\n}: FetchErc20DataProps): Promise<Erc20Data> {\n  const chainId = (await provider.getNetwork()).chainId\n  const cachedErc20Data = getErc20DataCache({ chainId, address })\n\n  if (cachedErc20Data) {\n    return cachedErc20Data\n  }\n\n  try {\n    let name, symbol, decimals\n\n    try {\n      // try multicaller first\n      const multiCaller = await MultiCaller.fromProvider(provider)\n      const [tokenData] = await multiCaller.getTokenData([address], {\n        name: true,\n        symbol: true,\n        decimals: true\n      })\n\n      name = tokenData?.name\n      symbol = tokenData?.symbol\n      decimals = tokenData?.decimals\n    } catch {\n      // fetch data individually if multicaller fails\n      try {\n        const erc20 = ERC20__factory.connect(address, provider)\n\n        ;[name, symbol, decimals] = await Promise.all([\n          erc20.name(),\n          erc20.symbol(),\n          erc20.decimals()\n        ])\n      } catch {\n        throw new Error('Failed to fetch ERC-20 data.')\n      }\n    }\n\n    const erc20Data: Erc20Data = {\n      name: name ?? getDefaultTokenName(address),\n      symbol: symbol ?? getDefaultTokenSymbol(address),\n      decimals: decimals ?? defaultErc20Decimals,\n      address\n    }\n\n    try {\n      setErc20DataCache({ chainId, address, erc20Data })\n    } catch (e) {\n      console.warn('Failed to store ERC-20 data to cache.')\n      console.warn(e)\n    }\n\n    return erc20Data\n  } catch (error) {\n    captureSentryErrorWithExtraData({\n      error,\n      originFunction: 'fetchErc20Data',\n      additionalData: {\n        token_address_on_this_chain: address,\n        chain: chainId.toString()\n      }\n    })\n    throw error\n  }\n}\n\nexport async function isValidErc20({\n  address,\n  provider\n}: FetchErc20DataProps): Promise<boolean> {\n  const erc20 = ERC20__factory.connect(address, provider)\n\n  try {\n    await Promise.all([\n      // we don't reallly care about the balance in this call, so we're just using vitalik.eth\n      // didn't want to use address zero in case contracts have checks for it\n      erc20.balanceOf('0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045'),\n      erc20.totalSupply()\n    ])\n\n    return true\n  } catch (err) {\n    return false\n  }\n}\n\nexport type FetchErc20AllowanceParams = FetchErc20DataProps & {\n  /**\n   * Address of the owner of the ERC-20 tokens.\n   */\n  owner: string\n  /**\n   * Address of the spender of the ERC-20 tokens.\n   */\n  spender: string\n}\n\n/**\n * Fetches allowance for an ERC-20 token.\n */\nexport async function fetchErc20Allowance(params: FetchErc20AllowanceParams) {\n  const { address, provider, owner, spender } = params\n  try {\n    const multiCaller = await MultiCaller.fromProvider(provider)\n    const [tokenData] = await multiCaller.getTokenData([address], {\n      allowance: { owner, spender }\n    })\n    return tokenData?.allowance ?? constants.Zero\n  } catch (error) {\n    const chainId = await getChainIdFromProvider(provider)\n    captureSentryErrorWithExtraData({\n      error,\n      originFunction: 'fetchErc20Allowance',\n      additionalData: {\n        token_address_on_this_chain: address,\n        chain: chainId.toString()\n      }\n    })\n    throw error\n  }\n}\n\n/**\n * Retrieves the L1 address of an ERC-20 token using its L2 address.\n * @param erc20L2Address\n * @param l2Provider\n * @returns\n */\nexport async function getL1ERC20Address({\n  erc20L2Address,\n  l2Provider\n}: {\n  erc20L2Address: string\n  l2Provider: Provider\n}): Promise<string | null> {\n  try {\n    const erc20Bridger = await Erc20Bridger.fromProvider(l2Provider)\n    return await erc20Bridger.getParentErc20Address(erc20L2Address, l2Provider)\n  } catch (error) {\n    return null\n  }\n}\n\n/*\n Retrieves the parent chain gateway of an ERC-20 token using its parent chain address.\n*/\nexport async function fetchErc20ParentChainGatewayAddress({\n  erc20ParentChainAddress,\n  parentChainProvider,\n  childChainProvider\n}: {\n  erc20ParentChainAddress: string\n  parentChainProvider: Provider\n  childChainProvider: Provider\n}): Promise<string> {\n  const erc20Bridger = await Erc20Bridger.fromProvider(childChainProvider)\n  return erc20Bridger.getParentGatewayAddress(\n    erc20ParentChainAddress,\n    parentChainProvider\n  )\n}\n\n/*\n Retrieves the L2 gateway of an ERC-20 token using its L1 address.\n*/\nexport async function fetchErc20L2GatewayAddress({\n  erc20L1Address,\n  l2Provider\n}: {\n  erc20L1Address: string\n  l2Provider: Provider\n}): Promise<string> {\n  const erc20Bridger = await Erc20Bridger.fromProvider(l2Provider)\n  return erc20Bridger.getChildGatewayAddress(erc20L1Address, l2Provider)\n}\n\n/*\n Retrieves the L2 address of an ERC-20 token using its L1 address.\n*/\nexport async function getL2ERC20Address({\n  erc20L1Address,\n  l1Provider,\n  l2Provider\n}: {\n  erc20L1Address: string\n  l1Provider: Provider\n  l2Provider: Provider\n}): Promise<string> {\n  const erc20Bridger = await Erc20Bridger.fromProvider(l2Provider)\n  return await erc20Bridger.getChildErc20Address(erc20L1Address, l1Provider)\n}\n\n// Given an L1 token address, derive it's L3 counterpart address\n// this address will be then used for calculating balances etc.\nexport async function getL3ERC20Address({\n  erc20L1Address,\n  l1Provider,\n  l3Provider\n}: {\n  erc20L1Address: string\n  l1Provider: Provider\n  l3Provider: Provider\n}): Promise<string> {\n  const l3Network = await getArbitrumNetwork(l3Provider)\n  const l1l3Bridger = new Erc20L1L3Bridger(l3Network)\n\n  const { l2Provider } = await getL2ConfigForTeleport({\n    destinationChainProvider: l3Provider\n  })\n  return await l1l3Bridger.getL3Erc20Address(\n    erc20L1Address,\n    l1Provider,\n    l2Provider // this is the actual l2 provider\n  )\n}\n\nfunction isErc20Bridger(\n  bridger: Erc20Bridger | Erc20L1L3Bridger\n): bridger is Erc20Bridger {\n  return typeof (bridger as Erc20Bridger).isDepositDisabled !== 'undefined'\n}\n\n/*\n Retrieves data about whether an ERC-20 token is disabled on the router.\n */\nexport async function l1TokenIsDisabled({\n  erc20L1Address,\n  l1Provider,\n  l2Provider\n}: {\n  erc20L1Address: string\n  l1Provider: Provider\n  l2Provider: Provider\n}): Promise<boolean> {\n  const erc20Bridger = await getBridger({\n    sourceChainId: await getChainIdFromProvider(l1Provider),\n    destinationChainId: await getChainIdFromProvider(l2Provider)\n  })\n\n  if (\n    erc20Bridger instanceof EthL1L3Bridger ||\n    erc20Bridger instanceof EthBridger\n  ) {\n    // fail-safe to ensure `l1TokenIsDisabled` is called on the correct bridger-types\n    return false\n  }\n\n  return isErc20Bridger(erc20Bridger)\n    ? erc20Bridger.isDepositDisabled(erc20L1Address, l1Provider)\n    : erc20Bridger.l1TokenIsDisabled(erc20L1Address, l1Provider)\n}\n\ntype SanitizeTokenOptions = {\n  erc20L1Address?: string | null // token address on L1\n  chainId: ChainId // chainId for which we want to retrieve the token name / symbol\n}\n\nexport const isTokenArbitrumOneCU = (tokenAddress: string | undefined) =>\n  tokenAddress?.toLowerCase() === CommonAddress.ArbitrumOne.CU.toLowerCase()\n\nexport const isTokenXaiMainnetCU = (tokenAddress: string | undefined) =>\n  tokenAddress?.toLowerCase() === CommonAddress[660279].CU.toLowerCase()\n\nexport const isTokenMainnetUSDC = (tokenAddress: string | undefined) =>\n  tokenAddress?.toLowerCase() === CommonAddress.Ethereum.USDC.toLowerCase()\n\nexport const isTokenArbitrumOneUSDCe = (tokenAddress: string | undefined) =>\n  tokenAddress?.toLowerCase() ===\n  CommonAddress.ArbitrumOne['USDC.e'].toLowerCase()\n\nexport const isTokenSepoliaUSDC = (tokenAddress: string | undefined) =>\n  tokenAddress?.toLowerCase() === CommonAddress.Sepolia.USDC.toLowerCase()\n\nexport const isTokenArbitrumSepoliaUSDCe = (tokenAddress: string | undefined) =>\n  tokenAddress?.toLowerCase() ===\n  CommonAddress.ArbitrumSepolia['USDC.e'].toLowerCase()\n\nexport const isTokenArbitrumOneNativeUSDC = (\n  tokenAddress: string | undefined | null\n) =>\n  tokenAddress?.toLowerCase() === CommonAddress.ArbitrumOne.USDC.toLowerCase()\n\nexport const isTokenArbitrumSepoliaNativeUSDC = (\n  tokenAddress: string | undefined\n) =>\n  tokenAddress?.toLowerCase() ===\n  CommonAddress.ArbitrumSepolia.USDC.toLowerCase()\n\nexport const isTokenNativeUSDC = (tokenAddress: string | undefined) => {\n  return (\n    isTokenMainnetUSDC(tokenAddress) ||\n    isTokenSepoliaUSDC(tokenAddress) ||\n    isTokenArbitrumOneNativeUSDC(tokenAddress) ||\n    isTokenArbitrumSepoliaNativeUSDC(tokenAddress)\n  )\n}\n\n// get the exact token symbol for a particular chain\nexport function sanitizeTokenSymbol(\n  tokenSymbol: string,\n  options: SanitizeTokenOptions\n) {\n  if (!options.erc20L1Address) {\n    return tokenSymbol\n  }\n\n  const { isArbitrumOne, isArbitrumSepolia } = isNetwork(options.chainId)\n\n  if (\n    isTokenMainnetUSDC(options.erc20L1Address) ||\n    isTokenArbitrumOneUSDCe(options.erc20L1Address) ||\n    isTokenSepoliaUSDC(options.erc20L1Address) ||\n    isTokenArbitrumSepoliaUSDCe(options.erc20L1Address)\n  ) {\n    // It should be `USDC` on all chains except Arbitrum One/Arbitrum Sepolia\n    if (isArbitrumOne || isArbitrumSepolia) return 'USDC.e'\n    return 'USDC'\n  }\n\n  if (isTokenArbitrumOneCU(options.erc20L1Address)) {\n    if (isArbitrumOne) return 'CU'\n    return 'wCU'\n  }\n\n  return tokenSymbol\n}\n\n// get the exact token name for a particular chain\nexport function sanitizeTokenName(\n  tokenName: string,\n  options: SanitizeTokenOptions\n) {\n  if (!options.erc20L1Address) {\n    return tokenName\n  }\n\n  const { isArbitrumOne, isArbitrumSepolia } = isNetwork(options.chainId)\n\n  if (\n    isTokenMainnetUSDC(options.erc20L1Address) ||\n    isTokenArbitrumOneUSDCe(options.erc20L1Address) ||\n    isTokenSepoliaUSDC(options.erc20L1Address) ||\n    isTokenArbitrumSepoliaUSDCe(options.erc20L1Address)\n  ) {\n    // It should be `USD Coin` on all chains except Arbitrum One/Arbitrum Sepolia\n    if (isArbitrumOne || isArbitrumSepolia) return 'Bridged USDC'\n    return 'USD Coin'\n  }\n\n  if (isTokenArbitrumOneCU(options.erc20L1Address)) {\n    if (isArbitrumOne) return 'Crypto Unicorns'\n    return 'Wrapped Crypto Unicorns'\n  }\n\n  return tokenName\n}\n\nexport function erc20DataToErc20BridgeToken(data: Erc20Data): ERC20BridgeToken {\n  return {\n    name: data.name,\n    type: TokenType.ERC20,\n    symbol: data.symbol,\n    address: data.address,\n    decimals: data.decimals,\n    listIds: new Set()\n  }\n}\n\nexport async function isGatewayRegistered({\n  erc20ParentChainAddress,\n  parentChainProvider,\n  childChainProvider\n}: {\n  erc20ParentChainAddress: string\n  parentChainProvider: Provider\n  childChainProvider: Provider\n}): Promise<boolean> {\n  // for teleport transfers - we will need to check for 2 gateway registrations - 1 for L1-L2 and then for L2-L3 transfer\n  // for now, we are returning true since we are limiting the tokens to teleport, but we will expand this once we expand the allowList\n  const sourceChainId = await getChainIdFromProvider(parentChainProvider)\n  const destinationChainId = await getChainIdFromProvider(childChainProvider)\n  if (isTeleport({ sourceChainId, destinationChainId })) {\n    return true\n  }\n\n  const erc20Bridger = await Erc20Bridger.fromProvider(childChainProvider)\n\n  return erc20Bridger.isRegistered({\n    erc20ParentAddress: erc20ParentChainAddress,\n    parentProvider: parentChainProvider,\n    childProvider: childChainProvider\n  })\n}\n","import { Provider } from '@ethersproject/providers'\nimport useSWRImmutable from 'swr/immutable'\nimport { getL1ERC20Address } from '../util/TokenUtils'\n\n/**\n * Returns L1 address\n *\n * @param eitherL1OrL2Address string Token address (on L1 or L2)\n * @param l2Provider L2 Provider\n * @returns\n */\nexport const useERC20L1Address = ({\n  eitherL1OrL2Address,\n  l2Provider\n}: {\n  eitherL1OrL2Address: string\n  l2Provider: Provider\n}) => {\n  const { data = null, isValidating } = useSWRImmutable(\n    ['useERC20L1Address', eitherL1OrL2Address],\n    async () => {\n      const address =\n        (await getL1ERC20Address({\n          erc20L2Address: eitherL1OrL2Address,\n          l2Provider\n        })) ?? eitherL1OrL2Address\n      return address.toLowerCase()\n    },\n    {\n      shouldRetryOnError: true,\n      errorRetryCount: 2,\n      errorRetryInterval: 1_000\n    }\n  )\n\n  return { data, isLoading: isValidating }\n}\n","export default {\"src\":\"/_next/static/media/uniswap.13b9e818.png\",\"height\":256,\"width\":256,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAATlBMVEX67PT9b7D96/P9RptMaXH////96fP8///9uNj+7fb8/f38///8///9///9+fz+y+P//P//r9f/erf/ns7+Wqb/gbz92uj/L4/+cbL9qtGB6adFAAAAD3RSTlMw+rP6AK/q9f796bO06rS5DDN7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQElEQVR4nAXBCQKAIAgAwbVAtAvUzv9/tBmEzWxFIHvxuoBGau8citVS/RmG9S/u8zJ0pF5KU9jDPTIIh9UJ+QFXbQJ3sWQEJgAAAABJRU5ErkJggg==\",\"blurWidth\":8,\"blurHeight\":8};","export default {\"src\":\"/_next/static/media/cmc.f1e60ec7.png\",\"height\":471,\"width\":471,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAMFBMVEX///////////9MaXH////////////////////////////////////////////////D7WqoAAAAEHRSTlM3pbAAR8OZV4BsD9b0JRGLbmolAwAAAAlwSFlzAAAhOAAAITgBRZYxYAAAADlJREFUeJwlykECgCAMA8FNUgqI+v/nenDOQ7BtAoPkGSDefmsKp8++q9Fsj9VG55qVVX9mhyBJ5AMl+AEGN6yAMgAAAABJRU5ErkJggg==\",\"blurWidth\":8,\"blurHeight\":8};","export default {\"src\":\"/_next/static/media/coinGecko.a50d6aa4.svg\",\"height\":276,\"width\":276,\"blurWidth\":0,\"blurHeight\":0};","export default {\"src\":\"/_next/static/media/ArbitrumLogo.b054058d.png\",\"height\":280,\"width\":280,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAY1BMVEVMaXHJy8/6//+PlJ5+pcSMsM76//+XxOTO8/+PwOJefZgQfLmmrLMktv7X6fSNrMZbteYLWo1HUWIkM0e7vsW1ucAKis+WwuIyRV0+V3BJZoLOzM6SprpMkbyfu85eiqkccqRfZrqwAAAAGHRSTlMA9Bj+nVkbYAd17fv9B3Sd6/v9/Pv6+2wqUMcMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQ0lEQVR4nAXBBxbAEBBAwU+wWnp5SL3/KTMDaGM04EMsJQaPtCXntQlSuvOZF0Hqrt5UBXupLR23pR9U903BA240Dn5oMALvDicUtAAAAABJRU5ErkJggg==\",\"blurWidth\":8,\"blurHeight\":8};","import axios from 'axios'\nimport { schema, TokenList } from '@uniswap/token-lists'\nimport Ajv from 'ajv'\nimport addFormats from 'ajv-formats'\nimport { ImageProps } from 'next/image'\nimport UniswapLogo from '@/images/lists/uniswap.png'\nimport CMCLogo from '@/images/lists/cmc.png'\nimport CoinGeckoLogo from '@/images/lists/coinGecko.svg'\nimport ArbitrumLogo from '@/images/lists/ArbitrumLogo.png'\nimport { ArbTokenBridge } from '../hooks/arbTokenBridge.types'\nimport { ChainId } from './networks'\n\nexport const SPECIAL_ARBITRUM_TOKEN_TOKEN_LIST_ID = 0\n\nexport interface BridgeTokenList {\n  id: number\n  originChainID: number\n  url: string\n  name: string\n  isDefault: boolean\n  isArbitrumTokenTokenList?: boolean\n  logoURI: ImageProps['src']\n  isValid?: boolean\n}\n\nexport const BRIDGE_TOKEN_LISTS: BridgeTokenList[] = [\n  {\n    id: SPECIAL_ARBITRUM_TOKEN_TOKEN_LIST_ID,\n    originChainID: 0, // This token list spans all Arbitrum chains and their L1 counterparts\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/arbitrum_token_token_list.json',\n    name: 'Arbitrum Token',\n    isDefault: true,\n    logoURI: ArbitrumLogo,\n    isArbitrumTokenTokenList: true\n  },\n  {\n    id: 1,\n    originChainID: ChainId.ArbitrumOne,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/arbed_arb_whitelist_era.json',\n    name: 'Arbitrum Whitelist Era',\n    isDefault: true,\n    logoURI: ArbitrumLogo\n  },\n  {\n    id: 2,\n    originChainID: ChainId.ArbitrumOne,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/arbed_uniswap_labs_default.json',\n    name: 'Arbed Uniswap List',\n    isDefault: true,\n    logoURI: UniswapLogo\n  },\n  {\n    id: 4,\n    originChainID: ChainId.ArbitrumOne,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/arbed_coingecko.json',\n    name: 'Arbed CoinGecko List',\n    isDefault: true,\n    logoURI: CoinGeckoLogo\n  },\n  {\n    id: 5,\n    originChainID: ChainId.ArbitrumOne,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/arbed_coinmarketcap.json',\n    name: 'Arbed CMC List',\n    isDefault: false,\n    logoURI: CMCLogo\n  },\n  {\n    id: 6,\n    originChainID: ChainId.ArbitrumNova,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/42170_arbed_uniswap_labs_default.json',\n    name: 'Arbed Uniswap List',\n    isDefault: true,\n    logoURI: UniswapLogo\n  },\n  // Dummy data required, otherwise useArbTokenBridge will return undefined bridgeTokens\n  // This will cause TokenImportDialog to hang and fail E2E\n  // TODO: remove list for chain ID 412346 after fix:\n  // https://github.com/OffchainLabs/arb-token-bridge/issues/564\n  {\n    id: 9,\n    // Local node\n    originChainID: ChainId.ArbitrumLocal,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/421613_arbed_coinmarketcap.json',\n    name: 'Arbed CMC List',\n    isDefault: true,\n    logoURI: CMCLogo\n  },\n  {\n    id: 10,\n    originChainID: ChainId.ArbitrumSepolia,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/421614_arbed_uniswap_labs.json',\n    name: 'Arbed Uniswap List',\n    isDefault: true,\n    logoURI: UniswapLogo\n  },\n  // CoinGecko\n  {\n    id: 11,\n    originChainID: ChainId.ArbitrumNova,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/42170_arbed_coingecko.json',\n    name: 'Arbed CoinGecko List',\n    isDefault: true,\n    logoURI: CoinGeckoLogo\n  },\n  {\n    id: 13,\n    originChainID: ChainId.ArbitrumSepolia,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/421614_arbed_coingecko.json',\n    name: 'Arbed CoinGecko List',\n    isDefault: true,\n    logoURI: CoinGeckoLogo\n  },\n  // Orbit\n  {\n    id: 14,\n    // Xai\n    originChainID: 660279,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/660279_arbed_uniswap_labs.json',\n    name: 'Arbed Uniswap List',\n    isDefault: true,\n    logoURI: UniswapLogo\n  },\n  {\n    id: 660279,\n    // Xai\n    originChainID: 660279,\n    url: 'tokenLists/660279_default.json',\n    name: 'XAI Default List',\n    isDefault: true,\n    logoURI: '/images/XaiLogo.svg'\n  },\n  {\n    id: 15,\n    // Rari\n    originChainID: 1380012617,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/1380012617_arbed_uniswap_labs.json',\n    name: 'Arbed Uniswap List',\n    isDefault: true,\n    logoURI: UniswapLogo\n  },\n  {\n    id: 16,\n    // Muster\n    originChainID: 4078,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/4078_arbed_uniswap_labs.json',\n    name: 'Arbed Uniswap List',\n    isDefault: true,\n    logoURI: UniswapLogo\n  },\n  {\n    id: 17,\n    // Proof of Play Apex\n    originChainID: 70700,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/70700_arbed_uniswap_labs.json',\n    name: 'Arbed Uniswap List',\n    isDefault: true,\n    logoURI: UniswapLogo\n  },\n  {\n    id: 18,\n    // L3X\n    originChainID: 12324,\n    url: 'https://tokenlist.arbitrum.io/ArbTokenLists/12324_arbed_uniswap_labs.json',\n    name: 'Arbed Uniswap List',\n    isDefault: true,\n    logoURI: UniswapLogo\n  }\n]\n\nexport const listIdsToNames: { [key: string]: string } = {}\n\nBRIDGE_TOKEN_LISTS.forEach(bridgeTokenList => {\n  listIdsToNames[bridgeTokenList.id] = bridgeTokenList.name\n})\n\nexport interface TokenListWithId extends TokenList {\n  l2ChainId: string\n  bridgeTokenListId: number\n  isValid?: boolean\n}\n\nexport const validateTokenList = (tokenList: TokenList) => {\n  const ajv = new Ajv()\n  addFormats(ajv)\n  // https://github.com/OffchainLabs/arbitrum-token-lists/blob/master/src/lib/validateTokenList.ts#L10\n  schema.properties.tokens.maxItems = 15_000\n  const validate = ajv.compile(schema)\n\n  return validate(tokenList)\n}\n\nexport const addBridgeTokenListToBridge = (\n  bridgeTokenList: BridgeTokenList,\n  arbTokenBridge: ArbTokenBridge\n) => {\n  fetchTokenListFromURL(bridgeTokenList.url).then(\n    ({ isValid, data: tokenList }) => {\n      if (!isValid) return\n\n      arbTokenBridge.token.addTokensFromList(tokenList!, bridgeTokenList.id)\n    }\n  )\n}\n\nexport async function fetchTokenListFromURL(tokenListURL: string): Promise<{\n  isValid: boolean\n  data: TokenList | undefined\n}> {\n  try {\n    const { data } = await axios.get(tokenListURL, {\n      headers: {\n        'Access-Control-Allow-Origin': '*'\n      }\n    })\n\n    const isValid = validateTokenList(data)\n\n    const tokenList = BRIDGE_TOKEN_LISTS.find(list => list.url === tokenListURL)\n\n    if (tokenList) {\n      tokenList.isValid = isValid\n    }\n\n    if (!isValid) {\n      console.warn('Token List Invalid', data)\n    }\n\n    return { isValid, data }\n  } catch (error) {\n    console.warn('Token List URL Invalid', tokenListURL)\n    return { isValid: false, data: undefined }\n  }\n}\n","import useSWRImmutable from 'swr/immutable'\nimport { SWRResponse } from 'swr'\nimport {\n  BRIDGE_TOKEN_LISTS,\n  fetchTokenListFromURL,\n  TokenListWithId\n} from '../util/TokenListUtils'\nimport { isNetwork } from '../util/networks'\n\nexport function fetchTokenLists(\n  forL2ChainId: number\n): Promise<TokenListWithId[]> {\n  return new Promise(resolve => {\n    const { isOrbitChain } = isNetwork(forL2ChainId)\n    const requestListArray = BRIDGE_TOKEN_LISTS.filter(\n      bridgeTokenList =>\n        bridgeTokenList.originChainID === forL2ChainId ||\n        // Always load the Arbitrum Token token list except from or to Orbit chain\n        (bridgeTokenList.isArbitrumTokenTokenList && !isOrbitChain)\n    )\n\n    Promise.all(\n      requestListArray.map(bridgeTokenList =>\n        fetchTokenListFromURL(bridgeTokenList.url)\n      )\n    ).then(responses => {\n      const tokenListsWithBridgeTokenListId = responses\n        .map(({ data, isValid }, index) => {\n          const bridgeTokenListId = requestListArray[index]?.id\n\n          if (typeof bridgeTokenListId === 'undefined') {\n            return { ...data, isValid }\n          }\n\n          return {\n            l2ChainId: forL2ChainId,\n            bridgeTokenListId,\n            isValid,\n            ...data\n          }\n        })\n        .filter(list => list?.isValid)\n\n      resolve(tokenListsWithBridgeTokenListId as TokenListWithId[])\n    })\n  })\n}\n\nexport function useTokenLists(\n  forL2ChainId: number\n): SWRResponse<TokenListWithId[]> {\n  return useSWRImmutable(\n    ['useTokenLists', forL2ChainId],\n    ([, _forL2ChainId]) => fetchTokenLists(_forL2ChainId),\n    {\n      shouldRetryOnError: true,\n      errorRetryCount: 2,\n      errorRetryInterval: 1_000\n    }\n  )\n}\n","import { isNetwork } from '../util/networks'\n\nexport function isDepositMode({\n  sourceChainId,\n  destinationChainId\n}: {\n  sourceChainId: number\n  destinationChainId: number\n}) {\n  const {\n    isEthereumMainnetOrTestnet: isSourceChainEthereum,\n    isArbitrum: isSourceChainArbitrum\n  } = isNetwork(sourceChainId)\n  const { isOrbitChain: isDestinationChainOrbit } =\n    isNetwork(destinationChainId)\n\n  const isDepositMode =\n    isSourceChainEthereum || (isSourceChainArbitrum && isDestinationChainOrbit)\n\n  return isDepositMode\n}\n","import { StaticJsonRpcProvider } from '@ethersproject/providers'\nimport { useMemo } from 'react'\nimport { Chain } from 'wagmi'\nimport { UseNetworksState } from './useNetworks'\nimport { isDepositMode } from '../util/isDepositMode'\nimport { isTeleport } from '@/token-bridge-sdk/teleport'\n\ntype UseNetworksRelationshipState = {\n  childChain: Chain\n  childChainProvider: StaticJsonRpcProvider\n  parentChain: Chain\n  parentChainProvider: StaticJsonRpcProvider\n  isDepositMode: boolean\n  isTeleportMode: boolean\n}\nexport function useNetworksRelationship({\n  sourceChain,\n  sourceChainProvider,\n  destinationChain,\n  destinationChainProvider\n}: UseNetworksState): UseNetworksRelationshipState {\n  return useMemo(() => {\n    const _isDepositMode = isDepositMode({\n      sourceChainId: sourceChain.id,\n      destinationChainId: destinationChain.id\n    })\n\n    const isTeleportMode = isTeleport({\n      sourceChainId: sourceChain.id,\n      destinationChainId: destinationChain.id\n    })\n\n    if (_isDepositMode) {\n      return {\n        childChain: destinationChain,\n        childChainProvider: destinationChainProvider,\n        parentChain: sourceChain,\n        parentChainProvider: sourceChainProvider,\n        isDepositMode: _isDepositMode,\n        isTeleportMode\n      }\n    }\n\n    return {\n      childChain: sourceChain,\n      childChainProvider: sourceChainProvider,\n      parentChain: destinationChain,\n      parentChainProvider: destinationChainProvider,\n      isDepositMode: _isDepositMode,\n      isTeleportMode\n    }\n  }, [\n    sourceChain,\n    destinationChain,\n    destinationChainProvider,\n    sourceChainProvider\n  ])\n}\n","import { useMemo } from 'react'\nimport { useAppState } from '../../state'\nimport {\n  ContractStorage,\n  ERC20BridgeToken,\n  TokenType\n} from '../../hooks/arbTokenBridge.types'\nimport { useTokenLists } from '../../hooks/useTokenLists'\nimport { TokenListWithId } from '../../util/TokenListUtils'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { useNetworks } from '../../hooks/useNetworks'\n\nexport function useTokensFromLists(): ContractStorage<ERC20BridgeToken> {\n  const [networks] = useNetworks()\n  const { childChain, parentChain } = useNetworksRelationship(networks)\n  const { data: tokenLists = [] } = useTokenLists(childChain.id)\n\n  return useMemo(() => {\n    return tokenListsToSearchableTokenStorage(\n      tokenLists,\n      String(parentChain.id),\n      String(childChain.id)\n    )\n  }, [tokenLists, parentChain.id, childChain.id])\n}\n\nexport function useTokensFromUser(): ContractStorage<ERC20BridgeToken> {\n  const {\n    app: {\n      arbTokenBridge: { bridgeTokens }\n    }\n  } = useAppState()\n\n  return useMemo(() => {\n    const storage: ContractStorage<ERC20BridgeToken> = {}\n\n    // Can happen when switching networks.\n    if (typeof bridgeTokens === 'undefined') {\n      return {}\n    }\n\n    Object.keys(bridgeTokens).forEach((_address: string) => {\n      const bridgeToken = bridgeTokens[_address]\n\n      // Any tokens in the bridge that don't have a list id were added by the user.\n      if (bridgeToken && bridgeToken.listIds.size === 0) {\n        storage[_address] = { ...bridgeToken, listIds: new Set() }\n      }\n    })\n\n    return storage\n  }, [bridgeTokens])\n}\n\nfunction tokenListsToSearchableTokenStorage(\n  tokenLists: TokenListWithId[],\n  l1ChainId: string,\n  l2ChainId: string\n): ContractStorage<ERC20BridgeToken> {\n  return tokenLists.reduce(\n    (acc: ContractStorage<ERC20BridgeToken>, tokenList: TokenListWithId) => {\n      tokenList.tokens.forEach(token => {\n        const address = token.address.toLowerCase()\n        const stringifiedChainId = String(token.chainId)\n        const accAddress = acc[address]\n\n        if (stringifiedChainId === l1ChainId) {\n          // The address is from an L1 token\n          if (typeof accAddress === 'undefined') {\n            // First time encountering the token through its L1 address\n            acc[address] = {\n              ...token,\n              type: TokenType.ERC20,\n              l2Address: undefined,\n              listIds: new Set()\n            }\n          } else {\n            // Token was already added to the map through its L2 token\n            acc[address] = {\n              ...accAddress,\n              address\n            }\n          }\n\n          // acc[address] was defined in the if/else above\n          acc[address]!.listIds.add(tokenList.bridgeTokenListId)\n        } else if (stringifiedChainId === l2ChainId) {\n          // The token is an L2 token\n\n          if (!token.extensions?.bridgeInfo) {\n            return\n          }\n\n          // @ts-ignore TODO\n          // TODO: should we upgrade '@uniswap/token-lists'?\n          const bridgeInfo: {\n            [chainId: string]: { tokenAddress: string }\n          } = token.extensions.bridgeInfo\n\n          const l1Bridge = bridgeInfo[l1ChainId]\n          if (l1Bridge) {\n            const addressOnL1 = l1Bridge.tokenAddress.toLowerCase()\n\n            if (!addressOnL1) {\n              return\n            }\n\n            if (typeof acc[addressOnL1] === 'undefined') {\n              // Token is not on the list yet\n              acc[addressOnL1] = {\n                name: token.name,\n                symbol: token.symbol,\n                type: TokenType.ERC20,\n                logoURI: token.logoURI,\n                address: addressOnL1,\n                l2Address: address,\n                decimals: token.decimals,\n                listIds: new Set()\n              }\n            } else {\n              // The token's L1 address is already on the list, just fill in its L2 address\n              acc[addressOnL1]!.l2Address = address\n            }\n\n            // acc[address] was defined in the if/else above\n            acc[addressOnL1]!.listIds.add(tokenList.bridgeTokenListId)\n          }\n        }\n      })\n\n      return acc\n    },\n    {}\n  )\n}\n","// tokens that can't be bridged to Arbitrum (maybe coz they have their native protocol bridges and custom implementation or they are being discontinued)\n// the UI doesn't let users deposit such tokens. If bridged already, these can only be withdrawn.\n\nimport { ChainId, isNetwork } from '../util/networks'\nimport {\n  isTokenArbitrumOneUSDCe,\n  isTokenArbitrumSepoliaUSDCe\n} from './TokenUtils'\n\nexport type WithdrawOnlyToken = {\n  symbol: string\n  l2CustomAddr: string\n  l1Address: string\n  l2Address: string\n}\n\nexport const withdrawOnlyTokens: { [chainId: number]: WithdrawOnlyToken[] } = {\n  [ChainId.ArbitrumOne]: [\n    {\n      symbol: 'MIM',\n      l2CustomAddr: '0xFEa7a6a0B346362BF88A9e4A88416B77a57D6c2A',\n      l1Address: '0x99D8a9C45b2ecA8864373A26D1459e3Dff1e17F3',\n      l2Address: '0xB20A02dfFb172C474BC4bDa3fD6f4eE70C04daf2'\n    },\n    {\n      symbol: 'SPA',\n      l2CustomAddr: '0x5575552988A3A80504bBaeB1311674fCFd40aD4B',\n      l1Address: '0xB4A3B0Faf0Ab53df58001804DdA5Bfc6a3D59008',\n      l2Address: '0xe5a5Efe7ec8cdFA5F031D5159839A3b5E11B2e0F'\n    },\n    {\n      symbol: 'FST',\n      l2CustomAddr: '0x90e81b81307ece4257c1bb74bea94f5232cece53',\n      l1Address: '0x0e192d382a36de7011f795acc4391cd302003606',\n      l2Address: '0x488cc08935458403a0458e45E20c0159c8AB2c92'\n    },\n    {\n      symbol: 'stETH',\n      l2CustomAddr: '',\n      l1Address: '0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84',\n      l2Address: ''\n    },\n    {\n      symbol: 'renBTC',\n      l2CustomAddr: '0xdbf31df14b66535af65aac99c32e9ea844e14501',\n      l1Address: '0xEB4C2781e4ebA804CE9a9803C67d0893436bB27D',\n      l2Address: '0x3E06AF0fBB92D1f6e5c6008fcec81130D0cC65a3'\n    },\n    {\n      symbol: 'STG',\n      l2CustomAddr: '0x6694340fc020c5e6b96567843da2df01b2ce1eb6',\n      l1Address: '0xaf5191b0de278c7286d6c7cc6ab6bb8a73ba2cd6',\n      l2Address: '0xe018c7a3d175fb0fe15d70da2c874d3ca16313ec'\n    },\n    {\n      symbol: 'HND',\n      l2CustomAddr: '0x10010078a54396f62c96df8532dc2b4847d47ed3',\n      l1Address: '0x10010078a54396F62c96dF8532dc2B4847d47ED3',\n      l2Address: '0x626195b5a8b5f865E3516201D6ac30ee1B46A6e9'\n    },\n    {\n      symbol: 'FRAX',\n      l2CustomAddr: '0x17FC002b466eEc40DaE837Fc4bE5c67993ddBd6F',\n      l1Address: '0x853d955aCEf822Db058eb8505911ED77F175b99e',\n      l2Address: '0x7468a5d8E02245B00E8C0217fCE021C70Bc51305'\n    },\n    {\n      symbol: 'FXS',\n      l2CustomAddr: '0x9d2F299715D94d8A7E6F5eaa8E654E8c74a988A7',\n      l1Address: '0x3432B6A60D23Ca0dFCa7761B7ab56459D9C964D0',\n      l2Address: '0xd9f9d2Ee2d3EFE420699079f16D9e924affFdEA4'\n    },\n    {\n      symbol: 'gOHM',\n      l2CustomAddr: '0x8D9bA570D6cb60C7e3e0F31343Efe75AB8E65FB1',\n      l1Address: '0x0ab87046fBb341D058F17CBC4c1133F25a20a52f',\n      l2Address: '0x0D5f2b781A13722bA19e35857Fb6676594824960'\n    },\n    {\n      symbol: 'alUSD',\n      l2CustomAddr: '0xCB8FA9a76b8e203D8C3797bF438d8FB81Ea3326A',\n      l1Address: '0xbc6da0fe9ad5f3b0d58160288917aa56653660e9',\n      l2Address: '0x95d2C35934f4eA0076E6f5e8d6edd8080666F84e'\n    },\n    {\n      symbol: 'alETH',\n      l2CustomAddr: '',\n      l1Address: '0x0100546F2cD4C9D97f798fFC9755E47865FF7Ee6',\n      l2Address: '0xC05A105F4EC1ef28a4e7c0cb30Cb791B40FdD66B'\n    },\n    {\n      symbol: 'gALCX',\n      l2CustomAddr: '0x870d36B8AD33919Cc57FFE17Bb5D3b84F3aDee4f',\n      l1Address: '0x93dede06ae3b5590af1d4c111bc54c3f717e4b35',\n      l2Address: '0xEa4d9cE1fE1134528402A79f7B7Eacf87a930C8F'\n    },\n    {\n      symbol: 'USX',\n      l2CustomAddr: '0x641441c631e2f909700d2f41fd87f0aa6a6b4edb',\n      l1Address: '0x0a5e677a6a24b2f1a2bf4f3bffc443231d2fdec8',\n      l2Address: '0xcd14C3A2ba27819B352aae73414A26e2b366dC50'\n    },\n    {\n      symbol: 'SYN',\n      l2CustomAddr: '0x080f6aed32fc474dd5717105dba5ea57268f46eb',\n      l1Address: '0x0f2d719407fdbeff09d87557abb7232601fd9f29',\n      l2Address: '0x1bcfc0b4ee1471674cd6a9f6b363a034375ead84'\n    },\n    {\n      symbol: 'EMAX',\n      l2CustomAddr: '0x123389C2f0e9194d9bA98c21E63c375B67614108',\n      l1Address: '0x15874d65e649880c2614e7a480cb7c9A55787FF6',\n      l2Address: '0x94293e4e6ab410E898aa68318D0A964106Ff3257'\n    },\n    {\n      symbol: 'RELAY',\n      l2CustomAddr: '0x1426CF37CAA89628C4DA2864e40cF75E6d66Ac6b',\n      l1Address: '0x5D843Fa9495d23dE997C394296ac7B4D721E841c',\n      l2Address: '0xaFB5E28Be361248c18bf26647C3D0F1f141129a7'\n    },\n    {\n      symbol: 'tBTC',\n      l2CustomAddr: '0x6c84a8f1c29108F47a79964b5Fe888D4f4D0dE40',\n      l1Address: '0x18084fba666a33d37592fa2633fd49a74dd93a88',\n      l2Address: '0x7E2a1eDeE171C5B19E6c54D73752396C0A572594'\n    },\n    {\n      symbol: 'RDNT',\n      l2CustomAddr: '0x3082CC23568eA640225c2467653dB90e9250AaA0',\n      l1Address: '0x137dDB47Ee24EaA998a535Ab00378d6BFa84F893',\n      l2Address: '0xa4431f62db9955bfd056c30e5ae703bf0d0eaec8'\n    },\n    {\n      symbol: 'GSWIFT',\n      l2CustomAddr: '0x580e933d90091b9ce380740e3a4a39c67eb85b4c',\n      l1Address: '0x580e933d90091b9ce380740e3a4a39c67eb85b4c',\n      l2Address: '0x88e5369f73312eba739dcdf83bdb8bad3d08f4c8'\n    },\n    {\n      symbol: 'eETH',\n      l2CustomAddr: '',\n      l1Address: '0x35fA164735182de50811E8e2E824cFb9B6118ac2',\n      l2Address: '0x832307742aACFe2b9680309526b4d8a409e274E0'\n    },\n    {\n      symbol: 'rsETH',\n      l2CustomAddr: '',\n      l1Address: '0xA1290d69c65A6Fe4DF752f95823fae25cB99e5A7',\n      l2Address: '0x3d19a8b57e8082c4bbd5e068016295cfdb255e6a'\n    },\n    {\n      symbol: 'ETHx',\n      l2CustomAddr: '',\n      l1Address: '0xA35b1B31Ce002FBF2058D22F30f95D405200A15b',\n      l2Address: '0xaade6e725879375ba2b0ca608cfb26399d50a7ce'\n    },\n    {\n      symbol: 'ezETH',\n      l2CustomAddr: '0x2416092f143378750bb29b79eD961ab195CcEea5',\n      l1Address: '0xbf5495efe5db9ce00f80364c8b423567e58d2110',\n      l2Address: '0x6c2b260b7e4c4853a1227d9320c50e0b09917fa8'\n    },\n    {\n      symbol: 'USDe',\n      l2CustomAddr: '0x5d3a1Ff2b6BAb83b63cd9AD0787074081a52ef34',\n      l1Address: '0x4c9edd5852cd905f086c759e8383e09bff1e68b3',\n      l2Address: '0x1FefA878e65998482C743eE2deDB907E4D9c8c34'\n    },\n    {\n      symbol: 'sUSDe',\n      l2CustomAddr: '0x211Cc4DD073734dA055fbF44a2b4667d5E5fE5d2',\n      l1Address: '0x9D39A5DE30e57443BfF2A8307A4256c8797A3497',\n      l2Address: '0x292CbA96fce24f6802dBdA021ED2B05481a3eEdF'\n    },\n    {\n      symbol: 'GHO',\n      l2CustomAddr: '',\n      l1Address: '0x40D16FC0246aD3160Ccc09B8D0D3A2cD28aE6C2f',\n      l2Address: '0xfeb8670b834d9157864126f5dbd24b25d06882ad'\n    },\n    {\n      symbol: 'ETHFI',\n      l2CustomAddr: '0x7189fb5B6504bbfF6a852B13B7B82a3c118fDc27',\n      l1Address: '0xFe0c30065B384F05761f15d0CC899D4F9F9Cc0eB',\n      l2Address: '0x07D65C18CECbA423298c0aEB5d2BeDED4DFd5736'\n    },\n    {\n      symbol: 'ATH',\n      l2CustomAddr: '0xc87B37a581ec3257B734886d9d3a581F5A9d056c',\n      l1Address: '0xbe0Ed4138121EcFC5c0E56B40517da27E6c5226B',\n      l2Address: '0xc7dEf82Ba77BAF30BbBc9b6162DC075b49092fb4'\n    }\n  ],\n  [ChainId.ArbitrumNova]: []\n}\n\n/**\n *\n * @param erc20L1Address\n * @param childChainId\n */\nexport function isWithdrawOnlyToken(\n  parentChainErc20Address: string,\n  childChainId: number\n) {\n  // disable USDC.e deposits for Orbit chains\n  if (\n    (isTokenArbitrumOneUSDCe(parentChainErc20Address) ||\n      isTokenArbitrumSepoliaUSDCe(parentChainErc20Address)) &&\n    isNetwork(childChainId).isOrbitChain\n  ) {\n    return true\n  }\n\n  return (withdrawOnlyTokens[childChainId] ?? [])\n    .map(token => token.l1Address.toLowerCase())\n    .includes(parentChainErc20Address.toLowerCase())\n}\n","import { ChainId } from '../util/networks'\n\nexport type TransferDisabledToken = {\n  symbol: string\n  l1Address: string\n  l2Address: string\n}\n\nconst transferDisabledTokens: { [chainId: number]: TransferDisabledToken[] } = {\n  [ChainId.ArbitrumOne]: [\n    {\n      symbol: 'rDPX',\n      l1Address: '0x0ff5A8451A839f5F0BB3562689D9A44089738D11',\n      l2Address: '0x32Eb7902D4134bf98A28b963D26de779AF92A212'\n    },\n    {\n      symbol: 'FU',\n      l1Address: '0x43df01681966d5339702e96ef039e481b9da20c1',\n      l2Address: '0x9aee3C99934C88832399D6C6E08ad802112eBEab'\n    }\n  ]\n}\n\nexport function isTransferDisabledToken(\n  erc20L1Address: string,\n  childChainId: number\n) {\n  return (transferDisabledTokens[childChainId] ?? [])\n    .map(token => token.l1Address.toLowerCase())\n    .includes(erc20L1Address.toLowerCase())\n}\n","import { create } from 'zustand'\nimport { useEffect, useState } from 'react'\n\nimport { useActions, useAppState } from '../../state'\nimport { Dialog } from '../common/Dialog'\nimport { sanitizeTokenSymbol } from '../../util/TokenUtils'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { ChainId, getNetworkName } from '../../util/networks'\nimport { getL2ConfigForTeleport } from '../../token-bridge-sdk/teleport'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { withdrawOnlyTokens } from '../../util/WithdrawOnlyUtils'\n\ntype TransferDisabledDialogStore = {\n  isOpen: boolean\n  openDialog: () => void\n  closeDialog: () => void\n}\n\nexport const useTransferDisabledDialogStore =\n  create<TransferDisabledDialogStore>(set => ({\n    isOpen: false,\n    openDialog: () => set({ isOpen: true }),\n    closeDialog: () => set({ isOpen: false })\n  }))\n\nexport function TransferDisabledDialog() {\n  const [networks] = useNetworks()\n  const { isTeleportMode } = useNetworksRelationship(networks)\n  const { app } = useAppState()\n  const { selectedToken } = app\n  const {\n    app: { setSelectedToken }\n  } = useActions()\n  const {\n    isOpen: isOpenTransferDisabledDialog,\n    closeDialog: closeTransferDisabledDialog\n  } = useTransferDisabledDialogStore()\n  const unsupportedToken = sanitizeTokenSymbol(selectedToken?.symbol ?? '', {\n    erc20L1Address: selectedToken?.address,\n    chainId: networks.sourceChain.id\n  })\n  const [l2ChainIdForTeleport, setL2ChainIdForTeleport] = useState<\n    number | undefined\n  >()\n\n  useEffect(() => {\n    const updateL2ChainIdForTeleport = async () => {\n      if (!isTeleportMode) {\n        return\n      }\n      const { l2ChainId } = await getL2ConfigForTeleport({\n        destinationChainProvider: networks.destinationChainProvider\n      })\n      setL2ChainIdForTeleport(l2ChainId)\n    }\n    updateL2ChainIdForTeleport()\n  }, [isTeleportMode, networks.destinationChainProvider])\n\n  const onClose = () => {\n    setSelectedToken(null)\n    closeTransferDisabledDialog()\n  }\n\n  const sourceChainName = getNetworkName(networks.sourceChain.id)\n  const destinationChainName = getNetworkName(networks.destinationChain.id)\n  const l2ChainIdForTeleportName = l2ChainIdForTeleport\n    ? getNetworkName(l2ChainIdForTeleport)\n    : null\n\n  const isGHO =\n    networks.destinationChain.id === ChainId.ArbitrumOne &&\n    selectedToken?.address.toLowerCase() ===\n      withdrawOnlyTokens[ChainId.ArbitrumOne]\n        ?.find(_token => _token.symbol === 'GHO')\n        ?.l1Address.toLowerCase()\n\n  return (\n    <Dialog\n      closeable\n      title=\"Token cannot be bridged here\"\n      cancelButtonProps={{ className: 'hidden' }}\n      actionButtonTitle=\"Close\"\n      isOpen={isOpenTransferDisabledDialog}\n      onClose={onClose}\n    >\n      <div className=\"flex flex-col space-y-4 py-4\">\n        {/* teleport transfer disabled content if token is not in the allowlist */}\n        {isTeleportMode ? (\n          <>\n            <p>\n              Unfortunately,{' '}\n              <span className=\"font-medium\">{unsupportedToken}</span> is not yet\n              supported for direct {sourceChainName} to {destinationChainName}{' '}\n              transfers.\n            </p>\n            {l2ChainIdForTeleportName && (\n              <p>\n                To bridge{' '}\n                <span className=\"font-medium\">{unsupportedToken}</span>:\n                <li>\n                  First bridge from {sourceChainName} to{' '}\n                  {l2ChainIdForTeleportName}.\n                </li>\n                <li>\n                  Then bridge from {l2ChainIdForTeleportName} to{' '}\n                  {destinationChainName}.\n                </li>\n              </p>\n            )}\n            <p>\n              For more information please contact us on{' '}\n              <ExternalLink\n                href=\"https://discord.com/invite/ZpZuw7p\"\n                className=\"underline\"\n              >\n                Discord\n              </ExternalLink>{' '}\n              and reach out in #support for assistance.\n            </p>\n          </>\n        ) : (\n          // canonical transfer disabled content for all other cases\n          <>\n            <p>\n              Unfortunately,{' '}\n              <span className=\"font-medium\">{unsupportedToken}</span> has a\n              custom bridge solution that is incompatible with the canonical\n              Arbitrum bridge.\n            </p>\n            {isGHO && (\n              <p>\n                Please use the{' '}\n                <ExternalLink\n                  className=\"underline hover:opacity-70\"\n                  href=\"https://app.transporter.io/?from=mainnet&tab=token&to=arbitrum&token=GHO\"\n                >\n                  CCIP bridge for GHO\n                </ExternalLink>{' '}\n                instead.\n              </p>\n            )}\n            <p>\n              For more information please contact{' '}\n              <span className=\"font-medium\">{unsupportedToken}</span>\n              &apos;s developer team directly or explore their docs.\n            </p>\n          </>\n        )}\n      </div>\n    </Dialog>\n  )\n}\n","export function shortenAddress(address: string) {\n  const addressLength = address.length\n\n  return `${address.substring(0, 5)}...${address.substring(\n    addressLength - 4,\n    addressLength\n  )}`\n}\n\nexport function shortenTxHash(txHash: string) {\n  const txHashLength = txHash.length\n\n  return `${txHash.substring(0, 7)}...${txHash.substring(\n    txHashLength - 4,\n    txHashLength\n  )}`\n}\n\nexport const isTestingEnvironment =\n  !!window.Cypress || process.env.NODE_ENV !== 'production'\n","import { ChainId } from '../util/networks'\nimport { CommonAddress } from './CommonAddressUtils'\n\nexport type L2NativeToken = {\n  name: string\n  symbol: string\n  address: string\n  decimals: number\n  logoURI: string\n}\n\nexport const ArbOneNativeUSDC = {\n  name: 'USD Coin',\n  symbol: 'USDC',\n  address: CommonAddress.ArbitrumOne.USDC,\n  decimals: 6,\n  logoURI: 'https://s2.coinmarketcap.com/static/img/coins/64x64/3408.png'\n}\n\nconst L2NativeTokens: { [chainId: number]: L2NativeToken[] } = {\n  [ChainId.ArbitrumOne]: [\n    {\n      name: 'GMX',\n      symbol: 'GMX',\n      address: '0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a',\n      decimals: 18,\n      logoURI: 'https://s2.coinmarketcap.com/static/img/coins/64x64/11857.png'\n    },\n    {\n      name: 'STASIS EURO',\n      symbol: 'EURS',\n      address: '0xD22a58f79e9481D1a88e00c343885A588b34b68B',\n      decimals: 2,\n      logoURI: 'https://s2.coinmarketcap.com/static/img/coins/64x64/2989.png'\n    }\n  ],\n  [ChainId.ArbitrumNova]: []\n}\n\nfunction find(erc20L2Address: string, l2ChainId: number) {\n  return (\n    (L2NativeTokens[l2ChainId] ?? [])\n      //\n      .find(\n        token => token.address.toLowerCase() === erc20L2Address.toLowerCase()\n      )\n  )\n}\n\nexport function getL2NativeToken(\n  erc20L2Address: string,\n  l2ChainId: number\n): L2NativeToken {\n  const token = find(erc20L2Address, l2ChainId)\n\n  if (typeof token === 'undefined') {\n    throw new Error(\n      `Can't find L2-native token with address ${erc20L2Address} on chain ${l2ChainId}`\n    )\n  }\n\n  return token\n}\n","import { useCallback, useMemo } from 'react'\nimport { BigNumber, utils } from 'ethers'\nimport useSWR, {\n  useSWRConfig,\n  unstable_serialize,\n  Middleware,\n  SWRHook\n} from 'swr'\nimport { MultiCaller } from '@arbitrum/sdk'\nimport { getProviderForChainId } from '@/token-bridge-sdk/utils'\nimport { captureSentryErrorWithExtraData } from '../util/SentryUtils'\n\ntype Erc20Balances = {\n  [address: string]: BigNumber | undefined\n}\n\nexport type UseBalanceProps = {\n  chainId: number\n  walletAddress: string | undefined\n}\n\nconst merge: Middleware = (useSWRNext: SWRHook) => {\n  return (key, fetcher, config) => {\n    const { cache } = useSWRConfig()\n\n    const extendedFetcher = async () => {\n      if (!fetcher) {\n        return\n      }\n      const newBalances = await fetcher(key)\n      const oldData = cache.get(unstable_serialize(key))?.data\n      return {\n        ...(oldData || {}),\n        ...newBalances\n      }\n    }\n\n    return useSWRNext(key, extendedFetcher, config)\n  }\n}\n\nconst useBalance = ({ chainId, walletAddress }: UseBalanceProps) => {\n  const walletAddressLowercased = useMemo(() => {\n    // use balances for the wallet address only if it's valid\n    if (!walletAddress || !utils.isAddress(walletAddress)) {\n      return undefined\n    }\n    return walletAddress.toLowerCase()\n  }, [walletAddress])\n\n  const queryKey = useCallback(\n    (type: 'eth' | 'erc20') => {\n      if (typeof walletAddressLowercased === 'undefined') {\n        // Don't fetch\n        return null\n      }\n\n      return [walletAddressLowercased, chainId, 'balance', type] as const\n    },\n    [chainId, walletAddressLowercased]\n  )\n  const fetchErc20 = useCallback(\n    async ({\n      addresses,\n      walletAddress,\n      chainId\n    }: {\n      addresses: string[] | undefined\n      walletAddress: string\n      chainId: number\n    }) => {\n      if (!addresses?.length) {\n        return {}\n      }\n\n      const provider = getProviderForChainId(chainId)\n\n      try {\n        const multiCaller = await MultiCaller.fromProvider(provider)\n        const addressesBalances = await multiCaller.getTokenData(addresses, {\n          balanceOf: { account: walletAddress }\n        })\n\n        return addresses.reduce((acc, address, index) => {\n          const balance = addressesBalances[index]\n          if (balance) {\n            acc[address.toLowerCase()] = balance.balance\n          }\n\n          return acc\n        }, {} as Erc20Balances)\n      } catch (error) {\n        captureSentryErrorWithExtraData({\n          error,\n          originFunction: 'useBalance fetchErc20',\n          additionalData: {\n            token_addresses: addresses.toString(),\n            chain: chainId.toString()\n          }\n        })\n        return {}\n      }\n    },\n    []\n  )\n\n  const { data: dataEth = null, mutate: updateEthBalance } = useSWR(\n    queryKey('eth'),\n    ([_walletAddress, _chainId]) => {\n      const _provider = getProviderForChainId(_chainId)\n      return _provider.getBalance(_walletAddress)\n    },\n    {\n      refreshInterval: 15_000,\n      shouldRetryOnError: true,\n      errorRetryCount: 2,\n      errorRetryInterval: 3_000\n    }\n  )\n  const { data: dataErc20 = null, mutate: mutateErc20 } = useSWR(\n    queryKey('erc20'),\n    ([_walletAddressLowercased, _chainId]) =>\n      fetchErc20({\n        addresses: [],\n        walletAddress: _walletAddressLowercased,\n        chainId: _chainId\n      }),\n    {\n      shouldRetryOnError: true,\n      errorRetryCount: 2,\n      errorRetryInterval: 3_000,\n      use: [merge]\n    }\n  )\n\n  const updateErc20 = useCallback(\n    async (addresses: string[]) => {\n      if (!walletAddressLowercased) {\n        return null\n      }\n\n      const balances = await fetchErc20({\n        addresses,\n        chainId,\n        walletAddress: walletAddressLowercased\n      })\n\n      return mutateErc20(balances, {\n        populateCache(result, currentData) {\n          return {\n            ...currentData,\n            ...result\n          }\n        },\n        revalidate: false\n      })\n    },\n    [chainId, fetchErc20, mutateErc20, walletAddressLowercased]\n  )\n\n  return {\n    eth: [dataEth, updateEthBalance] as const,\n    erc20: [dataErc20, updateErc20] as const\n  }\n}\n\nexport { useBalance }\n","import { useAccount } from 'wagmi'\nimport useSWRImmutable from 'swr/immutable'\n\nimport { addressIsSmartContract } from '../util/AddressUtils'\nimport { useNetworks } from './useNetworks'\n\ntype Result = {\n  isEOA: boolean\n  isSmartContractWallet: boolean\n  isLoading: boolean\n}\n\nexport function useAccountType(): Result {\n  const { address, isConnected } = useAccount()\n  // TODO: change to use connected chain when Safe wallet returns it correctly\n  // atm Safe UI would try to switch connected chain even when user is at the correct chain\n  // so the connected chain WAGMI returns is the wrong chain where the SCW is not deployed on\n  const [{ sourceChain }] = useNetworks()\n\n  const { data: isSmartContractWallet = false, isLoading } = useSWRImmutable(\n    address && isConnected && sourceChain\n      ? [address, sourceChain.id, 'useAccountType']\n      : null,\n    ([_address, chainId]) => addressIsSmartContract(_address, chainId),\n    {\n      shouldRetryOnError: true,\n      errorRetryCount: 2,\n      errorRetryInterval: 5_000\n    }\n  )\n\n  // By default, assume it's an EOA\n  return {\n    isEOA: !isSmartContractWallet,\n    isSmartContractWallet,\n    isLoading\n  }\n}\n","import { Transition as HeadlessUiTransition } from '@headlessui/react'\nimport { PropsWithChildren } from 'react'\nimport { twMerge } from 'tailwind-merge'\n\ntype TransitionSpeed = 'slow' | 'normal' | 'fast'\n\ntype TransitionOptions = {\n  enterSpeed?: TransitionSpeed\n  leaveSpeed?: TransitionSpeed\n  unmountOnLeave?: boolean\n}\n\ntype TransitionProps = PropsWithChildren<{\n  isOpen?: boolean\n  options?: TransitionOptions\n  className?: string\n  afterLeave?: () => void\n}>\n\nfunction getDurationClassName(speed: TransitionSpeed) {\n  switch (speed) {\n    case 'slow':\n      return 'duration-1000'\n    case 'normal':\n      return 'duration-500'\n    case 'fast':\n      return 'duration-200'\n  }\n}\n\nexport const Transition = (props: TransitionProps) => {\n  const { options, children, className, isOpen, afterLeave } = props\n\n  const enterSpeed = options?.enterSpeed ?? 'fast'\n  const leaveSpeed = options?.leaveSpeed ?? 'fast'\n  const unmountOnLeave = options?.unmountOnLeave ?? true\n\n  return (\n    <HeadlessUiTransition\n      show={isOpen}\n      unmount={unmountOnLeave}\n      enter={twMerge('transition ease-out', getDurationClassName(enterSpeed))}\n      enterFrom=\"opacity-0 translate-y-1\"\n      enterTo=\"opacity-100 translate-y-0\"\n      leave={twMerge('transition ease-in', getDurationClassName(leaveSpeed))}\n      leaveFrom=\"opacity-100 translate-y-0\"\n      leaveTo=\"opacity-0 translate-y-1\"\n      afterLeave={afterLeave}\n      className={className}\n    >\n      {children}\n    </HeadlessUiTransition>\n  )\n}\n","import { useEffect, useMemo, useState } from 'react'\nimport { twMerge } from 'tailwind-merge'\nimport { useAccount } from 'wagmi'\nimport { create } from 'zustand'\nimport { isAddress } from 'ethers/lib/utils'\nimport { ArrowDownTrayIcon, ChevronDownIcon } from '@heroicons/react/24/outline'\nimport { LockClosedIcon, LockOpenIcon } from '@heroicons/react/24/solid'\n\nimport { getExplorerUrl } from '../../util/networks'\nimport { ExternalLink } from '../common/ExternalLink'\n\nimport { useAppState } from '../../state'\nimport { useAccountType } from '../../hooks/useAccountType'\nimport {\n  addressIsSmartContract,\n  addressIsDenylisted\n} from '../../util/AddressUtils'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { Transition } from '../common/Transition'\n\nexport enum DestinationAddressErrors {\n  INVALID_ADDRESS = 'The destination address is not a valid address.',\n  REQUIRED_ADDRESS = 'The destination address is required.',\n  DENYLISTED_ADDRESS = 'The address you entered is a known contract address, and sending funds to it would likely result in losing said funds. If you think this is a mistake, please contact our support.',\n  TELEPORT_DISABLED = 'LayerLeap transfers to custom destination addresses are not supported yet.'\n}\n\nenum DestinationAddressWarnings {\n  CONTRACT_ADDRESS = 'The destination address is a contract address. Please make sure it is the right address.'\n}\n\ntype DestinationAddressStore = {\n  error: DestinationAddressErrors | null\n  destinationAddress: string | undefined\n  setError: (error: DestinationAddressErrors | null) => void\n  setDestinationAddress: (destinationAddress: string | undefined) => void\n}\n\nexport const useDestinationAddressStore = create<DestinationAddressStore>(\n  set => ({\n    error: null,\n    destinationAddress: undefined,\n    setError: error => set(() => ({ error })),\n    setDestinationAddress: destinationAddress =>\n      set(() => ({ destinationAddress }))\n  })\n)\n\nexport async function getDestinationAddressError({\n  destinationAddress,\n  isSmartContractWallet,\n  isTeleportMode\n}: {\n  destinationAddress?: string\n  isSmartContractWallet: boolean\n  isTeleportMode: boolean\n}): Promise<DestinationAddressErrors | null> {\n  if (!destinationAddress && isSmartContractWallet) {\n    // destination address required for contract wallets\n    return DestinationAddressErrors.REQUIRED_ADDRESS\n  }\n\n  if (!destinationAddress) {\n    return null\n  }\n\n  if (!isAddress(destinationAddress)) {\n    return DestinationAddressErrors.INVALID_ADDRESS\n  }\n  if (await addressIsDenylisted(destinationAddress)) {\n    return DestinationAddressErrors.DENYLISTED_ADDRESS\n  }\n\n  if (isTeleportMode) {\n    return DestinationAddressErrors.TELEPORT_DISABLED\n  }\n\n  // no error\n  return null\n}\n\nasync function getDestinationAddressWarning({\n  destinationAddress,\n  isEOA,\n  destinationChainId\n}: {\n  destinationAddress: string | undefined\n  isEOA: boolean\n  destinationChainId: number\n}) {\n  if (!destinationAddress) {\n    return null\n  }\n\n  if (!isAddress(destinationAddress)) {\n    return null\n  }\n\n  const destinationIsSmartContract = await addressIsSmartContract(\n    destinationAddress,\n    destinationChainId\n  )\n\n  // checks if trying to send to a contract address, only checks EOA\n  if (isEOA && destinationIsSmartContract) {\n    return DestinationAddressWarnings.CONTRACT_ADDRESS\n  }\n\n  // no warning\n  return null\n}\n\nexport const AdvancedSettings = () => {\n  const {\n    app: { selectedToken }\n  } = useAppState()\n  const [networks] = useNetworks()\n  const {\n    childChain,\n    childChainProvider,\n    parentChain,\n    parentChainProvider,\n    isDepositMode,\n    isTeleportMode\n  } = useNetworksRelationship(networks)\n  const { address } = useAccount()\n  const { isEOA, isSmartContractWallet } = useAccountType()\n\n  const [collapsed, setCollapsed] = useState(true)\n  const [inputLocked, setInputLocked] = useState(true)\n  const [warning, setWarning] = useState<string | null>(null)\n\n  const { error, setError, destinationAddress, setDestinationAddress } =\n    useDestinationAddressStore()\n\n  useEffect(() => {\n    // Initially hide for EOA\n    setCollapsed(isEOA)\n    // Initially lock for EOA\n    setInputLocked(isEOA)\n  }, [isEOA])\n\n  useEffect(() => {\n    async function updateError() {\n      setError(\n        await getDestinationAddressError({\n          destinationAddress,\n          isSmartContractWallet,\n          isTeleportMode\n        })\n      )\n    }\n    updateError()\n  }, [destinationAddress, isSmartContractWallet, setError, isTeleportMode])\n\n  useEffect(() => {\n    // isSubscribed makes sure that only the latest state is written\n    let isSubscribed = true\n\n    async function updateWarning() {\n      const result = await getDestinationAddressWarning({\n        destinationAddress,\n        isEOA,\n        destinationChainId: networks.destinationChain.id\n      })\n      if (isSubscribed) {\n        setWarning(result)\n      }\n    }\n    updateWarning()\n\n    return () => {\n      isSubscribed = false\n    }\n  }, [\n    destinationAddress,\n    isDepositMode,\n    isEOA,\n    childChainProvider,\n    parentChainProvider,\n    childChain.id,\n    parentChain.id\n  ])\n\n  const collapsible = useMemo(() => {\n    // cannot collapse if:\n    // - SCW because the destination address is mandatory\n    // - destination address is not empty\n    return isEOA && !destinationAddress\n  }, [destinationAddress, isEOA])\n\n  // Disabled for ETH\n  if (!selectedToken) {\n    return null\n  }\n\n  if (!isEOA && !isSmartContractWallet) {\n    return null\n  }\n\n  function handleVisibility() {\n    if (!collapsible) {\n      setCollapsed(false)\n      return\n    }\n    setCollapsed(!collapsed)\n  }\n\n  return (\n    <div className=\"mb-6 flex flex-col items-end\">\n      <button\n        onClick={handleVisibility}\n        className={twMerge(\n          'arb-hover flex flex-row items-center text-sm text-white',\n          collapsible ? '' : 'pointer-events-none'\n        )}\n      >\n        <span aria-label=\"advanced settings\">Advanced Settings</span>\n        {collapsible && (\n          <ChevronDownIcon\n            className={twMerge(\n              'ml-1 h-4 w-4 transition-transform duration-200',\n              collapsed ? 'rotate-0' : '-rotate-180'\n            )}\n          />\n        )}\n      </button>\n      <Transition isOpen={!collapsed}>\n        <div className=\"mt-2 rounded border border-white/30 bg-brick-dark p-2 text-white\">\n          <p className=\"text-sm font-light\">\n            {isEOA ? (\n              <>\n                Send your funds to a different address.{' '}\n                <span className=\"font-semibold\">This is not standard.</span> Be\n                sure you mean to send it here, or it may lead to an\n                irrecoverable loss of funds.\n              </>\n            ) : (\n              <>\n                With Smart Contract Wallets, you{' '}\n                <span className=\"font-semibold\">must specify an address</span>{' '}\n                you&apos;d like the funds sent to.\n              </>\n            )}\n          </p>\n          <div\n            className={twMerge(\n              'my-1 flex w-full items-center rounded border px-2 py-1 shadow-input',\n              inputLocked\n                ? 'border-white/20 bg-white/20'\n                : 'border-white bg-black/40',\n              error ? 'border-red-400' : '',\n              warning && !error ? 'border-yellow-500' : ''\n            )}\n          >\n            <input\n              className=\"w-full bg-transparent text-white placeholder-white/50\"\n              placeholder={isEOA ? address : 'Enter Custom Destination Address'}\n              value={destinationAddress}\n              disabled={inputLocked}\n              spellCheck={false}\n              onChange={e =>\n                setDestinationAddress(e.target.value?.toLowerCase().trim())\n              }\n            />\n            {isEOA && (\n              <button\n                onClick={() => setInputLocked(!inputLocked)}\n                aria-label=\"Custom destination input lock\"\n              >\n                {inputLocked ? (\n                  <LockClosedIcon height={16} />\n                ) : (\n                  <LockOpenIcon height={16} />\n                )}\n              </button>\n            )}\n          </div>\n        </div>\n\n        {error && <p className=\"mt-1 text-xs text-red-400\">{error}</p>}\n        {!error && warning && (\n          <p className=\"mt-1 text-xs text-yellow-500\">{warning}</p>\n        )}\n        {destinationAddress && !error && (\n          <ExternalLink\n            className=\"arb-hover mt-2 flex w-fit items-center text-xs font-medium text-white/50\"\n            href={`${getExplorerUrl(\n              isDepositMode ? childChain.id : parentChain.id\n            )}/address/${destinationAddress}`}\n          >\n            <ArrowDownTrayIcon\n              height={12}\n              strokeWidth={3}\n              className=\"mr-1 -rotate-90\"\n            />\n            View account in explorer\n          </ExternalLink>\n        )}\n      </Transition>\n    </div>\n  )\n}\n","import { Address, useAccount } from 'wagmi'\nimport { useMemo } from 'react'\n\nimport { useBalance } from './useBalance'\nimport { useNetworks } from './useNetworks'\nimport { useNetworksRelationship } from './useNetworksRelationship'\n\nimport { useDestinationAddressStore } from '../components/TransferPanel/AdvancedSettings'\n\nexport function useBalances({\n  parentWalletAddress,\n  childWalletAddress\n}: {\n  parentWalletAddress?: Address\n  childWalletAddress?: Address\n} = {}) {\n  const [networks] = useNetworks()\n  const { childChain, parentChain, isDepositMode } =\n    useNetworksRelationship(networks)\n  const { address: walletAddress } = useAccount()\n  const { destinationAddress } = useDestinationAddressStore()\n  const destinationAddressOrWalletAddress = destinationAddress || walletAddress\n\n  const _parentWalletAddress =\n    parentWalletAddress ??\n    (isDepositMode ? walletAddress : destinationAddressOrWalletAddress)\n\n  const _childWalletAddress =\n    childWalletAddress ??\n    (isDepositMode ? destinationAddressOrWalletAddress : walletAddress)\n\n  const {\n    eth: [ethParentBalance, updateEthParentBalance],\n    erc20: [erc20ParentBalances, updateErc20ParentBalances]\n  } = useBalance({\n    chainId: parentChain.id,\n    walletAddress: _parentWalletAddress\n  })\n\n  const {\n    eth: [ethChildBalance, updateEthChildBalance],\n    erc20: [erc20ChildBalances, updateErc20ChildBalances]\n  } = useBalance({\n    chainId: childChain.id,\n    walletAddress: _childWalletAddress\n  })\n\n  return useMemo(\n    () => ({\n      ethParentBalance,\n      updateEthParentBalance,\n      erc20ParentBalances,\n      updateErc20ParentBalances,\n      ethChildBalance,\n      updateEthChildBalance,\n      erc20ChildBalances,\n      updateErc20ChildBalances\n    }),\n    [\n      erc20ChildBalances,\n      erc20ParentBalances,\n      ethChildBalance,\n      ethParentBalance,\n      updateErc20ChildBalances,\n      updateErc20ParentBalances,\n      updateEthChildBalance,\n      updateEthParentBalance\n    ]\n  )\n}\n","import { useCallback } from 'react'\nimport { isAddress } from 'ethers/lib/utils.js'\n\nimport { CommonAddress } from '../../util/CommonAddressUtils'\nimport { getL2ERC20Address } from '../../util/TokenUtils'\nimport { useNetworks } from '../useNetworks'\nimport { useNetworksRelationship } from '../useNetworksRelationship'\nimport { isNetwork } from '../../util/networks'\nimport { useBalances } from '../useBalances'\nimport { Address } from 'wagmi'\n\nexport function useUpdateUSDCBalances({\n  walletAddress\n}: {\n  walletAddress: string | undefined\n}) {\n  const [networks] = useNetworks()\n  const { parentChainProvider, parentChain, childChainProvider } =\n    useNetworksRelationship(networks)\n\n  const _walletAddress: Address | undefined =\n    walletAddress && isAddress(walletAddress) ? walletAddress : undefined\n  const {\n    updateErc20ParentBalances: updateErc20ParentBalance,\n    updateErc20ChildBalances: updateErc20ChildBalance\n  } = useBalances({\n    parentWalletAddress: _walletAddress,\n    childWalletAddress: _walletAddress\n  })\n\n  const updateUSDCBalances = useCallback(async () => {\n    const { isEthereumMainnet, isSepolia, isArbitrumOne, isArbitrumSepolia } =\n      isNetwork(parentChain.id)\n\n    let parentChainUsdcAddress, childChainUsdcAddress: string | undefined\n\n    if (isEthereumMainnet || isSepolia) {\n      parentChainUsdcAddress = isEthereumMainnet\n        ? CommonAddress.Ethereum.USDC\n        : CommonAddress.Sepolia.USDC\n\n      childChainUsdcAddress = isEthereumMainnet\n        ? CommonAddress.ArbitrumOne.USDC\n        : CommonAddress.ArbitrumSepolia.USDC\n    }\n\n    if (isArbitrumOne || isArbitrumSepolia) {\n      parentChainUsdcAddress = isArbitrumOne\n        ? CommonAddress.ArbitrumOne.USDC\n        : CommonAddress.ArbitrumSepolia.USDC\n    }\n\n    // USDC is not native for the selected networks, do nothing\n    if (!parentChainUsdcAddress) {\n      return\n    }\n\n    updateErc20ParentBalance([parentChainUsdcAddress])\n\n    // we don't have native USDC addresses for Orbit chains, we need to fetch it\n    if (!childChainUsdcAddress) {\n      try {\n        childChainUsdcAddress = (\n          await getL2ERC20Address({\n            erc20L1Address: parentChainUsdcAddress,\n            l1Provider: parentChainProvider,\n            l2Provider: childChainProvider\n          })\n        ).toLowerCase()\n      } catch {\n        // could be never bridged before\n        return\n      }\n    }\n\n    if (childChainUsdcAddress) {\n      updateErc20ChildBalance([childChainUsdcAddress])\n    }\n  }, [\n    childChainProvider,\n    parentChain.id,\n    parentChainProvider,\n    updateErc20ParentBalance,\n    updateErc20ChildBalance\n  ])\n\n  return { updateUSDCBalances }\n}\n","import { Provider, StaticJsonRpcProvider } from '@ethersproject/providers'\nimport { EthBridger, ArbitrumNetwork, getArbitrumNetwork } from '@arbitrum/sdk'\nimport useSWRImmutable from 'swr/immutable'\n\nimport { ETHER_TOKEN_LOGO, ether } from '../constants'\nimport { rpcURLs } from '../util/networks'\nimport { fetchErc20Data } from '../util/TokenUtils'\nimport { getBridgeUiConfigForChain } from '../util/bridgeUiConfig'\n\nexport type NativeCurrencyBase = {\n  name: string\n  symbol: string\n  decimals: number\n  logoUrl?: string\n}\n\nexport type NativeCurrencyEther = NativeCurrencyBase & {\n  isCustom: false\n}\n\nexport type NativeCurrencyErc20 = NativeCurrencyBase & {\n  isCustom: true\n  /**\n   * Address of the ERC-20 token contract on the parent chain.\n   */\n  address: string\n}\n\nexport type NativeCurrency = NativeCurrencyEther | NativeCurrencyErc20\n\nconst nativeCurrencyEther: NativeCurrencyEther = {\n  ...ether,\n  logoUrl: ETHER_TOKEN_LOGO,\n  isCustom: false\n}\n\nexport function useNativeCurrency({\n  provider\n}: {\n  provider: Provider\n}): NativeCurrency {\n  const { data = nativeCurrencyEther } = useSWRImmutable(\n    ['nativeCurrency', provider],\n    ([, _provider]) => fetchNativeCurrency({ provider: _provider }),\n    {\n      shouldRetryOnError: true,\n      errorRetryCount: 2,\n      errorRetryInterval: 1_000\n    }\n  )\n\n  return data\n}\n\nexport async function fetchNativeCurrency({\n  provider\n}: {\n  provider: Provider\n}): Promise<NativeCurrency> {\n  let chain: ArbitrumNetwork\n\n  try {\n    chain = await getArbitrumNetwork(provider)\n  } catch (error) {\n    // This will only throw for L1s, so we can safely assume that the native currency is ETH\n    return nativeCurrencyEther\n  }\n\n  const ethBridger = await EthBridger.fromProvider(provider)\n\n  // Could be an L2 or an Orbit chain, but doesn't really matter\n  if (typeof ethBridger.nativeToken === 'undefined') {\n    return nativeCurrencyEther\n  }\n\n  const address = ethBridger.nativeToken.toLowerCase()\n  const parentChainId = chain.parentChainId\n  const parentChainProvider = new StaticJsonRpcProvider(rpcURLs[parentChainId])\n\n  const { name, symbol, decimals } = await fetchErc20Data({\n    address,\n    provider: parentChainProvider\n  })\n\n  return {\n    name,\n    logoUrl: getBridgeUiConfigForChain(chain.chainId).nativeTokenData?.logoUrl,\n    symbol,\n    decimals,\n    address,\n    isCustom: true\n  }\n}\n","import { MagnifyingGlassIcon } from '@heroicons/react/24/outline'\nimport React, { PropsWithChildren } from 'react'\n\ntype SearchPanelTableProps = {\n  searchInputPlaceholder: string\n  searchInputValue: string\n  searchInputOnChange: React.ChangeEventHandler<HTMLInputElement>\n  SearchInputButton?: React.JSX.Element\n  onSubmit?: React.FormEventHandler<HTMLFormElement>\n  errorMessage: string\n  dataCy?: string\n}\n\nexport const SearchPanelTable = ({\n  searchInputPlaceholder,\n  searchInputValue,\n  searchInputOnChange,\n  SearchInputButton,\n  onSubmit = event => {\n    event.preventDefault()\n  },\n  errorMessage,\n  children,\n  dataCy\n}: PropsWithChildren<SearchPanelTableProps>) => {\n  return (\n    <div className=\"flex flex-col gap-3\">\n      <form onSubmit={onSubmit} className=\"flex flex-col\">\n        <div className=\"flex items-stretch gap-2\">\n          <div className=\"relative flex h-full w-full grow items-center rounded border-[1px] border-gray-dark bg-black/30 px-2 text-white shadow-input\">\n            <MagnifyingGlassIcon className=\"h-4 w-4 shrink-0\" />\n            <input\n              type=\"search\"\n              placeholder={searchInputPlaceholder}\n              value={searchInputValue}\n              onChange={searchInputOnChange}\n              className=\"h-full w-full bg-transparent p-2 text-sm font-light placeholder:text-xs placeholder:text-white\"\n            />\n          </div>\n          {SearchInputButton}\n        </div>\n        {!!errorMessage && (\n          <p className=\"text-xs text-red-400\">{errorMessage}</p>\n        )}\n      </form>\n      <div\n        className=\"sm:shadow-search-panel h-[calc(100vh_-_190px)] overflow-hidden rounded border border-gray-dark bg-black/30 sm:h-[400px]\"\n        data-cy={dataCy}\n      >\n        {children}\n      </div>\n    </div>\n  )\n}\n","import React, {\n  createContext,\n  useCallback,\n  useContext,\n  useMemo,\n  useState\n} from 'react'\nimport {\n  ArrowRightIcon,\n  ArrowSmallLeftIcon,\n  XMarkIcon\n} from '@heroicons/react/24/outline'\nimport { twMerge } from 'tailwind-merge'\n\nimport { Loader } from '../atoms/Loader'\n\nenum Panel {\n  MAIN,\n  SECONDARY\n}\n\nfunction usePanel(panel: Panel) {\n  const { currentPanel, setCurrentPanel } = useContext(SearchPanelContext)\n  const setPanel = useCallback(\n    () => setCurrentPanel(panel),\n    [panel, setCurrentPanel]\n  )\n  const isActivePanel = currentPanel === panel\n\n  return {\n    setPanel,\n    isActivePanel\n  }\n}\n\nconst SearchPanelContext = createContext<{\n  currentPanel: Panel\n  setCurrentPanel: (panel: Panel) => void\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n}>({ currentPanel: Panel.MAIN, setCurrentPanel: () => {} })\n\nfunction SearchPanel({ children }: { children: React.ReactNode }) {\n  const [currentPanel, setCurrentPanel] = useState(Panel.MAIN)\n  const provided = useMemo(\n    () => ({\n      currentPanel,\n      setCurrentPanel: (panel: Panel) => setCurrentPanel(panel)\n    }),\n    [currentPanel]\n  )\n  return (\n    <SearchPanelContext.Provider value={provided}>\n      {children}\n    </SearchPanelContext.Provider>\n  )\n}\n\nfunction MainPageCTA({\n  children,\n  onClick,\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLButtonElement>) {\n  const { setPanel: showSecondaryPage } = usePanel(Panel.SECONDARY)\n\n  const onClickHandler = useCallback(\n    (event: React.MouseEvent<HTMLButtonElement>) => {\n      showSecondaryPage()\n      onClick?.(event)\n    },\n    [onClick, showSecondaryPage]\n  )\n\n  return (\n    <button\n      className={twMerge(\n        'arb-hover text-gray flex items-center gap-2 text-sm',\n        className\n      )}\n      onClick={onClickHandler}\n      {...props}\n    >\n      <span>{children}</span>\n      <ArrowRightIcon className=\"h-3 w-3 stroke-[3px]\" />\n    </button>\n  )\n}\nSearchPanel.MainPageCTA = MainPageCTA\n\nfunction CloseButton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLButtonElement>) {\n  return (\n    <button className={twMerge('arb-hover', className)} {...props}>\n      <XMarkIcon className=\"h-7 w-7 text-gray-7 lg:h-5 lg:w-5\" />\n    </button>\n  )\n}\nSearchPanel.CloseButton = CloseButton\n\nfunction SearchPanelMainPage({\n  children,\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  const { isActivePanel: shouldShowMain } = usePanel(Panel.MAIN)\n\n  if (!shouldShowMain) {\n    return null\n  }\n\n  if (!className) {\n    return children\n  }\n\n  return (\n    <div className={className} {...props}>\n      {children}\n    </div>\n  )\n}\nSearchPanel.MainPage = SearchPanelMainPage\n\nfunction SearchPanelPageTitle({\n  title,\n  children,\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement> & { title: string }) {\n  return (\n    <div\n      className={twMerge(\n        'flex flex-row items-center justify-between pb-4',\n        className\n      )}\n      {...props}\n    >\n      <span className=\"text-xl\">{title}</span>\n      {children}\n    </div>\n  )\n}\nSearchPanel.PageTitle = SearchPanelPageTitle\n\nfunction SearchPanelSecondaryPage({\n  children,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  const { isActivePanel: shouldShowSecondary } = usePanel(Panel.SECONDARY)\n\n  if (!shouldShowSecondary) {\n    return null\n  }\n\n  return <div {...props}>{children}</div>\n}\nSearchPanel.SecondaryPage = SearchPanelSecondaryPage\n\nfunction SecondaryPageCTA({\n  children,\n  className,\n  onClick,\n  ...props\n}: React.HTMLAttributes<HTMLButtonElement>) {\n  const { setPanel: showMainPage } = usePanel(Panel.MAIN)\n\n  const onClickHandler = useCallback(\n    (event: React.MouseEvent<HTMLButtonElement>) => {\n      showMainPage()\n      onClick?.(event)\n    },\n    [onClick, showMainPage]\n  )\n\n  return (\n    <div className=\"mt-4 flex justify-start\">\n      <button\n        className={twMerge(\n          'arb-hover flex items-center space-x-2 text-sm',\n          className\n        )}\n        onClick={onClickHandler}\n        {...props}\n      >\n        <ArrowSmallLeftIcon className=\"h-3 w-3 stroke-[3px]\" />\n        <span>{children}</span>\n      </button>\n    </div>\n  )\n}\nSearchPanel.SecondaryPageCTA = SecondaryPageCTA\n\nfunction LoaderWithMessage({ loadingMessage }: { loadingMessage?: string }) {\n  return (\n    <span className=\"flex flex-row items-center gap-2 text-sm font-normal text-gray-6\">\n      <Loader color=\"white\" size=\"small\" />\n      {loadingMessage}\n    </span>\n  )\n}\nSearchPanel.LoaderWithMessage = LoaderWithMessage\n\nexport { SearchPanel }\n","import { BigNumber, utils } from 'ethers'\n\nexport function formatUSD(value: number) {\n  const formattedValue = value.toLocaleString(undefined, {\n    minimumFractionDigits: Number.isInteger(value) ? undefined : 2,\n    maximumFractionDigits: 2\n  })\n\n  return `$${formattedValue}`\n}\n\nexport enum MaximumFractionDigits {\n  None = 0,\n  Short = 1,\n  Compact = 3,\n  Standard = 4,\n  Long = 5\n}\n\n/**\n * Parse number according to english formatting.\n *\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat\n *\n * Should not be used directly, use formatAmount instead\n */\nconst formatNumber = (\n  number: number,\n  options: {\n    maximumFractionDigits: MaximumFractionDigits\n    notation: 'standard' | 'compact'\n  }\n): string => Intl.NumberFormat('en', options).format(number)\n\n// Format amount according to a specific set of rules to limit space used\nexport const formatAmount = <T extends number | BigNumber | undefined>(\n  balance: T,\n  options: {\n    decimals?: T extends number ? never : number\n    symbol?: string\n  } = {}\n): string => {\n  const { decimals, symbol } = options\n\n  if (typeof balance === 'undefined') {\n    return ''\n  }\n\n  const value: number = BigNumber.isBigNumber(balance)\n    ? parseFloat(utils.formatUnits(balance, decimals))\n    : balance\n  const suffix = symbol ? ` ${symbol}` : ''\n\n  if (value === 0) {\n    return `0${suffix}`\n  }\n\n  const isShortSymbol = options.symbol ? options.symbol.length < 5 : true\n\n  // Small number, show 4 or 5 decimals based on token name length\n  if (value < 1) {\n    const maximumFractionDigits = isShortSymbol\n      ? MaximumFractionDigits.Long\n      : MaximumFractionDigits.Standard\n    const minDisplayValue = Math.pow(10, -maximumFractionDigits)\n    if (value < minDisplayValue) {\n      return `< 0.${'0'.repeat(maximumFractionDigits - 1)}1${suffix}`\n    }\n\n    return (\n      formatNumber(value, {\n        maximumFractionDigits: isShortSymbol\n          ? MaximumFractionDigits.Long\n          : MaximumFractionDigits.Standard,\n        notation: 'compact'\n      }) + suffix\n    )\n  }\n\n  // Long token name, display shortened form with only 1 decimal\n  if (!isShortSymbol) {\n    return (\n      formatNumber(value, {\n        maximumFractionDigits: MaximumFractionDigits.Short,\n        notation: 'compact'\n      }) + suffix\n    )\n  }\n\n  // Show compact number (1.234T, 1.234M)\n  if (value >= 1_000_000) {\n    return (\n      formatNumber(value, {\n        maximumFractionDigits: MaximumFractionDigits.Compact,\n        notation: 'compact'\n      }) + suffix\n    )\n  }\n\n  // Show full number without decimals\n  if (value >= 10_000) {\n    return (\n      formatNumber(value, {\n        maximumFractionDigits: MaximumFractionDigits.None,\n        notation: 'standard'\n      }) + suffix\n    )\n  }\n\n  // Show full number with 4 decimals\n  return (\n    formatNumber(value, {\n      maximumFractionDigits: MaximumFractionDigits.Standard,\n      notation: 'standard'\n    }) + suffix\n  )\n}\n\nexport const countDecimals = (num: number | string) => {\n  if (Math.floor(Number(num)) === Number(num)) {\n    return 0\n  }\n\n  const decimalPart = String(num).split('.')[1]\n\n  if (typeof decimalPart === 'undefined') {\n    return 0\n  }\n\n  return decimalPart.length\n}\n\nexport const truncateExtraDecimals = (amount: string, decimals: number) => {\n  const decimalPart = amount.split('.')[1]\n\n  if (typeof decimalPart === 'undefined') {\n    return amount\n  }\n\n  return `${amount.split('.')[0]}.${decimalPart.slice(0, decimals)}`\n}\n","import { useState, useEffect, ImgHTMLAttributes } from 'react'\n\nimport { sanitizeImageSrc } from '../../util'\n\nexport type SafeImageProps = ImgHTMLAttributes<HTMLImageElement> & {\n  fallback?: JSX.Element\n}\n\nexport function SafeImage(props: SafeImageProps) {\n  const { fallback = null, src, ...imgProps } = props\n  const [validImageSrc, setValidImageSrc] = useState<false | string>(false)\n\n  useEffect(() => {\n    const image = new Image()\n\n    if (typeof src === 'undefined') {\n      setValidImageSrc(false)\n    } else {\n      const sanitizedImageSrc = sanitizeImageSrc(src)\n\n      image.onerror = () => setValidImageSrc(false)\n      image.onload = () => setValidImageSrc(sanitizedImageSrc)\n      image.src = sanitizedImageSrc\n    }\n\n    return function cleanup() {\n      // Abort previous loading\n      image.src = ''\n    }\n  }, [src])\n\n  if (!validImageSrc) {\n    return fallback\n  }\n\n  // SafeImage is used for token logo, we don't know at buildtime where those images will be loaded from\n  // It would throw error if it's loaded from external domains\n  // eslint-disable-next-line @next/next/no-img-element\n  return <img {...imgProps} src={validImageSrc} alt={props.alt || ''} />\n}\n","import Tippy from '@tippyjs/react'\n\nexport type TooltipProps = {\n  show?: boolean\n  children: React.ReactNode\n  content?: React.ReactNode\n  wrapperClassName?: string\n  theme?: 'light' | 'dark'\n}\n\nexport function Tooltip({\n  show = true,\n  content,\n  wrapperClassName = 'w-max',\n  theme = 'light',\n  children\n}: TooltipProps): JSX.Element | null {\n  if (!content) {\n    return null\n  }\n\n  if (!show) {\n    return <>{children}</>\n  }\n\n  return (\n    <Tippy theme={theme} content={content}>\n      <div className={wrapperClassName}>{children}</div>\n    </Tippy>\n  )\n}\n","import React from 'react'\nimport { twMerge } from 'tailwind-merge'\n\nexport type StatusBadgeProps = React.HTMLAttributes<HTMLDivElement> & {\n  variant?: 'blue' | 'yellow' | 'green' | 'red' | 'gray'\n}\n\nconst variants: Record<string, string> = {\n  blue: 'bg-cyan text-cyan-dark',\n  yellow: 'bg-orange text-orange-dark border-orange-dark border',\n  green: 'bg-lime text-lime-dark',\n  red: 'bg-brick text-brick-dark border border-brick-dark',\n  gray: 'bg-gray-3 text-gray-dark'\n}\n\nexport function StatusBadge({\n  variant = 'blue',\n  children,\n  className,\n  ...props\n}: StatusBadgeProps): JSX.Element {\n  return (\n    <div\n      className={twMerge(\n        'status-badge flex w-max flex-nowrap items-center gap-1 rounded py-1 pl-1 pr-2 text-sm font-normal',\n        variants[variant],\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  )\n}\n","import { useAccount } from 'wagmi'\nimport { BigNumber, constants } from 'ethers'\n\nimport { useNativeCurrency } from './useNativeCurrency'\nimport { useBalance } from './useBalance'\nimport { useNetworksRelationship } from './useNetworksRelationship'\nimport { useNetworks } from './useNetworks'\nimport { ERC20BridgeToken } from './arbTokenBridge.types'\n\n/**\n * Balance of the child chain's native currency or ERC20 token\n */\nexport function useBalanceOnSourceChain(\n  token: ERC20BridgeToken | null\n): BigNumber | null {\n  const { address: walletAddress } = useAccount()\n  const [networks] = useNetworks()\n  const { childChainProvider, isDepositMode } =\n    useNetworksRelationship(networks)\n\n  const {\n    eth: [ethSourceChainBalance],\n    erc20: [erc20SourceChainBalances]\n  } = useBalance({ chainId: networks.sourceChain.id, walletAddress })\n\n  const childChainNativeCurrency = useNativeCurrency({\n    provider: childChainProvider\n  })\n\n  // user selected source chain native currency or\n  // user bridging the destination chain's native currency\n  if (!token) {\n    // check if user is depositing destination chain's custom native currency to orbit chain\n    if (childChainNativeCurrency.isCustom && isDepositMode) {\n      return (\n        erc20SourceChainBalances?.[\n          childChainNativeCurrency.address.toLowerCase()\n        ] ?? constants.Zero\n      )\n    }\n\n    // `ethSourceChainBalance` is the ETH balance at source chain when ETH is selected for bridging,\n    // or the custom gas native currency balance when withdrawing the native currency\n    return ethSourceChainBalance\n  }\n\n  if (!erc20SourceChainBalances) {\n    return constants.Zero\n  }\n\n  if (isDepositMode) {\n    return (\n      erc20SourceChainBalances[token.address.toLowerCase()] ?? constants.Zero\n    )\n  }\n\n  const tokenChildChainAddress = token.l2Address?.toLowerCase()\n\n  // token that has never been deposited so it doesn't have an l2Address\n  // this should not happen because user shouldn't be able to select it\n  if (!tokenChildChainAddress) {\n    return constants.Zero\n  }\n\n  // token withdrawal\n  return erc20SourceChainBalances[tokenChildChainAddress] ?? constants.Zero\n}\n","import { useMemo } from 'react'\nimport { twMerge } from 'tailwind-merge'\nimport {\n  CheckCircleIcon,\n  ExclamationCircleIcon\n} from '@heroicons/react/24/outline'\nimport { Chain } from 'wagmi'\n\nimport { Loader } from '../common/atoms/Loader'\nimport { useAppState } from '../../state'\nimport {\n  listIdsToNames,\n  SPECIAL_ARBITRUM_TOKEN_TOKEN_LIST_ID\n} from '../../util/TokenListUtils'\nimport { formatAmount } from '../../util/NumberUtils'\nimport { shortenAddress } from '../../util/CommonUtils'\nimport {\n  isTokenArbitrumOneNativeUSDC,\n  isTokenArbitrumSepoliaNativeUSDC,\n  sanitizeTokenName,\n  sanitizeTokenSymbol\n} from '../../util/TokenUtils'\nimport { SafeImage } from '../common/SafeImage'\nimport { getExplorerUrl, getNetworkName } from '../../util/networks'\nimport { Tooltip } from '../common/Tooltip'\nimport { StatusBadge } from '../common/StatusBadge'\nimport { ERC20BridgeToken } from '../../hooks/arbTokenBridge.types'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { useAccountType } from '../../hooks/useAccountType'\nimport { useNativeCurrency } from '../../hooks/useNativeCurrency'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { TokenLogoFallback } from './TokenInfo'\nimport { useBalanceOnSourceChain } from '../../hooks/useBalanceOnSourceChain'\n\nfunction tokenListIdsToNames(ids: number[]): string {\n  return ids\n    .map((tokenListId: number) => listIdsToNames[tokenListId])\n    .join(', ')\n}\n\nfunction StyledLoader() {\n  return (\n    <div className=\"mr-2\">\n      <Loader color=\"white\" size=\"small\" />\n    </div>\n  )\n}\n\nfunction BlockExplorerTokenLink({\n  chain,\n  address\n}: {\n  chain: Chain\n  address: string | undefined\n}) {\n  if (typeof address === 'undefined') {\n    return null\n  }\n\n  return (\n    <ExternalLink\n      href={`${getExplorerUrl(chain.id)}/token/${address}`}\n      className=\"arb-hover text-xs underline\"\n      onClick={e => e.stopPropagation()}\n    >\n      {shortenAddress(address).toLowerCase()}\n    </ExternalLink>\n  )\n}\n\nfunction TokenListInfo({ token }: { token: ERC20BridgeToken | null }) {\n  const [networks] = useNetworks()\n  const { childChain, childChainProvider } = useNetworksRelationship(networks)\n  const { isCustom: childChainNativeCurrencyIsCustom } = useNativeCurrency({\n    provider: childChainProvider\n  })\n\n  const tokenListInfo = useMemo(() => {\n    if (!token) {\n      return null\n    }\n\n    if (isTokenArbitrumOneNativeUSDC(token?.address)) {\n      return 'Native USDC on Arbitrum One'\n    }\n\n    if (isTokenArbitrumSepoliaNativeUSDC(token?.address)) {\n      return 'Native USDC on Arbitrum Sepolia'\n    }\n\n    const listIds: Set<number> = token.listIds\n    const listIdsSize = listIds.size\n    if (listIdsSize === 0) {\n      return 'Added by User'\n    }\n\n    const listIdsArray = Array.from(listIds)\n    if (listIdsSize < 2) {\n      return tokenListIdsToNames(listIdsArray)\n    }\n\n    const firstList = listIdsArray.slice(0, 1)\n    const more = listIdsSize - 1\n\n    return (\n      tokenListIdsToNames(firstList) +\n      ` and ${more} more list${more > 1 ? 's' : ''}`\n    )\n  }, [token])\n\n  if (!token) {\n    const nativeTokenChain = getNetworkName(\n      (childChainNativeCurrencyIsCustom ? childChain : networks.sourceChain).id\n    )\n    return (\n      <span className=\"flex text-xs text-white/70\">\n        Native token on {nativeTokenChain}\n      </span>\n    )\n  }\n\n  if (token?.isL2Native) {\n    return (\n      <span className=\"flex text-xs text-white/70\">\n        {`This token is native to ${getNetworkName(\n          childChain.id\n        )} and cant be bridged.`}\n      </span>\n    )\n  }\n\n  return <span className=\"flex text-xs text-white/70\">{tokenListInfo}</span>\n}\n\ninterface TokenRowProps {\n  style?: React.CSSProperties\n  onTokenSelected: (token: ERC20BridgeToken | null) => void\n  token: ERC20BridgeToken | null\n}\n\nfunction useTokenInfo(token: ERC20BridgeToken | null) {\n  const [networks] = useNetworks()\n  const { childChain, childChainProvider, parentChain, isDepositMode } =\n    useNetworksRelationship(networks)\n  const chainId = isDepositMode ? parentChain.id : childChain.id\n  const nativeCurrency = useNativeCurrency({ provider: childChainProvider })\n\n  const name = useMemo(() => {\n    if (token) {\n      return sanitizeTokenName(token.name, {\n        erc20L1Address: token.address,\n        chainId\n      })\n    }\n\n    return nativeCurrency.name\n  }, [token, nativeCurrency.name, chainId])\n\n  const symbol = useMemo(() => {\n    if (token) {\n      return sanitizeTokenSymbol(token.symbol, {\n        erc20L1Address: token.address,\n        chainId\n      })\n    }\n\n    return nativeCurrency.symbol\n  }, [token, nativeCurrency.symbol, chainId])\n\n  const logoURI = useMemo(() => {\n    if (!token) {\n      return nativeCurrency.logoUrl\n    }\n\n    return token.logoURI\n  }, [token, nativeCurrency])\n\n  const balance = useBalanceOnSourceChain(token)\n\n  const isArbitrumToken = useMemo(() => {\n    if (!token) {\n      return false\n    }\n\n    return token.listIds.has(SPECIAL_ARBITRUM_TOKEN_TOKEN_LIST_ID)\n  }, [token])\n\n  const isPotentialFakeArbitrumToken = useMemo(() => {\n    if (!token || isArbitrumToken) {\n      return false\n    }\n\n    return (\n      token.name.toLowerCase().startsWith('arb') ||\n      token.symbol.toLowerCase().startsWith('arb')\n    )\n  }, [token, isArbitrumToken])\n\n  const isBridgeable = useMemo(() => {\n    if (!token) {\n      return true\n    }\n\n    if (token?.isL2Native) {\n      return false\n    }\n\n    if (isDepositMode) {\n      return true\n    }\n\n    return typeof token?.l2Address !== 'undefined'\n  }, [isDepositMode, token])\n\n  return {\n    name,\n    symbol,\n    logoURI,\n    balance,\n    isArbitrumToken,\n    isPotentialFakeArbitrumToken,\n    isBridgeable\n  }\n}\n\nfunction ArbitrumTokenBadge() {\n  return (\n    <StatusBadge variant=\"green\" className=\"text-xs leading-extra-tight\">\n      <CheckCircleIcon className=\"h-3 w-3\" />\n      <p>\n        <span>Official</span>\n        <span className=\"hidden lg:inline\"> ARB token</span>\n      </p>\n    </StatusBadge>\n  )\n}\n\nfunction TokenBalance({ token }: { token: ERC20BridgeToken | null }) {\n  const {\n    app: {\n      arbTokenBridge: { bridgeTokens }\n    }\n  } = useAppState()\n  const { isLoading: isLoadingAccountType } = useAccountType()\n  const { balance, symbol } = useTokenInfo(token)\n\n  const isArbitrumNativeUSDC =\n    isTokenArbitrumOneNativeUSDC(token?.address) ||\n    isTokenArbitrumSepoliaNativeUSDC(token?.address)\n\n  const tokenIsAddedToTheBridge = useMemo(() => {\n    // Can happen when switching networks.\n    if (typeof bridgeTokens === 'undefined') {\n      return true\n    }\n\n    if (!token) {\n      return true\n    }\n\n    if (isArbitrumNativeUSDC) {\n      return true\n    }\n\n    return typeof bridgeTokens[token.address] !== 'undefined'\n  }, [bridgeTokens, isArbitrumNativeUSDC, token])\n\n  if (!tokenIsAddedToTheBridge) {\n    return <span className=\"arb-hover text-sm\">Import</span>\n  }\n\n  // We don't want users to be able to click on USDC before we know whether or not they are SCW users\n  if (isLoadingAccountType && isArbitrumNativeUSDC) {\n    return <StyledLoader />\n  }\n\n  return (\n    <span className=\"flex items-center whitespace-nowrap text-sm text-white/70\">\n      {balance ? (\n        formatAmount(balance, {\n          decimals: token?.decimals,\n          symbol\n        })\n      ) : (\n        <StyledLoader />\n      )}\n    </span>\n  )\n}\n\nfunction TokenContractLink({ token }: { token: ERC20BridgeToken | null }) {\n  const [networks] = useNetworks()\n  const { childChain, childChainProvider, parentChain, isDepositMode } =\n    useNetworksRelationship(networks)\n\n  const nativeCurrency = useNativeCurrency({ provider: childChainProvider })\n\n  const isCustomFeeTokenRow = token === null && nativeCurrency.isCustom\n\n  if (isCustomFeeTokenRow && isDepositMode) {\n    return (\n      <BlockExplorerTokenLink\n        chain={parentChain}\n        address={nativeCurrency.address}\n      />\n    )\n  }\n\n  if (!token) {\n    return null\n  }\n\n  if (isDepositMode) {\n    return token?.isL2Native ? (\n      <BlockExplorerTokenLink chain={childChain} address={token.address} />\n    ) : (\n      <BlockExplorerTokenLink chain={parentChain} address={token.address} />\n    )\n  }\n\n  if (typeof token.l2Address !== 'undefined') {\n    return (\n      <BlockExplorerTokenLink chain={childChain} address={token.l2Address} />\n    )\n  }\n  return (\n    <span className=\"text-xs text-white/70\">\n      This token hasn&apos;t been bridged to {getNetworkName(childChain.id)}.\n    </span>\n  )\n}\n\nexport function TokenRow({\n  style,\n  onTokenSelected,\n  token\n}: TokenRowProps): JSX.Element {\n  const {\n    name: tokenName,\n    symbol: tokenSymbol,\n    logoURI: tokenLogoURI,\n    isArbitrumToken,\n    isPotentialFakeArbitrumToken,\n    isBridgeable: tokenIsBridgeable\n  } = useTokenInfo(token)\n\n  return (\n    <button\n      type=\"button\"\n      onClick={() => onTokenSelected(token)}\n      style={{ ...style, minHeight: '84px' }}\n      disabled={!tokenIsBridgeable}\n      className={twMerge(\n        'flex w-full flex-row items-center justify-between px-4 py-3 transition duration-200 hover:bg-white/10',\n        tokenIsBridgeable\n          ? 'cursor-pointer opacity-100'\n          : 'cursor-not-allowed opacity-50'\n      )}\n    >\n      <div className=\"flex w-full flex-row items-center justify-start space-x-4\">\n        <SafeImage\n          src={tokenLogoURI}\n          alt={`${tokenName} logo`}\n          className=\"h-6 w-6 shrink-0\"\n          fallback={<TokenLogoFallback />}\n        />\n\n        <div className=\"flex w-full flex-col items-start gap-1 truncate\">\n          <div className=\"flex w-full items-center gap-1\">\n            <span className=\"text-base font-medium leading-none\">\n              {tokenSymbol}\n            </span>\n            <span className=\"text-xs text-white/70\">{tokenName}</span>\n            {isArbitrumToken && <ArbitrumTokenBadge />}\n            {isPotentialFakeArbitrumToken && (\n              <Tooltip content=\"This token is different from the official Arbitrum token (ARB).\">\n                <div className=\"box-border flex w-max flex-nowrap items-center gap-1 rounded-full border-[1px] border-gray-dark px-1 py-[2px] pr-2 text-sm\">\n                  <ExclamationCircleIcon className=\"h-3 w-3 text-gray-dark\" />\n                  <span className=\"text-xs text-gray-dark\">Careful</span>\n                </div>\n              </Tooltip>\n            )}\n          </div>\n          <TokenContractLink token={token} />\n          <TokenListInfo token={token} />\n        </div>\n        {tokenIsBridgeable && <TokenBalance token={token} />}\n      </div>\n    </button>\n  )\n}\n","import { useArbQueryParams } from '../../hooks/useArbQueryParams'\n\nexport enum ImportTokenModalStatus {\n  // \"IDLE\" is here to distinguish between the modal never being opened, and being closed after a user interaction\n  IDLE,\n  OPEN,\n  CLOSED\n}\n\nexport function getWarningTokenDescription(warningTokenType: number) {\n  switch (warningTokenType) {\n    case 0:\n      return 'a supply rebasing token'\n    case 1:\n      return 'an interest accruing token'\n    default:\n      return 'a non-standard ERC20 token'\n  }\n}\n\nexport function useTokenFromSearchParams(): {\n  tokenFromSearchParams: string | undefined\n  setTokenQueryParam: (token: string | undefined) => void\n} {\n  const [{ token: tokenFromSearchParams }, setQueryParams] = useArbQueryParams()\n\n  const setTokenQueryParam = (token: string | undefined) =>\n    setQueryParams({ token })\n\n  if (!tokenFromSearchParams) {\n    return {\n      tokenFromSearchParams: undefined,\n      setTokenQueryParam\n    }\n  }\n\n  return {\n    tokenFromSearchParams,\n    setTokenQueryParam\n  }\n}\n","import { Switch as HeadlessSwitch } from '@headlessui/react'\nimport { twMerge } from 'tailwind-merge'\n\nexport type SwitchProps = {\n  className?: string\n  label?: string\n  description?: string\n  name?: string\n  checked: boolean\n  disabled?: boolean\n  onChange: () => void\n}\n\nexport const Switch = ({\n  className,\n  label,\n  description,\n  name,\n  checked,\n  disabled,\n  onChange\n}: SwitchProps) => {\n  return (\n    <HeadlessSwitch.Group>\n      <div className=\"toggle-switch flex flex-col text-white/70 duration-200 hover:text-white\">\n        <div className=\"flex items-center gap-3\">\n          <HeadlessSwitch\n            checked={checked}\n            onChange={onChange}\n            className={twMerge(\n              'relative inline-flex h-3 w-7 items-center rounded-full transition-colors ui-checked:bg-white ui-not-checked:bg-white/50 [&:disabled]:cursor-not-allowed',\n              'duration-200 [&_span]:bg-black [&_span]:ui-checked:translate-x-[22px] [&_span]:ui-not-checked:translate-x-[3px] [&~*]:ui-checked:text-white',\n              className\n            )}\n            disabled={disabled}\n            aria-label={name}\n          >\n            <span className=\"inline-block h-[10px] w-[10px] transform rounded-full transition-transform\" />\n          </HeadlessSwitch>\n\n          {label && (\n            <HeadlessSwitch.Label\n              className={twMerge('heading mr-4 cursor-pointer text-sm')}\n            >\n              {label}\n            </HeadlessSwitch.Label>\n          )}\n        </div>\n        {description && (\n          <HeadlessSwitch.Description className=\"mt-1 pl-10 text-sm text-white/70\">\n            {description}\n          </HeadlessSwitch.Description>\n        )}\n      </div>\n    </HeadlessSwitch.Group>\n  )\n}\n","import { ChainId } from './networks'\n\nexport type TeleportEnabledToken = {\n  symbol: string\n  l1Address: string\n  allowedL3ChainIds: number[]\n}\n\nconst teleportEnabledTokens: {\n  [parentChainId: number]: TeleportEnabledToken[]\n} = {\n  [ChainId.Ethereum]: [\n    {\n      symbol: 'WETH',\n      l1Address: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n      allowedL3ChainIds: [1380012617, 70700]\n    },\n    {\n      symbol: 'RARI',\n      l1Address: '0xFca59Cd816aB1eaD66534D82bc21E7515cE441CF',\n      allowedL3ChainIds: [1380012617] // only allowed for RARI\n    }\n  ],\n  [ChainId.Sepolia]: [\n    {\n      symbol: 'WETH',\n      l1Address: '0xfff9976782d46cc05630d1f6ebab18b2324d6b14',\n      allowedL3ChainIds: [\n        1918988905 // RARI Testnet\n      ]\n    },\n    {\n      symbol: 'LINK',\n      l1Address: '0x779877A7B0D9E8603169DdbD7836e478b4624789',\n      allowedL3ChainIds: [\n        1918988905 // RARI Testnet\n      ]\n    }\n  ]\n}\n\nexport function isTeleportEnabledToken(\n  erc20L1Address: string,\n  parentChainId: number,\n  childChainId: number\n) {\n  // check teleport enabled tokens and return true if the token is not enabled\n  return (teleportEnabledTokens[parentChainId] ?? [])\n    .filter(token => token.allowedL3ChainIds.includes(childChainId))\n    .map(token => token.l1Address.toLowerCase())\n    .includes(erc20L1Address.toLowerCase())\n}\n","import React, { FormEventHandler, useMemo, useState, useCallback } from 'react'\nimport { isAddress } from 'ethers/lib/utils'\nimport Image from 'next/image'\nimport { useAccount } from 'wagmi'\nimport { AutoSizer, List, ListRowProps } from 'react-virtualized'\nimport { twMerge } from 'tailwind-merge'\n\nimport { useActions, useAppState } from '../../state'\nimport {\n  BRIDGE_TOKEN_LISTS,\n  BridgeTokenList,\n  addBridgeTokenListToBridge,\n  SPECIAL_ARBITRUM_TOKEN_TOKEN_LIST_ID\n} from '../../util/TokenListUtils'\nimport {\n  fetchErc20Data,\n  erc20DataToErc20BridgeToken,\n  isTokenArbitrumOneNativeUSDC,\n  isTokenArbitrumSepoliaNativeUSDC,\n  isTokenArbitrumOneUSDCe,\n  getL2ERC20Address\n} from '../../util/TokenUtils'\nimport { Button } from '../common/Button'\nimport { useTokensFromLists, useTokensFromUser } from './TokenSearchUtils'\nimport { ERC20BridgeToken, TokenType } from '../../hooks/arbTokenBridge.types'\nimport { useTokenLists } from '../../hooks/useTokenLists'\nimport { warningToast } from '../common/atoms/Toast'\nimport { CommonAddress } from '../../util/CommonAddressUtils'\nimport { ArbOneNativeUSDC } from '../../util/L2NativeUtils'\nimport { getNetworkName, isNetwork } from '../../util/networks'\nimport { useUpdateUSDCBalances } from '../../hooks/CCTP/useUpdateUSDCBalances'\nimport { useAccountType } from '../../hooks/useAccountType'\nimport { useNativeCurrency } from '../../hooks/useNativeCurrency'\nimport { SearchPanelTable } from '../common/SearchPanel/SearchPanelTable'\nimport { SearchPanel } from '../common/SearchPanel/SearchPanel'\nimport { TokenRow } from './TokenRow'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { useTransferDisabledDialogStore } from './TransferDisabledDialog'\nimport { isWithdrawOnlyToken } from '../../util/WithdrawOnlyUtils'\nimport { isTransferDisabledToken } from '../../util/TokenTransferDisabledUtils'\nimport { useTokenFromSearchParams } from './TransferPanelUtils'\nimport { Switch } from '../common/atoms/Switch'\nimport { isTeleportEnabledToken } from '../../util/TokenTeleportEnabledUtils'\nimport { useBalances } from '../../hooks/useBalances'\n\nexport const ARB_ONE_NATIVE_USDC_TOKEN = {\n  ...ArbOneNativeUSDC,\n  listIds: new Set<number>(),\n  type: TokenType.ERC20,\n  // the address field is for L1 address but native USDC does not have an L1 address\n  // the L2 address is used instead to avoid errors\n  address: CommonAddress.ArbitrumOne.USDC,\n  l2Address: CommonAddress.ArbitrumOne.USDC\n}\n\nexport const ARB_SEPOLIA_NATIVE_USDC_TOKEN = {\n  ...ArbOneNativeUSDC,\n  listIds: new Set<number>(),\n  type: TokenType.ERC20,\n  address: CommonAddress.ArbitrumSepolia.USDC,\n  l2Address: CommonAddress.ArbitrumSepolia.USDC\n}\n\nfunction TokenListRow({ tokenList }: { tokenList: BridgeTokenList }) {\n  const {\n    app: { arbTokenBridge }\n  } = useAppState()\n  const { bridgeTokens, token } = arbTokenBridge\n\n  const toggleTokenList = useCallback(\n    (bridgeTokenList: BridgeTokenList, isActive: boolean) => {\n      if (isActive) {\n        token.removeTokensFromList(bridgeTokenList.id)\n      } else {\n        addBridgeTokenListToBridge(bridgeTokenList, arbTokenBridge)\n      }\n    },\n    [arbTokenBridge, token]\n  )\n\n  const isActive = Object.keys(bridgeTokens ?? []).some(address => {\n    const token = bridgeTokens?.[address]\n    return token?.listIds.has(tokenList?.id)\n  })\n\n  const switchOnClick = useCallback(\n    () => toggleTokenList(tokenList, isActive),\n    [isActive, toggleTokenList, tokenList]\n  )\n\n  return (\n    <label\n      key={tokenList.id}\n      className=\"flex cursor-pointer items-center justify-start space-x-3 duration-200 [&:hover_img]:opacity-100 [&:hover_span]:text-white\"\n    >\n      <Switch\n        name={`${tokenList.name} toggle`}\n        checked={isActive}\n        onChange={switchOnClick}\n      />\n      <div className=\"flex items-center gap-2\">\n        <Image\n          src={tokenList.logoURI}\n          alt={`${tokenList.name} Logo`}\n          className={twMerge(\n            'h-4 w-4 rounded-full transition-opacity',\n            !isActive && 'opacity-70'\n          )}\n          width={16}\n          height={16}\n        />\n        <span\n          className={twMerge(\n            'text-sm transition-colors',\n            !isActive && 'text-white/70'\n          )}\n        >\n          {tokenList.name}\n        </span>\n      </div>\n    </label>\n  )\n}\n\nfunction TokenListsPanel({ closePanel }: { closePanel: () => void }) {\n  const [networks] = useNetworks()\n  const { childChain } = useNetworksRelationship(networks)\n\n  const listsToShow: BridgeTokenList[] = useMemo(() => {\n    return BRIDGE_TOKEN_LISTS.filter(tokenList => {\n      if (!tokenList.isValid) {\n        return false\n      }\n\n      // Don't show the Arbitrum Token token list, because it's special and can't be disabled\n      if (tokenList.isArbitrumTokenTokenList) {\n        return false\n      }\n\n      return tokenList.originChainID === childChain.id\n    })\n  }, [childChain.id])\n\n  return (\n    <>\n      <SearchPanel.PageTitle title=\"Token Lists\">\n        <SearchPanel.CloseButton onClick={closePanel} />\n      </SearchPanel.PageTitle>\n      <div className=\"flex flex-col gap-6 rounded-md border border-gray-dark p-6 text-white\">\n        {listsToShow.map(tokenList => (\n          <TokenListRow key={tokenList.id} tokenList={tokenList} />\n        ))}\n        {listsToShow.length === 0 && (\n          <span className=\"text-sm leading-relaxed\">\n            Sorry, there are no lists of tokens bridged from{' '}\n            {getNetworkName(networks.sourceChain.id)} to{' '}\n            {getNetworkName(networks.destinationChain.id)}.\n          </span>\n        )}\n      </div>\n    </>\n  )\n}\n\nconst NATIVE_CURRENCY_IDENTIFIER = 'native_currency'\n\nfunction TokensPanel({\n  onTokenSelected\n}: {\n  onTokenSelected: (token: ERC20BridgeToken | null) => void\n}): JSX.Element {\n  const { address: walletAddress } = useAccount()\n  const {\n    app: {\n      arbTokenBridge: { token, bridgeTokens }\n    }\n  } = useAppState()\n  const [networks] = useNetworks()\n  const { childChain, childChainProvider, parentChain, isDepositMode } =\n    useNetworksRelationship(networks)\n  const {\n    ethParentBalance,\n    erc20ParentBalances,\n    ethChildBalance,\n    erc20ChildBalances\n  } = useBalances({\n    parentWalletAddress: walletAddress,\n    childWalletAddress: walletAddress\n  })\n\n  const nativeCurrency = useNativeCurrency({ provider: childChainProvider })\n\n  const {\n    isArbitrumOne: isParentChainArbitrumOne,\n    isArbitrumSepolia: isParentChainArbitrumSepolia\n  } = isNetwork(parentChain.id)\n  const { isArbitrumOne, isArbitrumSepolia, isOrbitChain } = isNetwork(\n    childChain.id\n  )\n  const tokensFromUser = useTokensFromUser()\n  const tokensFromLists = useTokensFromLists()\n\n  const [newToken, setNewToken] = useState('')\n  const [errorMessage, setErrorMessage] = useState('')\n  const [isAddingToken, setIsAddingToken] = useState(false)\n\n  const getBalance = useCallback(\n    (address: string) => {\n      if (address === NATIVE_CURRENCY_IDENTIFIER) {\n        if (nativeCurrency.isCustom) {\n          return isDepositMode\n            ? erc20ParentBalances?.[nativeCurrency.address]\n            : ethChildBalance\n        }\n\n        return isDepositMode ? ethParentBalance : ethChildBalance\n      }\n\n      if (isDepositMode) {\n        return erc20ParentBalances?.[address.toLowerCase()]\n      }\n\n      if (typeof bridgeTokens === 'undefined') {\n        return null\n      }\n\n      if (\n        isTokenArbitrumOneNativeUSDC(address) ||\n        isTokenArbitrumSepoliaNativeUSDC(address)\n      ) {\n        return erc20ChildBalances?.[address.toLowerCase()]\n      }\n\n      const l2Address = bridgeTokens[address.toLowerCase()]?.l2Address\n      return l2Address ? erc20ChildBalances?.[l2Address.toLowerCase()] : null\n    },\n    [\n      nativeCurrency,\n      bridgeTokens,\n      erc20ParentBalances,\n      erc20ChildBalances,\n      ethParentBalance,\n      ethChildBalance,\n      isDepositMode\n    ]\n  )\n\n  const tokensToShow = useMemo(() => {\n    const tokenSearch = newToken.trim().toLowerCase()\n    const tokenAddresses = [\n      ...Object.keys(tokensFromUser),\n      ...Object.keys(tokensFromLists)\n    ]\n    if (!isDepositMode) {\n      // L2 to L1 withdrawals\n      if (isArbitrumOne) {\n        tokenAddresses.push(CommonAddress.ArbitrumOne.USDC)\n      }\n      if (isArbitrumSepolia) {\n        tokenAddresses.push(CommonAddress.ArbitrumSepolia.USDC)\n      }\n    } else {\n      // L2 to L3 deposits\n      if (isParentChainArbitrumOne) {\n        tokenAddresses.push(CommonAddress.ArbitrumOne.USDC)\n      }\n      if (isParentChainArbitrumSepolia) {\n        tokenAddresses.push(CommonAddress.ArbitrumSepolia.USDC)\n      }\n    }\n\n    const tokens = [\n      NATIVE_CURRENCY_IDENTIFIER,\n      // Deduplicate addresses\n      ...new Set(tokenAddresses)\n    ]\n    return tokens\n      .filter(address => {\n        // Derive the token object from the address string\n        let token = tokensFromUser[address] || tokensFromLists[address]\n\n        if (isTokenArbitrumOneNativeUSDC(address)) {\n          // for token search as Arb One native USDC isn't in any lists\n          token = ARB_ONE_NATIVE_USDC_TOKEN\n        }\n\n        if (isTokenArbitrumSepoliaNativeUSDC(address)) {\n          // for token search as Arb One native USDC isn't in any lists\n          token = ARB_SEPOLIA_NATIVE_USDC_TOKEN\n        }\n\n        if (isTokenArbitrumOneUSDCe(address) && isDepositMode && isOrbitChain) {\n          // hide USDC.e if depositing to an Orbit chain\n          return false\n        }\n\n        // If the token on the list is used as a custom fee token, we remove the duplicate\n        if (\n          nativeCurrency.isCustom &&\n          address.toLowerCase() === nativeCurrency.address.toLowerCase()\n        ) {\n          return false\n        }\n\n        // Which tokens to show while the search is not active\n        if (!tokenSearch) {\n          // Always show native currency\n          if (address === NATIVE_CURRENCY_IDENTIFIER) {\n            return true\n          }\n\n          // Always show official ARB token except from or to Orbit chain\n          if (token?.listIds.has(SPECIAL_ARBITRUM_TOKEN_TOKEN_LIST_ID)) {\n            return !isOrbitChain\n          }\n\n          const balance = getBalance(address)\n          // Only show tokens with a balance greater than zero\n          return balance && balance.gt(0)\n        }\n\n        if (address === NATIVE_CURRENCY_IDENTIFIER) {\n          return `${nativeCurrency.name}${nativeCurrency.symbol}`\n            .toLowerCase()\n            .includes(tokenSearch)\n        }\n\n        if (!token) {\n          return false\n        }\n\n        const { name, symbol, address: tokenAddress, l2Address = '' } = token\n\n        return (name + symbol + tokenAddress + l2Address)\n          .toLowerCase()\n          .includes(tokenSearch)\n      })\n      .sort((address1: string, address2: string) => {\n        // Pin native currency to top\n        if (address1 === NATIVE_CURRENCY_IDENTIFIER) {\n          return -1\n        }\n\n        // Pin native currency to top\n        if (address2 === NATIVE_CURRENCY_IDENTIFIER) {\n          return 1\n        }\n\n        const bal1 = getBalance(address1)\n        const bal2 = getBalance(address2)\n\n        if (!(bal1 || bal2)) {\n          return 0\n        }\n        if (!bal1) {\n          return 1\n        }\n        if (!bal2) {\n          return -1\n        }\n        return bal1.gt(bal2) ? -1 : 1\n      })\n  }, [\n    newToken,\n    tokensFromUser,\n    tokensFromLists,\n    isDepositMode,\n    isArbitrumOne,\n    isArbitrumSepolia,\n    isOrbitChain,\n    getBalance,\n    nativeCurrency\n  ])\n\n  const storeNewToken = async () => {\n    if (!walletAddress) {\n      return\n    }\n\n    let error = 'Token not found on this network.'\n    let isSuccessful = false\n\n    try {\n      // Try to add the token as an L2-native token\n      token.addL2NativeToken(newToken)\n      isSuccessful = true\n    } catch (error) {\n      //\n    }\n\n    try {\n      // Try to add the token as a regular bridged token\n      await token.add(newToken)\n      isSuccessful = true\n    } catch (ex: any) {\n      if (ex.name === 'TokenDisabledError') {\n        error = 'This token is currently paused in the bridge.'\n      }\n    }\n\n    // Only show error message if neither succeeded\n    if (!isSuccessful) {\n      setErrorMessage(error)\n    }\n  }\n\n  const addNewToken: FormEventHandler = async e => {\n    e.preventDefault()\n    setErrorMessage('')\n\n    if (!isAddress(newToken) || isAddingToken) {\n      return\n    }\n\n    setIsAddingToken(true)\n\n    try {\n      await storeNewToken()\n    } catch (ex) {\n      console.log(ex)\n    } finally {\n      setIsAddingToken(false)\n    }\n  }\n\n  const onSearchInputChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      setErrorMessage('')\n      setNewToken(event.target.value)\n    },\n    []\n  )\n\n  const rowRenderer = useCallback(\n    (virtualizedProps: ListRowProps) => {\n      const address = tokensToShow[virtualizedProps.index]\n      let token: ERC20BridgeToken | null = null\n\n      if (isTokenArbitrumOneNativeUSDC(address)) {\n        token = ARB_ONE_NATIVE_USDC_TOKEN\n      } else if (isTokenArbitrumSepoliaNativeUSDC(address)) {\n        token = ARB_SEPOLIA_NATIVE_USDC_TOKEN\n      } else if (address) {\n        token = tokensFromLists[address] || tokensFromUser[address] || null\n      }\n\n      if (address === NATIVE_CURRENCY_IDENTIFIER) {\n        return (\n          <TokenRow\n            key=\"TokenRowNativeCurrency\"\n            onTokenSelected={onTokenSelected}\n            token={null}\n          />\n        )\n      }\n\n      return (\n        <TokenRow\n          key={address}\n          style={virtualizedProps.style}\n          onTokenSelected={onTokenSelected}\n          token={token}\n        />\n      )\n    },\n    [tokensToShow, tokensFromLists, tokensFromUser, onTokenSelected]\n  )\n\n  const AddButton = useMemo(\n    () => (\n      <Button\n        type=\"submit\"\n        variant=\"secondary\"\n        loading={isAddingToken}\n        loadingProps={{ loaderColor: '#999999' /** text-gray-6 */ }}\n        disabled={!isAddress(newToken)}\n        className=\"border border-gray-dark py-1\"\n        aria-label=\"Add New Token\"\n      >\n        Add\n      </Button>\n    ),\n    [isAddingToken, newToken]\n  )\n\n  return (\n    <SearchPanelTable\n      searchInputPlaceholder=\"Search by token name, symbol, or address\"\n      searchInputValue={newToken}\n      searchInputOnChange={onSearchInputChange}\n      errorMessage={errorMessage}\n      onSubmit={addNewToken}\n      SearchInputButton={AddButton}\n      dataCy=\"tokenSearchList\"\n    >\n      <AutoSizer>\n        {({ height, width }) => (\n          <List\n            width={width - 2}\n            height={height}\n            rowCount={tokensToShow.length}\n            rowHeight={84}\n            rowRenderer={rowRenderer}\n          />\n        )}\n      </AutoSizer>\n    </SearchPanelTable>\n  )\n}\n\nexport function TokenSearch({\n  className,\n  close\n}: {\n  className?: string\n  close: () => void\n}) {\n  const { address: walletAddress } = useAccount()\n  const {\n    app: {\n      arbTokenBridge: { token, bridgeTokens }\n    }\n  } = useAppState()\n  const {\n    app: { setSelectedToken }\n  } = useActions()\n  const [networks] = useNetworks()\n  const {\n    childChain,\n    childChainProvider,\n    parentChain,\n    parentChainProvider,\n    isDepositMode,\n    isTeleportMode\n  } = useNetworksRelationship(networks)\n  const { updateUSDCBalances } = useUpdateUSDCBalances({ walletAddress })\n  const { isLoading: isLoadingAccountType } = useAccountType()\n  const { openDialog: openTransferDisabledDialog } =\n    useTransferDisabledDialogStore()\n  const { setTokenQueryParam } = useTokenFromSearchParams()\n\n  const { isValidating: isFetchingTokenLists } = useTokenLists(childChain.id) // to show a small loader while token-lists are loading when search panel opens\n\n  async function selectToken(_token: ERC20BridgeToken | null) {\n    close()\n\n    if (_token === null) {\n      setSelectedToken(null)\n      return\n    }\n\n    if (!_token.address) {\n      return\n    }\n\n    if (typeof bridgeTokens === 'undefined') {\n      return\n    }\n\n    try {\n      // Native USDC on L2 won't have a corresponding L1 address\n      const isNativeUSDC =\n        isTokenArbitrumOneNativeUSDC(_token.address) ||\n        isTokenArbitrumSepoliaNativeUSDC(_token.address)\n\n      if (isNativeUSDC) {\n        if (isLoadingAccountType) {\n          return\n        }\n\n        await updateUSDCBalances()\n\n        // if an Orbit chain is selected we need to fetch its USDC address\n        let childChainUsdcAddress\n        try {\n          childChainUsdcAddress = isNetwork(childChain.id).isOrbitChain\n            ? (\n                await getL2ERC20Address({\n                  erc20L1Address: _token.address,\n                  l1Provider: parentChainProvider,\n                  l2Provider: childChainProvider\n                })\n              ).toLowerCase()\n            : undefined\n        } catch {\n          // could be never bridged before\n        }\n\n        setSelectedToken({\n          name: 'USD Coin',\n          type: TokenType.ERC20,\n          symbol: 'USDC',\n          address: _token.address,\n          l2Address: childChainUsdcAddress,\n          decimals: 6,\n          listIds: new Set()\n        })\n        return\n      }\n\n      // Token not added to the bridge, so we'll handle importing it\n      if (typeof bridgeTokens[_token.address] === 'undefined') {\n        setTokenQueryParam(_token.address)\n        return\n      }\n\n      if (!walletAddress) {\n        return\n      }\n\n      const data = await fetchErc20Data({\n        address: _token.address,\n        provider: parentChainProvider\n      })\n\n      if (data) {\n        token.updateTokenData(_token.address)\n        setSelectedToken({\n          ...erc20DataToErc20BridgeToken(data),\n          l2Address: _token.l2Address\n        })\n      }\n\n      // do not allow import of withdraw-only tokens at deposit mode\n      if (isDepositMode && isWithdrawOnlyToken(_token.address, childChain.id)) {\n        openTransferDisabledDialog()\n        return\n      }\n\n      if (isTransferDisabledToken(_token.address, childChain.id)) {\n        openTransferDisabledDialog()\n        return\n      }\n\n      if (\n        isTeleportMode &&\n        !isTeleportEnabledToken(_token.address, parentChain.id, childChain.id)\n      ) {\n        openTransferDisabledDialog()\n        return\n      }\n    } catch (error: any) {\n      console.warn(error)\n\n      if (error.name === 'TokenDisabledError') {\n        warningToast('This token is currently paused in the bridge')\n      }\n    }\n  }\n\n  return (\n    <SearchPanel>\n      <SearchPanel.MainPage className={className}>\n        <SearchPanel.PageTitle title=\"Select Token\">\n          <SearchPanel.CloseButton onClick={close} />\n        </SearchPanel.PageTitle>\n        <TokensPanel onTokenSelected={selectToken} />\n        <div className=\"flex justify-end pt-4\">\n          {isFetchingTokenLists ? (\n            <SearchPanel.LoaderWithMessage loadingMessage=\"Fetching Tokens...\" />\n          ) : (\n            <SearchPanel.MainPageCTA>\n              Manage token lists\n            </SearchPanel.MainPageCTA>\n          )}\n        </div>\n      </SearchPanel.MainPage>\n      <SearchPanel.SecondaryPage className={className}>\n        <TokenListsPanel closePanel={close} />\n        <SearchPanel.SecondaryPageCTA>\n          Back to Select Token\n        </SearchPanel.SecondaryPageCTA>\n      </SearchPanel.SecondaryPage>\n    </SearchPanel>\n  )\n}\n","import { useMemo } from 'react'\n\nimport { ERC20BridgeToken } from '../../hooks/arbTokenBridge.types'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { getExplorerUrl } from '../../util/networks'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { shortenAddress } from '../../util/CommonUtils'\nimport { useTokensFromLists, useTokensFromUser } from './TokenSearchUtils'\nimport {\n  ARB_ONE_NATIVE_USDC_TOKEN,\n  ARB_SEPOLIA_NATIVE_USDC_TOKEN\n} from './TokenSearch'\nimport {\n  isTokenArbitrumOneNativeUSDC,\n  isTokenArbitrumSepoliaNativeUSDC\n} from '../../util/TokenUtils'\nimport { SafeImage } from '../common/SafeImage'\n\nexport function TokenLogoFallback() {\n  return (\n    <div className=\"flex h-6 w-6 shrink-0 items-center justify-center rounded-full border border-white/30 bg-gray-dark text-sm font-medium\">\n      ?\n    </div>\n  )\n}\n\nexport const TokenInfo = ({\n  token,\n  showFullAddress\n}: {\n  token: ERC20BridgeToken | null | undefined\n  showFullAddress?: boolean\n}) => {\n  const [networks] = useNetworks()\n  const tokensFromUser = useTokensFromUser()\n  const tokensFromLists = useTokensFromLists()\n  const tokenAddressLowercased = token?.address.toLowerCase()\n\n  const tokenLogo = useMemo(() => {\n    if (!tokenAddressLowercased) {\n      return undefined\n    }\n\n    if (isTokenArbitrumOneNativeUSDC(tokenAddressLowercased)) {\n      return ARB_ONE_NATIVE_USDC_TOKEN.logoURI\n    }\n\n    if (isTokenArbitrumSepoliaNativeUSDC(tokenAddressLowercased)) {\n      return ARB_SEPOLIA_NATIVE_USDC_TOKEN.logoURI\n    }\n\n    return (\n      tokensFromLists[tokenAddressLowercased]?.logoURI ||\n      tokensFromUser[tokenAddressLowercased]?.logoURI\n    )\n  }, [tokenAddressLowercased, tokensFromLists, tokensFromUser])\n\n  return (\n    <div className=\"flex flex-row items-center space-x-3\">\n      <SafeImage\n        src={tokenLogo}\n        alt=\"Token logo\"\n        className=\"h-6 w-6 grow-0\"\n        fallback={<TokenLogoFallback />}\n      />\n      <div className=\"flex flex-col\">\n        <div className=\"flex items-center space-x-1\">\n          <span className=\"text-base\">{token?.symbol}</span>\n          <span className=\"text-xs text-white/70\">{token?.name}</span>\n        </div>\n        {tokenAddressLowercased && (\n          <ExternalLink\n            href={`${getExplorerUrl(\n              networks.sourceChain.id\n            )}/token/${tokenAddressLowercased}`}\n            className=\"arb-hover text-xs underline\"\n          >\n            {showFullAddress\n              ? tokenAddressLowercased\n              : shortenAddress(tokenAddressLowercased)}\n          </ExternalLink>\n        )}\n      </div>\n    </div>\n  )\n}\n","import { useAccount } from 'wagmi'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport { useLatest } from 'react-use'\nimport { create } from 'zustand'\n\nimport { useERC20L1Address } from '../../hooks/useERC20L1Address'\nimport { useActions, useAppState } from '../../state'\nimport {\n  erc20DataToErc20BridgeToken,\n  fetchErc20Data,\n  isValidErc20\n} from '../../util/TokenUtils'\nimport { Loader } from '../common/atoms/Loader'\nimport { Dialog, UseDialogProps } from '../common/Dialog'\nimport { useTokensFromLists, useTokensFromUser } from './TokenSearchUtils'\nimport { ERC20BridgeToken } from '../../hooks/arbTokenBridge.types'\nimport { warningToast } from '../common/atoms/Toast'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { isWithdrawOnlyToken } from '../../util/WithdrawOnlyUtils'\nimport { isTransferDisabledToken } from '../../util/TokenTransferDisabledUtils'\nimport { useTransferDisabledDialogStore } from './TransferDisabledDialog'\nimport { TokenInfo } from './TokenInfo'\nimport { NoteBox } from '../common/NoteBox'\nimport { isTeleportEnabledToken } from '../../util/TokenTeleportEnabledUtils'\n\nenum ImportStatus {\n  LOADING,\n  KNOWN,\n  KNOWN_UNIMPORTED,\n  UNKNOWN,\n  ERROR\n}\n\ntype TokenListSearchResult =\n  | {\n      found: false\n    }\n  | {\n      found: true\n      token: ERC20BridgeToken\n      status: ImportStatus\n    }\n\ntype TokenImportDialogStore = {\n  isOpen: boolean\n  openDialog: () => void\n  closeDialog: () => void\n}\n\nexport const useTokenImportDialogStore = create<TokenImportDialogStore>(\n  set => ({\n    isOpen: false,\n    openDialog: () => set({ isOpen: true }),\n    closeDialog: () => set({ isOpen: false })\n  })\n)\n\ntype TokenImportDialogProps = Omit<UseDialogProps, 'isOpen'> & {\n  tokenAddress: string\n}\n\nexport function TokenImportDialog({\n  onClose,\n  tokenAddress\n}: TokenImportDialogProps): JSX.Element {\n  const { address: walletAddress } = useAccount()\n  const {\n    app: {\n      arbTokenBridge: { bridgeTokens, token },\n      selectedToken\n    }\n  } = useAppState()\n  const [networks] = useNetworks()\n  const {\n    childChain,\n    childChainProvider,\n    parentChain,\n    parentChainProvider,\n    isDepositMode,\n    isTeleportMode\n  } = useNetworksRelationship(networks)\n  const actions = useActions()\n\n  const tokensFromUser = useTokensFromUser()\n  const latestTokensFromUser = useLatest(tokensFromUser)\n\n  const tokensFromLists = useTokensFromLists()\n  const latestTokensFromLists = useLatest(tokensFromLists)\n\n  const latestBridgeTokens = useLatest(bridgeTokens)\n\n  const [status, setStatus] = useState<ImportStatus>(ImportStatus.LOADING)\n  const [isImportingToken, setIsImportingToken] = useState<boolean>(false)\n  const [tokenToImport, setTokenToImport] = useState<ERC20BridgeToken>()\n  const { openDialog: openTransferDisabledDialog } =\n    useTransferDisabledDialogStore()\n  const { isOpen } = useTokenImportDialogStore()\n  const [isDialogVisible, setIsDialogVisible] = useState(false)\n  const { data: l1Address, isLoading: isL1AddressLoading } = useERC20L1Address({\n    eitherL1OrL2Address: tokenAddress,\n    l2Provider: childChainProvider\n  })\n\n  // we use a different state to handle dialog visibility to trigger the entry transition,\n  // otherwise if we only used isOpen then the transition would never trigger because\n  // we conditionally render the component and we'd always start with isOpen as true\n  //\n  // for the transition to work we need to start as false and update it to true\n  useEffect(() => {\n    setIsDialogVisible(isOpen)\n  }, [isOpen])\n\n  const modalTitle = useMemo(() => {\n    switch (status) {\n      case ImportStatus.LOADING:\n        return 'Loading token'\n      case ImportStatus.KNOWN:\n      case ImportStatus.KNOWN_UNIMPORTED:\n        return 'Import known token'\n      case ImportStatus.UNKNOWN:\n        return 'Import unknown token'\n      case ImportStatus.ERROR:\n        return 'Invalid token address'\n    }\n  }, [status])\n\n  const getL1TokenDataFromL1Address = useCallback(async () => {\n    if (!l1Address || !walletAddress) {\n      return\n    }\n\n    const erc20Params = { address: l1Address, provider: parentChainProvider }\n\n    if (!(await isValidErc20(erc20Params))) {\n      throw new Error(`${l1Address} is not a valid ERC-20 token`)\n    }\n\n    return fetchErc20Data(erc20Params)\n  }, [parentChainProvider, walletAddress, l1Address])\n\n  const searchForTokenInLists = useCallback(\n    (erc20L1Address: string): TokenListSearchResult => {\n      // We found the token in an imported list\n      const currentBridgeTokens = latestBridgeTokens.current\n      if (typeof currentBridgeTokens === 'undefined') {\n        return { found: false }\n      }\n\n      const l1Token = currentBridgeTokens[erc20L1Address]\n      if (typeof l1Token !== 'undefined') {\n        return {\n          found: true,\n          token: l1Token,\n          status: ImportStatus.KNOWN\n        }\n      }\n\n      const tokens = {\n        ...latestTokensFromLists.current,\n        ...latestTokensFromUser.current\n      }\n\n      const token = tokens[erc20L1Address]\n      // We found the token in an unimported list\n      if (typeof token !== 'undefined') {\n        return {\n          found: true,\n          token,\n          status: ImportStatus.KNOWN_UNIMPORTED\n        }\n      }\n\n      return { found: false }\n    },\n    [latestBridgeTokens, latestTokensFromLists, latestTokensFromUser]\n  )\n\n  const selectToken = useCallback(\n    async (_token: ERC20BridgeToken) => {\n      await token.updateTokenData(_token.address)\n      actions.app.setSelectedToken(_token)\n    },\n    [token, actions]\n  )\n\n  useEffect(() => {\n    if (!isOpen) {\n      return\n    }\n\n    if (typeof bridgeTokens === 'undefined') {\n      return\n    }\n\n    if (!isL1AddressLoading && !l1Address) {\n      setStatus(ImportStatus.ERROR)\n      return\n    }\n\n    if (l1Address) {\n      const searchResult1 = searchForTokenInLists(l1Address)\n\n      if (searchResult1.found) {\n        setStatus(searchResult1.status)\n        setTokenToImport(searchResult1.token)\n\n        return\n      }\n    }\n\n    // Can't find the address provided, so we look further\n    getL1TokenDataFromL1Address()\n      .then(data => {\n        if (!data) {\n          return\n        }\n\n        // We couldn't find the address within our lists\n        setStatus(ImportStatus.UNKNOWN)\n        setTokenToImport(erc20DataToErc20BridgeToken(data))\n      })\n      .catch(() => {\n        setStatus(ImportStatus.ERROR)\n      })\n  }, [\n    tokenAddress,\n    bridgeTokens,\n    getL1TokenDataFromL1Address,\n    isL1AddressLoading,\n    isOpen,\n    l1Address,\n    searchForTokenInLists\n  ])\n\n  useEffect(() => {\n    if (!isOpen) {\n      return\n    }\n\n    if (isL1AddressLoading && !l1Address) {\n      return\n    }\n\n    const foundToken = tokensFromUser[l1Address || tokenAddress]\n\n    if (typeof foundToken === 'undefined') {\n      return\n    }\n\n    // Listen for the token to be added to the bridge so we can automatically select it\n    if (foundToken.address !== selectedToken?.address) {\n      onClose(true)\n      selectToken(foundToken)\n    }\n  }, [\n    isL1AddressLoading,\n    tokenAddress,\n    isOpen,\n    l1Address,\n    onClose,\n    selectToken,\n    selectedToken,\n    tokensFromUser\n  ])\n\n  async function storeNewToken(newToken: string) {\n    return token.add(newToken).catch((ex: Error) => {\n      setStatus(ImportStatus.ERROR)\n\n      if (ex.name === 'TokenDisabledError') {\n        warningToast('This token is currently paused in the bridge')\n      }\n    })\n  }\n\n  function handleTokenImport() {\n    if (typeof bridgeTokens === 'undefined') {\n      return\n    }\n\n    if (isImportingToken) {\n      return\n    }\n\n    setIsImportingToken(true)\n\n    if (!l1Address) {\n      return\n    }\n\n    if (typeof bridgeTokens[l1Address] !== 'undefined') {\n      // Token is already added to the bridge\n      onClose(true)\n      selectToken(tokenToImport!)\n    } else {\n      // Token is not added to the bridge, so we add it\n      storeNewToken(l1Address).catch(() => {\n        setStatus(ImportStatus.ERROR)\n      })\n    }\n\n    // do not allow import of withdraw-only tokens at deposit mode\n    if (isDepositMode && isWithdrawOnlyToken(l1Address, childChain.id)) {\n      openTransferDisabledDialog()\n      return\n    }\n\n    if (isTransferDisabledToken(l1Address, childChain.id)) {\n      openTransferDisabledDialog()\n      return\n    }\n\n    if (\n      isTeleportMode &&\n      !isTeleportEnabledToken(l1Address, parentChain.id, childChain.id)\n    ) {\n      openTransferDisabledDialog()\n      return\n    }\n  }\n\n  if (status === ImportStatus.LOADING) {\n    return (\n      <Dialog\n        isOpen={isDialogVisible}\n        onClose={onClose}\n        title={modalTitle}\n        actionButtonProps={{ hidden: true }}\n      >\n        <div className=\"flex h-48 items-center justify-center\">\n          <Loader color=\"white\" size=\"medium\" />\n        </div>\n      </Dialog>\n    )\n  }\n\n  if (status === ImportStatus.ERROR) {\n    return (\n      <Dialog\n        isOpen={isDialogVisible}\n        onClose={onClose}\n        title={modalTitle}\n        actionButtonProps={{ hidden: true }}\n      >\n        <span className=\"flex py-4\">\n          Whoops, looks like this token address is invalid. Try asking the token\n          team to update their link.\n        </span>\n      </Dialog>\n    )\n  }\n\n  return (\n    <Dialog\n      isOpen={isDialogVisible}\n      onClose={onClose}\n      title={modalTitle}\n      actionButtonProps={{\n        loading: isImportingToken,\n        onClick: handleTokenImport\n      }}\n      actionButtonTitle=\"Import token\"\n    >\n      <div className=\"flex flex-col space-y-4 pt-4\">\n        {status === ImportStatus.KNOWN && (\n          <span>This token is on an imported token list:</span>\n        )}\n\n        {status === ImportStatus.KNOWN_UNIMPORTED && (\n          <span>\n            This token hasn&apos;t been imported yet but appears on a token\n            list:\n          </span>\n        )}\n\n        <div className=\"flex flex-col pb-4\">\n          <TokenInfo token={tokenToImport} showFullAddress />\n\n          {status === ImportStatus.UNKNOWN && (\n            <NoteBox className=\"mt-4\" variant=\"warning\">\n              <div className=\"flex flex-col space-y-2\">\n                <p>\n                  This token address doesn&apos;t exist in any of the token\n                  lists we have. This doesn&apos;t mean it&apos;s not good, it\n                  just means{' '}\n                  <span className=\"font-bold\">proceed with caution.</span>\n                </p>\n                <p>\n                  It&apos;s easy to impersonate the name of any token, including\n                  ETH. Make sure you trust the source it came from. If it&apos;s\n                  a popular token, there&apos;s a good chance we have it on our\n                  list. If it&apos;s a smaller or newer token, it&apos;s\n                  reasonable to believe we might not have it.\n                </p>\n              </div>\n            </NoteBox>\n          )}\n\n          <NoteBox className=\"mt-4\">\n            <span className=\"font-medium\">\n              Non-standard tokens aren&apos;t supported by the bridge.\n            </span>{' '}\n            Ex: if the token balance increases or decreases while sitting in a\n            wallet address. Contact the team behind the token to find out if\n            this token is standard or not.\n          </NoteBox>\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n","import { Switch } from '@headlessui/react'\nimport { CheckIcon } from '@heroicons/react/24/outline'\nimport { twMerge } from 'tailwind-merge'\n\nexport type CheckboxProps = {\n  label: string | React.ReactNode\n  checked: boolean\n  onChange: (checked: boolean) => void\n}\n\nexport function Checkbox(props: CheckboxProps) {\n  return (\n    <Switch.Group\n      as=\"div\"\n      className=\"arb-hover flex flex-row items-start space-x-1\"\n    >\n      <Switch\n        {...props}\n        className={twMerge(\n          'mt-[4px] h-3 w-3 flex-shrink-0 rounded-sm transition duration-200 ease-in-out',\n          props.checked\n            ? 'border border-dark bg-white'\n            : 'border border-white bg-dark'\n        )}\n      >\n        <CheckIcon className=\"ml-[2px] mt-[1px] h-2 w-2 stroke-[5] text-dark\" />\n      </Switch>\n      <Switch.Label\n        className={twMerge(\n          'cursor-pointer',\n          props.checked ? 'text-white' : 'text-gray-3'\n        )}\n      >\n        {props.label}\n      </Switch.Label>\n    </Switch.Group>\n  )\n}\n","import { useCallback } from 'react'\nimport axios from 'axios'\nimport useSWR, { KeyedMutator } from 'swr'\n\nexport type UseETHPriceResult = {\n  ethPrice: number\n  ethToUSD: (etherValue: number) => number\n  error?: Error\n  isValidating: boolean\n  mutate: KeyedMutator<any>\n}\n\nexport function useETHPrice(): UseETHPriceResult {\n  const { data, error, isValidating, mutate } = useSWR<number, Error>(\n    'https://api.coinbase.com/v2/prices/ETH-USD/spot',\n    url => axios.get(url).then(res => res.data.data.amount),\n    {\n      refreshInterval: 300_000, // 5 minutes\n      shouldRetryOnError: true,\n      errorRetryCount: 2,\n      errorRetryInterval: 3_000\n    }\n  )\n\n  const ethToUSD = useCallback(\n    (etherValue: number) => {\n      const safeETHPrice = data && !isNaN(data) ? Number(data) : 0\n      return etherValue * safeETHPrice\n    },\n    [data]\n  )\n\n  return { ethPrice: data ?? 0, ethToUSD, error, isValidating, mutate }\n}\n","import { useState, useEffect } from 'react'\nimport { providers } from 'ethers'\n\nexport function useChainId({ provider }: { provider: providers.Provider }) {\n  const [chainId, setChainId] = useState<number | undefined>(undefined)\n\n  useEffect(() => {\n    let cancelled = false\n\n    async function updateChainId() {\n      const network = await provider.getNetwork()\n      if (!cancelled) {\n        setChainId(network.chainId)\n      }\n    }\n\n    updateChainId()\n\n    return () => {\n      cancelled = true\n    }\n  }, [provider])\n\n  return chainId\n}\n","import { useMemo } from 'react'\nimport { BigNumber, constants, providers } from 'ethers'\nimport useSWR from 'swr'\n\nimport { useChainId } from './useChainId'\n\nexport function useGasPrice({\n  provider\n}: {\n  provider: providers.Provider\n}): BigNumber {\n  const chainId = useChainId({ provider })\n\n  const queryKey = useMemo(() => {\n    if (typeof chainId === 'undefined') {\n      // Don't fetch\n      return null\n    }\n\n    return ['gasPrice', chainId]\n  }, [chainId])\n\n  const { data: gasPrice = constants.Zero } = useSWR(\n    queryKey,\n    () => provider.getGasPrice(),\n    {\n      refreshInterval: 30_000,\n      shouldRetryOnError: true,\n      errorRetryCount: 2,\n      errorRetryInterval: 5_000\n    }\n  )\n\n  return gasPrice\n}\n","import { Provider } from '@ethersproject/providers'\nimport { BigNumber, ContractTransaction, Signer } from 'ethers'\nimport { MergedTransaction } from '../state/app/state'\nimport {\n  GasEstimates,\n  DepositGasEstimates\n} from '../hooks/arbTokenBridge.types'\nimport { Address } from '../util/AddressUtils'\n\ntype Asset = 'erc20' | 'eth'\ntype TxType = 'deposit' | 'withdrawal' | 'teleport'\ntype Chain = 'source_chain' | 'destination_chain'\ntype TxStatus = 'pending' | 'success' | 'error'\n\nexport type BridgeTransferStatus = `${Chain}_tx_${TxStatus}`\nexport type TransferType = `${Asset}_${TxType}` | 'cctp'\n\nexport type MergedTransactionCctp = MergedTransaction & {\n  messageBytes: Address | null\n  attestationHash: Address | null\n}\n\nexport type BridgeTransfer = {\n  transferType: TransferType\n  status: string\n  sourceChainProvider: Provider\n  sourceChainTransaction: { hash: string }\n  destinationChainProvider: Provider\n  destinationChainTransaction?: { hash: string }\n}\n\nexport type BridgeTransferStarterProps = {\n  sourceChainProvider: Provider\n  sourceChainErc20Address?: string\n  destinationChainProvider: Provider\n  destinationChainErc20Address?: string\n}\n\nexport type BridgeTransferStarterPropsWithChainIds = {\n  sourceChainId: number\n  sourceChainErc20Address?: string\n  destinationChainId: number\n  destinationChainErc20Address?: string\n}\n\nexport type TransferEstimateGas = {\n  amount: BigNumber\n  signer: Signer\n}\n\nexport type TransferProps = {\n  amount: BigNumber\n  signer: Signer\n  destinationAddress?: string\n}\n\nexport type RequiresNativeCurrencyApprovalProps = {\n  amount: BigNumber\n  signer: Signer\n}\n\nexport type ApproveNativeCurrencyEstimateGasProps = {\n  signer: Signer\n  amount?: BigNumber\n}\n\nexport type ApproveNativeCurrencyProps = {\n  signer: Signer\n  amount: BigNumber\n}\n\nexport type RequiresTokenApprovalProps = {\n  amount: BigNumber\n  signer: Signer\n  destinationAddress?: string\n}\n\nexport type ApproveTokenProps = {\n  signer: Signer\n  amount?: BigNumber\n}\n\nexport abstract class BridgeTransferStarter {\n  public sourceChainProvider: Provider\n  public destinationChainProvider: Provider\n  public sourceChainErc20Address?: string\n  public destinationChainErc20Address?: string\n\n  abstract transferType: TransferType\n\n  constructor(props: BridgeTransferStarterProps) {\n    this.sourceChainProvider = props.sourceChainProvider\n    this.destinationChainProvider = props.destinationChainProvider\n    this.sourceChainErc20Address = props.sourceChainErc20Address\n    this.destinationChainErc20Address = props.destinationChainErc20Address\n  }\n\n  public abstract requiresNativeCurrencyApproval(\n    props: RequiresNativeCurrencyApprovalProps\n  ): Promise<boolean>\n\n  public abstract approveNativeCurrencyEstimateGas(\n    props: ApproveNativeCurrencyEstimateGasProps\n  ): Promise<BigNumber | void>\n\n  public abstract approveNativeCurrency(\n    props: ApproveNativeCurrencyProps\n  ): Promise<ContractTransaction | void>\n\n  public abstract requiresTokenApproval(\n    props: RequiresTokenApprovalProps\n  ): Promise<boolean>\n\n  public abstract approveTokenEstimateGas(\n    props: ApproveTokenProps\n  ): Promise<BigNumber | void>\n\n  public abstract approveToken(\n    props: ApproveTokenProps\n  ): Promise<ContractTransaction | void>\n\n  public abstract transferEstimateGas(\n    props: TransferEstimateGas\n  ): Promise<GasEstimates | DepositGasEstimates | undefined>\n\n  public abstract transfer(props: TransferProps): Promise<BridgeTransfer>\n}\n","export const TokenMinterAbi = [\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: '_tokenController',\n        type: 'address'\n      }\n    ],\n    stateMutability: 'nonpayable',\n    type: 'constructor'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: false,\n        internalType: 'address',\n        name: 'localTokenMessenger',\n        type: 'address'\n      }\n    ],\n    name: 'LocalTokenMessengerAdded',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: false,\n        internalType: 'address',\n        name: 'localTokenMessenger',\n        type: 'address'\n      }\n    ],\n    name: 'LocalTokenMessengerRemoved',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'previousOwner',\n        type: 'address'\n      },\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'newOwner',\n        type: 'address'\n      }\n    ],\n    name: 'OwnershipTransferStarted',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'previousOwner',\n        type: 'address'\n      },\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'newOwner',\n        type: 'address'\n      }\n    ],\n    name: 'OwnershipTransferred',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [],\n    name: 'Pause',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'newAddress',\n        type: 'address'\n      }\n    ],\n    name: 'PauserChanged',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'newRescuer',\n        type: 'address'\n      }\n    ],\n    name: 'RescuerChanged',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'token',\n        type: 'address'\n      },\n      {\n        indexed: false,\n        internalType: 'uint256',\n        name: 'burnLimitPerMessage',\n        type: 'uint256'\n      }\n    ],\n    name: 'SetBurnLimitPerMessage',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: false,\n        internalType: 'address',\n        name: 'tokenController',\n        type: 'address'\n      }\n    ],\n    name: 'SetTokenController',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: false,\n        internalType: 'address',\n        name: 'localToken',\n        type: 'address'\n      },\n      {\n        indexed: false,\n        internalType: 'uint32',\n        name: 'remoteDomain',\n        type: 'uint32'\n      },\n      {\n        indexed: false,\n        internalType: 'bytes32',\n        name: 'remoteToken',\n        type: 'bytes32'\n      }\n    ],\n    name: 'TokenPairLinked',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: false,\n        internalType: 'address',\n        name: 'localToken',\n        type: 'address'\n      },\n      {\n        indexed: false,\n        internalType: 'uint32',\n        name: 'remoteDomain',\n        type: 'uint32'\n      },\n      {\n        indexed: false,\n        internalType: 'bytes32',\n        name: 'remoteToken',\n        type: 'bytes32'\n      }\n    ],\n    name: 'TokenPairUnlinked',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [],\n    name: 'Unpause',\n    type: 'event'\n  },\n  {\n    inputs: [],\n    name: 'acceptOwnership',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'newLocalTokenMessenger',\n        type: 'address'\n      }\n    ],\n    name: 'addLocalTokenMessenger',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'burnToken',\n        type: 'address'\n      },\n      {\n        internalType: 'uint256',\n        name: 'burnAmount',\n        type: 'uint256'\n      }\n    ],\n    name: 'burn',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    name: 'burnLimitsPerMessage',\n    outputs: [\n      {\n        internalType: 'uint256',\n        name: '',\n        type: 'uint256'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'uint32',\n        name: 'remoteDomain',\n        type: 'uint32'\n      },\n      {\n        internalType: 'bytes32',\n        name: 'remoteToken',\n        type: 'bytes32'\n      }\n    ],\n    name: 'getLocalToken',\n    outputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'localToken',\n        type: 'address'\n      },\n      {\n        internalType: 'uint32',\n        name: 'remoteDomain',\n        type: 'uint32'\n      },\n      {\n        internalType: 'bytes32',\n        name: 'remoteToken',\n        type: 'bytes32'\n      }\n    ],\n    name: 'linkTokenPair',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'localTokenMessenger',\n    outputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'uint32',\n        name: 'sourceDomain',\n        type: 'uint32'\n      },\n      {\n        internalType: 'bytes32',\n        name: 'burnToken',\n        type: 'bytes32'\n      },\n      {\n        internalType: 'address',\n        name: 'to',\n        type: 'address'\n      },\n      {\n        internalType: 'uint256',\n        name: 'amount',\n        type: 'uint256'\n      }\n    ],\n    name: 'mint',\n    outputs: [\n      {\n        internalType: 'address',\n        name: 'mintToken',\n        type: 'address'\n      }\n    ],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'owner',\n    outputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'pause',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'paused',\n    outputs: [\n      {\n        internalType: 'bool',\n        name: '',\n        type: 'bool'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'pauser',\n    outputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'pendingOwner',\n    outputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'bytes32',\n        name: '',\n        type: 'bytes32'\n      }\n    ],\n    name: 'remoteTokensToLocalTokens',\n    outputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'removeLocalTokenMessenger',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'contract IERC20',\n        name: 'tokenContract',\n        type: 'address'\n      },\n      {\n        internalType: 'address',\n        name: 'to',\n        type: 'address'\n      },\n      {\n        internalType: 'uint256',\n        name: 'amount',\n        type: 'uint256'\n      }\n    ],\n    name: 'rescueERC20',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'rescuer',\n    outputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'localToken',\n        type: 'address'\n      },\n      {\n        internalType: 'uint256',\n        name: 'burnLimitPerMessage',\n        type: 'uint256'\n      }\n    ],\n    name: 'setMaxBurnAmountPerMessage',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'newTokenController',\n        type: 'address'\n      }\n    ],\n    name: 'setTokenController',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'tokenController',\n    outputs: [\n      {\n        internalType: 'address',\n        name: '',\n        type: 'address'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'newOwner',\n        type: 'address'\n      }\n    ],\n    name: 'transferOwnership',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'localToken',\n        type: 'address'\n      },\n      {\n        internalType: 'uint32',\n        name: 'remoteDomain',\n        type: 'uint32'\n      },\n      {\n        internalType: 'bytes32',\n        name: 'remoteToken',\n        type: 'bytes32'\n      }\n    ],\n    name: 'unlinkTokenPair',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'unpause',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: '_newPauser',\n        type: 'address'\n      }\n    ],\n    name: 'updatePauser',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'newRescuer',\n        type: 'address'\n      }\n    ],\n    name: 'updateRescuer',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  }\n] as const\n","import {\n  ApolloClient,\n  HttpLink,\n  InMemoryCache,\n  NormalizedCacheObject\n} from '@apollo/client'\n\nimport { ChainId } from '../util/networks'\n\n/**\n * The API key to be used for calls to The Graph Network.\n */\nconst theGraphNetworkApiKey = process.env.THE_GRAPH_NETWORK_API_KEY\n\nconst selfHostedSubgraphApiKey = process.env.SELF_HOSTED_SUBGRAPH_API_KEY\n\ntype SubgraphKey = keyof typeof subgraphs\n\ntype TheGraphNetworkSubgraphId =\n  (typeof subgraphs)[SubgraphKey]['theGraphNetworkSubgraphId']\n\nconst subgraphs = {\n  // CCTP Mainnet Subgraphs\n  'cctp-ethereum': {\n    selfHostedSubgraph: '',\n    theGraphNetworkSubgraphId: 'E6iPLnDGEgrcc4gu9uiHJxENSRAAzTvUJqQqJcHZqJT1'\n  },\n  'cctp-arbitrum-one': {\n    selfHostedSubgraph: '',\n    theGraphNetworkSubgraphId: '9DgSggKVrvfi4vdyYTdmSBuPgDfm3D7zfLZ1qaQFjYYW'\n  },\n  // CCTP Testnet Subgraphs\n  'cctp-sepolia': {\n    selfHostedSubgraph: '',\n    theGraphNetworkSubgraphId: '4gSU1PTxjYPWk2TXPX2fusjuXrBFHC7kCZrbhrhaF9V5'\n  },\n  'cctp-arbitrum-sepolia': {\n    selfHostedSubgraph: '',\n    theGraphNetworkSubgraphId: '4Dp9ENSFDKfeBsmZeSyATKKrhxC2EKzbC3bZvTHpU1DB'\n  },\n  // L1 Mainnet Subgraphs\n  'l1-arbitrum-one': {\n    selfHostedSubgraph: '',\n    theGraphNetworkSubgraphId: 'F2N4nGH86Y5Bk2vPo15EVRSTz2wbtz7BGRe8DDJqMPG4'\n  },\n  'l1-arbitrum-nova': {\n    selfHostedSubgraph: '',\n    theGraphNetworkSubgraphId: '6Xvyjk9r91N3DSRQP6UZ1Lkbou567hFxLSWt2Tsv5AWp'\n  },\n  // L1 Testnet Subgraphs\n  'l1-arbitrum-sepolia': {\n    selfHostedSubgraph: '',\n    theGraphNetworkSubgraphId: 'GF6Ez7sY2gef8EoXrR76X6iFa41wf38zh4TXZkDkL5Z9'\n  },\n  // L2 Mainnet Subgraphs\n  'l2-arbitrum-one': {\n    selfHostedSubgraph: '',\n    theGraphNetworkSubgraphId: '9eFk14Tms68qBN7YwL6kFuk9e2BVRqkX6gXyjzLR3tuj'\n  },\n  // L2 Nova Subgraphs\n  'l2-arbitrum-nova': {\n    selfHostedSubgraph: 'arbitrum-nova/layer2-token-gateway',\n    theGraphNetworkSubgraphId: ''\n  },\n  // L2 Testnet Subgraphs\n  'l2-arbitrum-sepolia': {\n    selfHostedSubgraph: '',\n    theGraphNetworkSubgraphId: 'AaUuKWWuQbCXbvRkXpVDEpw9B7oVicYrovNyMLPZtLPw'\n  },\n  // Teleport Sepolia\n  'teleporter-sepolia': {\n    selfHostedSubgraph: '',\n    theGraphNetworkSubgraphId: '6AwhH4JF8Ss5ZFf12azD13D1nNhuNzLnjH56irYqA7fD'\n  },\n  'teleporter-ethereum': {\n    selfHostedSubgraph: '',\n    theGraphNetworkSubgraphId: 'GEVHWg3FLKvWivMhqkeVrQVt4WCN6cWnsvdf6MpNrHpg'\n  }\n} as const\n\nfunction createApolloClient(uri: string) {\n  return new ApolloClient({\n    link: new HttpLink({ uri, fetch }),\n    cache: new InMemoryCache()\n  })\n}\n\nfunction createSelfHostedSubgraphClient(subgraphName: string) {\n  if (\n    typeof selfHostedSubgraphApiKey === 'undefined' ||\n    selfHostedSubgraphApiKey === ''\n  ) {\n    throw new Error(\n      `[createSelfHostedSubgraphClient] missing \"SELF_HOSTED_SUBGRAPH_API_KEY\" env variable`\n    )\n  }\n  return createApolloClient(\n    `https://graph.arbitrum.io/${selfHostedSubgraphApiKey}/subgraphs/name/${subgraphName}`\n  )\n}\n\nfunction createTheGraphNetworkClient(subgraphId: TheGraphNetworkSubgraphId) {\n  if (\n    typeof theGraphNetworkApiKey === 'undefined' ||\n    theGraphNetworkApiKey === ''\n  ) {\n    throw new Error(\n      `[createTheGraphNetworkClient] missing \"GRAPH_NETWORK_API_KEY\" env variable\"`\n    )\n  }\n\n  return createApolloClient(\n    `https://gateway-arbitrum.network.thegraph.com/api/${theGraphNetworkApiKey}/subgraphs/id/${subgraphId}`\n  )\n}\n\nfunction createSubgraphClient(key: SubgraphKey) {\n  console.log(`[createSubgraphClient] key=${key}`)\n\n  const { theGraphNetworkSubgraphId, selfHostedSubgraph } = subgraphs[key]\n\n  if (selfHostedSubgraph !== '') {\n    return createSelfHostedSubgraphClient(selfHostedSubgraph)\n  }\n\n  console.log(\n    `[createSubgraphClient] using subgraph \"${theGraphNetworkSubgraphId}\" on the graph network`\n  )\n  return createTheGraphNetworkClient(theGraphNetworkSubgraphId)\n}\n\nexport function getCctpSubgraphClient(chainId: number) {\n  switch (chainId) {\n    case ChainId.Ethereum:\n      return createSubgraphClient('cctp-ethereum')\n\n    case ChainId.ArbitrumOne:\n      return createSubgraphClient('cctp-arbitrum-one')\n\n    case ChainId.Sepolia:\n      return createSubgraphClient('cctp-sepolia')\n\n    case ChainId.ArbitrumSepolia:\n      return createSubgraphClient('cctp-arbitrum-sepolia')\n\n    default:\n      throw new Error(`[getCctpSubgraphClient] unsupported chain: ${chainId}`)\n  }\n}\n\nexport function getTeleporterSubgraphClient(chainId: number) {\n  switch (chainId) {\n    case ChainId.Ethereum:\n      return createTheGraphNetworkClient(\n        subgraphs['teleporter-ethereum'].theGraphNetworkSubgraphId\n      )\n\n    case ChainId.Sepolia:\n      return createTheGraphNetworkClient(\n        subgraphs['teleporter-sepolia'].theGraphNetworkSubgraphId\n      )\n\n    default:\n      throw new Error(\n        `[getTeleporterSubgraphClient] unsupported chain: ${chainId}`\n      )\n  }\n}\n\nexport function getL1SubgraphClient(l2ChainId: number) {\n  switch (l2ChainId) {\n    case ChainId.ArbitrumOne:\n      return createSubgraphClient('l1-arbitrum-one')\n\n    case ChainId.ArbitrumNova:\n      return createSubgraphClient('l1-arbitrum-nova')\n\n    case ChainId.ArbitrumSepolia:\n      return createSubgraphClient('l1-arbitrum-sepolia')\n\n    default:\n      throw new Error(`[getL1SubgraphClient] unsupported chain: ${l2ChainId}`)\n  }\n}\n\nexport function getL2SubgraphClient(l2ChainId: number) {\n  switch (l2ChainId) {\n    case ChainId.ArbitrumOne:\n      return createSubgraphClient('l2-arbitrum-one')\n\n    case ChainId.ArbitrumNova:\n      return createSubgraphClient('l2-arbitrum-nova')\n\n    case ChainId.ArbitrumSepolia:\n      return createSubgraphClient('l2-arbitrum-sepolia')\n\n    default:\n      throw new Error(`[getL2SubgraphClient] unsupported chain: ${l2ChainId}`)\n  }\n}\n\nexport function getSourceFromSubgraphClient(\n  subgraphClient: ApolloClient<NormalizedCacheObject>\n): string | null {\n  const uri = (subgraphClient.link as any).options?.uri\n\n  if (typeof uri === 'undefined') {\n    return null\n  }\n\n  return new URL(uri).origin\n}\n","import { gql } from '@apollo/client'\nimport { NextApiRequest, NextApiResponse } from 'next'\n\nimport { ChainId } from '../../../util/networks'\nimport { Address } from '../../../util/AddressUtils'\n\nimport {\n  getCctpSubgraphClient,\n  getSourceFromSubgraphClient\n} from '../../../api-utils/ServerSubgraphUtils'\n\n// Extending the standard NextJs request with CCTP params\nexport type NextApiRequestWithCCTPParams = NextApiRequest & {\n  query: {\n    walletAddress: Address\n    l1ChainId: string\n    pageNumber?: string\n    pageSize?: string\n  }\n}\n\nexport enum ChainDomain {\n  Ethereum = 0,\n  ArbitrumOne = 3\n}\n\nexport type MessageReceived = {\n  blockNumber: string\n  blockTimestamp: string\n  caller: Address\n  id: string\n  messageBody: string\n  nonce: string\n  sender: Address\n  sourceDomain: `${ChainDomain}`\n  transactionHash: Address\n}\n\nexport type MessageSent = {\n  attestationHash: Address\n  blockNumber: string\n  blockTimestamp: string\n  id: string\n  message: string\n  nonce: string\n  sender: Address\n  recipient: Address\n  sourceDomain: `${ChainDomain}`\n  transactionHash: Address\n  amount: string\n}\n\nexport type PendingCCTPTransfer = {\n  messageSent: MessageSent\n}\n\nexport type CompletedCCTPTransfer = PendingCCTPTransfer & {\n  messageReceived: MessageReceived\n}\n\nexport type Response =\n  | {\n      meta?: {\n        source: string | null\n      }\n      data: {\n        pending: PendingCCTPTransfer[]\n        completed: CompletedCCTPTransfer[]\n      }\n      error: null\n    }\n  | {\n      data: {\n        pending: []\n        completed: []\n      }\n      error: string\n    }\n\nexport default async function handler(\n  req: NextApiRequestWithCCTPParams,\n  res: NextApiResponse<Response>\n) {\n  try {\n    const {\n      walletAddress,\n      l1ChainId: l1ChainIdString,\n      pageNumber = '0',\n      pageSize = '10',\n      type\n    } = req.query\n    const l1ChainId = parseInt(l1ChainIdString, 10)\n\n    if (\n      typeof type !== 'string' ||\n      (type !== 'deposits' && type !== 'withdrawals')\n    ) {\n      res.status(400).send({\n        error: `invalid API route: ${type}`,\n        data: {\n          pending: [],\n          completed: []\n        }\n      })\n      return\n    }\n\n    // validate method\n    if (req.method !== 'GET') {\n      res.status(400).send({\n        error: `invalid_method: ${req.method}`,\n        data: {\n          pending: [],\n          completed: []\n        }\n      })\n      return\n    }\n\n    // validate the request parameters\n    const errorMessage = []\n    if (!l1ChainId) errorMessage.push('<l1ChainId> is required')\n    if (!walletAddress) errorMessage.push('<walletAddress> is required')\n\n    if (errorMessage.length) {\n      res.status(400).json({\n        error: `incomplete request: ${errorMessage.join(', ')}`,\n        data: {\n          pending: [],\n          completed: []\n        }\n      })\n      return\n    }\n\n    // if invalid pageSize, send empty data instead of error\n    if (isNaN(Number(pageSize)) || Number(pageSize) === 0) {\n      res.status(200).json({\n        data: {\n          pending: [],\n          completed: []\n        },\n        error: null\n      })\n      return\n    }\n\n    const l2ChainId =\n      l1ChainId === ChainId.Ethereum\n        ? ChainId.ArbitrumOne\n        : ChainId.ArbitrumSepolia\n\n    const l1Subgraph = getCctpSubgraphClient(l1ChainId)\n    const l2Subgraph = getCctpSubgraphClient(l2ChainId)\n\n    const messagesSentQuery = gql(`{\n      messageSents(\n        where: {\n          or: [\n            { sender: \"${walletAddress}\" },\n            { recipient: \"${walletAddress}\" }\n          ]\n        }\n        orderDirection: \"desc\"\n        orderBy: \"blockTimestamp\"\n        first: ${Number(pageSize)}\n        skip: ${Number(pageNumber) * Number(pageSize)}\n      ) {\n        attestationHash\n        blockNumber\n        blockTimestamp\n        id\n        message\n        sender\n        recipient\n        sourceDomain\n        transactionHash\n        amount\n      }\n    }`)\n\n    const sourceSubgraph = type === 'deposits' ? l1Subgraph : l2Subgraph\n    const messagesSentResult = await sourceSubgraph.query<{\n      messageSents: MessageSent[]\n    }>({\n      query: messagesSentQuery\n    })\n    const { messageSents } = messagesSentResult.data\n    const formattedIds = messageSents.map(messageSent => `\"${messageSent.id}\"`)\n\n    const messagesReceivedQuery = gql(`{\n        messageReceiveds(\n          where: {id_in: [${formattedIds.join(',')}]}\n          orderDirection: \"desc\"\n          orderBy: \"blockTimestamp\"\n        ) {\n          id\n          caller\n          sourceDomain\n          blockTimestamp\n          blockNumber\n          messageBody\n          sender\n          transactionHash\n        }\n      }\n    `)\n\n    const targetSubgraph = type === 'deposits' ? l2Subgraph : l1Subgraph\n    const messagesReceivedResult = await targetSubgraph.query<{\n      messageReceiveds: MessageReceived[]\n    }>({\n      query: messagesReceivedQuery\n    })\n\n    const { messageReceiveds } = messagesReceivedResult.data\n\n    // MessagesSent can be link to MessageReceived with the tuple (sourceDomain, nonce)\n    // Map constructor accept an array of [key, value] arrays\n    // new Map(['key1', 'value1'], ['key2', 'value2'], ['keyN', 'valueN']) would return\n    // Map(3){'key1' => 'value1', 'key2' => 'value2', 'keyN' => 'valueN'}\n    // We create a map with all keys being MessagesReceived ids, and values being the corresponding MessageReceived\n    const messagesReceivedMap = new Map(\n      messageReceiveds.map(messageReceived => [\n        messageReceived.id,\n        messageReceived\n      ])\n    )\n\n    const { pending, completed } = messageSents.reduce(\n      (acc, messageSent) => {\n        // If the MessageSent has a corresponding MessageReceived\n        const messageReceived = messagesReceivedMap.get(messageSent.id)\n        if (messageReceived) {\n          acc.completed.push({\n            messageReceived,\n            messageSent\n          })\n        } else {\n          acc.pending.push({\n            messageSent\n          })\n        }\n        return acc\n      },\n      { completed: [], pending: [] } as {\n        completed: CompletedCCTPTransfer[]\n        pending: PendingCCTPTransfer[]\n      }\n    )\n\n    res.status(200).json({\n      meta: {\n        source: getSourceFromSubgraphClient(l1Subgraph)\n      },\n      data: {\n        pending,\n        completed\n      },\n      error: null\n    })\n  } catch (error: unknown) {\n    res.status(500).json({\n      data: {\n        pending: [],\n        completed: []\n      },\n      error: (error as Error)?.message ?? 'Something went wrong'\n    })\n  }\n}\n","export const MessageTransmitterAbi = [\n  {\n    inputs: [\n      { internalType: 'uint32', name: '_localDomain', type: 'uint32' },\n      { internalType: 'address', name: '_attester', type: 'address' },\n      { internalType: 'uint32', name: '_maxMessageBodySize', type: 'uint32' },\n      { internalType: 'uint32', name: '_version', type: 'uint32' }\n    ],\n    stateMutability: 'nonpayable',\n    type: 'constructor'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'attester',\n        type: 'address'\n      }\n    ],\n    name: 'AttesterDisabled',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'attester',\n        type: 'address'\n      }\n    ],\n    name: 'AttesterEnabled',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'previousAttesterManager',\n        type: 'address'\n      },\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'newAttesterManager',\n        type: 'address'\n      }\n    ],\n    name: 'AttesterManagerUpdated',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: false,\n        internalType: 'uint256',\n        name: 'newMaxMessageBodySize',\n        type: 'uint256'\n      }\n    ],\n    name: 'MaxMessageBodySizeUpdated',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'caller',\n        type: 'address'\n      },\n      {\n        indexed: false,\n        internalType: 'uint32',\n        name: 'sourceDomain',\n        type: 'uint32'\n      },\n      { indexed: true, internalType: 'uint64', name: 'nonce', type: 'uint64' },\n      {\n        indexed: false,\n        internalType: 'bytes32',\n        name: 'sender',\n        type: 'bytes32'\n      },\n      {\n        indexed: false,\n        internalType: 'bytes',\n        name: 'messageBody',\n        type: 'bytes'\n      }\n    ],\n    name: 'MessageReceived',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      { indexed: false, internalType: 'bytes', name: 'message', type: 'bytes' }\n    ],\n    name: 'MessageSent',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'previousOwner',\n        type: 'address'\n      },\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'newOwner',\n        type: 'address'\n      }\n    ],\n    name: 'OwnershipTransferStarted',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'previousOwner',\n        type: 'address'\n      },\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'newOwner',\n        type: 'address'\n      }\n    ],\n    name: 'OwnershipTransferred',\n    type: 'event'\n  },\n  { anonymous: false, inputs: [], name: 'Pause', type: 'event' },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'newAddress',\n        type: 'address'\n      }\n    ],\n    name: 'PauserChanged',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'newRescuer',\n        type: 'address'\n      }\n    ],\n    name: 'RescuerChanged',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: false,\n        internalType: 'uint256',\n        name: 'oldSignatureThreshold',\n        type: 'uint256'\n      },\n      {\n        indexed: false,\n        internalType: 'uint256',\n        name: 'newSignatureThreshold',\n        type: 'uint256'\n      }\n    ],\n    name: 'SignatureThresholdUpdated',\n    type: 'event'\n  },\n  { anonymous: false, inputs: [], name: 'Unpause', type: 'event' },\n  {\n    inputs: [],\n    name: 'acceptOwnership',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'attesterManager',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [{ internalType: 'address', name: 'attester', type: 'address' }],\n    name: 'disableAttester',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [{ internalType: 'address', name: 'newAttester', type: 'address' }],\n    name: 'enableAttester',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [{ internalType: 'uint256', name: 'index', type: 'uint256' }],\n    name: 'getEnabledAttester',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'getNumEnabledAttesters',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [{ internalType: 'address', name: 'attester', type: 'address' }],\n    name: 'isEnabledAttester',\n    outputs: [{ internalType: 'bool', name: '', type: 'bool' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'localDomain',\n    outputs: [{ internalType: 'uint32', name: '', type: 'uint32' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'maxMessageBodySize',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'nextAvailableNonce',\n    outputs: [{ internalType: 'uint64', name: '', type: 'uint64' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'owner',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'pause',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'paused',\n    outputs: [{ internalType: 'bool', name: '', type: 'bool' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'pauser',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'pendingOwner',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [\n      { internalType: 'bytes', name: 'message', type: 'bytes' },\n      { internalType: 'bytes', name: 'attestation', type: 'bytes' }\n    ],\n    name: 'receiveMessage',\n    outputs: [{ internalType: 'bool', name: 'success', type: 'bool' }],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      { internalType: 'bytes', name: 'originalMessage', type: 'bytes' },\n      { internalType: 'bytes', name: 'originalAttestation', type: 'bytes' },\n      { internalType: 'bytes', name: 'newMessageBody', type: 'bytes' },\n      { internalType: 'bytes32', name: 'newDestinationCaller', type: 'bytes32' }\n    ],\n    name: 'replaceMessage',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'contract IERC20',\n        name: 'tokenContract',\n        type: 'address'\n      },\n      { internalType: 'address', name: 'to', type: 'address' },\n      { internalType: 'uint256', name: 'amount', type: 'uint256' }\n    ],\n    name: 'rescueERC20',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'rescuer',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [\n      { internalType: 'uint32', name: 'destinationDomain', type: 'uint32' },\n      { internalType: 'bytes32', name: 'recipient', type: 'bytes32' },\n      { internalType: 'bytes', name: 'messageBody', type: 'bytes' }\n    ],\n    name: 'sendMessage',\n    outputs: [{ internalType: 'uint64', name: '', type: 'uint64' }],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      { internalType: 'uint32', name: 'destinationDomain', type: 'uint32' },\n      { internalType: 'bytes32', name: 'recipient', type: 'bytes32' },\n      { internalType: 'bytes32', name: 'destinationCaller', type: 'bytes32' },\n      { internalType: 'bytes', name: 'messageBody', type: 'bytes' }\n    ],\n    name: 'sendMessageWithCaller',\n    outputs: [{ internalType: 'uint64', name: '', type: 'uint64' }],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'uint256',\n        name: 'newMaxMessageBodySize',\n        type: 'uint256'\n      }\n    ],\n    name: 'setMaxMessageBodySize',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'uint256',\n        name: 'newSignatureThreshold',\n        type: 'uint256'\n      }\n    ],\n    name: 'setSignatureThreshold',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'signatureThreshold',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [{ internalType: 'address', name: 'newOwner', type: 'address' }],\n    name: 'transferOwnership',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'unpause',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: 'newAttesterManager', type: 'address' }\n    ],\n    name: 'updateAttesterManager',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [{ internalType: 'address', name: '_newPauser', type: 'address' }],\n    name: 'updatePauser',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [{ internalType: 'address', name: 'newRescuer', type: 'address' }],\n    name: 'updateRescuer',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [{ internalType: 'bytes32', name: '', type: 'bytes32' }],\n    name: 'usedNonces',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'version',\n    outputs: [{ internalType: 'uint32', name: '', type: 'uint32' }],\n    stateMutability: 'view',\n    type: 'function'\n  }\n] as const\n","import { readContract } from '@wagmi/core'\nimport { Signer } from 'ethers'\nimport { TokenMinterAbi } from '../util/cctp/TokenMinterAbi'\nimport { ChainDomain } from '../pages/api/cctp/[type]'\nimport { prepareWriteContract, writeContract } from '@wagmi/core'\nimport { MessageTransmitterAbi } from '../util/cctp/MessageTransmitterAbi'\nimport { CCTPSupportedChainId } from '../state/cctpState'\nimport { ChainId } from '../util/networks'\nimport { CommonAddress } from '../util/CommonAddressUtils'\nimport { Address } from '../util/AddressUtils'\n\n// see https://developers.circle.com/stablecoin/docs/cctp-protocol-contract\ntype Contracts = {\n  tokenMessengerContractAddress: Address\n  targetChainDomain: ChainDomain\n  targetChainId: CCTPSupportedChainId\n  usdcContractAddress: Address\n  messageTransmitterContractAddress: Address\n  attestationApiUrl: string\n  tokenMinterContractAddress: Address\n}\n\nconst contracts: Record<CCTPSupportedChainId, Contracts> = {\n  [ChainId.Ethereum]: {\n    tokenMessengerContractAddress:\n      CommonAddress.Ethereum.tokenMessengerContractAddress,\n    targetChainDomain: ChainDomain.ArbitrumOne,\n    targetChainId: ChainId.ArbitrumOne,\n    usdcContractAddress: CommonAddress.Ethereum.USDC,\n    messageTransmitterContractAddress:\n      '0xc30362313fbba5cf9163f0bb16a0e01f01a896ca',\n    attestationApiUrl: 'https://iris-api.circle.com/v1',\n    tokenMinterContractAddress: '0xc4922d64a24675e16e1586e3e3aa56c06fabe907'\n  },\n  [ChainId.Sepolia]: {\n    tokenMessengerContractAddress:\n      CommonAddress.Sepolia.tokenMessengerContractAddress,\n    targetChainDomain: ChainDomain.ArbitrumOne,\n    targetChainId: ChainId.ArbitrumSepolia,\n    usdcContractAddress: CommonAddress.Sepolia.USDC,\n    messageTransmitterContractAddress:\n      '0xacf1ceef35caac005e15888ddb8a3515c41b4872',\n    attestationApiUrl: 'https://iris-api-sandbox.circle.com/v1',\n    tokenMinterContractAddress: '0xe997d7d2f6e065a9a93fa2175e878fb9081f1f0a'\n  },\n  [ChainId.ArbitrumOne]: {\n    tokenMessengerContractAddress:\n      CommonAddress.ArbitrumOne.tokenMessengerContractAddress,\n    targetChainDomain: ChainDomain.Ethereum,\n    targetChainId: ChainId.Ethereum,\n    usdcContractAddress: CommonAddress.ArbitrumOne.USDC,\n    messageTransmitterContractAddress:\n      '0x0a992d191deec32afe36203ad87d7d289a738f81',\n    attestationApiUrl: 'https://iris-api.circle.com/v1',\n    tokenMinterContractAddress: '0xe7ed1fa7f45d05c508232aa32649d89b73b8ba48'\n  },\n  [ChainId.ArbitrumSepolia]: {\n    tokenMessengerContractAddress:\n      CommonAddress.ArbitrumSepolia.tokenMessengerContractAddress,\n    targetChainDomain: ChainDomain.Ethereum,\n    targetChainId: ChainId.Sepolia,\n    usdcContractAddress: CommonAddress.ArbitrumSepolia.USDC,\n    messageTransmitterContractAddress:\n      '0x7865fafc2db2093669d92c0f33aeef291086befd',\n    attestationApiUrl: 'https://iris-api-sandbox.circle.com/v1',\n    tokenMinterContractAddress: '0xe997d7d2f6e065a9a93fa2175e878fb9081f1f0a'\n  }\n}\n\nexport type AttestationResponse =\n  | {\n      attestation: Address\n      status: 'complete'\n    }\n  | {\n      attestation: null\n      status: 'pending_confirmations'\n    }\n\nexport function getCctpContracts({\n  sourceChainId\n}: {\n  sourceChainId?: ChainId\n}) {\n  if (!sourceChainId) {\n    return contracts[ChainId.Ethereum]\n  }\n  return (\n    contracts[sourceChainId as CCTPSupportedChainId] ||\n    contracts[ChainId.Ethereum]\n  )\n}\n\nexport function fetchPerMessageBurnLimit({\n  sourceChainId\n}: {\n  sourceChainId: CCTPSupportedChainId\n}) {\n  const { usdcContractAddress, tokenMinterContractAddress } = getCctpContracts({\n    sourceChainId\n  })\n\n  return readContract({\n    address: tokenMinterContractAddress,\n    chainId: sourceChainId,\n    abi: TokenMinterAbi,\n    functionName: 'burnLimitsPerMessage',\n    args: [usdcContractAddress]\n  })\n}\n\nexport const getCctpUtils = ({ sourceChainId }: { sourceChainId?: number }) => {\n  const {\n    targetChainId,\n    attestationApiUrl,\n    messageTransmitterContractAddress\n  } = getCctpContracts({ sourceChainId })\n\n  const fetchAttestation = async (attestationHash: Address) => {\n    const response = await fetch(\n      `${attestationApiUrl}/attestations/${attestationHash}`,\n      { method: 'GET', headers: { accept: 'application/json' } }\n    )\n\n    const attestationResponse: AttestationResponse = await response.json()\n    return attestationResponse\n  }\n\n  const waitForAttestation = async (attestationHash: Address) => {\n    while (true) {\n      const attestation = await fetchAttestation(attestationHash)\n      if (attestation.status === 'complete') {\n        return attestation.attestation\n      }\n\n      await new Promise(r => setTimeout(r, 30_000))\n    }\n  }\n\n  const receiveMessage = async ({\n    messageBytes,\n    attestation,\n    signer\n  }: {\n    messageBytes: Address\n    attestation: Address\n    signer: Signer\n  }) => {\n    const config = await prepareWriteContract({\n      address: messageTransmitterContractAddress,\n      abi: MessageTransmitterAbi,\n      functionName: 'receiveMessage',\n      chainId: targetChainId,\n      signer,\n      args: [messageBytes, attestation]\n    })\n    return writeContract(config)\n  }\n\n  return {\n    receiveMessage,\n    fetchAttestation,\n    waitForAttestation\n  }\n}\n","export const TokenMessengerAbi = [\n  {\n    inputs: [\n      { internalType: 'address', name: '_messageTransmitter', type: 'address' },\n      { internalType: 'uint32', name: '_messageBodyVersion', type: 'uint32' }\n    ],\n    stateMutability: 'nonpayable',\n    type: 'constructor'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      { indexed: true, internalType: 'uint64', name: 'nonce', type: 'uint64' },\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'burnToken',\n        type: 'address'\n      },\n      {\n        indexed: false,\n        internalType: 'uint256',\n        name: 'amount',\n        type: 'uint256'\n      },\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'depositor',\n        type: 'address'\n      },\n      {\n        indexed: false,\n        internalType: 'bytes32',\n        name: 'mintRecipient',\n        type: 'bytes32'\n      },\n      {\n        indexed: false,\n        internalType: 'uint32',\n        name: 'destinationDomain',\n        type: 'uint32'\n      },\n      {\n        indexed: false,\n        internalType: 'bytes32',\n        name: 'destinationTokenMessenger',\n        type: 'bytes32'\n      },\n      {\n        indexed: false,\n        internalType: 'bytes32',\n        name: 'destinationCaller',\n        type: 'bytes32'\n      }\n    ],\n    name: 'DepositForBurn',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: false,\n        internalType: 'address',\n        name: 'localMinter',\n        type: 'address'\n      }\n    ],\n    name: 'LocalMinterAdded',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: false,\n        internalType: 'address',\n        name: 'localMinter',\n        type: 'address'\n      }\n    ],\n    name: 'LocalMinterRemoved',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'mintRecipient',\n        type: 'address'\n      },\n      {\n        indexed: false,\n        internalType: 'uint256',\n        name: 'amount',\n        type: 'uint256'\n      },\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'mintToken',\n        type: 'address'\n      }\n    ],\n    name: 'MintAndWithdraw',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'previousOwner',\n        type: 'address'\n      },\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'newOwner',\n        type: 'address'\n      }\n    ],\n    name: 'OwnershipTransferStarted',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'previousOwner',\n        type: 'address'\n      },\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'newOwner',\n        type: 'address'\n      }\n    ],\n    name: 'OwnershipTransferred',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: false,\n        internalType: 'uint32',\n        name: 'domain',\n        type: 'uint32'\n      },\n      {\n        indexed: false,\n        internalType: 'bytes32',\n        name: 'tokenMessenger',\n        type: 'bytes32'\n      }\n    ],\n    name: 'RemoteTokenMessengerAdded',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: false,\n        internalType: 'uint32',\n        name: 'domain',\n        type: 'uint32'\n      },\n      {\n        indexed: false,\n        internalType: 'bytes32',\n        name: 'tokenMessenger',\n        type: 'bytes32'\n      }\n    ],\n    name: 'RemoteTokenMessengerRemoved',\n    type: 'event'\n  },\n  {\n    anonymous: false,\n    inputs: [\n      {\n        indexed: true,\n        internalType: 'address',\n        name: 'newRescuer',\n        type: 'address'\n      }\n    ],\n    name: 'RescuerChanged',\n    type: 'event'\n  },\n  {\n    inputs: [],\n    name: 'acceptOwnership',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      { internalType: 'address', name: 'newLocalMinter', type: 'address' }\n    ],\n    name: 'addLocalMinter',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      { internalType: 'uint32', name: 'domain', type: 'uint32' },\n      { internalType: 'bytes32', name: 'tokenMessenger', type: 'bytes32' }\n    ],\n    name: 'addRemoteTokenMessenger',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      { internalType: 'uint256', name: 'amount', type: 'uint256' },\n      { internalType: 'uint32', name: 'destinationDomain', type: 'uint32' },\n      { internalType: 'bytes32', name: 'mintRecipient', type: 'bytes32' },\n      { internalType: 'address', name: 'burnToken', type: 'address' }\n    ],\n    name: 'depositForBurn',\n    outputs: [{ internalType: 'uint64', name: '_nonce', type: 'uint64' }],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      { internalType: 'uint256', name: 'amount', type: 'uint256' },\n      { internalType: 'uint32', name: 'destinationDomain', type: 'uint32' },\n      { internalType: 'bytes32', name: 'mintRecipient', type: 'bytes32' },\n      { internalType: 'address', name: 'burnToken', type: 'address' },\n      { internalType: 'bytes32', name: 'destinationCaller', type: 'bytes32' }\n    ],\n    name: 'depositForBurnWithCaller',\n    outputs: [{ internalType: 'uint64', name: 'nonce', type: 'uint64' }],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      { internalType: 'uint32', name: 'remoteDomain', type: 'uint32' },\n      { internalType: 'bytes32', name: 'sender', type: 'bytes32' },\n      { internalType: 'bytes', name: 'messageBody', type: 'bytes' }\n    ],\n    name: 'handleReceiveMessage',\n    outputs: [{ internalType: 'bool', name: '', type: 'bool' }],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'localMessageTransmitter',\n    outputs: [\n      {\n        internalType: 'contract IMessageTransmitter',\n        name: '',\n        type: 'address'\n      }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'localMinter',\n    outputs: [\n      { internalType: 'contract ITokenMinter', name: '', type: 'address' }\n    ],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'messageBodyVersion',\n    outputs: [{ internalType: 'uint32', name: '', type: 'uint32' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'owner',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'pendingOwner',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [{ internalType: 'uint32', name: '', type: 'uint32' }],\n    name: 'remoteTokenMessengers',\n    outputs: [{ internalType: 'bytes32', name: '', type: 'bytes32' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'removeLocalMinter',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [{ internalType: 'uint32', name: 'domain', type: 'uint32' }],\n    name: 'removeRemoteTokenMessenger',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      { internalType: 'bytes', name: 'originalMessage', type: 'bytes' },\n      { internalType: 'bytes', name: 'originalAttestation', type: 'bytes' },\n      {\n        internalType: 'bytes32',\n        name: 'newDestinationCaller',\n        type: 'bytes32'\n      },\n      { internalType: 'bytes32', name: 'newMintRecipient', type: 'bytes32' }\n    ],\n    name: 'replaceDepositForBurn',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [\n      {\n        internalType: 'contract IERC20',\n        name: 'tokenContract',\n        type: 'address'\n      },\n      { internalType: 'address', name: 'to', type: 'address' },\n      { internalType: 'uint256', name: 'amount', type: 'uint256' }\n    ],\n    name: 'rescueERC20',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [],\n    name: 'rescuer',\n    outputs: [{ internalType: 'address', name: '', type: 'address' }],\n    stateMutability: 'view',\n    type: 'function'\n  },\n  {\n    inputs: [{ internalType: 'address', name: 'newOwner', type: 'address' }],\n    name: 'transferOwnership',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  },\n  {\n    inputs: [{ internalType: 'address', name: 'newRescuer', type: 'address' }],\n    name: 'updateRescuer',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function'\n  }\n] as const\n","import { prepareWriteContract, writeContract } from '@wagmi/core'\nimport { constants, utils } from 'ethers'\nimport { ERC20__factory } from '@arbitrum/sdk/dist/lib/abi/factories/ERC20__factory'\n\nimport {\n  ApproveTokenProps,\n  BridgeTransferStarter,\n  RequiresTokenApprovalProps,\n  TransferProps,\n  TransferType\n} from './BridgeTransferStarter'\nimport { formatAmount } from '../util/NumberUtils'\nimport { fetchPerMessageBurnLimit, getCctpContracts } from './cctp'\nimport { getChainIdFromProvider, getAddressFromSigner } from './utils'\nimport { fetchErc20Allowance } from '../util/TokenUtils'\nimport { TokenMessengerAbi } from '../util/cctp/TokenMessengerAbi'\nimport { Address } from '../util/AddressUtils'\n\nexport class CctpTransferStarter extends BridgeTransferStarter {\n  public transferType: TransferType = 'cctp'\n\n  public requiresNativeCurrencyApproval = async () => false\n\n  public async approveNativeCurrencyEstimateGas() {\n    // no-op\n  }\n\n  public approveNativeCurrency = async () => {\n    return\n  }\n\n  public async requiresTokenApproval({\n    amount,\n    signer,\n    destinationAddress\n  }: RequiresTokenApprovalProps): Promise<boolean> {\n    const sourceChainId = await getChainIdFromProvider(this.sourceChainProvider)\n\n    const address = await getAddressFromSigner(signer)\n\n    const { usdcContractAddress, tokenMessengerContractAddress } =\n      getCctpContracts({ sourceChainId })\n\n    const recipient = destinationAddress ?? address\n\n    const allowance = await fetchErc20Allowance({\n      address: usdcContractAddress,\n      provider: this.sourceChainProvider,\n      owner: recipient,\n      spender: tokenMessengerContractAddress\n    })\n\n    return allowance.lt(amount)\n  }\n\n  public async approveToken({ signer, amount }: ApproveTokenProps) {\n    const sourceChainId = await getChainIdFromProvider(this.sourceChainProvider)\n\n    const { usdcContractAddress, tokenMessengerContractAddress } =\n      getCctpContracts({ sourceChainId })\n\n    // approve USDC token for burn\n    const contract = ERC20__factory.connect(usdcContractAddress, signer)\n    return contract.functions.approve(\n      tokenMessengerContractAddress,\n      amount ?? constants.MaxInt256\n    )\n  }\n\n  public async approveTokenEstimateGas({ signer, amount }: ApproveTokenProps) {\n    const sourceChainId = await getChainIdFromProvider(this.sourceChainProvider)\n    const { usdcContractAddress, tokenMessengerContractAddress } =\n      getCctpContracts({ sourceChainId })\n    const contract = ERC20__factory.connect(usdcContractAddress, signer)\n    return contract.estimateGas.approve(\n      tokenMessengerContractAddress,\n      amount ?? constants.MaxInt256\n    )\n  }\n\n  public async transferEstimateGas() {\n    // for cctp transfers we don't call our native gas estimation methods because we have completely different contracts\n    return undefined\n  }\n\n  public async transfer({ signer, amount, destinationAddress }: TransferProps) {\n    const sourceChainId = await getChainIdFromProvider(this.sourceChainProvider)\n\n    const address = await getAddressFromSigner(signer)\n\n    // cctp has an upper limit for transfer\n    const burnLimit = await fetchPerMessageBurnLimit({\n      sourceChainId\n    })\n\n    if (amount.gt(burnLimit)) {\n      const formatedLimit = formatAmount(burnLimit, {\n        decimals: 6, // hardcode for USDC\n        symbol: 'USDC'\n      })\n      throw Error(\n        `The limit for transfers using CCTP is ${formatedLimit}. Please lower your amount and try again.`\n      )\n    }\n\n    const recipient = destinationAddress ?? address\n\n    // burn token on the selected chain to be transferred from cctp contracts to the other chain\n\n    // CCTP uses 32 bytes addresses, while EVEM uses 20 bytes addresses\n    const mintRecipient = utils.hexlify(utils.zeroPad(recipient, 32)) as Address\n\n    const {\n      usdcContractAddress,\n      tokenMessengerContractAddress,\n      targetChainDomain\n    } = getCctpContracts({\n      sourceChainId\n    })\n\n    const config = await prepareWriteContract({\n      address: tokenMessengerContractAddress,\n      abi: TokenMessengerAbi,\n      functionName: 'depositForBurn',\n      signer,\n      args: [amount, targetChainDomain, mintRecipient, usdcContractAddress]\n    })\n\n    const depositForBurnTx = await writeContract(config)\n\n    return {\n      transferType: this.transferType,\n      status: 'pending',\n      sourceChainProvider: this.sourceChainProvider,\n      sourceChainTransaction: depositForBurnTx,\n      destinationChainProvider: this.destinationChainProvider\n    }\n  }\n}\n","import { EthBridger, getArbitrumNetwork } from '@arbitrum/sdk'\nimport { BigNumber, constants } from 'ethers'\n\nimport { DepositGasEstimates } from '../hooks/arbTokenBridge.types'\nimport { fetchErc20Allowance } from './TokenUtils'\nimport { DepositTxEstimateGasParams } from './TokenDepositUtils'\n\nfunction fetchFallbackGasEstimatesForOrbitChainWithCustomFeeToken(): DepositGasEstimates {\n  return {\n    // todo(spsjvc): properly estimate these values\n    //\n    // this hardcoding is only necessary for Orbit chains that have a custom fee token (where estimation may fail due to low allowance)\n    estimatedParentChainGas: BigNumber.from(100_000),\n    estimatedChildChainGas: constants.Zero,\n    estimatedChildChainSubmissionCost: constants.Zero\n  }\n}\n\nasync function customFeeTokenAllowanceIsInsufficient(\n  params: DepositEthEstimateGasParams\n) {\n  const { amount, address, parentChainProvider, childChainProvider } = params\n  const l2Network = await getArbitrumNetwork(childChainProvider)\n\n  if (typeof l2Network.nativeToken === 'undefined') {\n    throw new Error(\n      '[customFeeTokenAllowanceIsInsufficient] expected nativeToken to be defined'\n    )\n  }\n\n  const customFeeTokenAllowanceForInbox = await fetchErc20Allowance({\n    address: l2Network.nativeToken,\n    provider: parentChainProvider,\n    owner: address,\n    spender: l2Network.ethBridge.inbox\n  })\n\n  return customFeeTokenAllowanceForInbox.lt(amount)\n}\n\nexport type DepositEthEstimateGasParams = Omit<\n  DepositTxEstimateGasParams,\n  'erc20L1Address'\n>\n\nexport async function depositEthEstimateGas(\n  params: DepositEthEstimateGasParams\n): Promise<DepositGasEstimates> {\n  const { amount, address, parentChainProvider, childChainProvider } = params\n  const ethBridger = await EthBridger.fromProvider(childChainProvider)\n\n  const customFeeToken = typeof ethBridger.nativeToken !== 'undefined'\n\n  if (customFeeToken && (await customFeeTokenAllowanceIsInsufficient(params))) {\n    return fetchFallbackGasEstimatesForOrbitChainWithCustomFeeToken()\n  }\n\n  // todo: update this when we support custom destination addresses for eth deposits\n  const depositRequest = await ethBridger.getDepositRequest({\n    amount,\n    from: address\n  })\n\n  const estimatedParentChainGas = await parentChainProvider.estimateGas(\n    depositRequest.txRequest\n  )\n\n  return {\n    estimatedParentChainGas,\n    estimatedChildChainGas: constants.Zero,\n    estimatedChildChainSubmissionCost: constants.Zero\n  }\n}\n","import { EthBridger } from '@arbitrum/sdk'\nimport { BigNumber } from 'ethers'\nimport {\n  ApproveNativeCurrencyEstimateGasProps,\n  ApproveNativeCurrencyProps,\n  BridgeTransferStarter,\n  RequiresNativeCurrencyApprovalProps,\n  TransferEstimateGas,\n  TransferProps,\n  TransferType\n} from './BridgeTransferStarter'\nimport { getAddressFromSigner, percentIncrease } from './utils'\nimport { depositEthEstimateGas } from '../util/EthDepositUtils'\nimport { fetchErc20Allowance } from '../util/TokenUtils'\n\nexport class EthDepositStarter extends BridgeTransferStarter {\n  public transferType: TransferType = 'eth_deposit'\n\n  private ethBridger: EthBridger | undefined\n\n  private async getBridger(): Promise<EthBridger> {\n    if (this.ethBridger) {\n      return this.ethBridger\n    }\n\n    this.ethBridger = await EthBridger.fromProvider(\n      this.destinationChainProvider\n    )\n\n    return this.ethBridger\n  }\n\n  public async requiresNativeCurrencyApproval({\n    amount,\n    signer\n  }: RequiresNativeCurrencyApprovalProps) {\n    const address = await getAddressFromSigner(signer)\n    const ethBridger = await this.getBridger()\n\n    const { childNetwork } = ethBridger\n\n    if (typeof childNetwork.nativeToken === 'undefined') {\n      return false // native currency doesn't require approval\n    }\n\n    const customFeeTokenAllowanceForInbox = await fetchErc20Allowance({\n      address: childNetwork.nativeToken,\n      provider: this.sourceChainProvider,\n      owner: address,\n      spender: childNetwork.ethBridge.inbox\n    })\n\n    // We want to bridge a certain amount of the custom fee token, so we have to check if the allowance is enough.\n    return customFeeTokenAllowanceForInbox.lt(amount)\n  }\n\n  public async approveNativeCurrencyEstimateGas({\n    signer,\n    amount\n  }: ApproveNativeCurrencyEstimateGasProps) {\n    const ethBridger = await this.getBridger()\n    const txRequest = ethBridger.getApproveGasTokenRequest({ amount })\n\n    return signer.estimateGas(txRequest)\n  }\n\n  public async approveNativeCurrency({\n    signer,\n    amount\n  }: ApproveNativeCurrencyProps) {\n    const ethBridger = await this.getBridger()\n    return ethBridger.approveGasToken({\n      parentSigner: signer,\n      amount\n    })\n  }\n\n  public requiresTokenApproval = async () => false\n\n  public approveTokenEstimateGas = async () => {\n    // no-op\n  }\n\n  public approveToken = async () => {\n    // no-op\n  }\n\n  public async transferEstimateGas({ amount, signer }: TransferEstimateGas) {\n    const address = await getAddressFromSigner(signer)\n\n    return depositEthEstimateGas({\n      amount,\n      address,\n      parentChainProvider: this.sourceChainProvider,\n      childChainProvider: this.destinationChainProvider\n    })\n  }\n\n  public async transfer({ amount, signer }: TransferProps) {\n    const address = await getAddressFromSigner(signer)\n    const ethBridger = await this.getBridger()\n\n    const depositRequest = await ethBridger.getDepositRequest({\n      amount,\n      from: address\n    })\n\n    const gasLimit = await this.sourceChainProvider.estimateGas(\n      depositRequest.txRequest\n    )\n\n    const sourceChainTransaction = await ethBridger.deposit({\n      amount,\n      parentSigner: signer,\n      overrides: { gasLimit: percentIncrease(gasLimit, BigNumber.from(5)) }\n    })\n\n    return {\n      transferType: this.transferType,\n      status: 'pending',\n      sourceChainProvider: this.sourceChainProvider,\n      sourceChainTransaction,\n      destinationChainProvider: this.destinationChainProvider\n    }\n  }\n}\n","import { Erc20Bridger, getArbitrumNetwork } from '@arbitrum/sdk'\nimport { Inbox__factory } from '@arbitrum/sdk/dist/lib/abi/factories/Inbox__factory'\nimport { Provider } from '@ethersproject/providers'\nimport { BigNumber } from 'ethers'\n\nimport {\n  fetchErc20Allowance,\n  fetchErc20ParentChainGatewayAddress,\n  getL2ERC20Address\n} from './TokenUtils'\nimport { DepositGasEstimates } from '../hooks/arbTokenBridge.types'\nimport { addressIsSmartContract } from './AddressUtils'\nimport { getChainIdFromProvider } from '../token-bridge-sdk/utils'\nimport { captureSentryErrorWithExtraData } from './SentryUtils'\n\nasync function fetchTokenFallbackGasEstimates({\n  inboxAddress,\n  parentChainErc20Address,\n  parentChainProvider,\n  childChainProvider\n}: {\n  inboxAddress: string\n  parentChainErc20Address: string\n  parentChainProvider: Provider\n  childChainProvider: Provider\n}): Promise<DepositGasEstimates> {\n  const l1BaseFee = await parentChainProvider.getGasPrice()\n  const inbox = Inbox__factory.connect(inboxAddress, parentChainProvider)\n\n  const estimatedChildChainSubmissionCost =\n    await inbox.calculateRetryableSubmissionFee(\n      // Values set by looking at a couple of L1 gateways\n      //\n      // L1 LPT Gateway: 324\n      // L1 DAI Gateway: 324\n      // L1 Standard Gateway (APE): 740\n      // L1 Custom Gateway (USDT): 324\n      // L1 WETH Gateway: 324\n      BigNumber.from(1_000),\n      // We do the same percent increase in the SDK\n      //\n      // https://github.com/OffchainLabs/arbitrum-sdk/blob/main/src/lib/message/L1ToL2MessageGasEstimator.ts#L132\n      l1BaseFee.add(l1BaseFee.mul(BigNumber.from(3)))\n    )\n\n  // Values set by looking at a couple of different ERC-20 deposits\n  // https://etherscan.io/tx/0x5c0ab94413217d54641ba5faa0c614c6dd5f97efcc7a6ca25df9c376738dfa34\n  // https://etherscan.io/tx/0x0049a5a171b891c5826ba47e77871fa6bae6eb57fcaf474a97d62ab07a815a2c\n  // https://etherscan.io/tx/0xb11bffdfbe4bc6fb4328c390d4cdf73bc863dbaaef057afb59cd83dfd6dc210c\n  // https://etherscan.io/tx/0x194ab69d3d2b5730b37e8bad1473f8bc54ded7a2ad3708d131ef13c09168d67e\n  // https://etherscan.io/tx/0xc4789d3f13e0efb011dfa88eef89b4b715d8c32366977eae2d3b85f13b3aa6c5\n  const estimatedParentChainGas = BigNumber.from(240_000)\n\n  const childChainTokenAddress = await getL2ERC20Address({\n    erc20L1Address: parentChainErc20Address,\n    l1Provider: parentChainProvider,\n    l2Provider: childChainProvider\n  })\n\n  const childChainId = await getChainIdFromProvider(childChainProvider)\n\n  const isFirstTimeTokenBridging = !(await addressIsSmartContract(\n    childChainTokenAddress,\n    childChainId\n  ))\n  if (isFirstTimeTokenBridging) {\n    return {\n      estimatedParentChainGas,\n      // Values set by looking at a couple of different ERC-20 deposits, with added buffer to account for the 30% gas limit increase (see `depositTokenEstimateGas`)\n      // https://explorer.xai-chain.net/tx/0x9b069c244e6c1ebb3eebfe9f653eb4c9fcb171ab56c68770509c86c16bb078a0\n      // https://explorer.xai-chain.net/tx/0x68203e316c690878e35a8aa77db32108cd9afcc02eb7488ce3d2869a87e84492\n      estimatedChildChainGas: BigNumber.from(800_000),\n      estimatedChildChainSubmissionCost\n    }\n  }\n\n  // custom gateway token deposits have a higher gas limit in the @arbitrum/sdk : https://github.com/OffchainLabs/arbitrum-sdk/blob/main/src/lib/assetBridger/erc20Bridger.ts#L181\n  // tx example: https://arbiscan.io/tx/0x8f52daffdd97af8130d667a74a89234cd9ce838d23214d61818bd9743a2f64f8 // 275_000\n  const isCustomGatewayTokenDeposit = await addressIsCustomGatewayToken({\n    parentChainErc20Address,\n    parentChainProvider,\n    childChainProvider\n  })\n  if (isCustomGatewayTokenDeposit) {\n    return {\n      estimatedParentChainGas,\n      estimatedChildChainGas: BigNumber.from(300_000),\n      estimatedChildChainSubmissionCost\n    }\n  }\n\n  return {\n    estimatedParentChainGas,\n    // Values set by looking at a couple of different ERC-20 deposits, with added buffer to account for the 30% gas limit increase (see `depositTokenEstimateGas`)\n    // https://arbiscan.io/tx/0x483206b0ed4e8a23b14de070f6c552120d0b9bc6ed028f4feae33c4ca832f2bc\n    // https://arbiscan.io/tx/0xd2ba11ebc51f546abc2ddda715507948d097e5707fd1dc37c239cc4cf28cc6ed\n    // https://arbiscan.io/tx/0xb341745b6f4a34ee539c628dcf177fc98b658e494c7f8d21da872e69d5173596\n    // https://arbiscan.io/tx/0x731d31834bc01d33a1de33b5562b29c1ae6f75d20f6da83a5d74c3c91bd2dab9\n    // https://arbiscan.io/tx/0x6b13bfe9f22640ac25f77a677a3c36e748913d5e07766b3d6394de09a1398020\n    estimatedChildChainGas: BigNumber.from(150_000),\n    estimatedChildChainSubmissionCost\n  }\n}\n\nasync function allowanceIsInsufficient(params: DepositTokenEstimateGasParams) {\n  const {\n    amount,\n    address,\n    parentChainErc20Address,\n    parentChainProvider,\n    childChainProvider\n  } = params\n\n  const l1Gateway = await fetchErc20ParentChainGatewayAddress({\n    erc20ParentChainAddress: parentChainErc20Address,\n    parentChainProvider,\n    childChainProvider\n  })\n\n  const allowanceForL1Gateway = await fetchErc20Allowance({\n    address: parentChainErc20Address,\n    provider: parentChainProvider,\n    owner: address,\n    spender: l1Gateway\n  })\n\n  return allowanceForL1Gateway.lt(amount)\n}\n\nexport type DepositTxEstimateGasParams = {\n  amount: BigNumber\n  address: string\n  parentChainErc20Address?: string\n  parentChainProvider: Provider\n  childChainProvider: Provider\n}\n\ntype DepositTokenEstimateGasParams = Required<DepositTxEstimateGasParams>\n\nexport async function depositTokenEstimateGas(\n  params: DepositTokenEstimateGasParams\n): Promise<DepositGasEstimates> {\n  const {\n    amount,\n    address,\n    parentChainErc20Address,\n    parentChainProvider,\n    childChainProvider\n  } = params\n  const erc20Bridger = await Erc20Bridger.fromProvider(childChainProvider)\n\n  try {\n    if (await allowanceIsInsufficient(params)) {\n      console.warn(\n        `Gateway allowance for \"${parentChainErc20Address}\" is too low, falling back to hardcoded values.`\n      )\n\n      return fetchTokenFallbackGasEstimates({\n        inboxAddress: erc20Bridger.childNetwork.ethBridge.inbox,\n        parentChainErc20Address,\n        parentChainProvider,\n        childChainProvider\n      })\n    }\n\n    const { txRequest, retryableData } = await erc20Bridger.getDepositRequest({\n      amount,\n      erc20ParentAddress: parentChainErc20Address,\n      parentProvider: parentChainProvider,\n      childProvider: childChainProvider,\n      from: address,\n      retryableGasOverrides: {\n        // the gas limit may vary by about 20k due to SSTORE (zero vs nonzero)\n        // the 30% gas limit increase should cover the difference\n        gasLimit: { percentIncrease: BigNumber.from(30) }\n      }\n    })\n\n    return {\n      estimatedParentChainGas: await parentChainProvider.estimateGas(txRequest),\n      estimatedChildChainGas: retryableData.gasLimit,\n      estimatedChildChainSubmissionCost: retryableData.maxSubmissionCost\n    }\n  } catch (error) {\n    captureSentryErrorWithExtraData({\n      error,\n      originFunction: 'depositTokenEstimateGas'\n    })\n\n    return fetchTokenFallbackGasEstimates({\n      inboxAddress: erc20Bridger.childNetwork.ethBridge.inbox,\n      parentChainErc20Address,\n      parentChainProvider,\n      childChainProvider\n    })\n  }\n}\n\nasync function addressIsCustomGatewayToken({\n  parentChainErc20Address,\n  parentChainProvider,\n  childChainProvider\n}: {\n  parentChainErc20Address: string\n  parentChainProvider: Provider\n  childChainProvider: Provider\n}) {\n  const parentChainGatewayAddress = await fetchErc20ParentChainGatewayAddress({\n    erc20ParentChainAddress: parentChainErc20Address,\n    parentChainProvider,\n    childChainProvider\n  })\n  const childChainNetwork = await getArbitrumNetwork(childChainProvider)\n  return (\n    parentChainGatewayAddress.toLowerCase() ===\n    childChainNetwork.tokenBridge?.parentCustomGateway.toLowerCase()\n  )\n}\n","import { Erc20Bridger } from '@arbitrum/sdk'\nimport { BigNumber, constants, utils } from 'ethers'\nimport { ERC20__factory } from '@arbitrum/sdk/dist/lib/abi/factories/ERC20__factory'\nimport {\n  ApproveNativeCurrencyEstimateGasProps,\n  ApproveNativeCurrencyProps,\n  ApproveTokenProps,\n  BridgeTransferStarter,\n  BridgeTransferStarterProps,\n  RequiresNativeCurrencyApprovalProps,\n  RequiresTokenApprovalProps,\n  TransferEstimateGas,\n  TransferProps,\n  TransferType\n} from './BridgeTransferStarter'\nimport {\n  fetchErc20Allowance,\n  fetchErc20ParentChainGatewayAddress\n} from '../util/TokenUtils'\nimport { getAddressFromSigner, percentIncrease } from './utils'\nimport { depositTokenEstimateGas } from '../util/TokenDepositUtils'\n\n// https://github.com/OffchainLabs/arbitrum-sdk/blob/main/src/lib/message/L1ToL2MessageGasEstimator.ts#L33\nexport const DEFAULT_GAS_PRICE_PERCENT_INCREASE = BigNumber.from(500)\n\nexport class Erc20DepositStarter extends BridgeTransferStarter {\n  public transferType: TransferType = 'erc20_deposit'\n\n  private erc20Bridger: Erc20Bridger | undefined\n  private sourceChainGatewayAddress: string | undefined\n\n  constructor(props: BridgeTransferStarterProps) {\n    super(props)\n\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n  }\n\n  private async getBridger() {\n    if (this.erc20Bridger) {\n      return this.erc20Bridger\n    }\n\n    this.erc20Bridger = await Erc20Bridger.fromProvider(\n      this.destinationChainProvider\n    )\n\n    return this.erc20Bridger\n  }\n\n  private async getSourceChainGatewayAddress() {\n    if (this.sourceChainGatewayAddress) {\n      return this.sourceChainGatewayAddress\n    }\n\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    this.sourceChainGatewayAddress = await fetchErc20ParentChainGatewayAddress({\n      erc20ParentChainAddress: this.sourceChainErc20Address,\n      parentChainProvider: this.sourceChainProvider,\n      childChainProvider: this.destinationChainProvider\n    })\n\n    return this.sourceChainGatewayAddress\n  }\n\n  /**\n   *\n   * Erc20DepositStarter methods\n   *\n   */\n\n  public async requiresNativeCurrencyApproval({\n    amount,\n    signer\n  }: RequiresNativeCurrencyApprovalProps) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const address = await getAddressFromSigner(signer)\n\n    const erc20Bridger = await this.getBridger()\n    const l2Network = erc20Bridger.childNetwork\n\n    if (typeof l2Network.nativeToken === 'undefined') {\n      return false // native currency doesn't require approval\n    }\n\n    const nativeCurrency = ERC20__factory.connect(\n      l2Network.nativeToken,\n      this.sourceChainProvider\n    )\n\n    const customFeeTokenAllowanceForSourceChainGateway =\n      await fetchErc20Allowance({\n        address: l2Network.nativeToken,\n        provider: this.sourceChainProvider,\n        owner: address,\n        spender: await this.getSourceChainGatewayAddress()\n      })\n\n    const gasEstimates = await this.transferEstimateGas({ amount, signer })\n\n    const destinationChainGasPrice =\n      await this.destinationChainProvider.getGasPrice()\n\n    const estimatedDestinationChainGasFeeEth = parseFloat(\n      utils.formatEther(\n        gasEstimates.estimatedChildChainGas\n          .mul(\n            percentIncrease(\n              destinationChainGasPrice,\n              DEFAULT_GAS_PRICE_PERCENT_INCREASE\n            )\n          )\n          .add(gasEstimates.estimatedChildChainSubmissionCost)\n      )\n    )\n    const estimatedDestinationChainGasFee = utils.parseUnits(\n      String(estimatedDestinationChainGasFeeEth),\n      await nativeCurrency.decimals()\n    )\n\n    // We want to bridge a certain amount of an ERC-20 token, but the Retryable fees on the destination chain will be paid in the custom fee token\n    // We have to check if the native-token spending allowance is enough to cover the fees\n    return customFeeTokenAllowanceForSourceChainGateway.lt(\n      estimatedDestinationChainGasFee\n    )\n  }\n\n  public async approveNativeCurrencyEstimateGas({\n    signer,\n    amount\n  }: ApproveNativeCurrencyEstimateGasProps) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const erc20Bridger = await this.getBridger()\n\n    const txRequest = await erc20Bridger.getApproveGasTokenRequest({\n      erc20ParentAddress: this.sourceChainErc20Address,\n      parentProvider: this.sourceChainProvider,\n      amount\n    })\n\n    return signer.estimateGas(txRequest)\n  }\n\n  public async approveNativeCurrency({\n    signer,\n    amount\n  }: ApproveNativeCurrencyProps) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const erc20Bridger = await this.getBridger()\n\n    const l2Network = erc20Bridger.childNetwork\n\n    if (typeof l2Network.nativeToken === 'undefined') {\n      throw Error('Network does not have a custom native token')\n    }\n\n    const nativeCurrency = ERC20__factory.connect(\n      l2Network.nativeToken,\n      this.sourceChainProvider\n    )\n\n    const gasEstimates = await this.transferEstimateGas({ amount, signer })\n\n    const destinationChainGasPrice =\n      await this.destinationChainProvider.getGasPrice()\n\n    const estimatedDestinationChainGasFeeEth = parseFloat(\n      utils.formatEther(\n        gasEstimates.estimatedChildChainGas\n          .mul(\n            percentIncrease(\n              destinationChainGasPrice,\n              DEFAULT_GAS_PRICE_PERCENT_INCREASE\n            )\n          )\n          .add(gasEstimates.estimatedChildChainSubmissionCost)\n      )\n    )\n\n    const estimatedDestinationChainGasFee = utils.parseUnits(\n      String(estimatedDestinationChainGasFeeEth),\n      await nativeCurrency.decimals()\n    )\n\n    return erc20Bridger.approveGasToken({\n      erc20ParentAddress: this.sourceChainErc20Address,\n      parentSigner: signer,\n      amount: estimatedDestinationChainGasFee\n    })\n  }\n\n  public requiresTokenApproval = async ({\n    amount,\n    signer\n  }: RequiresTokenApprovalProps) => {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const address = await getAddressFromSigner(signer)\n\n    const allowanceForSourceChainGateway = await fetchErc20Allowance({\n      address: this.sourceChainErc20Address,\n      provider: this.sourceChainProvider,\n      owner: address,\n      spender: await this.getSourceChainGatewayAddress()\n    })\n\n    return allowanceForSourceChainGateway.lt(amount)\n  }\n\n  public async approveTokenEstimateGas({ signer, amount }: ApproveTokenProps) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const address = await getAddressFromSigner(signer)\n\n    const contract = ERC20__factory.connect(\n      this.sourceChainErc20Address,\n      this.sourceChainProvider\n    )\n\n    return contract.estimateGas.approve(\n      await this.getSourceChainGatewayAddress(),\n      amount ?? constants.MaxUint256,\n      {\n        from: address\n      }\n    )\n  }\n\n  public async approveToken({ signer, amount }: ApproveTokenProps) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const erc20Bridger = await this.getBridger()\n\n    return erc20Bridger.approveToken({\n      erc20ParentAddress: this.sourceChainErc20Address,\n      parentSigner: signer,\n      amount: amount ?? constants.MaxUint256\n    })\n  }\n\n  public async transferEstimateGas({ amount, signer }: TransferEstimateGas) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const address = await getAddressFromSigner(signer)\n\n    return depositTokenEstimateGas({\n      amount,\n      address,\n      parentChainErc20Address: this.sourceChainErc20Address,\n      parentChainProvider: this.sourceChainProvider,\n      childChainProvider: this.destinationChainProvider\n    })\n  }\n\n  public async transfer({ amount, signer, destinationAddress }: TransferProps) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const address = await getAddressFromSigner(signer)\n    const erc20Bridger = await this.getBridger()\n\n    const depositRequest = await erc20Bridger.getDepositRequest({\n      parentProvider: this.sourceChainProvider,\n      childProvider: this.destinationChainProvider,\n      from: address,\n      erc20ParentAddress: this.sourceChainErc20Address,\n      destinationAddress,\n      amount,\n      retryableGasOverrides: {\n        // the gas limit may vary by about 20k due to SSTORE (zero vs nonzero)\n        // the 30% gas limit increase should cover the difference\n        gasLimit: { percentIncrease: BigNumber.from(30) }\n      }\n    })\n\n    const gasLimit = await this.sourceChainProvider.estimateGas(\n      depositRequest.txRequest\n    )\n\n    const sourceChainTransaction = await erc20Bridger.deposit({\n      ...depositRequest,\n      parentSigner: signer,\n      childProvider: this.destinationChainProvider,\n      overrides: { gasLimit: percentIncrease(gasLimit, BigNumber.from(5)) }\n    })\n\n    return {\n      transferType: this.transferType,\n      status: 'pending',\n      sourceChainProvider: this.sourceChainProvider,\n      sourceChainTransaction,\n      destinationChainProvider: this.destinationChainProvider\n    }\n  }\n}\n","import {\n  Erc20Bridger,\n  EthBridger,\n  ChildToParentTransactionRequest\n} from '@arbitrum/sdk'\nimport { Provider } from '@ethersproject/providers'\nimport { BigNumber } from 'ethers'\n\nimport { GasEstimates } from '../hooks/arbTokenBridge.types'\nimport { Address } from './AddressUtils'\nimport { captureSentryErrorWithExtraData } from './SentryUtils'\n\nexport async function withdrawInitTxEstimateGas({\n  amount,\n  address,\n  childChainProvider,\n  erc20L1Address\n}: {\n  amount: BigNumber\n  address: Address\n  childChainProvider: Provider\n  erc20L1Address?: string\n}): Promise<GasEstimates> {\n  const isToken = typeof erc20L1Address === 'string'\n\n  // For the withdrawal init tx, there's no gas fee paid on L1 separately\n  // unless we break down part of the L2 gas fee into L2 tx fee + L1 batch posting fee for that tx\n  // but as that does not fit into the context of the transfer. and\n  // would lead to user confusion, we instead present all the gas fee as L2 gas fee\n  const estimatedParentChainGas = BigNumber.from(0)\n\n  try {\n    let withdrawalRequest: ChildToParentTransactionRequest\n\n    if (isToken) {\n      const bridger = await Erc20Bridger.fromProvider(childChainProvider)\n      withdrawalRequest = await bridger.getWithdrawalRequest({\n        amount,\n        destinationAddress: address,\n        from: address,\n        erc20ParentAddress: erc20L1Address\n      })\n    } else {\n      const bridger = await EthBridger.fromProvider(childChainProvider)\n      withdrawalRequest = await bridger.getWithdrawalRequest({\n        amount,\n        destinationAddress: address,\n        from: address\n      })\n    }\n\n    // add 30% to the estimated total gas as buffer\n    const estimatedChildChainGas = BigNumber.from(\n      Math.ceil(\n        Number(\n          await childChainProvider.estimateGas(withdrawalRequest.txRequest)\n        ) * 1.3\n      )\n    )\n\n    return {\n      estimatedParentChainGas,\n      estimatedChildChainGas\n    }\n  } catch (error) {\n    captureSentryErrorWithExtraData({\n      error,\n      originFunction: 'withdrawInitTxEstimateGas',\n      additionalData: isToken\n        ? {\n            erc20_address_on_parent_chain: erc20L1Address,\n            withdrawal_type: 'token'\n          }\n        : { withdrawal_type: 'native currency' }\n    })\n\n    return {\n      estimatedParentChainGas,\n      // L2 gas estimation from recent txs\n      //\n      // ETH withdrawals @ ArbSys, average 482,462:\n      // 277,881\n      // https://arbiscan.io/tx/0x1cad1367c0accc27b448a826788c05279a1bdbab15665964f309638c11fbde62\n      // 362,935\n      // https://arbiscan.io/tx/0x9638b007b20750d2cf6d2fd5478e3684c445574d54585f236ec144a739a2a9e5\n      // 784,954\n      // https://arbiscan.io/tx/0xb5960bc91bb0557f4e6703d16bca7bba36c7c78f89be33278f4e98ca4c07cd18\n      // 504,076\n      // https://arbiscan.io/tx/0x8af2ff06697a575c63a99048f7370c2d6df87ee014d08235f3704841cd0dd78d\n      //\n      // ERC20 withdrawal @ L2 Gateway Router, average: 792,636:\n      // 820,150\n      // https://arbiscan.io/tx/0x0d94c5796d587c77fd0a81f4c151e17fe223a72c8665f57051d683f4a8d5b163\n      // USDC.e withdrawal 656,110\n      // https://arbiscan.io/tx/0xb881acb8a2e67214bc8415c1a8a6e28b07562298fa1487e60d08e7ff2e770e58\n      // cbETH withdrawal 901,650\n      // https://arbiscan.io/tx/0xadce86693186171735d6396b6c916cd029341bfe41240355f8f58b6721577128\n      // WETH withdrawal 892,486\n      // https://arbiscan.io/tx/0x81427c5815f058905b4ed876ea6d3496392b15292daf510db08c94c16eff2703\n      // WETH withdrawal 1,381,140\n      // https://arbiscan.io/tx/0xb9c866257b6f8861c2323ae902f681f7ffa313c3a3b93347f1ecaa0aa5c9b59e\n      estimatedChildChainGas: isToken\n        ? BigNumber.from(1_400_000)\n        : BigNumber.from(800_000)\n    }\n  }\n}\n","import { BigNumber } from 'ethers'\nimport { EthBridger } from '@arbitrum/sdk'\nimport {\n  BridgeTransferStarter,\n  TransferEstimateGas,\n  TransferProps,\n  TransferType\n} from './BridgeTransferStarter'\nimport { getAddressFromSigner, percentIncrease } from './utils'\nimport { withdrawInitTxEstimateGas } from '../util/WithdrawalUtils'\n\nexport class EthWithdrawalStarter extends BridgeTransferStarter {\n  public transferType: TransferType = 'eth_withdrawal'\n\n  public async requiresNativeCurrencyApproval() {\n    // native currency approval not required for withdrawal\n    return false\n  }\n\n  public async approveNativeCurrencyEstimateGas() {\n    // no-op\n  }\n\n  public async approveNativeCurrency() {\n    // no-op\n  }\n\n  public requiresTokenApproval = async () => false\n\n  public approveTokenEstimateGas = async () => {\n    // no-op\n  }\n\n  public approveToken = async () => {\n    // no-op\n  }\n\n  public async transferEstimateGas({ amount, signer }: TransferEstimateGas) {\n    const address = (await getAddressFromSigner(signer)) as `0x${string}`\n\n    return withdrawInitTxEstimateGas({\n      amount,\n      address,\n      childChainProvider: this.sourceChainProvider\n    })\n  }\n\n  public async transfer({ amount, signer }: TransferProps) {\n    const address = await getAddressFromSigner(signer)\n    const ethBridger = await EthBridger.fromProvider(this.sourceChainProvider)\n\n    const request = await ethBridger.getWithdrawalRequest({\n      amount,\n      destinationAddress: address,\n      from: address\n    })\n\n    const tx = await ethBridger.withdraw({\n      ...request,\n      childSigner: signer,\n      overrides: {\n        gasLimit: percentIncrease(\n          await this.sourceChainProvider.estimateGas(request.txRequest),\n          BigNumber.from(30)\n        )\n      }\n    })\n\n    return {\n      transferType: this.transferType,\n      status: 'pending',\n      sourceChainProvider: this.sourceChainProvider,\n      sourceChainTransaction: tx,\n      destinationChainProvider: this.destinationChainProvider\n    }\n  }\n}\n","import { ChainId } from '../util/networks'\n\nexport type RequireL2ApproveToken = {\n  symbol: string\n  l1Address: string\n  l2Address: string\n}\n\nconst L2ApproveTokens: { [chainId: number]: RequireL2ApproveToken[] } = {\n  [ChainId.ArbitrumOne]: [\n    {\n      symbol: 'LPT',\n      l1Address: '0x58b6A8A3302369DAEc383334672404Ee733aB239',\n      l2Address: '0x289ba1701C2F088cf0faf8B3705246331cB8A839'\n    },\n    {\n      symbol: 'GRT',\n      l1Address: '0xc944e90c64b2c07662a292be6244bdf05cda44a7',\n      l2Address: '0x9623063377AD1B27544C965cCd7342f7EA7e88C7'\n    },\n    {\n      symbol: 'ARB',\n      l1Address: '0xB50721BCf8d664c30412Cfbc6cf7a15145234ad1',\n      l2Address: '0x912CE59144191C1204E64559FE8253a0e49E6548'\n    },\n    {\n      symbol: 'saETH',\n      l1Address: '0xF1617882A71467534D14EEe865922de1395c9E89',\n      l2Address: '0xF1617882A71467534D14EEe865922de1395c9E89'\n    }\n  ],\n  [ChainId.ArbitrumNova]: [\n    {\n      symbol: 'ARB',\n      l1Address: '0xB50721BCf8d664c30412Cfbc6cf7a15145234ad1',\n      l2Address: '0xf823C3cD3CeBE0a1fA952ba88Dc9EEf8e0Bf46AD'\n    },\n    {\n      symbol: 'MOON',\n      l1Address: '0xb2490e357980cE57bF5745e181e537a64Eb367B1',\n      l2Address: '0x0057Ac2d777797d31CD3f8f13bF5e927571D6Ad0'\n    }\n  ],\n  [ChainId.ArbitrumSepolia]: [\n    {\n      symbol: 'ARB',\n      l1Address: '0xfa898E8d38B008F3bAc64dce019A9480d4F06863',\n      l2Address: '0xc275b23c035a9d4ec8867b47f55427e0bdce14cb'\n    }\n  ],\n  // xai mainnet\n  [660279]: [\n    {\n      symbol: 'wCU',\n      l1Address: '0x89c49a3fa372920ac23ce757a029e6936c0b8e02',\n      l2Address: '0x89c49a3fa372920ac23ce757a029e6936c0b8e02'\n    }\n  ],\n  // xai testnet\n  [37714555429]: [\n    {\n      symbol: 'CU',\n      l1Address: '0xd781cea0b8D5dDd0aeeD1dF7aC109C974A221B00',\n      l2Address: '0xe267c440dbfb1e185d506c2cc3c44eb21340e046'\n    }\n  ]\n}\n\nexport function tokenRequiresApprovalOnL2(\n  erc20L1Address: string,\n  l2ChainId: number\n) {\n  return (L2ApproveTokens[l2ChainId] ?? [])\n    .map(token => token.l1Address.toLowerCase())\n    .includes(erc20L1Address.toLowerCase())\n}\n","import { Erc20Bridger } from '@arbitrum/sdk'\nimport { BigNumber, constants } from 'ethers'\nimport { ERC20__factory } from '@arbitrum/sdk/dist/lib/abi/factories/ERC20__factory'\nimport {\n  ApproveTokenProps,\n  BridgeTransferStarter,\n  BridgeTransferStarterProps,\n  RequiresTokenApprovalProps,\n  TransferEstimateGas,\n  TransferProps,\n  TransferType\n} from './BridgeTransferStarter'\nimport {\n  fetchErc20L2GatewayAddress,\n  getL1ERC20Address\n} from '../util/TokenUtils'\nimport {\n  getAddressFromSigner,\n  getChainIdFromProvider,\n  percentIncrease\n} from './utils'\nimport { tokenRequiresApprovalOnL2 } from '../util/L2ApprovalUtils'\nimport { withdrawInitTxEstimateGas } from '../util/WithdrawalUtils'\nimport { addressIsSmartContract } from '../util/AddressUtils'\n\nexport class Erc20WithdrawalStarter extends BridgeTransferStarter {\n  public transferType: TransferType = 'erc20_withdrawal'\n\n  private sourceChainGatewayAddress: string | undefined\n\n  constructor(props: BridgeTransferStarterProps) {\n    super(props)\n\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n  }\n\n  private async getSourceChainGatewayAddress(): Promise<string> {\n    const destinationChainErc20Address =\n      await this.getDestinationChainErc20Address()\n\n    const sourceChainGatewayAddress = await fetchErc20L2GatewayAddress({\n      erc20L1Address: destinationChainErc20Address,\n      l2Provider: this.sourceChainProvider\n    })\n\n    this.sourceChainGatewayAddress = sourceChainGatewayAddress\n\n    return this.sourceChainGatewayAddress\n  }\n\n  private async getDestinationChainErc20Address(): Promise<string> {\n    if (this.destinationChainErc20Address) {\n      return this.destinationChainErc20Address\n    }\n\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const destinationChainErc20Address = await getL1ERC20Address({\n      erc20L2Address: this.sourceChainErc20Address,\n      l2Provider: this.sourceChainProvider\n    })\n\n    if (!destinationChainErc20Address) {\n      throw Error('Erc20 token not found on parent chain')\n    }\n\n    this.destinationChainErc20Address = destinationChainErc20Address\n\n    return this.destinationChainErc20Address\n  }\n\n  public async requiresNativeCurrencyApproval() {\n    // native currency approval not required for withdrawal\n    return false\n  }\n\n  public async approveNativeCurrencyEstimateGas() {\n    // no-op\n  }\n\n  public async approveNativeCurrency() {\n    // no-op\n  }\n\n  public requiresTokenApproval = async ({\n    amount,\n    signer\n  }: RequiresTokenApprovalProps) => {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const destinationChainErc20Address =\n      await this.getDestinationChainErc20Address()\n\n    const address = await getAddressFromSigner(signer)\n\n    const sourceChainId = await getChainIdFromProvider(this.sourceChainProvider)\n\n    // check first if token is even eligible for allowance check on l2\n    if (\n      tokenRequiresApprovalOnL2(destinationChainErc20Address, sourceChainId) &&\n      this.sourceChainErc20Address\n    ) {\n      const token = ERC20__factory.connect(\n        this.sourceChainErc20Address,\n        this.sourceChainProvider\n      )\n\n      const gatewayAddress = await this.getSourceChainGatewayAddress()\n      const allowance = await token.allowance(address, gatewayAddress)\n\n      return allowance.lt(amount)\n    }\n\n    return false\n  }\n\n  public async approveTokenEstimateGas({ signer, amount }: ApproveTokenProps) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const address = await getAddressFromSigner(signer)\n    const gatewayAddress = await this.getSourceChainGatewayAddress()\n\n    const contract = ERC20__factory.connect(\n      this.sourceChainErc20Address,\n      signer\n    )\n\n    return contract.estimateGas.approve(\n      gatewayAddress,\n      amount ?? constants.MaxUint256,\n      {\n        from: address\n      }\n    )\n  }\n\n  public async approveToken({ signer, amount }: ApproveTokenProps) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const gatewayAddress = await this.getSourceChainGatewayAddress()\n\n    const contract = ERC20__factory.connect(\n      this.sourceChainErc20Address,\n      signer\n    )\n\n    // approval transaction\n    await contract.functions.approve(\n      gatewayAddress,\n      amount ?? constants.MaxUint256\n    )\n  }\n\n  public async transferEstimateGas({ amount, signer }: TransferEstimateGas) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const destinationChainErc20Address =\n      await this.getDestinationChainErc20Address()\n\n    const address = (await getAddressFromSigner(signer)) as `0x${string}`\n\n    return withdrawInitTxEstimateGas({\n      amount,\n      address,\n      erc20L1Address: destinationChainErc20Address,\n      childChainProvider: this.sourceChainProvider\n    })\n  }\n\n  public async transfer({ amount, signer, destinationAddress }: TransferProps) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const destinationChainErc20Address =\n      await this.getDestinationChainErc20Address()\n\n    const address = await getAddressFromSigner(signer)\n\n    const sourceChainId = await getChainIdFromProvider(this.sourceChainProvider)\n\n    const isSmartContractWallet = await addressIsSmartContract(\n      address,\n      sourceChainId\n    )\n\n    if (isSmartContractWallet && !destinationAddress) {\n      throw new Error(`Missing destination address`)\n    }\n\n    const erc20Bridger = await Erc20Bridger.fromProvider(\n      this.sourceChainProvider\n    )\n\n    const request = await erc20Bridger.getWithdrawalRequest({\n      from: address,\n      erc20ParentAddress: destinationChainErc20Address,\n      destinationAddress: destinationAddress ?? address,\n      amount\n    })\n\n    const tx = await erc20Bridger.withdraw({\n      ...request,\n      childSigner: signer,\n      overrides: {\n        gasLimit: percentIncrease(\n          await this.sourceChainProvider.estimateGas(request.txRequest),\n          BigNumber.from(30)\n        )\n      }\n    })\n\n    return {\n      transferType: this.transferType,\n      status: 'pending',\n      sourceChainProvider: this.sourceChainProvider,\n      sourceChainTransaction: tx,\n      destinationChainProvider: this.destinationChainProvider\n    }\n  }\n}\n","import { EthL1L3Bridger, getArbitrumNetwork } from '@arbitrum/sdk'\nimport { BigNumber, constants } from 'ethers'\nimport { StaticJsonRpcProvider } from '@ethersproject/providers'\nimport {\n  BridgeTransferStarter,\n  BridgeTransferStarterProps,\n  TransferEstimateGas,\n  TransferProps,\n  TransferType\n} from './BridgeTransferStarter'\nimport { getL2ConfigForTeleport } from './teleport'\nimport { getAddressFromSigner, percentIncrease } from './utils'\n\nexport class EthTeleportStarter extends BridgeTransferStarter {\n  public transferType: TransferType = 'eth_teleport'\n  private l1l3Bridger: EthL1L3Bridger | undefined\n  private l2Provider: StaticJsonRpcProvider | undefined\n\n  constructor(props: BridgeTransferStarterProps) {\n    super(props)\n  }\n\n  private async getBridger() {\n    if (this.l1l3Bridger) {\n      return this.l1l3Bridger\n    }\n\n    const l3Network = await getArbitrumNetwork(this.destinationChainProvider)\n    this.l1l3Bridger = new EthL1L3Bridger(l3Network)\n\n    return this.l1l3Bridger\n  }\n\n  private async getL2Provider() {\n    if (this.l2Provider) {\n      return this.l2Provider\n    }\n\n    // get the intermediate L2 chain provider\n    const { l2Provider } = await getL2ConfigForTeleport({\n      destinationChainProvider: this.destinationChainProvider\n    })\n\n    this.l2Provider = l2Provider\n\n    return this.l2Provider\n  }\n\n  public async requiresNativeCurrencyApproval() {\n    return false //false for now, but will need to be implemented for custom-native-token teleports later\n  }\n\n  public async approveNativeCurrency() {\n    // no-op, but will need to be implemented for custom-native-token teleports later\n  }\n\n  public async approveNativeCurrencyEstimateGas() {\n    // no-op, but will need to be implemented for custom-native-token teleports later\n  }\n\n  public requiresTokenApproval = async () => false\n\n  public approveTokenEstimateGas = async () => {\n    // no-op\n  }\n\n  public approveToken = async () => {\n    // no-op\n  }\n\n  public async transferEstimateGas({ amount, signer }: TransferEstimateGas) {\n    const l2Provider = await this.getL2Provider()\n\n    const l1l3Bridger = await this.getBridger()\n\n    try {\n      const depositRequest = await l1l3Bridger.getDepositRequest({\n        l1Signer: signer,\n        amount,\n        l1Provider: this.sourceChainProvider,\n        l2Provider,\n        l3Provider: this.destinationChainProvider\n      })\n\n      const estimatedParentChainGas =\n        await this.sourceChainProvider.estimateGas(depositRequest.txRequest)\n      return {\n        estimatedParentChainGas: percentIncrease(\n          estimatedParentChainGas,\n          BigNumber.from(5)\n        ),\n        estimatedChildChainGas: constants.Zero\n      }\n    } catch (e) {\n      console.warn(\n        'Error while estimating gas, falling back to hardcoded values.',\n        e\n      )\n      return {\n        // fallback estimates\n        estimatedParentChainGas: BigNumber.from(240_000),\n        estimatedChildChainGas: constants.Zero\n      }\n    }\n  }\n\n  public async transfer({ amount, signer }: TransferProps) {\n    const address = await getAddressFromSigner(signer)\n\n    const l2Provider = await this.getL2Provider()\n\n    const l1l3Bridger = await this.getBridger()\n\n    const depositRequest = await l1l3Bridger.getDepositRequest({\n      l1Signer: signer,\n      destinationAddress: address,\n      amount,\n      l1Provider: this.sourceChainProvider,\n      l2Provider,\n      l3Provider: this.destinationChainProvider\n    })\n\n    const tx = await l1l3Bridger.deposit({\n      ...depositRequest,\n      l1Signer: signer\n    })\n\n    return {\n      transferType: this.transferType,\n      status: 'pending',\n      sourceChainProvider: this.sourceChainProvider,\n      sourceChainTransaction: { ...tx },\n      destinationChainProvider: this.destinationChainProvider\n    }\n  }\n}\n","import { Erc20L1L3Bridger, getArbitrumNetwork } from '@arbitrum/sdk'\nimport { ERC20__factory } from '@arbitrum/sdk/dist/lib/abi/factories/ERC20__factory'\nimport { BigNumber, constants } from 'ethers'\nimport { StaticJsonRpcProvider } from '@ethersproject/providers'\nimport {\n  ApproveTokenProps,\n  BridgeTransferStarter,\n  BridgeTransferStarterProps,\n  RequiresTokenApprovalProps,\n  TransferEstimateGas,\n  TransferProps,\n  TransferType\n} from './BridgeTransferStarter'\nimport { fetchErc20Allowance } from '../util/TokenUtils'\nimport { getAddressFromSigner, percentIncrease } from './utils'\nimport { getL2ConfigForTeleport } from './teleport'\n\nexport class Erc20TeleportStarter extends BridgeTransferStarter {\n  public transferType: TransferType = 'erc20_teleport'\n\n  private l1l3Bridger: Erc20L1L3Bridger | undefined\n  private l2Provider: StaticJsonRpcProvider | undefined\n\n  constructor(props: BridgeTransferStarterProps) {\n    super(props)\n\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n  }\n\n  private async getBridger() {\n    if (this.l1l3Bridger) {\n      return this.l1l3Bridger\n    }\n\n    const l3Network = await getArbitrumNetwork(this.destinationChainProvider)\n    this.l1l3Bridger = new Erc20L1L3Bridger(l3Network)\n\n    return this.l1l3Bridger\n  }\n\n  private async getL2Provider() {\n    if (this.l2Provider) {\n      return this.l2Provider\n    }\n\n    // get the intermediate L2 chain provider\n    const { l2Provider } = await getL2ConfigForTeleport({\n      destinationChainProvider: this.destinationChainProvider\n    })\n\n    this.l2Provider = l2Provider\n\n    return this.l2Provider\n  }\n\n  public async requiresNativeCurrencyApproval() {\n    return false // false for now, will need to be implemented for custom-native-token teleports later\n  }\n\n  public async approveNativeCurrency() {\n    // no-op, but will need to be implemented for custom-native-token teleports later\n  }\n\n  public async approveNativeCurrencyEstimateGas() {\n    // no-op, but will need to be implemented for custom-native-token teleports later\n  }\n\n  public requiresTokenApproval = async ({\n    amount,\n    signer\n  }: RequiresTokenApprovalProps) => {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const address = await getAddressFromSigner(signer)\n\n    const l1l3Bridger = await this.getBridger()\n\n    const l1TeleporterAddress = l1l3Bridger.teleporter.l1Teleporter\n\n    const allowanceForTeleporter = await fetchErc20Allowance({\n      address: this.sourceChainErc20Address,\n      provider: this.sourceChainProvider,\n      owner: address,\n      spender: l1TeleporterAddress\n    })\n\n    return allowanceForTeleporter.lt(amount)\n  }\n\n  public async approveTokenEstimateGas({ signer, amount }: ApproveTokenProps) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n    const address = await getAddressFromSigner(signer)\n\n    const l1l3Bridger = await this.getBridger()\n    const l1TeleporterAddress = l1l3Bridger.teleporter.l1Teleporter\n\n    const contract = ERC20__factory.connect(\n      this.sourceChainErc20Address,\n      this.sourceChainProvider\n    )\n    return contract.estimateGas.approve(\n      l1TeleporterAddress,\n      amount ?? constants.MaxUint256,\n      {\n        from: address\n      }\n    )\n  }\n\n  public async approveToken({ signer, amount }: ApproveTokenProps) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const l1l3Bridger = await this.getBridger()\n\n    return l1l3Bridger.approveToken({\n      erc20L1Address: this.sourceChainErc20Address,\n      l1Signer: signer,\n      amount\n    })\n  }\n\n  public async transferEstimateGas({ amount, signer }: TransferEstimateGas) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const l2Provider = await this.getL2Provider()\n\n    const l1l3Bridger = await this.getBridger()\n\n    try {\n      const depositRequest = await l1l3Bridger.getDepositRequest({\n        l1Signer: signer,\n        erc20L1Address: this.sourceChainErc20Address,\n        amount,\n        l1Provider: this.sourceChainProvider,\n        l2Provider,\n        l3Provider: this.destinationChainProvider\n      })\n\n      const estimatedParentChainGas =\n        await this.sourceChainProvider.estimateGas(depositRequest.txRequest)\n      return {\n        estimatedParentChainGas: percentIncrease(\n          estimatedParentChainGas,\n          BigNumber.from(5)\n        ),\n        estimatedChildChainGas: constants.Zero\n      }\n    } catch (e) {\n      console.warn(\n        'Error while estimating gas, falling back to hardcoded values.',\n        e\n      )\n      return {\n        // fallback estimates\n        estimatedParentChainGas: BigNumber.from(800_000),\n        estimatedChildChainGas: constants.Zero\n      }\n    }\n  }\n\n  public async transfer({ amount, signer }: TransferProps) {\n    if (!this.sourceChainErc20Address) {\n      throw Error('Erc20 token address not found')\n    }\n\n    const address = await getAddressFromSigner(signer)\n\n    const l2Provider = await this.getL2Provider()\n\n    const l1l3Bridger = await this.getBridger()\n\n    const depositRequest = await l1l3Bridger.getDepositRequest({\n      l1Signer: signer,\n      destinationAddress: address,\n      erc20L1Address: this.sourceChainErc20Address,\n      amount,\n      l1Provider: this.sourceChainProvider,\n      l2Provider,\n      l3Provider: this.destinationChainProvider\n    })\n\n    const tx = await l1l3Bridger.deposit({\n      txRequest: depositRequest.txRequest,\n      l1Signer: signer\n    })\n\n    return {\n      transferType: this.transferType,\n      status: 'pending',\n      sourceChainProvider: this.sourceChainProvider,\n      sourceChainTransaction: tx,\n      destinationChainProvider: this.destinationChainProvider\n    }\n  }\n}\n","import {\n  BridgeTransferStarter,\n  BridgeTransferStarterPropsWithChainIds\n} from './BridgeTransferStarter'\nimport { EthDepositStarter } from './EthDepositStarter'\nimport { Erc20DepositStarter } from './Erc20DepositStarter'\nimport { EthWithdrawalStarter } from './EthWithdrawalStarter'\nimport { Erc20WithdrawalStarter } from './Erc20WithdrawalStarter'\nimport { EthTeleportStarter } from './EthTeleportStarter'\nimport { Erc20TeleportStarter } from './Erc20TeleportStarter'\nimport { getBridgeTransferProperties, getProviderForChainId } from './utils'\n\nfunction getCacheKey(props: BridgeTransferStarterPropsWithChainIds): string {\n  let cacheKey = `source:${props.sourceChainId}-destination:${props.destinationChainId}`\n\n  if (props.sourceChainErc20Address) {\n    cacheKey += `-sourceErc20:${props.sourceChainErc20Address}`\n  }\n\n  if (props.destinationChainErc20Address) {\n    cacheKey += `-destinationErc20:${props.destinationChainErc20Address}`\n  }\n\n  return cacheKey\n}\n\nfunction withCache(\n  key: string,\n  value: BridgeTransferStarter\n): BridgeTransferStarter {\n  cache[key] = value\n  return value\n}\n\nconst cache: { [key: string]: BridgeTransferStarter } = {}\n\nexport class BridgeTransferStarterFactory {\n  public static create(\n    props: BridgeTransferStarterPropsWithChainIds\n  ): BridgeTransferStarter {\n    const sourceChainProvider = getProviderForChainId(props.sourceChainId)\n    const destinationChainProvider = getProviderForChainId(\n      props.destinationChainId\n    )\n\n    // once we have the providers, we can get the transfer properties, and initialize the classes further\n    const initProps = {\n      sourceChainProvider,\n      destinationChainProvider,\n      sourceChainErc20Address: props.sourceChainErc20Address,\n      destinationChainErc20Address: props.destinationChainErc20Address\n    }\n\n    const { isDeposit, isNativeCurrencyTransfer, isSupported, isTeleport } =\n      getBridgeTransferProperties(props)\n\n    if (!isSupported) {\n      throw new Error('Unsupported transfer detected')\n    }\n\n    const cacheKey = getCacheKey(props)\n    const cacheValue = cache[cacheKey]\n\n    if (typeof cacheValue !== 'undefined') {\n      return cacheValue\n    }\n\n    if (isTeleport) {\n      if (isNativeCurrencyTransfer) {\n        return withCache(cacheKey, new EthTeleportStarter(initProps))\n      }\n      return withCache(cacheKey, new Erc20TeleportStarter(initProps))\n    }\n\n    // deposits\n    if (isDeposit) {\n      if (!isNativeCurrencyTransfer) {\n        return withCache(cacheKey, new Erc20DepositStarter(initProps))\n      }\n      return withCache(cacheKey, new EthDepositStarter(initProps))\n    }\n    // withdrawals\n    if (!isNativeCurrencyTransfer) {\n      return withCache(cacheKey, new Erc20WithdrawalStarter(initProps))\n    }\n    return withCache(cacheKey, new EthWithdrawalStarter(initProps))\n  }\n}\n","import { useEffect, useMemo, useState } from 'react'\nimport { BigNumber, constants, utils } from 'ethers'\nimport { useAccount, useChainId } from 'wagmi'\n\nimport { useSigner } from 'wagmi'\nimport { Dialog, UseDialogProps } from '../common/Dialog'\nimport { Checkbox } from '../common/Checkbox'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { useETHPrice } from '../../hooks/useETHPrice'\nimport { formatAmount, formatUSD } from '../../util/NumberUtils'\nimport { getExplorerUrl, isNetwork } from '../../util/networks'\nimport { ERC20BridgeToken } from '../../hooks/arbTokenBridge.types'\nimport { useGasPrice } from '../../hooks/useGasPrice'\nimport { TOKEN_APPROVAL_ARTICLE_LINK, ether } from '../../constants'\nimport { CctpTransferStarter } from '@/token-bridge-sdk/CctpTransferStarter'\nimport { getCctpContracts } from '@/token-bridge-sdk/cctp'\nimport {\n  fetchErc20L2GatewayAddress,\n  fetchErc20ParentChainGatewayAddress\n} from '../../util/TokenUtils'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { BridgeTransferStarterFactory } from '@/token-bridge-sdk/BridgeTransferStarterFactory'\nimport { getBridger } from '@/token-bridge-sdk/utils'\nimport { Erc20L1L3Bridger } from '@arbitrum/sdk'\nimport { shortenTxHash } from '../../util/CommonUtils'\nimport { TokenInfo } from './TokenInfo'\nimport { NoteBox } from '../common/NoteBox'\n\nexport type TokenApprovalDialogProps = UseDialogProps & {\n  token: ERC20BridgeToken | null\n  isCctp: boolean\n}\n\nexport function TokenApprovalDialog(props: TokenApprovalDialogProps) {\n  const { address: walletAddress } = useAccount()\n  const { isOpen, token, isCctp } = props\n\n  const { ethToUSD } = useETHPrice()\n\n  const [networks] = useNetworks()\n  const {\n    sourceChain,\n    destinationChain,\n    sourceChainProvider,\n    destinationChainProvider\n  } = networks\n  const {\n    childChainProvider,\n    parentChain,\n    parentChainProvider,\n    isDepositMode,\n    isTeleportMode\n  } = useNetworksRelationship(networks)\n  const { isEthereumMainnet, isTestnet } = isNetwork(parentChain.id)\n  const provider = isDepositMode ? parentChainProvider : childChainProvider\n  const gasPrice = useGasPrice({ provider })\n  const chainId = useChainId()\n  const { data: signer } = useSigner({\n    chainId\n  })\n\n  const [checked, setChecked] = useState(false)\n  const [estimatedGas, setEstimatedGas] = useState<BigNumber>(constants.Zero)\n  const [contractAddress, setContractAddress] = useState<string>('')\n\n  // Estimated gas fees, denominated in Ether, represented as a floating point number\n  const estimatedGasFees = useMemo(\n    () => parseFloat(utils.formatEther(estimatedGas.mul(gasPrice))),\n    [estimatedGas, gasPrice]\n  )\n\n  const ethFeeText = useMemo(() => {\n    const eth = formatAmount(estimatedGasFees, { symbol: ether.symbol })\n    return eth\n  }, [estimatedGasFees])\n\n  const usdFeeText = useMemo(() => {\n    const usd = formatUSD(ethToUSD(estimatedGasFees))\n    return `${isEthereumMainnet ? ` (${usd})` : ''}`\n  }, [estimatedGasFees, ethToUSD, isEthereumMainnet])\n\n  const approvalFeeText = `${ethFeeText} ${usdFeeText}`.trim()\n\n  useEffect(() => {\n    if (!isOpen) {\n      return\n    }\n\n    async function getEstimatedGas() {\n      if (!token?.address) {\n        return\n      }\n\n      let gasEstimate\n\n      if (!signer) {\n        gasEstimate = constants.Zero\n      } else if (isCctp) {\n        const cctpTransferStarter = new CctpTransferStarter({\n          sourceChainProvider,\n          destinationChainProvider\n        })\n        gasEstimate = await cctpTransferStarter.approveTokenEstimateGas({\n          amount: constants.MaxUint256,\n          signer\n        })\n      } else {\n        const bridgeTransferStarter = await BridgeTransferStarterFactory.create(\n          {\n            sourceChainId: sourceChain.id,\n            sourceChainErc20Address: isDepositMode\n              ? token.address\n              : token.l2Address,\n            destinationChainId: destinationChain.id,\n            destinationChainErc20Address: isDepositMode\n              ? token.l2Address\n              : token.address\n          }\n        )\n\n        gasEstimate = await bridgeTransferStarter.approveTokenEstimateGas({\n          signer\n        })\n      }\n\n      if (gasEstimate) {\n        setEstimatedGas(gasEstimate)\n      }\n    }\n\n    getEstimatedGas()\n  }, [\n    isCctp,\n    isOpen,\n    isDepositMode,\n    isTestnet,\n    signer,\n    walletAddress,\n    token?.address,\n    token?.l2Address,\n    sourceChain,\n    sourceChainProvider,\n    destinationChain,\n    destinationChainProvider,\n    chainId\n  ])\n\n  useEffect(() => {\n    const getContractAddress = async function () {\n      if (isCctp) {\n        setContractAddress(\n          getCctpContracts({ sourceChainId: chainId })\n            ?.tokenMessengerContractAddress\n        )\n        return\n      }\n      if (!token?.address) {\n        setContractAddress('')\n        return\n      }\n\n      if (isTeleportMode) {\n        const l1L3Bridger = await getBridger({\n          sourceChainId: sourceChain.id,\n          destinationChainId: destinationChain.id\n        })\n\n        if (!(l1L3Bridger instanceof Erc20L1L3Bridger)) {\n          throw new Error('Error initializing L1L3Bridger.')\n        }\n\n        setContractAddress(l1L3Bridger.teleporter.l1Teleporter)\n        return\n      }\n\n      if (isDepositMode) {\n        setContractAddress(\n          await fetchErc20ParentChainGatewayAddress({\n            erc20ParentChainAddress: token.address,\n            parentChainProvider,\n            childChainProvider\n          })\n        )\n        return\n      }\n      setContractAddress(\n        await fetchErc20L2GatewayAddress({\n          erc20L1Address: token.address,\n          l2Provider: childChainProvider\n        })\n      )\n    }\n    getContractAddress()\n  }, [\n    chainId,\n    childChainProvider,\n    isCctp,\n    isDepositMode,\n    parentChainProvider,\n    token?.address,\n    sourceChain.id,\n    destinationChain.id,\n    isTeleportMode\n  ])\n\n  function closeWithReset(confirmed: boolean) {\n    props.onClose(confirmed)\n\n    setChecked(false)\n  }\n\n  return (\n    <Dialog\n      {...props}\n      onClose={closeWithReset}\n      title=\"Acknowledge approval and deposit fees\"\n      actionButtonTitle={`Pay approval fee of ${approvalFeeText}`}\n      actionButtonProps={{ disabled: !checked }}\n    >\n      <div className=\"flex flex-col space-y-4 py-4\">\n        <TokenInfo token={token} />\n        <Checkbox\n          label={\n            <div>\n              <span className=\"text-sm font-light\">\n                I understand that I have to{' '}\n                <span className=\"font-medium\">pay a one-time approval fee</span>{' '}\n                of <span className=\"font-medium\">{ethFeeText}</span>{' '}\n                {usdFeeText} for each new token or spending cap.\n              </span>\n            </div>\n          }\n          checked={checked}\n          onChange={setChecked}\n        />\n\n        <div className=\"text-sm\">\n          This transaction gives permission to the{' '}\n          <ExternalLink\n            className=\"arb-hover underline\"\n            href={`${getExplorerUrl(chainId)}/address/${contractAddress}`}\n            onClick={(event: React.MouseEvent<HTMLAnchorElement>) => {\n              event.stopPropagation()\n            }}\n          >\n            {shortenTxHash(contractAddress)}\n          </ExternalLink>{' '}\n          contract to transfer a capped amount of{' '}\n          {token?.symbol ?? 'a specific token'}.\n        </div>\n\n        <div className=\"flex flex-col\">\n          <NoteBox>\n            After approval, you&apos;ll see a second prompt in your wallet for\n            the {isDepositMode ? 'deposit' : 'withdrawal'} transaction.\n            <ExternalLink\n              href={TOKEN_APPROVAL_ARTICLE_LINK}\n              className=\"arb-hover ml-1 underline\"\n            >\n              Learn more.\n            </ExternalLink>\n          </NoteBox>\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n","import { Tab } from '@headlessui/react'\nimport { forwardRef, PropsWithChildren } from 'react'\n\nexport type TabButtonProps = PropsWithChildren<\n  React.ButtonHTMLAttributes<HTMLButtonElement>\n>\n\nexport const TabButton = forwardRef<HTMLButtonElement, TabButtonProps>(\n  (props, ref) => {\n    const tabButtonClassName =\n      'text-white px-3 mr-2 pb-1 ui-selected:border-b-4 ui-selected:border-white ui-not-selected:text-white/80 arb-hover'\n\n    return (\n      <Tab\n        ref={ref}\n        className={`${tabButtonClassName} ${props.className ?? ''}`}\n        {...props}\n      >\n        {props.children}\n      </Tab>\n    )\n  }\n)\n\nTabButton.displayName = 'TabButton'\n","import posthog from 'posthog-js'\n\nimport { FastBridgeNames, SpecialTokenSymbol } from './fastBridges'\n\ntype AccountType = 'EOA' | 'Smart Contract'\ntype AssetType = 'ETH' | 'ERC-20'\ntype TransferDirection = 'Deposit' | 'Withdrawal' | 'Teleport'\ntype FastBridgeName = `${FastBridgeNames}`\n\n// TODO: maintain these wallet names in a central constants file (like networks.ts/wallet.ts) - can be consistently accessed all throughout the app?\nexport type ProviderName =\n  | 'MetaMask'\n  | 'Coinbase Wallet'\n  | 'Trust Wallet'\n  | 'WalletConnect'\n  | 'Safe' // not used yet\n  | 'Injected'\n  | 'Ledger'\n  | 'Other'\n\ntype AnalyticsEventMap = {\n  Deposit: {\n    tokenSymbol?: string\n    assetType: AssetType\n    accountType: AccountType\n    network: string\n    amount: number\n  }\n  Withdraw: {\n    tokenSymbol?: string\n    assetType: AssetType\n    accountType: AccountType\n    network: string\n    amount: number\n  }\n  Teleport: {\n    tokenSymbol?: string\n    assetType: AssetType\n    accountType: AccountType\n    network: string\n    amount: number\n  }\n  'Connect Wallet Click': { walletName: ProviderName }\n  'Fast Bridge Click': {\n    bridge: FastBridgeName\n    tokenSymbol?: SpecialTokenSymbol.USDC\n  }\n  'Use Arbitrum Bridge Click': {\n    tokenSymbol: SpecialTokenSymbol.USDC\n    type: TransferDirection\n  }\n  'Use CCTP Click': {\n    tokenSymbol: SpecialTokenSymbol.USDC\n    type: TransferDirection\n  }\n  'Switch Network and Transfer': {\n    type: TransferDirection\n    tokenSymbol?: string\n    assetType: AssetType\n    accountType: AccountType\n    network: string\n    amount: number\n    version: number\n  }\n  'Redeem Retryable': { network: string }\n  'Redeem Teleport Retryable': { network: string }\n  'Open Transaction History Click': { pageElement: 'Tx Info Banner' | 'Header' }\n  'Tx Error: Get Help Click': { network: string }\n  'Multiple Tx Error: Get Help Click': { network: string }\n  'Address Block': { address: string }\n  'Slow Bridge Click': undefined\n  'Move More Funds Click': undefined\n  'Explore: Randomize Click': undefined\n  'Add to Google Calendar Click': undefined\n  'CCTP Deposit': {\n    accountType: AccountType\n    network: string\n    amount: number\n    complete: boolean\n    version: number\n  }\n  'CCTP Withdrawal': {\n    accountType: AccountType\n    network: string\n    amount: number\n    complete: boolean\n    version: number\n  }\n}\n\ntype AnalyticsEvent = keyof AnalyticsEventMap\n\nexport function trackEvent(\n  event: AnalyticsEvent,\n  properties?: AnalyticsEventMap[AnalyticsEvent]\n): void {\n  if (process.env.NODE_ENV !== 'production') {\n    return\n  }\n\n  // Posthog\n  posthog.capture(event, properties)\n}\n","import useLocalStorage from '@rehooks/local-storage'\nimport Image from 'next/image'\nimport {\n  StarIcon as StarIconOutline,\n  ArrowTopRightOnSquareIcon\n} from '@heroicons/react/24/outline'\nimport { StarIcon as StarIconSolid } from '@heroicons/react/24/solid'\n\nimport { ExternalLink } from './ExternalLink'\nimport {\n  FastBridgeInfo,\n  FastBridgeNames,\n  SpecialTokenSymbol\n} from '../../util/fastBridges'\nimport { trackEvent } from '../../util/AnalyticsUtils'\n\nexport function BridgesTable(props: {\n  bridgeList: FastBridgeInfo[]\n  selectedNonCanonicalToken?: SpecialTokenSymbol.USDC\n}) {\n  const [favorites, setFavorites] = useLocalStorage<string[]>(\n    'arbitrum:bridge:favorite-fast-bridges',\n    []\n  )\n\n  function onClick(bridgeName: FastBridgeNames) {\n    if (props.selectedNonCanonicalToken) {\n      trackEvent('Fast Bridge Click', {\n        bridge: bridgeName,\n        tokenSymbol: props.selectedNonCanonicalToken\n      })\n    } else {\n      trackEvent('Fast Bridge Click', { bridge: bridgeName })\n    }\n  }\n\n  function isFavorite(bridgeName: FastBridgeNames) {\n    return favorites.includes(bridgeName)\n  }\n\n  function toggleFavorite(bridgeName: FastBridgeNames) {\n    if (favorites.includes(bridgeName)) {\n      setFavorites(favorites.filter(favorite => favorite !== bridgeName))\n    } else {\n      setFavorites([...favorites, bridgeName])\n    }\n  }\n\n  const sortedFastBridges = props.bridgeList.sort((a, b) => {\n    const isFavoriteA = isFavorite(a.name)\n    const isFavoriteB = isFavorite(b.name)\n\n    if (isFavoriteA && !isFavoriteB) {\n      return -1\n    } else if (!isFavoriteA && isFavoriteB) {\n      return 1\n    }\n\n    if (a.name < b.name) {\n      return -1\n    } else {\n      return 1\n    }\n  })\n\n  return (\n    <div className=\"rounded border border-gray-dark\">\n      <table className=\"w-full overflow-hidden rounded\">\n        <thead className=\"bg-black text-left\">\n          <tr className=\"text-white\">\n            <th className=\"w-1/5 px-5 py-4 font-normal\">Favorite</th>\n            <th className=\"px-5 py-4 font-normal\">Bridge</th>\n            <th className=\"px-5 py-4 font-normal\"></th>\n          </tr>\n        </thead>\n        <tbody className=\"font-light\">\n          {sortedFastBridges.map(bridge => (\n            <tr\n              key={bridge.name}\n              className=\"cursor-pointer rounded border-t border-white bg-black transition duration-300 hover:bg-white/20\"\n            >\n              <td>\n                <ExternalLink\n                  href={bridge.href}\n                  className=\"flex items-center px-5 py-3\"\n                  onClick={() => onClick(bridge.name)}\n                >\n                  <button\n                    onClick={event => {\n                      event.preventDefault()\n                      event.stopPropagation()\n                      toggleFavorite(bridge.name)\n                    }}\n                    className=\"arb-hover\"\n                  >\n                    {isFavorite(bridge.name) ? (\n                      <StarIconSolid className=\"h-5 w-5 text-white\" />\n                    ) : (\n                      <StarIconOutline className=\"h-5 w-5 text-white\" />\n                    )}\n                  </button>\n                </ExternalLink>\n              </td>\n\n              <td>\n                <ExternalLink\n                  href={bridge.href}\n                  onClick={() => onClick(bridge.name)}\n                >\n                  <div className=\"flex items-center space-x-4 px-5 py-3\">\n                    <Image\n                      src={bridge.imageSrc}\n                      alt={bridge.name}\n                      className=\"bridge-logos h-6 w-6 rounded-full object-contain\"\n                      width={32}\n                      height={32}\n                    />\n                    <span className=\"text-sm\">{bridge.name}</span>\n                  </div>\n                </ExternalLink>\n              </td>\n\n              <td>\n                <ExternalLink\n                  href={bridge.href}\n                  className=\"arb-hover flex w-full items-center justify-end pr-5 text-gray-4\"\n                  onClick={() => onClick(bridge.name)}\n                >\n                  <ArrowTopRightOnSquareIcon className=\"h-3 w-3\" />\n                </ExternalLink>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n","export default {\"src\":\"/_next/static/media/hop.536c4a3a.png\",\"height\":512,\"width\":512,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAS1BMVEXCSOXfgLPfhsTuxuzokarbeLzjhq3QY83Wb8bLWNjRbt7y0+/Ub9TGTt7MYd7afcvhmtzbjOP89fzll8Dkj7j55vHz2vfpqM3hltKr5S5MAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQklEQVR4nBXGSRLAIAgEwEFUQNyz/v+lqfSpIaKJcowwGSMcOcIKu19nRitL5n4IWHvKGwjotzOHBKD0WvVPMxPVD1MQAkACwfWmAAAAAElFTkSuQmCC\",\"blurWidth\":8,\"blurHeight\":8};","export default {\"src\":\"/_next/static/media/celer.06538381.png\",\"height\":400,\"width\":950,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAGFBMVEX///////////////////////////////8pK8DIAAAACHRSTlMKQ1ZQhyObLFvoTKUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAeSURBVHicBcGHAQAADIMgTdf/HxcgwwFobW8PxDLyAwoANz8bbHsAAAAASUVORK5CYII=\",\"blurWidth\":8,\"blurHeight\":3};","export default {\"src\":\"/_next/static/media/connext.2be95308.png\",\"height\":192,\"width\":192,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAVFBMVEVMaXFNjf+/LM03t/+3lprshm/idnyyDPSNK/zxj2ZQif2iFPd3T/9Shf2jDPzkc4bMTarohWvYZI/kenp4S/1Ljf2MKvxAnvyyA/N8R/7QT6pnbP+vSNC5AAAAHHRSTlMALuQQCBrOKDYv531Hv2f+YM6gf+2XYLtD6YRqRW77MwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAD1JREFUeJwty7cBgDAQALFz/HfC5Lj/nhSgXuAdH5Mrg4Br7dJiA8dGVe5IfhBhmTDrfto5BtDC2NM/k+cFQckB5R69b4cAAAAASUVORK5CYII=\",\"blurWidth\":8,\"blurHeight\":8};","export default {\"src\":\"/_next/static/media/across.5e8e8be4.png\",\"height\":480,\"width\":480,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAG1BMVEVs+ths+dhq+dpMaXFr+Ndn6MtHg3hXtKBYuaSO0TO1AAAABXRSTlP6sSkAsnfSyH0AAAAJcEhZcwAAA+gAAAPoAbV7UmsAAAAwSURBVHicPYtBDgAgDMI6Npz/f7FxiXIipZAKKCViIoplLwJwt4e69y3xpi/PPZQHE8wAiNQORCcAAAAASUVORK5CYII=\",\"blurWidth\":8,\"blurHeight\":8};","export default {\"src\":\"/_next/static/media/stargate.3334d012.png\",\"height\":64,\"width\":64,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAD1BMVEUBAQErKyuTk5NJSUlKSko7wlugAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHElEQVR4nGNgwAKYGRmZwQxGJiZGVAYLTAoNAAAEUAAeXYy83AAAAABJRU5ErkJggg==\",\"blurWidth\":8,\"blurHeight\":8};","export default {\"src\":\"/_next/static/media/synapse.03157cce.png\",\"height\":64,\"width\":64,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAS1BMVEUAAABmMYN0OZX9A/tTBFuCRPc5ElwWDB0nFjLKIfpjK6xWEG6QE6ynB6wAAQB9QaO6Jve4Kfk+Hm/6Bv14IKyBHKxrBG0/DlouGDuDYDUzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQElEQVR4nBXKRxLAIAwAsQUMNj09/P+lmegsQugiLWfOB1Vqpg+8hxtZ3tTZiyynNi3RBm5CIdc/H5Ftv1IqMX5JRgIR9MgXvgAAAABJRU5ErkJggg==\",\"blurWidth\":8,\"blurHeight\":8};","export default {\"src\":\"/_next/static/media/wormhole.5f6b7a37.svg\",\"height\":40,\"width\":40,\"blurWidth\":0,\"blurHeight\":0};","export default {\"src\":\"/_next/static/media/router.80a9736e.webp\",\"height\":96,\"width\":96,\"blurDataURL\":\"data:image/webp;base64,UklGRlQAAABXRUJQVlA4IEgAAADQAQCdASoIAAgAAkA4JQBOgB6R/ruugAD+99SGQNjoL9eA9QlK0NsfMJId8Qa6oYfVPTgBWOEEum90I2qHz4aKvJpjP38D5AA=\",\"blurWidth\":8,\"blurHeight\":8};","import { StaticImageData } from 'next/image'\n\nimport Hop from '@/images/bridge/hop.png'\nimport Celer from '@/images/bridge/celer.png'\nimport Connext from '@/images/bridge/connext.png'\nimport Across from '@/images/bridge/across.png'\nimport Stargate from '@/images/bridge/stargate.png'\nimport Synapse from '@/images/bridge/synapse.png'\nimport Wormhole from '@/images/bridge/wormhole.svg'\n// import LIFI from '@/images/bridge/lifi.webp'\nimport Router from '@/images/bridge/router.webp'\n\nimport { ChainId } from './networks'\nimport { USDC_LEARN_MORE_LINK } from '../constants'\n\nexport enum FastBridgeNames {\n  Hop = 'Hop',\n  Celer = 'Celer',\n  Connext = 'Connext',\n  Across = 'Across',\n  Stargate = 'Stargate',\n  Synapse = 'Synapse',\n  Wormhole = 'Wormhole',\n  LIFI = 'LI.FI',\n  Router = 'Router'\n}\n\nexport enum SpecialTokenSymbol {\n  USDC = 'USDC'\n}\n\nexport type FastBridgeInfo = {\n  name: FastBridgeNames\n  imageSrc: StaticImageData\n  href: string\n}\n\nexport function getFastBridges({\n  from,\n  to,\n  tokenSymbol,\n  amount\n}: {\n  from: ChainId\n  to: ChainId\n  tokenSymbol: string\n  amount: string\n}): FastBridgeInfo[] {\n  function chainIdToSlug(chainId: ChainId): string {\n    switch (chainId) {\n      case ChainId.Ethereum:\n        return 'ethereum'\n      case ChainId.ArbitrumOne:\n        return 'arbitrum'\n      default:\n        return ''\n    }\n  }\n\n  function getBridgeDeepLink(bridge: FastBridgeNames): string {\n    switch (bridge) {\n      case FastBridgeNames.Hop:\n        return `https://app.hop.exchange/#/send?sourceNetwork=${chainIdToSlug(\n          from\n        )}&destNetwork=${chainIdToSlug(\n          to\n        )}&token=${tokenSymbol}&amount=${amount}`\n      case FastBridgeNames.Celer:\n        return `https://cbridge.celer.network/${from}/${to}/${tokenSymbol}`\n      case FastBridgeNames.Connext:\n        return `https://bridge.connext.network/${tokenSymbol}-from-${chainIdToSlug(\n          from\n        )}-to-${chainIdToSlug(to)}?amount=${amount}`\n      case FastBridgeNames.Across:\n        return `https://across.to/?from=${from}&to=${to}&asset=${tokenSymbol}&amount=${amount}`\n      case FastBridgeNames.Stargate:\n        return `https://stargate.finance/transfer?srcChain=${chainIdToSlug(\n          from\n        )}&dstChain=${chainIdToSlug(to)}&srcToken=${tokenSymbol}`\n      case FastBridgeNames.Synapse:\n        // We can't specify the input chain for Synapse, as it will use whatever the user is connected to.\n        // We make sure to prompt a network switch to Arbitrum prior to showing this.\n        return `https://synapseprotocol.com/?inputCurrency=${tokenSymbol}&outputCurrency=${tokenSymbol}&outputChain=${to}`\n      default:\n        return ''\n    }\n  }\n\n  const bridgeInfo: {\n    [bridge in Exclude<\n      FastBridgeNames,\n      FastBridgeNames.LIFI | FastBridgeNames.Router | FastBridgeNames.Wormhole\n    >]: {\n      imageSrc: StaticImageData\n      href: string\n    }\n  } = {\n    [FastBridgeNames.Hop]: {\n      imageSrc: Hop,\n      href: getBridgeDeepLink(FastBridgeNames.Hop)\n    },\n    [FastBridgeNames.Celer]: {\n      imageSrc: Celer,\n      href: getBridgeDeepLink(FastBridgeNames.Celer)\n    },\n    [FastBridgeNames.Connext]: {\n      imageSrc: Connext,\n      href: getBridgeDeepLink(FastBridgeNames.Connext)\n    },\n    [FastBridgeNames.Across]: {\n      imageSrc: Across,\n      href: getBridgeDeepLink(FastBridgeNames.Across)\n    },\n    [FastBridgeNames.Stargate]: {\n      imageSrc: Stargate,\n      href: getBridgeDeepLink(FastBridgeNames.Stargate)\n    },\n    [FastBridgeNames.Synapse]: {\n      imageSrc: Synapse,\n      href: getBridgeDeepLink(FastBridgeNames.Synapse)\n    }\n  }\n\n  return Object.values(FastBridgeNames)\n    .filter(fastBridgeName => {\n      // exclude these fast bridges for now\n      switch (fastBridgeName) {\n        case FastBridgeNames.LIFI:\n        case FastBridgeNames.Wormhole:\n        case FastBridgeNames.Router:\n          return false\n        default:\n          return true\n      }\n    })\n    .map<FastBridgeInfo>(bridge => {\n      const name = bridge as Exclude<\n        FastBridgeNames,\n        FastBridgeNames.LIFI | FastBridgeNames.Router | FastBridgeNames.Wormhole\n      >\n      return {\n        name,\n        imageSrc: bridgeInfo[name].imageSrc,\n        href: bridgeInfo[name].href\n      }\n    })\n}\n\nexport const USDCBridgeInfo = {\n  tokenSymbol: 'USDC',\n  tokenSymbolOnArbitrum: 'USDC.e',\n  supportedBridges: [\n    FastBridgeNames.Celer,\n    // FastBridgeNames.LIFI,\n    FastBridgeNames.Wormhole,\n    FastBridgeNames.Router\n  ],\n  learnMoreUrl: USDC_LEARN_MORE_LINK\n} as const\n\ntype getHrefParams = {\n  from: ChainId\n  to: ChainId\n  fromTokenAddress: string\n  toTokenAddress: string\n  amount?: string\n  transferMode: 'deposit' | 'withdraw'\n}\n\ntype USDCFastBridgeInfo = {\n  name: FastBridgeNames\n  imageSrc: StaticImageData\n  getHref: (params: getHrefParams) => string\n}\n\nexport const USDCFastBridges: USDCFastBridgeInfo[] = [\n  {\n    name: FastBridgeNames.Celer,\n    imageSrc: Celer,\n    getHref: ({ transferMode }) => {\n      switch (transferMode) {\n        case 'deposit':\n          return 'https://cbridge.celer.network/bridge/ethereum-arbitrum/'\n        case 'withdraw':\n        default:\n          return 'https://cbridge.celer.network/bridge/arbitrum-ethereum/'\n      }\n    }\n  },\n  // {\n  //   name: FastBridgeNames.LIFI,\n  //   imageSrc: LIFI,\n  //   getHref: ({\n  //     from,\n  //     to,\n  //     fromTokenAddress,\n  //     toTokenAddress,\n  //     amount,\n  //     transferMode\n  //   }: getHrefParams) => {\n  //     switch (transferMode) {\n  //       case 'deposit':\n  //         return `https://jumper.exchange/?fromChain=${from}&fromToken=${fromTokenAddress}&toChain=${to}&toToken=${toTokenAddress}&fromAmount=${amount}`\n  //       case 'withdraw':\n  //       default:\n  //         return `https://jumper.exchange/?fromChain=${from}&fromToken=${fromTokenAddress}&toChain=${to}&toToken=${toTokenAddress}&fromAmount=${amount}`\n  //     }\n  //   }\n  // },\n  {\n    name: FastBridgeNames.Wormhole,\n    imageSrc: Wormhole,\n    getHref: () => 'https://www.portalbridge.com/usdc-bridge/'\n  },\n  {\n    name: FastBridgeNames.Router,\n    imageSrc: Router,\n    getHref: ({\n      from,\n      to,\n      fromTokenAddress,\n      toTokenAddress,\n      transferMode\n    }: getHrefParams) => {\n      switch (transferMode) {\n        case 'deposit':\n          return `https://app.thevoyager.io/swap?fromChain=${from}&toChain=${to}&fromToken=${fromTokenAddress}&toToken=${toTokenAddress}`\n        case 'withdraw':\n        default:\n          return `https://app.thevoyager.io/swap?fromChain=${from}&toChain=${to}&fromToken=${fromTokenAddress}&toToken=${toTokenAddress}`\n      }\n    }\n  }\n]\n","import {\n  CheckCircleIcon,\n  ExclamationTriangleIcon\n} from '@heroicons/react/24/outline'\n\nexport function SecurityGuaranteed() {\n  return (\n    <div className=\"flex\">\n      <div className=\"flex h-fit items-center space-x-1 rounded bg-lime-dark p-2 text-xs text-lime\">\n        <CheckCircleIcon height={16} />\n        <span>Security guaranteed by Ethereum</span>\n      </div>\n    </div>\n  )\n}\n\nexport function SecurityNotGuaranteed() {\n  return (\n    <div className=\"flex\">\n      <div className=\"flex h-fit items-center space-x-1 rounded bg-orange-dark p-2 text-xs text-orange\">\n        <ExclamationTriangleIcon height={16} />\n        <span>Security not guaranteed by Arbitrum</span>\n      </div>\n    </div>\n  )\n}\n","import { ChainId } from '../networks'\nimport { getAPIBaseUrl, sanitizeQueryParams } from '..'\nimport {\n  CompletedCCTPTransfer,\n  PendingCCTPTransfer,\n  Response\n} from '../../pages/api/cctp/[type]'\nimport { utils } from 'ethers'\n\nexport type FetchParams = {\n  walletAddress: string\n  l1ChainId: ChainId\n  pageNumber: number\n  pageSize: number\n}\n\nfunction convertStringToUsdcBigNumber(amount: string) {\n  return utils.formatUnits(amount, 6)\n}\nfunction mapCCTPTransfer<T extends PendingCCTPTransfer | CompletedCCTPTransfer>(\n  cctpTransfer: T\n): T {\n  cctpTransfer.messageSent.amount = convertStringToUsdcBigNumber(\n    cctpTransfer.messageSent.amount\n  )\n  return cctpTransfer\n}\n\nasync function fetchCCTP({\n  walletAddress,\n  l1ChainId,\n  pageNumber,\n  pageSize,\n  type\n}: FetchParams & { type: 'deposits' | 'withdrawals' }): Promise<\n  Response['data']\n> {\n  const urlParams = new URLSearchParams(\n    sanitizeQueryParams({\n      walletAddress,\n      l1ChainId,\n      pageNumber,\n      pageSize\n    })\n  )\n\n  if (pageSize === 0) return { pending: [], completed: [] } // don't query subgraph if nothing requested\n\n  const response = await fetch(\n    `${getAPIBaseUrl()}/api/cctp/${type}?${urlParams}`,\n    {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' }\n    }\n  )\n\n  const parsedResponse: Response = await response.json()\n  const { pending, completed } = parsedResponse.data\n\n  return {\n    pending: pending.map(transfer => mapCCTPTransfer(transfer)),\n    completed: completed.map(transfer => mapCCTPTransfer(transfer))\n  }\n}\n\ntype FetchCctpResponse = Response['data']\nexport async function fetchCCTPDeposits(\n  params: FetchParams\n): Promise<FetchCctpResponse> {\n  return fetchCCTP({ ...params, type: 'deposits' })\n}\n\nexport async function fetchCCTPWithdrawals(\n  params: FetchParams\n): Promise<FetchCctpResponse> {\n  return fetchCCTP({ ...params, type: 'withdrawals' })\n}\n","import { useReducer, useEffect, useMemo } from 'react'\nimport { TransactionReceipt } from '@ethersproject/abstract-provider'\nimport { AssetType, TransactionActions } from './arbTokenBridge.types'\nimport { BigNumber, ethers } from 'ethers'\nimport { ParentToChildMessageStatus } from '@arbitrum/sdk'\nimport {\n  MergedTransaction,\n  TeleporterMergedTransaction\n} from '../state/app/state'\n\ntype Action =\n  | { type: 'ADD_TRANSACTION'; transaction: Transaction }\n  | { type: 'SET_SUCCESS'; txID: string }\n  | { type: 'SET_FAILURE'; txID: string }\n  | { type: 'SET_INITIAL_TRANSACTIONS'; transactions: Transaction[] }\n  | { type: 'CLEAR_PENDING' }\n  | { type: 'CONFIRM_TRANSACTION'; txID: string }\n  | { type: 'REMOVE_TRANSACTION'; txID: string }\n  | { type: 'SET_BLOCK_NUMBER'; txID: string; blockNumber?: number }\n  | { type: 'SET_RESOLVED_TIMESTAMP'; txID: string; timestamp?: string }\n  | { type: 'ADD_TRANSACTIONS'; transactions: Transaction[] }\n  | {\n      type: 'UPDATE_L1TOL2MSG_DATA'\n      txID: string\n      l1ToL2MsgData: ParentToChildMessageData\n    }\n  | { type: 'SET_TRANSACTIONS'; transactions: Transaction[] }\n\nexport type TxnStatus = 'pending' | 'success' | 'failure' | 'confirmed'\n\n/** @interface\n * Transaction\n * @alias Transaction\n * @description Bridge transaction data with up to date status.\n */\nexport type TxnType =\n  | 'deposit'\n  | 'deposit-l1'\n  | 'deposit-l2' // unused; keeping for cache backwrads compatability\n  | 'withdraw'\n  | 'outbox'\n  | 'approve'\n  | 'deposit-l2-auto-redeem' // unused; keeping for cache backwrads compatability\n  | 'deposit-l2-ticket-created' // unused; keeping for cache backwrads compatability\n  | 'approve-l2'\n\nconst deprecatedTxTypes: Set<TxnType> = new Set([\n  'deposit-l2-auto-redeem',\n  'deposit-l2-ticket-created',\n  'deposit-l2'\n])\n\nexport const txnTypeToLayer = (txnType: TxnType): 1 | 2 => {\n  switch (txnType) {\n    case 'deposit':\n    case 'deposit-l1':\n    case 'outbox':\n    case 'approve':\n      return 1\n    case 'deposit-l2':\n    case 'withdraw':\n    case 'deposit-l2-auto-redeem':\n    case 'deposit-l2-ticket-created':\n    case 'approve-l2':\n      return 2\n  }\n}\n\nexport interface ParentToChildMessageData {\n  status: ParentToChildMessageStatus\n  retryableCreationTxID: string\n  childTxId?: string\n  fetchingUpdate: boolean\n}\n\nexport interface L2ToL3MessageData {\n  status: ParentToChildMessageStatus\n  retryableCreationTxID?: string\n  l2ForwarderRetryableTxID?: string\n  l3TxID?: string\n  l2ChainId: number\n}\n\nexport type ChildToParentMessageData = {\n  uniqueId: BigNumber\n}\n\ntype TransactionBase = {\n  type: TxnType\n  status?: TxnStatus\n  value: string | null\n  txID?: string\n  assetName: string\n  assetType: AssetType\n  tokenAddress?: string\n  sender: string\n  destination?: string\n  blockNumber?: number\n  l1NetworkID: string\n  l2NetworkID?: string\n  timestampResolved?: string // time when its status was changed\n  timestampCreated?: string //time when this transaction is first added to the list\n  parentToChildMsgData?: ParentToChildMessageData\n  childToParentMsgData?: ChildToParentMessageData\n  isClassic?: boolean\n}\n\nexport interface Transaction extends TransactionBase {\n  txID: string\n  direction: 'deposit' | 'withdrawal'\n  source: 'subgraph' | 'event_logs' | 'local_storage_cache'\n  parentChainId: number\n  childChainId: number\n  nonce?: number\n}\n\nexport interface TeleporterTransaction extends Transaction {\n  l2ToL3MsgData: L2ToL3MessageData\n}\n\nexport interface NewTransaction extends TransactionBase {\n  status: 'pending'\n}\n\nexport interface FailedTransaction extends TransactionBase {\n  status: 'failure'\n}\n\n// TODO: enforce this type restriction\nexport interface DepositTransaction extends Transaction {\n  parentToChildMsgData: ParentToChildMessageData\n  type: 'deposit' | 'deposit-l1'\n}\n\nexport function isTeleporterTransaction(\n  tx: Transaction | MergedTransaction\n): tx is TeleporterTransaction | TeleporterMergedTransaction {\n  return (tx as TeleporterTransaction).l2ToL3MsgData !== undefined\n}\n\nfunction updateStatus(state: Transaction[], status: TxnStatus, txID: string) {\n  const newState = [...state]\n  const index = newState.findIndex(txn => txn.txID === txID)\n  const transaction = newState[index]\n\n  if (!transaction) {\n    console.warn('transaction not found', txID)\n    return state\n  }\n\n  newState[index] = {\n    ...transaction,\n    status\n  }\n  return newState\n}\n\nfunction updateBlockNumber(\n  state: Transaction[],\n  txID: string,\n  blockNumber?: number\n) {\n  const newState = [...state]\n  const index = newState.findIndex(txn => txn.txID === txID)\n  const transaction = newState[index]\n\n  if (!transaction) {\n    console.warn('transaction not found', txID)\n    return state\n  }\n\n  newState[index] = {\n    ...transaction,\n    blockNumber\n  }\n  return newState\n}\n\nfunction updateTxnL1ToL2Msg(\n  state: Transaction[],\n  txID: string,\n  l1ToL2MsgData: ParentToChildMessageData\n) {\n  const newState = [...state]\n  const index = newState.findIndex(txn => txn.txID === txID)\n  const transaction = newState[index]\n\n  if (!transaction) {\n    console.warn('transaction not found', txID)\n    return state\n  }\n\n  if (!(transaction.type === 'deposit' || transaction.type === 'deposit-l1')) {\n    throw new Error(\n      \"Attempting to add a l1tol2msg to a tx that isn't a deposit:\" + txID\n    )\n  }\n\n  const previousL1ToL2MsgData = transaction.parentToChildMsgData\n  if (!previousL1ToL2MsgData) {\n    newState[index] = {\n      ...transaction,\n      parentToChildMsgData: {\n        status: l1ToL2MsgData.status,\n        retryableCreationTxID: l1ToL2MsgData.retryableCreationTxID,\n        fetchingUpdate: false\n      }\n    }\n    return newState\n  }\n\n  newState[index] = {\n    ...transaction,\n    parentToChildMsgData: { ...previousL1ToL2MsgData, ...l1ToL2MsgData }\n  }\n  return newState\n}\n\nfunction updateResolvedTimestamp(\n  state: Transaction[],\n  txID: string,\n  timestamp?: string\n) {\n  const newState = [...state]\n  const index = newState.findIndex(txn => txn.txID === txID)\n  const transaction = newState[index]\n\n  if (!transaction) {\n    console.warn('transaction not found', txID)\n    return state\n  }\n\n  newState[index] = {\n    ...transaction,\n    timestampResolved: timestamp\n  }\n\n  return newState\n}\nfunction reducer(state: Transaction[], action: Action) {\n  switch (action.type) {\n    case 'SET_INITIAL_TRANSACTIONS': {\n      // Add l1 to L2 stuff with pending status\n      return [...action.transactions]\n    }\n    case 'ADD_TRANSACTIONS': {\n      // sanity / safety check: ensure no duplicates:\n      const currentTxIds = new Set(state.map(tx => tx.txID))\n      const txsToAdd = action.transactions.filter(tx => {\n        if (!currentTxIds.has(tx.txID)) {\n          return true\n        } else {\n          console.warn(\n            `Warning: trying to add ${tx.txID} which is already included`\n          )\n          return false\n        }\n      })\n      return state.concat(txsToAdd)\n    }\n    case 'ADD_TRANSACTION': {\n      return state.concat(action.transaction)\n    }\n    case 'REMOVE_TRANSACTION': {\n      return state.filter(txn => txn.txID !== action.txID)\n    }\n    case 'SET_SUCCESS': {\n      return updateStatus(state, 'success', action.txID)\n    }\n    case 'SET_FAILURE': {\n      return updateStatus(state, 'failure', action.txID)\n    }\n    case 'CLEAR_PENDING': {\n      return state.filter(txn => txn.status !== 'pending')\n    }\n    case 'CONFIRM_TRANSACTION': {\n      return updateStatus(state, 'confirmed', action.txID)\n    }\n    case 'SET_BLOCK_NUMBER': {\n      return updateBlockNumber(state, action.txID, action.blockNumber)\n    }\n    case 'SET_RESOLVED_TIMESTAMP': {\n      return updateResolvedTimestamp(state, action.txID, action.timestamp)\n    }\n    case 'UPDATE_L1TOL2MSG_DATA': {\n      return updateTxnL1ToL2Msg(state, action.txID, action.l1ToL2MsgData)\n    }\n    case 'SET_TRANSACTIONS': {\n      return action.transactions\n    }\n    default:\n      return state\n  }\n}\n\nconst localStorageReducer = (state: Transaction[], action: Action) => {\n  const newState = reducer(state, action)\n  // don't cache fetchingUpdate state\n  const stateForCache = newState.map(tx => {\n    if (tx.parentToChildMsgData && tx.parentToChildMsgData.fetchingUpdate) {\n      return {\n        ...tx,\n        parentToChildMsgData: {\n          ...tx.parentToChildMsgData,\n          fetchingUpdate: false\n        }\n      }\n    }\n    return tx\n  })\n  window.localStorage.setItem('arbTransactions', JSON.stringify(stateForCache))\n  return newState\n}\n\nconst useTransactions = (): [Transaction[], TransactionActions] => {\n  const [state, dispatch] = useReducer(localStorageReducer, [])\n\n  useEffect(() => {\n    const cachedTransactions = window.localStorage.getItem('arbTransactions')\n    dispatch({\n      type: 'SET_INITIAL_TRANSACTIONS',\n      transactions: cachedTransactions ? JSON.parse(cachedTransactions) : []\n    })\n  }, [])\n\n  const addTransaction = (transaction: NewTransaction) => {\n    if (!transaction.txID) {\n      console.warn(' Cannot add transaction: TxID not included (???)')\n      return\n    }\n    const tx = {\n      ...transaction,\n      timestampCreated: new Date().toISOString()\n    } as Transaction\n    return dispatch({\n      type: 'ADD_TRANSACTION',\n      transaction: tx\n    })\n  }\n\n  const updateTxnL1ToL2MsgData = async (\n    txID: string,\n    l1ToL2MsgData: ParentToChildMessageData\n  ) => {\n    dispatch({\n      type: 'UPDATE_L1TOL2MSG_DATA',\n      txID: txID,\n      l1ToL2MsgData\n    })\n  }\n\n  const setTransactionSuccess = (txID: string) => {\n    return dispatch({\n      type: 'SET_SUCCESS',\n      txID: txID\n    })\n  }\n  const setTransactionBlock = (txID: string, blockNumber?: number) => {\n    return dispatch({\n      type: 'SET_BLOCK_NUMBER',\n      txID,\n      blockNumber\n    })\n  }\n  const setResolvedTimestamp = (txID: string, timestamp?: string) => {\n    return dispatch({\n      type: 'SET_RESOLVED_TIMESTAMP',\n      txID,\n      timestamp\n    })\n  }\n  const setTransactionFailure = (txID?: string) => {\n    if (!txID) {\n      console.warn(' Cannot set transaction failure: TxID not included (???)')\n      return\n    }\n    return dispatch({\n      type: 'SET_FAILURE',\n      txID: txID\n    })\n  }\n\n  const updateTransaction = (\n    txReceipt: TransactionReceipt,\n    tx?: ethers.ContractTransaction,\n    l1ToL2MsgData?: ParentToChildMessageData\n  ) => {\n    if (!txReceipt.transactionHash) {\n      return console.warn(\n        '*** TransactionHash not included in transaction receipt (???) *** '\n      )\n    }\n    switch (txReceipt.status) {\n      case 0: {\n        setTransactionFailure(txReceipt.transactionHash)\n        break\n      }\n      case 1: {\n        setTransactionSuccess(txReceipt.transactionHash)\n        break\n      }\n      default:\n        console.warn('*** Status not included in transaction receipt *** ')\n        break\n    }\n    if (tx?.blockNumber) {\n      setTransactionBlock(txReceipt.transactionHash, tx.blockNumber)\n    }\n    if (tx) {\n      setResolvedTimestamp(txReceipt.transactionHash, new Date().toISOString())\n    }\n    if (l1ToL2MsgData) {\n      updateTxnL1ToL2MsgData(txReceipt.transactionHash, l1ToL2MsgData)\n    }\n  }\n\n  const transactions = useMemo(() => {\n    return state.filter(tx => !deprecatedTxTypes.has(tx.type))\n  }, [state])\n\n  return [\n    transactions,\n    {\n      addTransaction,\n      updateTransaction\n    }\n  ]\n}\n\nexport default useTransactions\n","import { useCallback, useState, useMemo } from 'react'\nimport { Chain, useAccount } from 'wagmi'\nimport { BigNumber } from 'ethers'\nimport { Signer } from '@ethersproject/abstract-signer'\nimport { JsonRpcProvider } from '@ethersproject/providers'\nimport { useLocalStorage } from '@rehooks/local-storage'\nimport { TokenList } from '@uniswap/token-lists'\nimport {\n  EventArgs,\n  ChildToParentMessage,\n  ChildToParentTransactionEvent\n} from '@arbitrum/sdk'\nimport { L2ToL1TransactionEvent as ClassicL2ToL1TransactionEvent } from '@arbitrum/sdk/dist/lib/abi/ArbSys'\n\nimport useTransactions from './useTransactions'\nimport {\n  ArbTokenBridge,\n  ContractStorage,\n  ERC20BridgeToken,\n  L2ToL1EventResultPlus,\n  TokenType,\n  L2ToL1EventResult\n} from './arbTokenBridge.types'\nimport { useBalance } from './useBalance'\nimport {\n  fetchErc20Data,\n  getL1ERC20Address,\n  getL2ERC20Address,\n  l1TokenIsDisabled,\n  isValidErc20,\n  getL3ERC20Address\n} from '../util/TokenUtils'\nimport { getL2NativeToken } from '../util/L2NativeUtils'\nimport { CommonAddress } from '../util/CommonAddressUtils'\nimport { isNetwork } from '../util/networks'\nimport { useDestinationAddressStore } from '../components/TransferPanel/AdvancedSettings'\nimport { isTeleport } from '../token-bridge-sdk/teleport'\nimport { getProviderForChainId } from '@/token-bridge-sdk/utils'\n\nexport const wait = (ms = 0) => {\n  return new Promise(res => setTimeout(res, ms))\n}\n\nfunction isClassicL2ToL1TransactionEvent(\n  event: ChildToParentTransactionEvent\n): event is EventArgs<ClassicL2ToL1TransactionEvent> {\n  return typeof (event as any).batchNumber !== 'undefined'\n}\n\nexport function getExecutedMessagesCacheKey({\n  event,\n  l2ChainId\n}: {\n  event: L2ToL1EventResult\n  l2ChainId: number\n}) {\n  return isClassicL2ToL1TransactionEvent(event)\n    ? `l2ChainId: ${l2ChainId}, batchNumber: ${event.batchNumber.toString()}, indexInBatch: ${event.indexInBatch.toString()}`\n    : `l2ChainId: ${l2ChainId}, position: ${event.position.toString()}`\n}\n\nexport function getUniqueIdOrHashFromEvent(\n  event: L2ToL1EventResult\n): BigNumber {\n  const anyEvent = event as any\n\n  // Nitro\n  if (anyEvent.hash) {\n    return anyEvent.hash as BigNumber\n  }\n\n  // Classic\n  return anyEvent.uniqueId as BigNumber\n}\n\nclass TokenDisabledError extends Error {\n  constructor(msg: string) {\n    super(msg)\n    this.name = 'TokenDisabledError'\n  }\n}\n\nexport interface TokenBridgeParams {\n  l1: { provider: JsonRpcProvider; network: Chain }\n  l2: { provider: JsonRpcProvider; network: Chain }\n}\n\nexport const useArbTokenBridge = (\n  params: TokenBridgeParams\n): ArbTokenBridge => {\n  const { l1, l2 } = params\n  const { address: walletAddress } = useAccount()\n  const [bridgeTokens, setBridgeTokens] = useState<\n    ContractStorage<ERC20BridgeToken> | undefined\n  >(undefined)\n\n  const { destinationAddress } = useDestinationAddressStore()\n\n  const {\n    erc20: [, updateErc20L1Balance]\n  } = useBalance({\n    chainId: l1.network.id,\n    walletAddress\n  })\n  const {\n    erc20: [, updateErc20L2Balance]\n  } = useBalance({\n    chainId: l2.network.id,\n    walletAddress\n  })\n  const {\n    erc20: [, updateErc20L1CustomDestinationBalance]\n  } = useBalance({\n    chainId: l1.network.id,\n    walletAddress: destinationAddress\n  })\n  const {\n    erc20: [, updateErc20CustomDestinationL2Balance]\n  } = useBalance({\n    chainId: l2.network.id,\n    walletAddress: destinationAddress\n  })\n\n  interface ExecutedMessagesCache {\n    [id: string]: boolean\n  }\n\n  const [executedMessagesCache, setExecutedMessagesCache] =\n    useLocalStorage<ExecutedMessagesCache>(\n      'arbitrum:bridge:executed-messages',\n      {}\n    ) as [\n      ExecutedMessagesCache,\n      React.Dispatch<ExecutedMessagesCache>,\n      React.Dispatch<void>\n    ]\n\n  const l1NetworkID = useMemo(() => String(l1.network.id), [l1.network.id])\n\n  const [transactions, { addTransaction, updateTransaction }] =\n    useTransactions()\n\n  const removeTokensFromList = (listID: number) => {\n    setBridgeTokens(prevBridgeTokens => {\n      const newBridgeTokens = { ...prevBridgeTokens }\n      for (const address in bridgeTokens) {\n        const token = bridgeTokens[address]\n        if (!token) continue\n\n        token.listIds.delete(listID)\n\n        if (token.listIds.size === 0) {\n          delete newBridgeTokens[address]\n        }\n      }\n      return newBridgeTokens\n    })\n  }\n\n  const addTokensFromList = async (arbTokenList: TokenList, listId: number) => {\n    const l1ChainID = l1.network.id\n    const l2ChainID = l2.network.id\n\n    const bridgeTokensToAdd: ContractStorage<ERC20BridgeToken> = {}\n\n    const candidateUnbridgedTokensToAdd: ERC20BridgeToken[] = []\n\n    for (const tokenData of arbTokenList.tokens) {\n      const { address, name, symbol, extensions, decimals, logoURI, chainId } =\n        tokenData\n\n      if (![l1ChainID, l2ChainID].includes(chainId)) {\n        continue\n      }\n\n      const bridgeInfo = (() => {\n        // TODO: parsing the token list format could be from arbts or the tokenlist package\n        interface Extensions {\n          bridgeInfo: {\n            [chainId: string]: {\n              tokenAddress: string\n              originBridgeAddress: string\n              destBridgeAddress: string\n            }\n          }\n        }\n        const isExtensions = (obj: any): obj is Extensions => {\n          if (!obj) return false\n          if (!obj['bridgeInfo']) return false\n          return Object.keys(obj['bridgeInfo'])\n            .map(key => obj['bridgeInfo'][key])\n            .every(\n              e =>\n                e &&\n                'tokenAddress' in e &&\n                'originBridgeAddress' in e &&\n                'destBridgeAddress' in e\n            )\n        }\n        if (!isExtensions(extensions)) {\n          return null\n        } else {\n          return extensions.bridgeInfo\n        }\n      })()\n\n      if (bridgeInfo) {\n        const l1Address = bridgeInfo[l1NetworkID]?.tokenAddress.toLowerCase()\n\n        if (!l1Address) {\n          return\n        }\n\n        bridgeTokensToAdd[l1Address] = {\n          name,\n          type: TokenType.ERC20,\n          symbol,\n          address: l1Address,\n          l2Address: address.toLowerCase(),\n          decimals,\n          logoURI,\n          listIds: new Set([listId])\n        }\n      }\n      // save potentially unbridged L1 tokens:\n      // stopgap: giant lists (i.e., CMC list) currently severaly hurts page performace, so for now we only add the bridged tokens\n      else if (arbTokenList.tokens.length < 1000) {\n        candidateUnbridgedTokensToAdd.push({\n          name,\n          type: TokenType.ERC20,\n          symbol,\n          address: address.toLowerCase(),\n          decimals,\n          logoURI,\n          listIds: new Set([listId])\n        })\n      }\n    }\n\n    // add L1 tokens only if they aren't already bridged (i.e., if they haven't already beed added as L2 arb-tokens to the list)\n    const l1AddressesOfBridgedTokens = new Set(\n      Object.keys(bridgeTokensToAdd).map(\n        l1Address =>\n          l1Address.toLowerCase() /* lists should have the checksummed case anyway, but just in case (pun unintended) */\n      )\n    )\n    for (const l1TokenData of candidateUnbridgedTokensToAdd) {\n      if (!l1AddressesOfBridgedTokens.has(l1TokenData.address.toLowerCase())) {\n        bridgeTokensToAdd[l1TokenData.address] = l1TokenData\n      }\n    }\n\n    // Callback is used here, so we can add listId to the set of listIds rather than creating a new set everytime\n    setBridgeTokens(oldBridgeTokens => {\n      const l1Addresses: string[] = []\n      const l2Addresses: string[] = []\n\n      // USDC is not on any token list as it's unbridgeable\n      // but we still want to detect its balance on user's wallet\n      if (isNetwork(l2ChainID).isArbitrumOne) {\n        l2Addresses.push(CommonAddress.ArbitrumOne.USDC)\n      }\n      if (isNetwork(l2ChainID).isArbitrumSepolia) {\n        l2Addresses.push(CommonAddress.ArbitrumSepolia.USDC)\n      }\n\n      for (const tokenAddress in bridgeTokensToAdd) {\n        const tokenToAdd = bridgeTokensToAdd[tokenAddress]\n        if (!tokenToAdd) {\n          return\n        }\n        const { address, l2Address } = tokenToAdd\n        if (address) {\n          l1Addresses.push(address)\n        }\n        if (l2Address) {\n          l2Addresses.push(l2Address)\n        }\n\n        // Add the new list id being imported (`listId`) to the existing list ids (from `oldBridgeTokens[address]`)\n        // Set the result to token added to `bridgeTokens` : `tokenToAdd.listIds`\n        const oldListIds =\n          oldBridgeTokens?.[tokenToAdd.address]?.listIds || new Set()\n        tokenToAdd.listIds = new Set([...oldListIds, listId])\n      }\n\n      updateErc20L1Balance(l1Addresses)\n      updateErc20L2Balance(l2Addresses)\n\n      return {\n        ...oldBridgeTokens,\n        ...bridgeTokensToAdd\n      }\n    })\n  }\n\n  async function addToken(erc20L1orL2Address: string) {\n    let l1Address: string\n    let l2Address: string | undefined\n\n    if (!walletAddress) {\n      return\n    }\n\n    const lowercasedErc20L1orL2Address = erc20L1orL2Address.toLowerCase()\n    const maybeL1Address = await getL1ERC20Address({\n      erc20L2Address: lowercasedErc20L1orL2Address,\n      l2Provider: l2.provider\n    })\n\n    if (maybeL1Address) {\n      // looks like l2 address was provided\n      l1Address = maybeL1Address\n      l2Address = lowercasedErc20L1orL2Address\n    } else {\n      // looks like l1 address was provided\n      l1Address = lowercasedErc20L1orL2Address\n\n      // while deriving the child-chain address, it can be a teleport transfer too, in that case derive L3 address from L1 address\n      // else, derive the L2 address from L1 address OR L3 address from L2 address\n      if (\n        isTeleport({\n          sourceChainId: l1.network.id,\n          destinationChainId: l2.network.id\n        })\n      ) {\n        // this can be a bit hard to follow, but it will resolve when we have code-wide better naming for variables\n        // here `l2Address` actually means `childChainAddress`, and `l2.provider` is actually being used as a child-chain-provider, which in this case will be L3\n        l2Address = await getL3ERC20Address({\n          erc20L1Address: l1Address,\n          l1Provider: l1.provider,\n          l3Provider: l2.provider // in case of teleport transfer, the l2.provider being used here is actually the l3 provider\n        })\n      } else {\n        l2Address = await getL2ERC20Address({\n          erc20L1Address: l1Address,\n          l1Provider: l1.provider,\n          l2Provider: l2.provider\n        })\n      }\n    }\n\n    const bridgeTokensToAdd: ContractStorage<ERC20BridgeToken> = {}\n    const erc20Params = { address: l1Address, provider: l1.provider }\n\n    if (!(await isValidErc20(erc20Params))) {\n      throw new Error(`${l1Address} is not a valid ERC-20 token`)\n    }\n\n    const { name, symbol, decimals } = await fetchErc20Data(erc20Params)\n\n    const isDisabled = await l1TokenIsDisabled({\n      erc20L1Address: l1Address,\n      l1Provider: l1.provider,\n      l2Provider: l2.provider\n    })\n\n    if (isDisabled) {\n      throw new TokenDisabledError('Token currently disabled')\n    }\n\n    const l1AddressLowerCased = l1Address.toLowerCase()\n    bridgeTokensToAdd[l1AddressLowerCased] = {\n      name,\n      type: TokenType.ERC20,\n      symbol,\n      address: l1AddressLowerCased,\n      l2Address: l2Address?.toLowerCase(),\n      decimals,\n      listIds: new Set()\n    }\n\n    setBridgeTokens(oldBridgeTokens => {\n      return { ...oldBridgeTokens, ...bridgeTokensToAdd }\n    })\n\n    updateErc20L1Balance([l1AddressLowerCased])\n    if (l2Address) {\n      updateErc20L2Balance([l2Address])\n    }\n  }\n\n  const updateTokenData = useCallback(\n    async (l1Address: string) => {\n      if (typeof bridgeTokens === 'undefined') {\n        return\n      }\n      const l1AddressLowerCased = l1Address.toLowerCase()\n      const bridgeToken = bridgeTokens[l1AddressLowerCased]\n\n      if (!bridgeToken) {\n        return\n      }\n\n      const newBridgeTokens = { [l1AddressLowerCased]: bridgeToken }\n      setBridgeTokens(oldBridgeTokens => {\n        return { ...oldBridgeTokens, ...newBridgeTokens }\n      })\n      const { l2Address } = bridgeToken\n      updateErc20L1Balance([l1AddressLowerCased])\n      if (destinationAddress) {\n        updateErc20L1CustomDestinationBalance([l1AddressLowerCased])\n      }\n      if (l2Address) {\n        updateErc20L2Balance([l2Address])\n        if (destinationAddress) {\n          updateErc20CustomDestinationL2Balance([l2Address])\n        }\n      }\n    },\n    [\n      bridgeTokens,\n      setBridgeTokens,\n      updateErc20L1Balance,\n      updateErc20L2Balance,\n      updateErc20L1CustomDestinationBalance,\n      updateErc20CustomDestinationL2Balance\n    ]\n  )\n\n  async function triggerOutboxToken({\n    event,\n    l1Signer\n  }: {\n    event: L2ToL1EventResultPlus\n    l1Signer: Signer\n  }) {\n    // sanity check\n    if (!event) {\n      throw new Error('Outbox message not found')\n    }\n\n    if (!walletAddress) {\n      return\n    }\n\n    const parentChainProvider = getProviderForChainId(event.parentChainId)\n    const childChainProvider = getProviderForChainId(event.childChainId)\n\n    const messageWriter = ChildToParentMessage.fromEvent(\n      l1Signer,\n      event,\n      parentChainProvider\n    )\n    const res = await messageWriter.execute(childChainProvider)\n\n    const rec = await res.wait()\n\n    if (rec.status === 1) {\n      addToExecutedMessagesCache([event])\n    }\n\n    return rec\n  }\n\n  function addL2NativeToken(erc20L2Address: string) {\n    const token = getL2NativeToken(erc20L2Address, l2.network.id)\n\n    setBridgeTokens(oldBridgeTokens => {\n      return {\n        ...oldBridgeTokens,\n        [`L2-NATIVE:${token.address}`]: {\n          name: token.name,\n          type: TokenType.ERC20,\n          symbol: token.symbol,\n          address: token.address,\n          l2Address: token.address,\n          decimals: token.decimals,\n          logoURI: token.logoURI,\n          listIds: new Set(),\n          isL2Native: true\n        }\n      }\n    })\n  }\n\n  async function triggerOutboxEth({\n    event,\n    l1Signer\n  }: {\n    event: L2ToL1EventResultPlus\n    l1Signer: Signer\n  }) {\n    // sanity check\n    if (!event) {\n      throw new Error('Outbox message not found')\n    }\n\n    if (!walletAddress) {\n      return\n    }\n\n    const parentChainProvider = getProviderForChainId(event.parentChainId)\n    const childChainProvider = getProviderForChainId(event.childChainId)\n\n    const messageWriter = ChildToParentMessage.fromEvent(\n      l1Signer,\n      event,\n      parentChainProvider\n    )\n\n    const res = await messageWriter.execute(childChainProvider)\n\n    const rec = await res.wait()\n\n    if (rec.status === 1) {\n      addToExecutedMessagesCache([event])\n    }\n\n    return rec\n  }\n\n  function addToExecutedMessagesCache(events: L2ToL1EventResult[]) {\n    const added: { [cacheKey: string]: boolean } = {}\n\n    events.forEach((event: L2ToL1EventResult) => {\n      const cacheKey = getExecutedMessagesCacheKey({\n        event,\n        l2ChainId: l2.network.id\n      })\n\n      added[cacheKey] = true\n    })\n\n    setExecutedMessagesCache({ ...executedMessagesCache, ...added })\n  }\n\n  return {\n    bridgeTokens,\n    eth: {\n      triggerOutbox: triggerOutboxEth\n    },\n    token: {\n      add: addToken,\n      addL2NativeToken,\n      addTokensFromList,\n      removeTokensFromList,\n      updateTokenData,\n      triggerOutbox: triggerOutboxToken\n    },\n    transactions: {\n      transactions,\n      updateTransaction,\n      addTransaction\n    }\n  }\n}\n","import {\n  ParentTransactionReceipt,\n  ParentToChildMessageWriter as IParentToChildMessageWriter,\n  ParentToChildMessageStatus\n} from '@arbitrum/sdk'\nimport { Signer } from '@ethersproject/abstract-signer'\nimport { Provider } from '@ethersproject/abstract-provider'\nimport dayjs from 'dayjs'\nimport { JsonRpcProvider } from '@ethersproject/providers'\nimport { isTeleport } from '@/token-bridge-sdk/teleport'\nimport {\n  MergedTransaction,\n  TeleporterMergedTransaction\n} from '../state/app/state'\nimport { isTeleporterTransaction } from '../hooks/useTransactions'\n\ntype GetRetryableTicketParams = {\n  parentChainTxHash: string\n  retryableCreationId?: string\n  parentChainProvider: Provider\n  childChainSigner: Signer\n}\n\ntype GetRetryableTicketExpirationParams = {\n  parentChainTxHash: string\n  parentChainProvider: JsonRpcProvider\n  childChainProvider: JsonRpcProvider\n}\n\ntype RetryableTicketExpirationResponse = {\n  isLoading: boolean\n  isLoadingError: boolean\n  expirationDate: number\n  daysUntilExpired: number\n  isExpired: boolean\n}\n\nexport async function getRetryableTicket({\n  parentChainTxHash,\n  retryableCreationId,\n  parentChainProvider,\n  childChainSigner\n}: GetRetryableTicketParams): Promise<IParentToChildMessageWriter> {\n  if (!retryableCreationId) {\n    throw new Error(\"Error: Couldn't find retryable ticket creation id\")\n  }\n\n  const parentChainTxReceipt = new ParentTransactionReceipt(\n    await parentChainProvider.getTransactionReceipt(parentChainTxHash)\n  )\n\n  const retryableTicket = (\n    await parentChainTxReceipt.getParentToChildMessages(childChainSigner)\n  )\n    // Find message with the matching id\n    .find(m => m.retryableCreationId === retryableCreationId)\n\n  if (typeof retryableTicket === 'undefined') {\n    throw new Error(\"Error: Couldn't find retryable ticket\")\n  }\n\n  return retryableTicket\n}\n\nexport const getRetryableTicketExpiration = async ({\n  parentChainTxHash,\n  parentChainProvider,\n  childChainProvider\n}: GetRetryableTicketExpirationParams): Promise<RetryableTicketExpirationResponse> => {\n  let isLoading = true,\n    isLoadingError = false,\n    isExpired = false\n\n  let daysUntilExpired = 0\n  let expirationDate = 0\n\n  try {\n    const depositTxReceipt = await parentChainProvider.getTransactionReceipt(\n      parentChainTxHash\n    )\n    const parentChainTxReceipt = new ParentTransactionReceipt(depositTxReceipt)\n    const [parentToChildMsg] =\n      await parentChainTxReceipt.getParentToChildMessages(childChainProvider)\n\n    const now = dayjs()\n\n    const expiryDateResponse = await parentToChildMsg!.getTimeout()\n    expirationDate = Number(expiryDateResponse.toString()) * 1000\n\n    daysUntilExpired = dayjs(expirationDate).diff(now, 'days')\n\n    if (daysUntilExpired >= 0) isExpired = false\n  } catch (_) {\n    isLoadingError = true\n  }\n\n  isLoading = false\n\n  return {\n    // promise loading state\n    isLoading,\n    isLoadingError,\n\n    // expiration state\n    expirationDate,\n    daysUntilExpired,\n    isExpired\n  }\n}\n\n// utilities for teleporter transactions\nexport const l1L2RetryableRequiresRedeem = (\n  tx: TeleporterMergedTransaction\n) => {\n  return (\n    tx.parentToChildMsgData?.status ===\n    ParentToChildMessageStatus.FUNDS_DEPOSITED_ON_CHILD\n  )\n}\n\nexport const l2ForwarderRetryableRequiresRedeem = (\n  tx: TeleporterMergedTransaction\n) => {\n  return typeof tx.l2ToL3MsgData?.l2ForwarderRetryableTxID !== 'undefined'\n}\n\nexport const firstRetryableLegRequiresRedeem = (\n  tx: TeleporterMergedTransaction\n) => {\n  return (\n    l1L2RetryableRequiresRedeem(tx) || l2ForwarderRetryableRequiresRedeem(tx)\n  )\n}\n\nexport const secondRetryableLegForTeleportRequiresRedeem = (\n  tx: TeleporterMergedTransaction\n) => {\n  return (\n    !l2ForwarderRetryableRequiresRedeem(tx) &&\n    tx.l2ToL3MsgData?.status ===\n      ParentToChildMessageStatus.FUNDS_DEPOSITED_ON_CHILD\n  )\n}\n\nexport const getChainIdForRedeemingRetryable = (tx: MergedTransaction) => {\n  // which chain id needs to be connected to, to redeem the retryable ticket\n  if (\n    isTeleport(tx) &&\n    isTeleporterTransaction(tx) &&\n    firstRetryableLegRequiresRedeem(tx)\n  ) {\n    // in teleport, unless it's the final retryable being redeemed, we need to connect to the l2 chain\n    if (!tx.l2ToL3MsgData) {\n      throw Error(\n        `Could not find destination chain id for redeeming retryable for ${tx.txId}`\n      )\n    }\n\n    // else, return the destination chain\n    return tx.l2ToL3MsgData.l2ChainId\n  }\n\n  return tx.childChainId\n}\n","import dayjs from 'dayjs'\nimport { ParentToChildMessageStatus } from '@arbitrum/sdk'\nimport { ethers, BigNumber } from 'ethers'\n\nimport {\n  DepositStatus,\n  MergedTransaction,\n  TeleporterMergedTransaction\n} from './state'\nimport {\n  AssetType,\n  L2ToL1EventResultPlus,\n  NodeBlockDeadlineStatusTypes,\n  OutgoingMessageState\n} from '../../hooks/arbTokenBridge.types'\nimport {\n  isTeleporterTransaction,\n  TeleporterTransaction,\n  Transaction\n} from '../../hooks/useTransactions'\nimport { getUniqueIdOrHashFromEvent } from '../../hooks/useArbTokenBridge'\nimport { isTeleport } from '../../token-bridge-sdk/teleport'\nimport {\n  firstRetryableLegRequiresRedeem,\n  secondRetryableLegForTeleportRequiresRedeem\n} from '../../util/RetryableUtils'\n\nexport const TX_DATE_FORMAT = 'MMM DD, YYYY'\nexport const TX_TIME_FORMAT = 'hh:mm A (z)'\n\nexport const outgoingStateToString = {\n  [OutgoingMessageState.UNCONFIRMED]: 'Unconfirmed',\n  [OutgoingMessageState.CONFIRMED]: 'Confirmed',\n  [OutgoingMessageState.EXECUTED]: 'Executed'\n}\n\nfunction isTransaction(tx: Transaction | MergedTransaction): tx is Transaction {\n  return typeof (tx as Transaction).type !== 'undefined'\n}\n\nfunction isMergedTransaction(\n  tx: Transaction | MergedTransaction\n): tx is MergedTransaction {\n  return typeof (tx as MergedTransaction).direction !== 'undefined'\n}\n\nexport const getDepositStatus = (\n  tx: Transaction | MergedTransaction | TeleporterMergedTransaction\n) => {\n  if (isTransaction(tx) && tx.type !== 'deposit' && tx.type !== 'deposit-l1') {\n    return undefined\n  }\n\n  if (isMergedTransaction(tx) && tx.isWithdrawal) {\n    return undefined\n  }\n\n  if (tx.status === 'failure') {\n    return DepositStatus.L1_FAILURE\n  }\n  if (tx.status === 'pending') {\n    return DepositStatus.L1_PENDING\n  }\n\n  if (isTeleporterTransaction(tx)) {\n    const { l2ToL3MsgData, parentToChildMsgData } = tx\n\n    // if any of the retryable info is missing, first fetch might be pending\n    if (!parentToChildMsgData || !l2ToL3MsgData) return DepositStatus.L2_PENDING\n\n    // if we find `l2ForwarderRetryableTxID` then this tx will need to be redeemed\n    if (l2ToL3MsgData.l2ForwarderRetryableTxID) return DepositStatus.L2_FAILURE\n\n    // if we find first retryable leg failing, then no need to check for the second leg\n    const firstLegDepositStatus = getDepositStatusFromL1ToL2MessageStatus(\n      parentToChildMsgData.status\n    )\n    if (firstLegDepositStatus !== DepositStatus.L2_SUCCESS) {\n      return firstLegDepositStatus\n    }\n\n    const secondLegDepositStatus = getDepositStatusFromL1ToL2MessageStatus(\n      l2ToL3MsgData.status\n    )\n    if (typeof secondLegDepositStatus !== 'undefined') {\n      return secondLegDepositStatus\n    }\n    switch (parentToChildMsgData.status) {\n      case ParentToChildMessageStatus.REDEEMED:\n        return DepositStatus.L2_PENDING // tx is still pending if `l1ToL2MsgData` is redeemed (but l2ToL3MsgData is not)\n      default:\n        return getDepositStatusFromL1ToL2MessageStatus(\n          parentToChildMsgData.status\n        )\n    }\n  }\n\n  const { parentToChildMsgData: l1ToL2MsgData } = tx\n  if (!l1ToL2MsgData) {\n    return DepositStatus.L2_PENDING\n  }\n  switch (l1ToL2MsgData.status) {\n    case ParentToChildMessageStatus.NOT_YET_CREATED:\n      return DepositStatus.L2_PENDING\n    case ParentToChildMessageStatus.CREATION_FAILED:\n      return DepositStatus.CREATION_FAILED\n    case ParentToChildMessageStatus.EXPIRED:\n      return tx.assetType === AssetType.ETH\n        ? DepositStatus.L2_SUCCESS\n        : DepositStatus.EXPIRED\n    case ParentToChildMessageStatus.FUNDS_DEPOSITED_ON_CHILD: {\n      return tx.assetType === AssetType.ETH\n        ? DepositStatus.L2_SUCCESS\n        : DepositStatus.L2_FAILURE\n    }\n    case ParentToChildMessageStatus.REDEEMED:\n      return DepositStatus.L2_SUCCESS\n  }\n}\n\nfunction getDepositStatusFromL1ToL2MessageStatus(\n  status: ParentToChildMessageStatus\n): DepositStatus | undefined {\n  switch (status) {\n    case ParentToChildMessageStatus.NOT_YET_CREATED:\n      return DepositStatus.L2_PENDING\n    case ParentToChildMessageStatus.CREATION_FAILED:\n      return DepositStatus.CREATION_FAILED\n    case ParentToChildMessageStatus.EXPIRED:\n      return DepositStatus.EXPIRED\n    case ParentToChildMessageStatus.FUNDS_DEPOSITED_ON_CHILD:\n      return DepositStatus.L2_FAILURE\n    case ParentToChildMessageStatus.REDEEMED:\n      return DepositStatus.L2_SUCCESS\n  }\n}\n\nexport const transformDeposit = (\n  tx: Transaction | TeleporterTransaction\n): MergedTransaction | TeleporterMergedTransaction => {\n  const transaction = {\n    sender: tx.sender,\n    destination: tx.destination,\n    direction: tx.type,\n    status: tx.status,\n    createdAt: tx.timestampCreated\n      ? getStandardizedTimestamp(tx.timestampCreated)\n      : null,\n    resolvedAt: tx.timestampResolved\n      ? getStandardizedTimestamp(tx.timestampResolved)\n      : null,\n    txId: tx.txID,\n    asset: tx.assetName || '',\n    assetType: tx.assetType,\n    value: tx.value,\n    uniqueId: null, // not needed\n    isWithdrawal: false,\n    blockNum: tx.blockNumber || null,\n    tokenAddress: tx.tokenAddress || null,\n    parentToChildMsgData: tx.parentToChildMsgData,\n    childToParentMsgData: tx.childToParentMsgData,\n    depositStatus: getDepositStatus(tx),\n    parentChainId: Number(tx.l1NetworkID),\n    childChainId: Number(tx.l2NetworkID),\n    sourceChainId: Number(tx.l1NetworkID),\n    destinationChainId: Number(tx.l2NetworkID)\n  }\n  if (isTeleporterTransaction(tx)) {\n    return {\n      ...transaction,\n      l2ToL3MsgData: tx.l2ToL3MsgData\n    }\n  }\n\n  return transaction\n}\n\nexport const transformWithdrawal = (\n  tx: L2ToL1EventResultPlus\n): MergedTransaction => {\n  const uniqueIdOrHash = getUniqueIdOrHashFromEvent(tx)\n\n  return {\n    sender: tx.sender,\n    destination: tx.destinationAddress,\n    direction: 'outbox',\n    status:\n      tx.nodeBlockDeadline ===\n      NodeBlockDeadlineStatusTypes.EXECUTE_CALL_EXCEPTION\n        ? 'Failure'\n        : outgoingStateToString[tx.outgoingMessageState],\n    createdAt: getStandardizedTimestamp(\n      String(BigNumber.from(tx.timestamp).toNumber() * 1000)\n    ),\n    resolvedAt: null,\n    txId: tx.l2TxHash || 'l2-tx-hash-not-found',\n    asset: tx.symbol || '',\n    assetType: tx.type,\n    value: ethers.utils.formatUnits(tx.value?.toString(), tx.decimals),\n    uniqueId: uniqueIdOrHash,\n    isWithdrawal: true,\n    blockNum: tx.ethBlockNum.toNumber(),\n    tokenAddress: tx.tokenAddress || null,\n    nodeBlockDeadline: tx.nodeBlockDeadline,\n    parentChainId: tx.parentChainId,\n    childChainId: tx.childChainId,\n    sourceChainId: tx.childChainId,\n    destinationChainId: tx.parentChainId\n  }\n}\n\n// filter the transactions based on current wallet address and network ID's\nexport const filterTransactions = (\n  transactions: Transaction[],\n  walletAddress: string,\n  l1ChainId: number | null,\n  l2ChainId: number | null\n): Transaction[] => {\n  const result = []\n  for (const tx of transactions) {\n    const txSender = tx.sender\n    const txL1NetworkID = tx.l1NetworkID\n    const txL2NetworkID = tx.l2NetworkID\n\n    const isSenderWallet =\n      txSender.toLowerCase() === walletAddress.toLowerCase()\n    const matchesL1 = txL1NetworkID === String(l1ChainId)\n\n    // The `l2NetworkID` field was added later, so not all transactions will have it\n    const matchesL2 =\n      typeof txL2NetworkID === 'undefined'\n        ? matchesL1\n        : txL2NetworkID === String(l2ChainId)\n\n    if (isSenderWallet && matchesL1 && matchesL2) {\n      result.push(tx)\n    }\n  }\n\n  return result\n}\n\nexport const isTokenDeposit = (tx: MergedTransaction) => {\n  return isDeposit(tx) && tx.tokenAddress\n}\n\nexport const isDeposit = (tx: MergedTransaction) => {\n  return tx.direction === 'deposit' || tx.direction === 'deposit-l1'\n}\n\nexport const isWithdrawal = (tx: MergedTransaction) => {\n  return tx.direction === 'withdraw' || tx.direction === 'outbox'\n}\n\nexport const isPending = (tx: MergedTransaction) => {\n  if (tx.isCctp && !tx.resolvedAt && tx.status !== 'Failure') {\n    return true\n  }\n  return (\n    (isDeposit(tx) &&\n      (tx.status === 'pending' ||\n        tx.depositStatus === DepositStatus.L1_PENDING ||\n        tx.depositStatus === DepositStatus.L2_PENDING)) ||\n    (isWithdrawal(tx) &&\n      (tx.status === outgoingStateToString[OutgoingMessageState.UNCONFIRMED] ||\n        tx.status === outgoingStateToString[OutgoingMessageState.CONFIRMED]))\n  )\n}\n\nexport const isFailed = (tx: MergedTransaction) => {\n  return (\n    (isDeposit(tx) &&\n      (tx.status === 'failure' ||\n        tx.depositStatus == DepositStatus.L1_FAILURE ||\n        tx.depositStatus === DepositStatus.L2_FAILURE)) ||\n    (isWithdrawal(tx) &&\n      tx.nodeBlockDeadline ==\n        NodeBlockDeadlineStatusTypes.EXECUTE_CALL_EXCEPTION)\n  )\n}\n\nexport function isCustomDestinationAddressTx(\n  tx: Pick<MergedTransaction, 'sender' | 'destination'>\n) {\n  if (!tx.sender || !tx.destination) {\n    return false\n  }\n  return tx.sender.toLowerCase() !== tx.destination.toLowerCase()\n}\n\nexport const isWithdrawalReadyToClaim = (tx: MergedTransaction) => {\n  return (\n    isWithdrawal(tx) &&\n    isPending(tx) &&\n    tx.status === outgoingStateToString[OutgoingMessageState.CONFIRMED]\n  )\n}\n\nexport const isDepositReadyToRedeem = (tx: MergedTransaction) => {\n  if (isTeleport(tx) && isTeleporterTransaction(tx)) {\n    return (\n      firstRetryableLegRequiresRedeem(tx) ||\n      secondRetryableLegForTeleportRequiresRedeem(tx)\n    )\n  }\n  return isDeposit(tx) && tx.depositStatus === DepositStatus.L2_FAILURE\n}\n\nexport const getStandardizedTimestamp = (date: string | BigNumber) => {\n  // because we get timestamps in different formats from subgraph/event-logs/useTxn hook, we need 1 standard format.\n  if (typeof date === 'string') {\n    if (isNaN(Number(date))) return dayjs(new Date(date)).unix() // for ISOstring type of dates -> dayjs timestamp\n    return Number(date) // for timestamp type of date -> dayjs timestamp\n  }\n\n  // BigNumber\n  return date.toNumber()\n}\n\nexport const getStandardizedTime = (standardizedTimestamp: number) => {\n  return dayjs(standardizedTimestamp).format(TX_TIME_FORMAT) // dayjs timestamp -> time\n}\n\nexport const getStandardizedDate = (standardizedTimestamp: number) => {\n  return dayjs(standardizedTimestamp).format(TX_DATE_FORMAT) // dayjs timestamp -> date\n}\n","import { Provider, BlockTag } from '@ethersproject/providers'\nimport { ChildToParentMessageReader } from '@arbitrum/sdk'\n\n/**\n * Fetches initiated ETH withdrawals from event logs in range of [fromBlock, toBlock].\n *\n * @param query Query params\n * @param query.receiver Address that will receive the funds\n * @param query.fromBlock Start at this block number (including)\n * @param query.toBlock Stop at this block number (including)\n * @param query.l2Provider Provider for the L2 network\n */\nexport function fetchETHWithdrawalsFromEventLogs({\n  receiver,\n  fromBlock,\n  toBlock,\n  l2Provider\n}: {\n  receiver?: string\n  fromBlock: BlockTag\n  toBlock: BlockTag\n  l2Provider: Provider\n}) {\n  if (typeof receiver === 'undefined') {\n    return []\n  }\n  // funds sent by this address\n  return ChildToParentMessageReader.getChildToParentEvents(\n    l2Provider,\n    { fromBlock, toBlock },\n    undefined,\n    receiver\n  )\n}\n","import { ChainId } from './networks'\nimport { getAPIBaseUrl } from '.'\n\nexport function hasL1Subgraph(l2ChainId: number) {\n  switch (l2ChainId) {\n    case ChainId.ArbitrumOne:\n    case ChainId.ArbitrumNova:\n    case ChainId.ArbitrumSepolia:\n      return true\n\n    default:\n      return false\n  }\n}\n\nexport function hasL2Subgraph(l2ChainId: number) {\n  switch (l2ChainId) {\n    case ChainId.ArbitrumOne:\n    case ChainId.ArbitrumNova:\n    case ChainId.ArbitrumSepolia:\n      return true\n\n    default:\n      return false\n  }\n}\n\nexport function hasTeleporterSubgraph(l1ChainId: number) {\n  switch (l1ChainId) {\n    case ChainId.Ethereum:\n    case ChainId.Sepolia:\n      return true\n\n    default:\n      return false\n  }\n}\n\nexport const fetchLatestSubgraphBlockNumber = async (\n  chainId: number\n): Promise<number> => {\n  const response = await fetch(\n    `${getAPIBaseUrl()}/api/chains/${chainId}/block-number`,\n    {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' }\n    }\n  )\n\n  return ((await response.json()) as { data: number }).data\n}\n\nexport const shouldIncludeSentTxs = ({\n  type,\n  isSmartContractWallet,\n  isConnectedToParentChain\n}: {\n  type: 'deposits' | 'withdrawals'\n  isSmartContractWallet: boolean\n  isConnectedToParentChain: boolean\n}) => {\n  if (isSmartContractWallet) {\n    // show txs sent from this account for:\n    // 1. deposits if we are connected to the parent chain, or\n    // 2. withdrawals if we are connected to the child chain\n    return isConnectedToParentChain\n      ? type === 'deposits'\n      : type === 'withdrawals'\n  }\n  // always show for EOA\n  return true\n}\n\nexport const shouldIncludeReceivedTxs = ({\n  type,\n  isSmartContractWallet,\n  isConnectedToParentChain\n}: {\n  type: 'deposits' | 'withdrawals'\n  isSmartContractWallet: boolean\n  isConnectedToParentChain: boolean\n}) => {\n  if (isSmartContractWallet) {\n    // show txs sent to this account for:\n    // 1. withdrawals if we are connected to the parent chain, or\n    // 2. deposits if we are connected to the child chain\n    return isConnectedToParentChain\n      ? type === 'withdrawals'\n      : type === 'deposits'\n  }\n  // always show for EOA\n  return true\n}\n","import { hasL2Subgraph } from '../SubgraphUtils'\nimport { getAPIBaseUrl, sanitizeQueryParams } from './../index'\n\nexport type FetchWithdrawalsFromSubgraphResult = {\n  id: string\n  type: 'EthWithdrawal' | 'TokenWithdrawal'\n  sender: string\n  receiver: string\n  ethValue: string\n  l1Token?: {\n    id: string\n  }\n  tokenAmount: string\n  isClassic: boolean\n  l2BlockTimestamp: string\n  l2TxHash: string\n  l2BlockNum: string\n  direction: 'withdrawal'\n  source: 'subgraph'\n  parentChainId: number\n  childChainId: number\n}\n\n/**\n * Fetches initiated withdrawals (ETH + Token) from subgraph in range of [fromBlock, toBlock] and pageParams.\n *\n * @param query Query params\n * @param query.sender Address that initiated the withdrawal\n * @param query.receiver Address that received the funds\n * @param query.fromBlock Start at this block number (including)\n * @param query.toBlock Stop at this block number (including)\n * @param query.l2ChainId ChainId for the L2 network\n * @param query.pageSize Fetch these many records from subgraph\n * @param query.pageNumber Fetch records starting [pageNumber * pageSize] records\n * @param query.searchString Searches records through the l2TxHash\n */\nexport async function fetchWithdrawalsFromSubgraph({\n  sender,\n  receiver,\n  fromBlock,\n  toBlock,\n  l2ChainId,\n  pageSize = 10,\n  pageNumber = 0,\n  searchString = ''\n}: {\n  sender?: string\n  receiver?: string\n  fromBlock: number\n  toBlock: number\n  l2ChainId: number\n  pageSize?: number\n  pageNumber?: number\n  searchString?: string\n}): Promise<FetchWithdrawalsFromSubgraphResult[]> {\n  if (fromBlock >= toBlock) {\n    // if fromBlock > toBlock or both are equal / 0\n    return []\n  }\n\n  const urlParams = new URLSearchParams(\n    sanitizeQueryParams({\n      sender,\n      receiver,\n      fromBlock,\n      toBlock,\n      l2ChainId,\n      pageSize,\n      page: pageNumber,\n      search: searchString\n    })\n  )\n\n  if (!hasL2Subgraph(Number(l2ChainId))) {\n    throw new Error(`L2 subgraph not available for network: ${l2ChainId}`)\n  }\n\n  if (pageSize === 0) return [] // don't query subgraph if nothing requested\n\n  const response = await fetch(\n    `${getAPIBaseUrl()}/api/withdrawals?${urlParams}`,\n    {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' }\n    }\n  )\n\n  const transactions: FetchWithdrawalsFromSubgraphResult[] = (\n    await response.json()\n  ).data\n\n  return transactions\n}\n","import { Provider, BlockTag } from '@ethersproject/providers'\nimport { Erc20Bridger, EventArgs } from '@arbitrum/sdk'\nimport { WithdrawalInitiatedEvent } from '@arbitrum/sdk/dist/lib/abi/L2ArbitrumGateway'\n\nfunction dedupeEvents(\n  events: (EventArgs<WithdrawalInitiatedEvent> & {\n    txHash: string\n  })[]\n) {\n  return [...new Map(events.map(item => [item.txHash, item])).values()]\n}\n\n/**\n * Fetches initiated token withdrawals from event logs in range of [fromBlock, toBlock].\n *\n * @param query Query params\n * @param query.sender Address that initiated the withdrawal\n * @param query.receiver Address that received the funds\n * @param query.fromBlock Start at this block number (including)\n * @param query.toBlock Stop at this block number (including)\n * @param query.l2Provider Provider for the L2 network\n * @param query.l2GatewayAddresses L2 gateway addresses to use\n */\nexport async function fetchTokenWithdrawalsFromEventLogs({\n  sender,\n  receiver,\n  fromBlock,\n  toBlock,\n  l2Provider,\n  l2GatewayAddresses = []\n}: {\n  sender?: string\n  receiver?: string\n  fromBlock: BlockTag\n  toBlock: BlockTag\n  l2Provider: Provider\n  l2GatewayAddresses?: string[]\n}) {\n  const erc20Bridger = await Erc20Bridger.fromProvider(l2Provider)\n  const promises: ReturnType<Erc20Bridger['getWithdrawalEvents']>[] = []\n\n  l2GatewayAddresses.forEach(gatewayAddress => {\n    // funds sent by this address\n    if (sender) {\n      promises.push(\n        erc20Bridger.getWithdrawalEvents(\n          l2Provider,\n          gatewayAddress,\n          { fromBlock, toBlock },\n          undefined,\n          sender,\n          undefined\n        )\n      )\n    }\n\n    // funds received by this address\n    if (receiver) {\n      promises.push(\n        erc20Bridger.getWithdrawalEvents(\n          l2Provider,\n          gatewayAddress,\n          { fromBlock, toBlock },\n          undefined,\n          undefined,\n          receiver\n        )\n      )\n    }\n  })\n\n  // when getting funds received by this address we will also get duplicate txs returned in 'funds sent by this address'\n  return dedupeEvents((await Promise.all(promises)).flat())\n}\n","import { Provider } from '@ethersproject/providers'\nimport { getArbitrumNetwork } from '@arbitrum/sdk'\n\nimport {\n  l2ArbReverseGatewayAddresses,\n  l2DaiGatewayAddresses,\n  l2LptGatewayAddresses,\n  l2MoonGatewayAddresses,\n  l2wstETHGatewayAddresses\n} from '../util/networks'\n\n/**\n * Fetch L2 gateways for a given L2 network using its provider. Useful for specifying which gateways to use when fetching withdrawals.\n *\n * @param l2Provider Provider for the L2 network\n */\nexport async function fetchL2Gateways(l2Provider: Provider) {\n  const l2Network = await getArbitrumNetwork(l2Provider)\n\n  if (!l2Network.tokenBridge) {\n    return []\n  }\n\n  /* configure gateway addresses for fetching withdrawals */\n  const { childErc20Gateway, childCustomGateway, childWethGateway } =\n    l2Network.tokenBridge\n  const gatewaysToUse = [\n    childErc20Gateway,\n    childCustomGateway,\n    childWethGateway\n  ]\n  const l2ArbReverseGateway = l2ArbReverseGatewayAddresses[l2Network.chainId]\n  const l2DaiGateway = l2DaiGatewayAddresses[l2Network.chainId]\n  const l2wstETHGateway = l2wstETHGatewayAddresses[l2Network.chainId]\n  const l2LptGateway = l2LptGatewayAddresses[l2Network.chainId]\n  const l2MoonGateway = l2MoonGatewayAddresses[l2Network.chainId]\n\n  if (l2ArbReverseGateway) {\n    gatewaysToUse.push(l2ArbReverseGateway)\n  }\n  if (l2DaiGateway) {\n    gatewaysToUse.push(l2DaiGateway)\n  }\n  if (l2wstETHGateway) {\n    gatewaysToUse.push(l2wstETHGateway)\n  }\n  if (l2LptGateway) {\n    gatewaysToUse.push(l2LptGateway)\n  }\n  if (l2MoonGateway) {\n    gatewaysToUse.push(l2MoonGateway)\n  }\n\n  return gatewaysToUse\n}\n","import { utils } from 'ethers'\nimport { Provider } from '@ethersproject/providers'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport {\n  ChildToParentMessageReader,\n  ChildTransactionReceipt\n} from '@arbitrum/sdk'\nimport { FetchWithdrawalsFromSubgraphResult } from './fetchWithdrawalsFromSubgraph'\nimport { fetchErc20Data } from '../TokenUtils'\nimport {\n  AssetType,\n  L2ToL1EventResult,\n  L2ToL1EventResultPlus,\n  NodeBlockDeadlineStatus,\n  NodeBlockDeadlineStatusTypes,\n  OutgoingMessageState,\n  WithdrawalInitiated\n} from '../../hooks/arbTokenBridge.types'\nimport { getExecutedMessagesCacheKey } from '../../hooks/useArbTokenBridge'\nimport { fetchNativeCurrency } from '../../hooks/useNativeCurrency'\n\n/**\n * `l2TxHash` exists on result from subgraph\n * `transactionHash` exists on result from event logs\n */\nexport type EthWithdrawal = L2ToL1EventResult & {\n  l2TxHash?: string\n  transactionHash?: string\n  direction: 'withdrawal'\n  source: 'subgraph' | 'event_logs' | 'local_storage_cache'\n  parentChainId: number\n  childChainId: number\n}\n\nexport const updateAdditionalWithdrawalData = async (\n  withdrawalTx: L2ToL1EventResultPlus,\n  l1Provider: Provider,\n  l2Provider: Provider\n) => {\n  const l2toL1TxWithDeadline = await attachNodeBlockDeadlineToEvent(\n    withdrawalTx as L2ToL1EventResultPlus,\n    l1Provider,\n    l2Provider\n  )\n\n  return l2toL1TxWithDeadline\n}\n\nexport async function attachTimestampToTokenWithdrawal({\n  withdrawal,\n  l2Provider\n}: {\n  withdrawal: WithdrawalInitiated\n  l2Provider: Provider\n}) {\n  const txReceipt = await l2Provider.getTransactionReceipt(withdrawal.txHash)\n  const l2TxReceipt = new ChildTransactionReceipt(txReceipt)\n  const [event] = l2TxReceipt.getChildToParentEvents()\n\n  return {\n    ...withdrawal,\n    timestamp: event?.timestamp\n  }\n}\n\nexport async function mapETHWithdrawalToL2ToL1EventResult({\n  event,\n  l1Provider,\n  l2Provider\n}: {\n  event: EthWithdrawal\n  l1Provider: Provider\n  l2Provider: Provider\n}): Promise<L2ToL1EventResultPlus> {\n  const { callvalue } = event\n  const outgoingMessageState = await getOutgoingMessageState(\n    event,\n    l1Provider,\n    l2Provider,\n    event.childChainId\n  )\n\n  const nativeCurrency = await fetchNativeCurrency({ provider: l2Provider })\n\n  return {\n    ...event,\n    sender: event.caller,\n    destinationAddress: event.destination,\n    type: AssetType.ETH,\n    value: callvalue,\n    symbol: nativeCurrency.symbol,\n    outgoingMessageState,\n    l2TxHash: event.l2TxHash || event.transactionHash,\n    parentChainId: event.parentChainId,\n    childChainId: event.childChainId,\n    decimals: nativeCurrency.decimals\n  }\n}\n\nexport async function getOutgoingMessageState(\n  event: L2ToL1EventResult,\n  l1Provider: Provider,\n  l2Provider: Provider,\n  l2ChainID: number\n) {\n  const cacheKey = getExecutedMessagesCacheKey({\n    event,\n    l2ChainId: l2ChainID\n  })\n\n  const executedMessagesCache = JSON.parse(\n    localStorage.getItem('arbitrum:bridge:executed-messages') || '{}'\n  )\n  if (executedMessagesCache[cacheKey]) {\n    return OutgoingMessageState.EXECUTED\n  }\n\n  const messageReader = new ChildToParentMessageReader(l1Provider, event)\n\n  try {\n    return await messageReader.status(l2Provider)\n  } catch (error) {\n    return OutgoingMessageState.UNCONFIRMED\n  }\n}\n\nexport async function attachNodeBlockDeadlineToEvent(\n  event: L2ToL1EventResultPlus,\n  l1Provider: Provider,\n  l2Provider: Provider\n) {\n  if (\n    event.outgoingMessageState === OutgoingMessageState.EXECUTED ||\n    event.outgoingMessageState === OutgoingMessageState.CONFIRMED\n  ) {\n    return event\n  }\n\n  const messageReader = ChildToParentMessageReader.fromEvent(l1Provider, event)\n\n  try {\n    const firstExecutableBlock = await messageReader.getFirstExecutableBlock(\n      l2Provider\n    )\n\n    return { ...event, nodeBlockDeadline: firstExecutableBlock?.toNumber() }\n  } catch (e) {\n    const expectedError = \"batch doesn't exist\"\n    const expectedError2 = 'CALL_EXCEPTION'\n\n    const err = e as Error & { error: Error }\n    const errorMessage = err && (err.message || err.error?.message)\n\n    if (errorMessage.includes(expectedError)) {\n      const nodeBlockDeadline: NodeBlockDeadlineStatus =\n        NodeBlockDeadlineStatusTypes.NODE_NOT_CREATED\n      return {\n        ...event,\n        nodeBlockDeadline\n      }\n    } else if (errorMessage.includes(expectedError2)) {\n      // in classic we simulate `executeTransaction` in `hasExecuted`\n      // which might revert if the L2 to L1 call fail\n      const nodeBlockDeadline: NodeBlockDeadlineStatus =\n        NodeBlockDeadlineStatusTypes.EXECUTE_CALL_EXCEPTION\n      return {\n        ...event,\n        nodeBlockDeadline\n      }\n    } else {\n      throw e\n    }\n  }\n}\n\nexport function isTokenWithdrawal(\n  withdrawal: WithdrawalInitiated | EthWithdrawal\n): withdrawal is WithdrawalInitiated {\n  return typeof (withdrawal as WithdrawalInitiated).l1Token !== 'undefined'\n}\n\nexport async function mapTokenWithdrawalFromEventLogsToL2ToL1EventResult({\n  result,\n  l1Provider,\n  l2Provider\n}: {\n  result: WithdrawalInitiated\n  l1Provider: Provider\n  l2Provider: Provider\n}): Promise<L2ToL1EventResultPlus | undefined> {\n  const { symbol, decimals } = await fetchErc20Data({\n    address: result.l1Token,\n    provider: l1Provider\n  })\n\n  const txReceipt = await l2Provider.getTransactionReceipt(result.txHash)\n  const l2TxReceipt = new ChildTransactionReceipt(txReceipt)\n\n  // TODO: length != 1\n  const [event] = l2TxReceipt.getChildToParentEvents()\n\n  if (!event) {\n    return undefined\n  }\n\n  const outgoingMessageState = await getOutgoingMessageState(\n    event,\n    l1Provider,\n    l2Provider,\n    result.childChainId\n  )\n\n  // We cannot access sender and destination from the withdrawal object.\n  // We have to get them from the receipt logs.\n  //\n  // Get hash of the topic that contains sender and destination.\n  const signatureHash = utils.id(\n    'TransferRouted(address,address,address,address)'\n  )\n  // Searching logs for the topic.\n  const logs = txReceipt.logs.find(log => {\n    if (!log) {\n      return false\n    }\n    return log.topics[0] === signatureHash\n  })\n\n  // We can directly access them by index, these won't change.\n  let sender = logs?.topics[2]\n  let destinationAddress = logs?.topics[3]\n\n  // SCW relayer won't return leading zeros, but we will get them when using EOA.\n  if (sender && !utils.isAddress(sender)) {\n    // Strips leading zeros if necessary.\n    sender = '0x' + sender.slice(-40)\n  }\n\n  if (destinationAddress && !utils.isAddress(destinationAddress)) {\n    // Strips leading zeros if necessary.\n    destinationAddress = '0x' + destinationAddress.slice(-40)\n  }\n\n  return {\n    ...event,\n    sender,\n    destinationAddress,\n    type: AssetType.ERC20,\n    value: result._amount,\n    tokenAddress: result.l1Token,\n    outgoingMessageState,\n    symbol,\n    decimals,\n    l2TxHash: l2TxReceipt.transactionHash,\n    parentChainId: result.parentChainId,\n    childChainId: result.childChainId\n  }\n}\n\nexport async function mapWithdrawalToL2ToL1EventResult({\n  withdrawal,\n  l1Provider,\n  l2Provider\n}: {\n  withdrawal: FetchWithdrawalsFromSubgraphResult\n  l1Provider: Provider\n  l2Provider: Provider\n}): Promise<L2ToL1EventResultPlus | undefined> {\n  // get transaction receipt\n  const txReceipt = await l2Provider.getTransactionReceipt(withdrawal.l2TxHash)\n  const l2TxReceipt = new ChildTransactionReceipt(txReceipt)\n\n  // TODO: length != 1\n  const [event] = l2TxReceipt.getChildToParentEvents()\n\n  if (!event) {\n    return undefined\n  }\n\n  const outgoingMessageState = await getOutgoingMessageState(\n    event,\n    l1Provider,\n    l2Provider,\n    withdrawal.childChainId\n  )\n\n  if (withdrawal.type === 'TokenWithdrawal' && withdrawal?.l1Token?.id) {\n    // Token withdrawal\n    const { symbol, decimals } = await fetchErc20Data({\n      address: withdrawal.l1Token.id,\n      provider: l1Provider\n    })\n\n    return {\n      ...event,\n      sender: withdrawal.sender,\n      destinationAddress: withdrawal.receiver,\n      type: AssetType.ERC20,\n      value: BigNumber.from(withdrawal.tokenAmount),\n      tokenAddress: withdrawal.l1Token.id,\n      outgoingMessageState,\n      symbol,\n      decimals,\n      l2TxHash: l2TxReceipt.transactionHash,\n      parentChainId: withdrawal.parentChainId,\n      childChainId: withdrawal.childChainId\n    } as L2ToL1EventResultPlus\n  }\n\n  const nativeCurrency = await fetchNativeCurrency({ provider: l2Provider })\n\n  // Else, Eth withdrawal\n  return {\n    ...event,\n    sender: withdrawal.sender,\n    destinationAddress: withdrawal.receiver,\n    type: AssetType.ETH,\n    value: BigNumber.from(withdrawal.ethValue),\n    outgoingMessageState,\n    l2TxHash: l2TxReceipt.transactionHash,\n    symbol: nativeCurrency.symbol,\n    decimals: nativeCurrency.decimals,\n    parentChainId: withdrawal.parentChainId,\n    childChainId: withdrawal.childChainId\n  } as L2ToL1EventResultPlus\n}\n","import { Provider } from '@ethersproject/providers'\n\nimport { fetchETHWithdrawalsFromEventLogs } from './fetchETHWithdrawalsFromEventLogs'\n\nimport {\n  FetchWithdrawalsFromSubgraphResult,\n  fetchWithdrawalsFromSubgraph\n} from './fetchWithdrawalsFromSubgraph'\nimport { fetchLatestSubgraphBlockNumber } from '../SubgraphUtils'\nimport { fetchTokenWithdrawalsFromEventLogs } from './fetchTokenWithdrawalsFromEventLogs'\nimport { fetchL2Gateways } from '../fetchL2Gateways'\nimport { Withdrawal } from '../../hooks/useTransactionHistory'\nimport { attachTimestampToTokenWithdrawal } from './helpers'\nimport { WithdrawalInitiated } from '../../hooks/arbTokenBridge.types'\n\nexport type FetchWithdrawalsParams = {\n  sender?: string\n  receiver?: string\n  fromBlock?: number\n  toBlock?: number\n  l1Provider: Provider\n  l2Provider: Provider\n  pageNumber?: number\n  pageSize?: number\n  searchString?: string\n}\n\nexport async function fetchWithdrawals({\n  sender,\n  receiver,\n  l1Provider,\n  l2Provider,\n  pageNumber = 0,\n  pageSize = 10,\n  searchString,\n  fromBlock,\n  toBlock\n}: FetchWithdrawalsParams): Promise<Withdrawal[]> {\n  if (typeof sender === 'undefined' && typeof receiver === 'undefined') {\n    return []\n  }\n\n  const l1ChainID = (await l1Provider.getNetwork()).chainId\n  const l2ChainID = (await l2Provider.getNetwork()).chainId\n\n  const l2GatewayAddresses = await fetchL2Gateways(l2Provider)\n\n  if (!fromBlock) {\n    fromBlock = 0\n  }\n\n  if (!toBlock) {\n    // if toBlock hasn't been provided by the user\n\n    // fetch the latest L2 block number thorough subgraph\n    const latestSubgraphBlockNumber = await fetchLatestSubgraphBlockNumber(\n      l2ChainID\n    )\n    toBlock = latestSubgraphBlockNumber\n  }\n\n  let withdrawalsFromSubgraph: FetchWithdrawalsFromSubgraphResult[] = []\n  try {\n    withdrawalsFromSubgraph = (\n      await fetchWithdrawalsFromSubgraph({\n        sender,\n        receiver,\n        fromBlock,\n        toBlock,\n        l2ChainId: l2ChainID,\n        pageNumber,\n        pageSize,\n        searchString\n      })\n    ).map(tx => {\n      return {\n        ...tx,\n        direction: 'withdrawal',\n        source: 'subgraph',\n        parentChainId: l1ChainID,\n        childChainId: l2ChainID\n      }\n    })\n  } catch (error) {\n    console.log('Error fetching withdrawals from subgraph', error)\n  }\n\n  const [ethWithdrawalsFromEventLogs, tokenWithdrawalsFromEventLogs] =\n    await Promise.all([\n      fetchETHWithdrawalsFromEventLogs({\n        receiver,\n        fromBlock: toBlock + 1,\n        toBlock: 'latest',\n        l2Provider: l2Provider\n      }),\n      fetchTokenWithdrawalsFromEventLogs({\n        sender,\n        receiver,\n        fromBlock: toBlock + 1,\n        toBlock: 'latest',\n        l2Provider: l2Provider,\n        l2GatewayAddresses\n      })\n    ])\n\n  const mappedEthWithdrawalsFromEventLogs: Withdrawal[] =\n    ethWithdrawalsFromEventLogs.map(tx => {\n      return {\n        ...tx,\n        direction: 'withdrawal',\n        source: 'event_logs',\n        parentChainId: l1ChainID,\n        childChainId: l2ChainID\n      }\n    })\n\n  const mappedTokenWithdrawalsFromEventLogs: WithdrawalInitiated[] =\n    tokenWithdrawalsFromEventLogs.map(tx => {\n      return {\n        ...tx,\n        direction: 'withdrawal',\n        source: 'event_logs',\n        parentChainId: l1ChainID,\n        childChainId: l2ChainID\n      }\n    })\n\n  // we need timestamps to sort token withdrawals along ETH withdrawals\n  const tokenWithdrawalsFromEventLogsWithTimestamp: Withdrawal[] =\n    await Promise.all(\n      mappedTokenWithdrawalsFromEventLogs.map(withdrawal =>\n        attachTimestampToTokenWithdrawal({ withdrawal, l2Provider })\n      )\n    )\n\n  return [\n    ...mappedEthWithdrawalsFromEventLogs,\n    ...tokenWithdrawalsFromEventLogsWithTimestamp,\n    ...withdrawalsFromSubgraph\n  ]\n}\n","import { hasL1Subgraph } from '../SubgraphUtils'\nimport { getAPIBaseUrl, sanitizeQueryParams } from './../index'\n\nexport type FetchDepositsFromSubgraphResult = {\n  receiver: string\n  sender: string\n  sequenceNumber: string\n  timestamp: string\n  transactionHash: string\n  type: 'EthDeposit' | 'TokenDeposit'\n  isClassic: boolean\n  id: string\n  ethValue: string\n  tokenAmount?: string\n  blockCreatedAt: string\n  l1Token?: {\n    symbol: string\n    decimals: number\n    id: string\n    name: string\n    registeredAtBlock: string\n  }\n}\n\n/**\n * Fetches initiated deposits (ETH + Tokens) from subgraph in range of [fromBlock, toBlock] and pageParams.\n *\n * @param query Query params\n * @param query.sender Address that initiated the deposit\n * @param query.receiver Address that received the funds\n * @param query.fromBlock Start at this block number (including)\n * @param query.toBlock Stop at this block number (including)\n * @param query.l2ChainId Chain id for the L2 network\n * @param query.pageSize Fetch these many records from subgraph\n * @param query.pageNumber Fetch records starting [pageNumber * pageSize] records\n * @param query.searchString Searches records through the l1TxHash\n */\n\nexport const fetchDepositsFromSubgraph = async ({\n  sender,\n  receiver,\n  fromBlock,\n  toBlock,\n  l2ChainId,\n  pageSize = 10,\n  pageNumber = 0,\n  searchString = ''\n}: {\n  sender?: string\n  receiver?: string\n  fromBlock: number\n  toBlock?: number\n  l2ChainId: number\n  pageSize?: number\n  pageNumber?: number\n  searchString?: string\n}): Promise<FetchDepositsFromSubgraphResult[]> => {\n  if (toBlock && fromBlock >= toBlock) {\n    // if fromBlock > toBlock or both are equal / 0\n    return []\n  }\n\n  const urlParams = new URLSearchParams(\n    sanitizeQueryParams({\n      sender,\n      receiver,\n      fromBlock,\n      toBlock,\n      l2ChainId,\n      pageSize,\n      page: pageNumber,\n      search: searchString\n    })\n  )\n\n  if (!hasL1Subgraph(Number(l2ChainId))) {\n    throw new Error(`L1 subgraph not available for network: ${l2ChainId}`)\n  }\n\n  if (pageSize === 0) return [] // don't query subgraph if nothing requested\n\n  const response = await fetch(`${getAPIBaseUrl()}/api/deposits?${urlParams}`, {\n    method: 'GET',\n    headers: { 'Content-Type': 'application/json' }\n  })\n\n  const transactions: FetchDepositsFromSubgraphResult[] = (\n    await response.json()\n  ).data\n\n  return transactions\n}\n","import { Provider } from '@ethersproject/providers'\nimport { utils } from 'ethers'\n\nimport {\n  fetchDepositsFromSubgraph,\n  FetchDepositsFromSubgraphResult\n} from './fetchDepositsFromSubgraph'\nimport { AssetType } from '../../hooks/arbTokenBridge.types'\nimport { Transaction } from '../../hooks/useTransactions'\nimport { defaultErc20Decimals } from '../../defaults'\nimport { fetchNativeCurrency } from '../../hooks/useNativeCurrency'\n\nexport type FetchDepositParams = {\n  sender?: string\n  receiver?: string\n  fromBlock?: number\n  toBlock?: number\n  l1Provider: Provider\n  l2Provider: Provider\n  pageSize?: number\n  pageNumber?: number\n  searchString?: string\n}\n\n/* Fetch complete deposits - both ETH and Token deposits from subgraph into one list */\n/* Also fills in any additional data required per transaction for our UI logic to work well */\n/* TODO : Add event logs as well */\nexport const fetchDeposits = async ({\n  sender,\n  receiver,\n  fromBlock,\n  toBlock,\n  l1Provider,\n  l2Provider,\n  pageSize = 10,\n  pageNumber = 0,\n  searchString = ''\n}: FetchDepositParams): Promise<Transaction[]> => {\n  if (typeof sender === 'undefined' && typeof receiver === 'undefined')\n    return []\n  if (!l1Provider || !l2Provider) return []\n\n  const l1ChainId = (await l1Provider.getNetwork()).chainId\n  const l2ChainId = (await l2Provider.getNetwork()).chainId\n\n  const nativeCurrency = await fetchNativeCurrency({ provider: l2Provider })\n\n  if (!fromBlock) {\n    fromBlock = 0\n  }\n\n  let depositsFromSubgraph: FetchDepositsFromSubgraphResult[] = []\n  try {\n    depositsFromSubgraph = await fetchDepositsFromSubgraph({\n      sender,\n      receiver,\n      fromBlock,\n      toBlock,\n      l2ChainId,\n      pageSize,\n      pageNumber,\n      searchString\n    })\n  } catch (error: any) {\n    console.log('Error fetching deposits from subgraph', error)\n  }\n\n  const mappedDepositsFromSubgraph: Transaction[] = depositsFromSubgraph.map(\n    (tx: FetchDepositsFromSubgraphResult) => {\n      const isEthDeposit = tx.type === 'EthDeposit'\n\n      const assetDetails = {\n        assetName: nativeCurrency.symbol,\n        assetType: AssetType.ETH,\n        tokenAddress: ''\n      }\n\n      if (!isEthDeposit) {\n        // update some values for token deposit\n        const symbol = tx.l1Token?.symbol || ''\n\n        assetDetails.assetName = symbol\n        assetDetails.assetType = AssetType.ERC20\n        assetDetails.tokenAddress = tx?.l1Token?.id || ''\n      }\n\n      const amount = isEthDeposit ? tx.ethValue : tx.tokenAmount\n\n      const tokenDecimals = tx?.l1Token?.decimals ?? defaultErc20Decimals\n      const decimals = isEthDeposit ? nativeCurrency.decimals : tokenDecimals\n\n      return {\n        type: 'deposit-l1',\n        status: 'pending',\n        direction: 'deposit',\n        source: 'subgraph',\n        value: utils.formatUnits(amount || 0, decimals),\n        txID: tx.transactionHash,\n        tokenAddress: assetDetails.tokenAddress,\n        sender: tx.sender,\n        destination: tx.receiver,\n\n        assetName: assetDetails.assetName,\n        assetType: assetDetails.assetType,\n\n        l1NetworkID: String(l1ChainId),\n        l2NetworkID: String(l2ChainId),\n        blockNumber: Number(tx.blockCreatedAt),\n        timestampCreated: tx.timestamp,\n        isClassic: tx.isClassic,\n\n        childChainId: l2ChainId,\n        parentChainId: l1ChainId\n      }\n    }\n  )\n\n  return mappedDepositsFromSubgraph\n}\n","import {\n  ParentTransactionReceipt,\n  ParentToChildMessageStatus,\n  EthDepositMessage,\n  EthDepositMessageStatus,\n  ParentToChildMessageReader,\n  ParentToChildMessageReaderClassic,\n  EthL1L3DepositStatus,\n  Erc20L1L3DepositStatus\n} from '@arbitrum/sdk'\n\nimport { Provider } from '@ethersproject/providers'\nimport { AssetType } from '../../hooks/arbTokenBridge.types'\nimport {\n  ParentToChildMessageData,\n  L2ToL3MessageData,\n  Transaction,\n  TxnStatus,\n  TeleporterTransaction\n} from '../../hooks/useTransactions'\nimport { fetchErc20Data } from '../TokenUtils'\nimport {\n  getL2ConfigForTeleport,\n  fetchTeleportStatusFromTxId,\n  isTeleport\n} from '../../token-bridge-sdk/teleport'\nimport { getProviderForChainId } from '../../token-bridge-sdk/utils'\n\nexport const updateAdditionalDepositData = async ({\n  depositTx,\n  l1Provider,\n  l2Provider\n}: {\n  depositTx: Transaction\n  l1Provider: Provider\n  l2Provider: Provider\n}): Promise<Transaction | TeleporterTransaction> => {\n  // 1. for all the fetched txns, fetch the transaction receipts and update their exact status\n  // 2. on the basis of those, finally calculate the status of the transaction\n\n  // fetch timestamp creation date\n  let timestampCreated = new Date().toISOString()\n  if (depositTx.timestampCreated) {\n    // if timestamp is already there in Subgraphs, take it from there\n    timestampCreated = String(Number(depositTx.timestampCreated) * 1000)\n  } else if (depositTx.blockNumber) {\n    // if timestamp not in subgraph, fallback to onchain data\n    timestampCreated = String(\n      (await l1Provider.getBlock(depositTx.blockNumber)).timestamp * 1000\n    )\n  }\n\n  // there are scenarios where we will return the deposit tx early\n  // we need to make sure it has the updated timestamp no matter what\n  depositTx.timestampCreated = timestampCreated\n\n  const { isClassic } = depositTx // isClassic is known before-hand from subgraphs\n\n  const isEthDeposit = depositTx.assetType === AssetType.ETH\n\n  const { parentToChildMsg: l1ToL2Msg } =\n    await getParentToChildMessageDataFromParentTxHash({\n      depositTxId: depositTx.txID,\n      parentProvider: l1Provider,\n      childProvider: l2Provider,\n      isEthDeposit,\n      isClassic\n    })\n\n  if (\n    isTeleport({\n      sourceChainId: depositTx.parentChainId,\n      destinationChainId: depositTx.childChainId\n    })\n  ) {\n    const { status, timestampResolved, l1ToL2MsgData, l2ToL3MsgData } =\n      await fetchTeleporterDepositStatusData({\n        ...depositTx,\n        txId: depositTx.txID,\n        sourceChainId: depositTx.parentChainId,\n        destinationChainId: depositTx.childChainId\n      })\n\n    return {\n      ...depositTx,\n      status,\n      timestampResolved,\n      parentToChildMsgData: l1ToL2MsgData,\n      l2ToL3MsgData\n    }\n  }\n\n  if (isClassic) {\n    return updateClassicDepositStatusData({\n      depositTx,\n      l1ToL2Msg: l1ToL2Msg as ParentToChildMessageReaderClassic,\n      isEthDeposit,\n      timestampCreated,\n      l2Provider\n    })\n  }\n\n  // Check if deposit is ETH\n  if (isEthDeposit) {\n    return updateETHDepositStatusData({\n      depositTx,\n      ethDepositMessage: l1ToL2Msg as EthDepositMessage,\n      l2Provider,\n      timestampCreated\n    })\n  }\n\n  // finally, else if the transaction is not ETH ie. it's a ERC20 token deposit\n  return updateTokenDepositStatusData({\n    depositTx,\n    l1ToL2Msg: l1ToL2Msg as ParentToChildMessageReader,\n    timestampCreated,\n    l1Provider,\n    l2Provider\n  })\n}\n\nconst updateETHDepositStatusData = async ({\n  depositTx,\n  ethDepositMessage,\n  l2Provider,\n  timestampCreated\n}: {\n  depositTx: Transaction\n  ethDepositMessage: EthDepositMessage\n  timestampCreated: string\n  l2Provider: Provider\n}): Promise<Transaction> => {\n  // from the eth-deposit-message, extract more things like retryableCreationTxID, status, etc\n\n  if (!ethDepositMessage) return depositTx\n\n  const status = await ethDepositMessage.status()\n  const isDeposited = status === EthDepositMessageStatus.DEPOSITED\n\n  const retryableCreationTxID = ethDepositMessage.childTxHash\n\n  const l2BlockNum = isDeposited\n    ? (await l2Provider.getTransaction(retryableCreationTxID)).blockNumber\n    : null\n\n  const timestampResolved = l2BlockNum\n    ? (await l2Provider.getBlock(l2BlockNum)).timestamp * 1000\n    : null\n\n  // return the data to populate on UI\n  const updatedDepositTx: Transaction = {\n    ...depositTx,\n    status: retryableCreationTxID ? 'success' : 'pending',\n    timestampCreated,\n    timestampResolved: timestampResolved\n      ? String(timestampResolved)\n      : undefined,\n    parentToChildMsgData: {\n      status: isDeposited\n        ? ParentToChildMessageStatus.FUNDS_DEPOSITED_ON_CHILD\n        : ParentToChildMessageStatus.NOT_YET_CREATED,\n      retryableCreationTxID,\n      // Only show `childTxId` after the deposit is confirmed\n      childTxId: isDeposited ? ethDepositMessage.childTxHash : undefined,\n      fetchingUpdate: false\n    }\n  }\n\n  return updatedDepositTx\n}\n\nconst updateTokenDepositStatusData = async ({\n  depositTx,\n  l1ToL2Msg,\n  timestampCreated,\n  l1Provider,\n  l2Provider\n}: {\n  depositTx: Transaction\n  timestampCreated: string\n  l1Provider: Provider\n  l2Provider: Provider\n  l1ToL2Msg: ParentToChildMessageReader\n}): Promise<Transaction> => {\n  const updatedDepositTx = {\n    ...depositTx,\n    timestampCreated\n  }\n\n  // fallback to on-chain token information if subgraph doesn't have it\n  const { tokenAddress, assetName } = updatedDepositTx\n  if (!assetName && tokenAddress) {\n    const { symbol } = await fetchErc20Data({\n      address: tokenAddress,\n      provider: l1Provider\n    })\n    updatedDepositTx.assetName = symbol\n  }\n\n  if (!l1ToL2Msg) return updatedDepositTx\n\n  // get the status data of `l1ToL2Msg`, if it is redeemed - `getSuccessfulRedeem` also returns its l2TxReceipt\n  const res = await l1ToL2Msg.getSuccessfulRedeem()\n\n  const childTxId =\n    res.status === ParentToChildMessageStatus.REDEEMED\n      ? res.childTxReceipt.transactionHash\n      : undefined\n\n  const l1ToL2MsgData = {\n    status: res.status,\n    childTxId,\n    fetchingUpdate: false,\n    retryableCreationTxID: l1ToL2Msg.retryableCreationId\n  }\n\n  const isDeposited =\n    l1ToL2MsgData.status === ParentToChildMessageStatus.REDEEMED\n\n  const l2BlockNum = isDeposited\n    ? (await l2Provider.getTransaction(l1ToL2Msg.retryableCreationId))\n        .blockNumber\n    : null\n\n  const timestampResolved = l2BlockNum\n    ? (await l2Provider.getBlock(l2BlockNum)).timestamp * 1000\n    : null\n\n  const completeDepositTx: Transaction = {\n    ...updatedDepositTx,\n    status: l1ToL2Msg.retryableCreationId ? 'success' : 'pending', // TODO :handle other cases here\n    timestampCreated,\n    timestampResolved: timestampResolved\n      ? String(timestampResolved)\n      : undefined,\n    parentToChildMsgData: l1ToL2MsgData\n  }\n\n  return completeDepositTx\n}\n\nconst updateClassicDepositStatusData = async ({\n  depositTx,\n  l1ToL2Msg,\n  isEthDeposit,\n  timestampCreated,\n  l2Provider\n}: {\n  depositTx: Transaction\n  timestampCreated: string\n  l2Provider: Provider\n  isEthDeposit: boolean\n  l1ToL2Msg: ParentToChildMessageReaderClassic\n}): Promise<Transaction> => {\n  const updatedDepositTx = {\n    ...depositTx,\n    timestampCreated\n  }\n\n  const status = await l1ToL2Msg.status()\n\n  const isCompletedEthDeposit =\n    isEthDeposit &&\n    status >= ParentToChildMessageStatus.FUNDS_DEPOSITED_ON_CHILD\n\n  const childTxId = (() => {\n    if (isCompletedEthDeposit) {\n      return l1ToL2Msg.retryableCreationId\n    }\n\n    if (status === ParentToChildMessageStatus.REDEEMED) {\n      return l1ToL2Msg.childTxHash\n    }\n\n    return undefined\n  })()\n\n  const l1ToL2MsgData = {\n    status,\n    childTxId,\n    fetchingUpdate: false,\n    retryableCreationTxID: l1ToL2Msg.retryableCreationId\n  }\n\n  const l2BlockNum = childTxId\n    ? (await l2Provider.getTransaction(childTxId)).blockNumber\n    : null\n\n  const timestampResolved = l2BlockNum\n    ? (await l2Provider.getBlock(l2BlockNum)).timestamp * 1000\n    : null\n\n  const completeDepositTx: Transaction = {\n    ...updatedDepositTx,\n    status: childTxId ? 'success' : 'pending', // TODO :handle other cases here\n    timestampCreated,\n    timestampResolved: timestampResolved\n      ? String(timestampResolved)\n      : undefined,\n    parentToChildMsgData: l1ToL2MsgData\n  }\n\n  return completeDepositTx\n}\n\nasync function getTimestampResolved(\n  destinationChainProvider: Provider,\n  l3TxHash: string | undefined\n) {\n  if (typeof l3TxHash === 'undefined') {\n    return\n  }\n  return await destinationChainProvider\n    .getTransactionReceipt(l3TxHash)\n    .then(tx => tx.blockNumber)\n    .then(blockNumber => destinationChainProvider.getBlock(blockNumber))\n    .then(block => String(block.timestamp * 1000))\n}\n\nexport async function fetchTeleporterDepositStatusData({\n  assetType,\n  sourceChainId,\n  destinationChainId,\n  txId\n}: {\n  assetType: AssetType\n  sourceChainId: number\n  destinationChainId: number\n  txId: string\n}): Promise<{\n  status?: TxnStatus\n  timestampResolved?: string\n  l1ToL2MsgData?: ParentToChildMessageData\n  l2ToL3MsgData: L2ToL3MessageData\n}> {\n  const isNativeCurrencyTransfer = assetType === AssetType.ETH\n  const sourceChainProvider = getProviderForChainId(sourceChainId)\n  const destinationChainProvider = getProviderForChainId(destinationChainId)\n  const { l2ChainId } = await getL2ConfigForTeleport({\n    destinationChainProvider\n  })\n\n  function isEthTeleport(\n    status: EthL1L3DepositStatus | Erc20L1L3DepositStatus\n  ): status is EthL1L3DepositStatus {\n    return isNativeCurrencyTransfer\n  }\n\n  try {\n    const depositStatus = await fetchTeleportStatusFromTxId({\n      txId,\n      sourceChainProvider,\n      destinationChainProvider,\n      isNativeCurrencyTransfer\n    })\n    const l2ToL3MsgData: L2ToL3MessageData = {\n      status: ParentToChildMessageStatus.NOT_YET_CREATED,\n      l2ChainId\n    }\n    const l2Retryable = isEthTeleport(depositStatus)\n      ? depositStatus.l2Retryable\n      : depositStatus.l1l2TokenBridgeRetryable\n    const l2ForwarderFactoryRetryable = isEthTeleport(depositStatus)\n      ? null\n      : depositStatus.l2ForwarderFactoryRetryable\n    const l3Retryable = isEthTeleport(depositStatus)\n      ? depositStatus.l3Retryable\n      : depositStatus.l2l3TokenBridgeRetryable\n\n    // extract the l2 transaction details, if any\n    const l1l2Redeem = await l2Retryable.getSuccessfulRedeem()\n    const l1ToL2MsgData: ParentToChildMessageData = {\n      status: await l2Retryable.status(),\n      childTxId:\n        l1l2Redeem && l1l2Redeem.status === ParentToChildMessageStatus.REDEEMED\n          ? l1l2Redeem.childTxReceipt.transactionHash\n          : undefined,\n      fetchingUpdate: false,\n      retryableCreationTxID: l2Retryable.retryableCreationId\n    }\n\n    // in case the forwarder retryable has failed, add it to the `l2ToL3MsgData`, else leave it undefined\n    // note: having `l2ForwarderRetryableTxID` in the `l2ToL3MsgData` will mean that it needs redemption\n    if (\n      !depositStatus.completed &&\n      l2ForwarderFactoryRetryable &&\n      (await l2ForwarderFactoryRetryable.status()) ===\n        ParentToChildMessageStatus.FUNDS_DEPOSITED_ON_CHILD\n    ) {\n      return {\n        status: l2Retryable ? 'success' : 'failure',\n        timestampResolved: undefined,\n        l1ToL2MsgData,\n        l2ToL3MsgData: {\n          ...l2ToL3MsgData,\n          status: ParentToChildMessageStatus.FUNDS_DEPOSITED_ON_CHILD,\n          l2ForwarderRetryableTxID:\n            l2ForwarderFactoryRetryable.retryableCreationId\n        }\n      }\n    } else if (l3Retryable) {\n      // extract the l3 transaction details, if any\n      const l2L3Redeem = await l3Retryable.getSuccessfulRedeem()\n      const l3TxID =\n        l2L3Redeem && l2L3Redeem.status === ParentToChildMessageStatus.REDEEMED\n          ? l2L3Redeem.childTxReceipt.transactionHash\n          : undefined\n      const timestampResolved = await getTimestampResolved(\n        destinationChainProvider,\n        l3TxID\n      )\n\n      // extract the new L2 tx details if we find that `l2ForwarderFactoryRetryable` has been redeemed manually\n      // the new l2TxId will be helpful to get l2L3 redemption details while redeeming\n      if (l2ForwarderFactoryRetryable) {\n        const l2ForwarderRedeem =\n          await l2ForwarderFactoryRetryable.getSuccessfulRedeem()\n        if (l2ForwarderRedeem.status === ParentToChildMessageStatus.REDEEMED) {\n          return {\n            status: l2Retryable ? 'success' : 'failure',\n            timestampResolved,\n            l1ToL2MsgData: {\n              ...l1ToL2MsgData,\n              childTxId: l2ForwarderRedeem.childTxReceipt.transactionHash\n            },\n            l2ToL3MsgData: {\n              ...l2ToL3MsgData,\n              l3TxID,\n              status: await l3Retryable.status(),\n              retryableCreationTxID: l3Retryable.retryableCreationId\n            }\n          }\n        }\n      }\n\n      return {\n        status: l2Retryable ? 'success' : 'failure',\n        timestampResolved,\n        l1ToL2MsgData,\n        l2ToL3MsgData: {\n          ...l2ToL3MsgData,\n          status: await l3Retryable.status(),\n          l3TxID,\n          retryableCreationTxID: l3Retryable.retryableCreationId\n        }\n      }\n    }\n\n    return {\n      status: l2Retryable ? 'success' : 'failure',\n      timestampResolved: undefined,\n      l1ToL2MsgData,\n      l2ToL3MsgData\n    }\n  } catch (e) {\n    // in case fetching teleport status fails (happens sometimes when you fetch before l1 confirmation), return the default data\n    console.log('Error fetching status for teleporter tx', txId)\n    return {\n      status: 'pending',\n      l2ToL3MsgData: {\n        status: ParentToChildMessageStatus.NOT_YET_CREATED,\n        l2ChainId\n      }\n    }\n  }\n}\n\nexport const getParentToChildMessageDataFromParentTxHash = async ({\n  depositTxId,\n  isEthDeposit,\n  parentProvider,\n  childProvider,\n  isClassic // optional: if we already know if tx is classic (eg. through subgraph) then no need to re-check in this fn\n}: {\n  depositTxId: string\n  parentProvider: Provider\n  isEthDeposit: boolean\n  childProvider: Provider\n  isClassic?: boolean\n}): Promise<{\n  isClassic?: boolean\n  parentToChildMsg?:\n    | ParentToChildMessageReaderClassic\n    | EthDepositMessage\n    | ParentToChildMessageReader\n}> => {\n  // fetch L1 transaction receipt\n  const depositTxReceipt = await parentProvider.getTransactionReceipt(\n    depositTxId\n  )\n\n  // TODO: Handle tx not found\n  if (!depositTxReceipt) {\n    return {}\n  }\n\n  const parentTxReceipt = new ParentTransactionReceipt(depositTxReceipt)\n\n  const getClassicDepositMessage = async () => {\n    const [parentToChildMsg] =\n      await parentTxReceipt.getParentToChildMessagesClassic(childProvider)\n    return {\n      isClassic: true,\n      parentToChildMsg\n    }\n  }\n\n  const getNitroDepositMessage = async () => {\n    // post-nitro handling\n    if (isEthDeposit) {\n      // nitro eth deposit\n      const [ethDepositMessage] = await parentTxReceipt.getEthDeposits(\n        childProvider\n      )\n      return {\n        isClassic: false,\n        parentToChildMsg: ethDepositMessage\n      }\n    }\n\n    // Else, nitro token deposit\n    const [parentToChildMsg] = await parentTxReceipt.getParentToChildMessages(\n      childProvider\n    )\n    return {\n      isClassic: false,\n      parentToChildMsg\n    }\n  }\n\n  const safeIsClassic =\n    isClassic ?? (await parentTxReceipt.isClassic(childProvider)) // if it is unknown whether the transaction isClassic or not, fetch the result\n\n  if (safeIsClassic) {\n    // classic (pre-nitro) deposit - both eth + token\n    return getClassicDepositMessage()\n  }\n\n  // post-nitro deposit - both eth + token\n  return getNitroDepositMessage()\n}\n","import { TransactionReceipt } from '@ethersproject/providers'\nimport { utils } from 'ethers'\nimport { Address } from '../AddressUtils'\n\nexport function getAttestationHashAndMessageFromReceipt(\n  txReceipt: TransactionReceipt\n) {\n  const eventTopic = utils.keccak256(utils.toUtf8Bytes('MessageSent(bytes)'))\n  const log = txReceipt.logs.find(l => l.topics[0] === eventTopic)\n\n  if (!log)\n    return {\n      messageBytes: null,\n      attestationHash: null\n    }\n\n  const messageBytes = utils.defaultAbiCoder.decode(\n    ['bytes'],\n    log.data\n  )[0] as Address\n\n  return {\n    messageBytes,\n    attestationHash: utils.keccak256(messageBytes) as Address\n  }\n}\n","import dayjs from 'dayjs'\nimport { Provider } from '@ethersproject/providers'\nimport {\n  EthDepositMessage,\n  EthDepositMessageStatus,\n  ParentToChildMessageStatus,\n  ParentToChildMessageReader,\n  ChildTransactionReceipt,\n  ChildToParentTransactionEvent\n} from '@arbitrum/sdk'\n\nimport {\n  DepositStatus,\n  MergedTransaction,\n  TeleporterMergedTransaction,\n  WithdrawalStatus\n} from '../../state/app/state'\nimport { ChainId, getL1BlockTime, isNetwork } from '../../util/networks'\nimport { Deposit, Transfer } from '../../hooks/useTransactionHistory'\nimport {\n  getParentToChildMessageDataFromParentTxHash,\n  fetchTeleporterDepositStatusData\n} from '../../util/deposits/helpers'\nimport { AssetType } from '../../hooks/arbTokenBridge.types'\nimport { getDepositStatus } from '../../state/app/utils'\nimport { getBlockBeforeConfirmation } from '../../state/cctpState'\nimport { getAttestationHashAndMessageFromReceipt } from '../../util/cctp/getAttestationHashAndMessageFromReceipt'\nimport { isTeleport } from '@/token-bridge-sdk/teleport'\nimport { getOutgoingMessageState } from '../../util/withdrawals/helpers'\nimport { getUniqueIdOrHashFromEvent } from '../../hooks/useArbTokenBridge'\nimport { getProviderForChainId } from '../../token-bridge-sdk/utils'\nimport { isTeleporterTransaction } from '../../hooks/useTransactions'\n\nconst PARENT_CHAIN_TX_DETAILS_OF_CLAIM_TX =\n  'arbitrum:bridge:claim:parent:tx:details'\nconst DEPOSITS_LOCAL_STORAGE_KEY = 'arbitrum:bridge:deposits'\n\nexport enum StatusLabel {\n  PENDING = 'Pending',\n  CLAIMABLE = 'Claimable',\n  SUCCESS = 'Success',\n  EXPIRED = 'Expired',\n  FAILURE = 'Failure'\n}\n\nfunction isDeposit(tx: MergedTransaction): boolean {\n  return !tx.isWithdrawal\n}\n\nexport function isCctpTransfer(tx: Transfer): tx is MergedTransaction {\n  return (tx as MergedTransaction).isCctp === true\n}\n\nexport function isTxCompleted(tx: MergedTransaction): boolean {\n  if (tx.isCctp) {\n    return typeof tx.cctpData?.receiveMessageTransactionHash === 'string'\n  }\n  if (isDeposit(tx)) {\n    return tx.depositStatus === DepositStatus.L2_SUCCESS\n  }\n  return tx.status === WithdrawalStatus.EXECUTED\n}\n\nexport function isTxPending(tx: MergedTransaction) {\n  if (\n    tx.isCctp &&\n    (tx.status === WithdrawalStatus.UNCONFIRMED || tx.status === 'pending')\n  ) {\n    return true\n  }\n  if (isDeposit(tx)) {\n    return (\n      tx.depositStatus === DepositStatus.L1_PENDING ||\n      tx.depositStatus === DepositStatus.L2_PENDING\n    )\n  }\n  return tx.status === WithdrawalStatus.UNCONFIRMED\n}\n\nexport function isTxClaimable(tx: MergedTransaction): boolean {\n  if (isCctpTransfer(tx) && tx.status === 'Confirmed') {\n    return true\n  }\n  if (isDeposit(tx)) {\n    return false\n  }\n  return tx.status === WithdrawalStatus.CONFIRMED\n}\n\nexport function isTxExpired(tx: MergedTransaction): boolean {\n  if (isDeposit(tx)) {\n    return tx.depositStatus === DepositStatus.EXPIRED\n  }\n  return tx.status === WithdrawalStatus.EXPIRED\n}\n\nexport function isTxFailed(tx: MergedTransaction): boolean {\n  if (isDeposit(tx)) {\n    if (!tx.depositStatus) {\n      return false\n    }\n    return [\n      DepositStatus.CREATION_FAILED,\n      DepositStatus.L1_FAILURE,\n      DepositStatus.L2_FAILURE\n    ].includes(tx.depositStatus)\n  }\n  return tx.status === WithdrawalStatus.FAILURE\n}\n\nexport function isSameTransaction(\n  txDetails_1: {\n    txId: string\n    parentChainId: ChainId\n    childChainId: ChainId\n  },\n  txDetails_2: {\n    txId: string\n    parentChainId: ChainId\n    childChainId: ChainId\n  }\n) {\n  return (\n    txDetails_1.txId === txDetails_2.txId &&\n    txDetails_1.parentChainId === txDetails_2.parentChainId &&\n    txDetails_1.childChainId === txDetails_2.childChainId\n  )\n}\n\nexport function getTxReceipt(tx: MergedTransaction) {\n  const parentChainProvider = getProviderForChainId(tx.parentChainId)\n  const childChainProvider = getProviderForChainId(tx.childChainId)\n\n  const provider = tx.isWithdrawal ? childChainProvider : parentChainProvider\n\n  return provider.getTransactionReceipt(tx.txId)\n}\n\nasync function getWithdrawalStatusFromEvents({\n  withdrawalEvent,\n  childChainId,\n  parentChainProvider,\n  childChainProvider\n}: {\n  withdrawalEvent: ChildToParentTransactionEvent\n  parentChainProvider: Provider\n  childChainProvider: Provider\n  childChainId: ChainId\n}): Promise<WithdrawalStatus | undefined> {\n  const outgoingMessageState = await getOutgoingMessageState(\n    withdrawalEvent,\n    parentChainProvider,\n    childChainProvider,\n    childChainId\n  )\n\n  switch (outgoingMessageState) {\n    case 0:\n      return WithdrawalStatus.UNCONFIRMED\n    case 1:\n      return WithdrawalStatus.CONFIRMED\n    case 2:\n      return WithdrawalStatus.EXECUTED\n    default:\n      return undefined\n  }\n}\n\nexport function getDepositsWithoutStatusesFromCache(\n  address: string | undefined\n): Deposit[] {\n  if (!address) {\n    return []\n  }\n  return JSON.parse(\n    localStorage.getItem(\n      `${DEPOSITS_LOCAL_STORAGE_KEY}-${address.toLowerCase()}`\n    ) ?? '[]'\n  ) as Deposit[]\n}\n\n/**\n * Cache deposits from event logs. We don't fetch these so we need to store them locally.\n *\n * @param {MergedTransaction} tx - Deposit from event logs to be cached.\n */\nexport function addDepositToCache(tx: Deposit) {\n  if (tx.direction !== 'deposit') {\n    return\n  }\n\n  const cachedDeposits = getDepositsWithoutStatusesFromCache(\n    tx.sender.toLowerCase()\n  )\n\n  const foundInCache = cachedDeposits.find(cachedTx =>\n    isSameTransaction(\n      { ...cachedTx, txId: cachedTx.txID },\n      { ...tx, txId: tx.txID }\n    )\n  )\n\n  if (foundInCache) {\n    return\n  }\n\n  const newCachedDeposits = [tx, ...cachedDeposits]\n\n  localStorage.setItem(\n    `${DEPOSITS_LOCAL_STORAGE_KEY}-${tx.sender.toLowerCase()}`,\n    JSON.stringify(newCachedDeposits)\n  )\n}\n\n/**\n * Cache parent chain tx details when claiming. This is the chain the funds were claimed on. We store locally because we don't have access to this tx from the child chain tx data.\n *\n * @param {MergedTransaction} tx - Transaction that initiated the withdrawal (child chain transaction).\n * @param {string} parentChainTxId - Transaction ID of the claim transaction (parent chain transaction ID).\n */\nexport function setParentChainTxDetailsOfWithdrawalClaimTx(\n  tx: MergedTransaction,\n  parentChainTxId: string\n) {\n  const key = `${tx.parentChainId}-${tx.childChainId}-${tx.txId}`\n\n  const cachedClaimParentChainTxId = JSON.parse(\n    localStorage.getItem(PARENT_CHAIN_TX_DETAILS_OF_CLAIM_TX) ?? '{}'\n  )\n\n  if (key in cachedClaimParentChainTxId) {\n    // already set\n    return\n  }\n\n  localStorage.setItem(\n    PARENT_CHAIN_TX_DETAILS_OF_CLAIM_TX,\n    JSON.stringify({\n      ...cachedClaimParentChainTxId,\n      [key]: {\n        txId: parentChainTxId,\n        timestamp: dayjs().valueOf()\n      }\n    })\n  )\n}\n\nexport function getWithdrawalClaimParentChainTxDetails(\n  tx: MergedTransaction\n): { txId: string; timestamp: number } | undefined {\n  if (!tx.isWithdrawal || tx.isCctp) {\n    return undefined\n  }\n\n  const key = `${tx.parentChainId}-${tx.childChainId}-${tx.txId}`\n\n  const cachedClaimParentChainTxDetails = (\n    JSON.parse(\n      localStorage.getItem(PARENT_CHAIN_TX_DETAILS_OF_CLAIM_TX) ?? '{}'\n    ) as {\n      [key in string]: {\n        txId: string\n        timestamp: number\n      }\n    }\n  )[key]\n\n  return cachedClaimParentChainTxDetails\n}\n\nexport async function getUpdatedEthDeposit(\n  tx: MergedTransaction\n): Promise<MergedTransaction> {\n  if (\n    !isTxPending(tx) ||\n    tx.assetType !== AssetType.ETH ||\n    tx.isWithdrawal ||\n    tx.isCctp\n  ) {\n    return tx\n  }\n\n  const { parentToChildMsg: l1ToL2Msg } =\n    await getParentToChildMessageDataFromParentTxHash({\n      depositTxId: tx.txId,\n      isEthDeposit: true,\n      parentProvider: getProviderForChainId(tx.parentChainId),\n      childProvider: getProviderForChainId(tx.childChainId)\n    })\n\n  if (!l1ToL2Msg) {\n    const receipt = await getTxReceipt(tx)\n\n    if (!receipt || receipt.status !== 0) {\n      // not failure\n      return tx\n    }\n\n    // failure\n    return { ...tx, status: 'failure', depositStatus: DepositStatus.L1_FAILURE }\n  }\n\n  const status = await l1ToL2Msg?.status()\n  const isDeposited = status === EthDepositMessageStatus.DEPOSITED\n\n  const newDeposit: MergedTransaction = {\n    ...tx,\n    status: 'success',\n    resolvedAt: isDeposited ? dayjs().valueOf() : null,\n    parentToChildMsgData: {\n      fetchingUpdate: false,\n      status: isDeposited\n        ? ParentToChildMessageStatus.FUNDS_DEPOSITED_ON_CHILD\n        : ParentToChildMessageStatus.NOT_YET_CREATED,\n      retryableCreationTxID: (l1ToL2Msg as EthDepositMessage).childTxHash,\n      // Only show `childTxId` after the deposit is confirmed\n      childTxId: isDeposited\n        ? (l1ToL2Msg as EthDepositMessage).childTxHash\n        : undefined\n    }\n  }\n\n  return {\n    ...newDeposit,\n    depositStatus: getDepositStatus(newDeposit)\n  }\n}\n\nexport async function getUpdatedTokenDeposit(\n  tx: MergedTransaction\n): Promise<MergedTransaction> {\n  if (\n    !isTxPending(tx) ||\n    tx.assetType !== AssetType.ERC20 ||\n    tx.isWithdrawal ||\n    tx.isCctp\n  ) {\n    return tx\n  }\n\n  const { parentToChildMsg: l1ToL2Msg } =\n    await getParentToChildMessageDataFromParentTxHash({\n      depositTxId: tx.txId,\n      isEthDeposit: false,\n      parentProvider: getProviderForChainId(tx.parentChainId),\n      childProvider: getProviderForChainId(tx.childChainId)\n    })\n  const _l1ToL2Msg = l1ToL2Msg as ParentToChildMessageReader\n\n  if (!l1ToL2Msg) {\n    const receipt = await getTxReceipt(tx)\n\n    if (!receipt || receipt.status !== 0) {\n      // not failure\n      return tx\n    }\n\n    // failure\n    return { ...tx, status: 'failure', depositStatus: DepositStatus.L1_FAILURE }\n  }\n\n  const res = await _l1ToL2Msg.getSuccessfulRedeem()\n\n  const childTxId = (() => {\n    if (res.status === ParentToChildMessageStatus.REDEEMED) {\n      return res.childTxReceipt.transactionHash\n    } else {\n      return undefined\n    }\n  })()\n\n  const newDeposit: MergedTransaction = {\n    ...tx,\n    status: _l1ToL2Msg.retryableCreationId ? 'success' : tx.status,\n    resolvedAt:\n      res.status === ParentToChildMessageStatus.REDEEMED\n        ? dayjs().valueOf()\n        : null,\n    parentToChildMsgData: {\n      status: res.status,\n      childTxId,\n      fetchingUpdate: false,\n      retryableCreationTxID: _l1ToL2Msg.retryableCreationId\n    }\n  }\n\n  return {\n    ...newDeposit,\n    depositStatus: getDepositStatus(newDeposit)\n  }\n}\n\nexport async function getUpdatedWithdrawal(\n  tx: MergedTransaction\n): Promise<MergedTransaction> {\n  if (!isTxPending(tx) || !tx.isWithdrawal || tx.isCctp) {\n    return tx\n  }\n\n  const parentChainProvider = getProviderForChainId(tx.parentChainId)\n  const childChainProvider = getProviderForChainId(tx.childChainId)\n  const txReceipt = await getTxReceipt(tx)\n  const childTxReceipt = new ChildTransactionReceipt(txReceipt)\n  const [withdrawalEvent] = await childTxReceipt.getChildToParentEvents()\n\n  if (childTxReceipt) {\n    const newStatus = withdrawalEvent\n      ? await getWithdrawalStatusFromEvents({\n          withdrawalEvent,\n          childChainId: tx.childChainId,\n          parentChainProvider,\n          childChainProvider\n        })\n      : undefined\n\n    // unique id for withdrawal event is required for claiming, if the new status changes to confirmed\n    const uniqueId = withdrawalEvent\n      ? getUniqueIdOrHashFromEvent(withdrawalEvent)\n      : null\n\n    if (typeof newStatus !== 'undefined') {\n      return {\n        ...tx,\n        uniqueId,\n        status: newStatus\n      }\n    }\n  }\n\n  return tx\n}\n\nexport async function getUpdatedCctpTransfer(\n  tx: MergedTransaction\n): Promise<MergedTransaction> {\n  if (!isTxPending(tx) || !tx.isCctp) {\n    return tx\n  }\n\n  const receipt = await getTxReceipt(tx)\n\n  if (!receipt) {\n    return tx\n  }\n\n  const requiredL1BlocksBeforeConfirmation = getBlockBeforeConfirmation(\n    tx.parentChainId\n  )\n  const blockTime = getL1BlockTime(tx.parentChainId)\n\n  const txWithTxId: MergedTransaction = { ...tx, txId: receipt.transactionHash }\n\n  if (receipt.status === 0) {\n    return {\n      ...txWithTxId,\n      status: WithdrawalStatus.FAILURE\n    }\n  }\n  if (tx.cctpData?.receiveMessageTransactionHash) {\n    return {\n      ...txWithTxId,\n      status: WithdrawalStatus.EXECUTED\n    }\n  }\n  if (receipt.blockNumber && !tx.blockNum) {\n    // If blockNumber was never set (for example, network switch just after the deposit)\n    const { messageBytes, attestationHash } =\n      getAttestationHashAndMessageFromReceipt(receipt)\n    return {\n      ...txWithTxId,\n      blockNum: receipt.blockNumber,\n      cctpData: {\n        ...tx.cctpData,\n        messageBytes,\n        attestationHash\n      }\n    }\n  }\n  const isConfirmed =\n    tx.createdAt &&\n    dayjs().diff(tx.createdAt, 'second') >\n      requiredL1BlocksBeforeConfirmation * blockTime\n  if (\n    // If transaction claim was set to failure, don't reset to Confirmed\n    tx.status !== WithdrawalStatus.FAILURE &&\n    isConfirmed\n  ) {\n    return {\n      ...txWithTxId,\n      status: WithdrawalStatus.CONFIRMED\n    }\n  }\n\n  return { ...tx, status: WithdrawalStatus.UNCONFIRMED }\n}\n\nexport async function getUpdatedTeleportTransfer(\n  tx: TeleporterMergedTransaction\n): Promise<TeleporterMergedTransaction> {\n  const { status, timestampResolved, l1ToL2MsgData, l2ToL3MsgData } =\n    await fetchTeleporterDepositStatusData(tx)\n\n  const updatedTx = {\n    ...tx,\n    status,\n    timestampResolved,\n    l1ToL2MsgData,\n    l2ToL3MsgData\n  }\n\n  return {\n    ...updatedTx,\n    depositStatus: getDepositStatus(updatedTx)\n  }\n}\n\nexport function getTxStatusLabel(tx: MergedTransaction): StatusLabel {\n  if (isDeposit(tx)) {\n    switch (tx.depositStatus) {\n      case DepositStatus.CREATION_FAILED:\n      case DepositStatus.L1_FAILURE:\n      case DepositStatus.L2_FAILURE:\n        return StatusLabel.FAILURE\n      case DepositStatus.EXPIRED:\n        return StatusLabel.EXPIRED\n      case DepositStatus.L1_PENDING:\n      case DepositStatus.L2_PENDING:\n        return StatusLabel.PENDING\n      default:\n        return StatusLabel.SUCCESS\n    }\n  } else {\n    switch (tx.status) {\n      case WithdrawalStatus.EXECUTED:\n        return StatusLabel.SUCCESS\n      case WithdrawalStatus.CONFIRMED:\n        return StatusLabel.CLAIMABLE\n      case WithdrawalStatus.UNCONFIRMED:\n        return StatusLabel.PENDING\n      default:\n        return StatusLabel.FAILURE\n    }\n  }\n}\n\nfunction getTxDurationInMinutes(tx: MergedTransaction) {\n  const { parentChainId } = tx\n  const { isEthereumMainnet, isEthereumMainnetOrTestnet, isTestnet } =\n    isNetwork(parentChainId)\n\n  if (isDeposit(tx)) {\n    if (!isEthereumMainnetOrTestnet) {\n      return 1\n    }\n\n    return isTestnet ? 10 : 15\n  }\n\n  // Withdrawals\n  const SEVEN_DAYS_IN_MINUTES = 7 * 24 * 60\n\n  if (isEthereumMainnet) {\n    return SEVEN_DAYS_IN_MINUTES\n  }\n\n  // Node is created every ~1h for all other chains\n  return 60\n}\n\nexport function getTxRemainingTimeInMinutes(tx: MergedTransaction) {\n  const now = dayjs()\n  const { createdAt } = tx\n\n  if (!isTxPending(tx)) {\n    return null\n  }\n\n  // For new txs createdAt won't be defined yet, we default to the current time in that case\n  const createdAtDate = createdAt ? dayjs(createdAt) : dayjs()\n  const CONFIRMATION_BUFFER_MINUTES = isDeposit(tx) ? 0 : 30\n\n  return Math.max(\n    getTxDurationInMinutes(tx) -\n      now.diff(createdAtDate, 'minutes') +\n      CONFIRMATION_BUFFER_MINUTES,\n    0\n  )\n}\n\nexport function getTxCompletionDate(tx: MergedTransaction) {\n  const minutesLeft = getTxRemainingTimeInMinutes(tx)\n  const { createdAt, resolvedAt } = tx\n\n  if (typeof minutesLeft !== 'number' || !createdAt) {\n    return null\n  }\n\n  if (!isTxPending(tx)) {\n    return resolvedAt ? dayjs(resolvedAt) : null\n  }\n\n  return dayjs(createdAt).add(minutesLeft, 'minutes')\n}\n\nexport function getTxHumanReadableRemainingTime(tx: MergedTransaction) {\n  const minutesLeft = getTxRemainingTimeInMinutes(tx)\n\n  if (!minutesLeft) {\n    return null\n  }\n\n  const hoursLeft = Math.floor(minutesLeft / 60)\n  const daysLeft = Math.floor(hoursLeft / 24)\n\n  const formattedDaysLeft = daysLeft === 1 ? '1 day' : `${daysLeft} days`\n  const formattedHoursLeft = hoursLeft === 1 ? '1 hr' : `${daysLeft} hrs`\n  const formattedMinutesLeft =\n    minutesLeft === 1 ? '1 min' : `${minutesLeft} mins`\n\n  if (daysLeft > 0) {\n    return `${formattedDaysLeft} ${hoursLeft % 60}${\n      hoursLeft % 60 === 1 ? ' hr' : ' hrs'\n    }`\n  }\n  if (hoursLeft > 0) {\n    return `${formattedHoursLeft} ${minutesLeft % 60}${\n      minutesLeft % 60 === 1 ? ' min' : ' mins'\n    }`\n  }\n  if (minutesLeft > 0) {\n    return formattedMinutesLeft\n  }\n  return 'less than a minute'\n}\n\nexport function getDestinationNetworkTxId(tx: MergedTransaction) {\n  if (tx.isCctp) {\n    return tx.cctpData?.receiveMessageTransactionHash\n  }\n\n  if (isTeleport(tx) && isTeleporterTransaction(tx)) {\n    return tx.l2ToL3MsgData?.l3TxID\n  }\n\n  return tx.isWithdrawal\n    ? tx.childToParentMsgData?.uniqueId.toString()\n    : tx.parentToChildMsgData?.childTxId\n}\n","import { useCallback } from 'react'\nimport { useNetworks } from './useNetworks'\nimport { ChainId, isNetwork } from '../util/networks'\n\nexport const useIsTestnetMode = () => {\n  const [networks, setNetworks] = useNetworks()\n\n  const isTestnetMode = isNetwork(networks.sourceChain.id).isTestnet\n\n  const toggleTestnetMode = useCallback(() => {\n    setNetworks({\n      sourceChainId: isTestnetMode ? ChainId.Ethereum : ChainId.Sepolia\n    })\n  }, [isTestnetMode, setNetworks])\n\n  return [isTestnetMode, toggleTestnetMode] as const\n}\n","import { isTeleport } from '../../token-bridge-sdk/teleport'\nimport { hasL1Subgraph } from '../SubgraphUtils'\nimport { getAPIBaseUrl, sanitizeQueryParams } from '../index'\n\nexport type FetchEthTeleportsFromSubgraphResult = {\n  transactionHash: string\n  timestamp: string\n  blockCreatedAt: string\n  l2Calldata: string\n  value: string\n  sender: string\n  retryableTicketID: string\n  destAddr: string\n  parentChainId: string\n  childChainId: string // l3 chain id\n  teleport_type: 'eth'\n}\n\n/**\n * Fetches initiated ETH Teleports from subgraph in range of [fromBlock, toBlock] and pageParams.\n *\n * @param query Query params\n * @param query.sender Address that initiated the teleport\n * @param query.receiver Address that received the funds\n * @param query.fromBlock Start at this block number (including)\n * @param query.toBlock Stop at this block number (including)\n * @param query.l2ChainId Chain id for the L2 network\n * @param query.pageSize Fetch these many records from subgraph\n * @param query.pageNumber Fetch records starting [pageNumber * pageSize] records\n * @param query.searchString Searches records through the l1TxHash\n */\n\nexport const fetchEthTeleportsFromSubgraph = async ({\n  sender,\n  receiver,\n  fromBlock,\n  toBlock,\n  l1ChainId,\n  l2ChainId,\n  l3ChainId,\n  pageSize = 10,\n  pageNumber = 0,\n  searchString = ''\n}: {\n  sender?: string\n  receiver?: string\n  fromBlock: number\n  toBlock?: number\n  l1ChainId: number\n  l2ChainId: number\n  l3ChainId: number\n  pageSize?: number\n  pageNumber?: number\n  searchString?: string\n}): Promise<FetchEthTeleportsFromSubgraphResult[]> => {\n  if (toBlock && fromBlock >= toBlock) {\n    // if fromBlock > toBlock or both are equal / 0\n    return []\n  }\n\n  const urlParams = new URLSearchParams(\n    sanitizeQueryParams({\n      sender,\n      receiver,\n      fromBlock,\n      toBlock,\n      l1ChainId,\n      l2ChainId,\n      l3ChainId,\n      pageSize,\n      page: pageNumber,\n      search: searchString\n    })\n  )\n\n  if (!hasL1Subgraph(Number(l2ChainId))) {\n    throw new Error(`L1 subgraph not available for network: ${l2ChainId}`)\n  }\n\n  if (pageSize === 0) return [] // don't query subgraph if nothing requested\n\n  // don't query if not a valid teleport configuration\n  if (\n    !isTeleport({\n      sourceChainId: Number(l1ChainId),\n      destinationChainId: Number(l3ChainId)\n    })\n  ) {\n    throw new Error(\n      `Invalid teleport source and destination chain id: ${l1ChainId} -> ${l3ChainId}`\n    )\n  }\n\n  const response = await fetch(\n    `${getAPIBaseUrl()}/api/teleports/eth?${urlParams}`,\n    {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' }\n    }\n  )\n\n  const transactions: FetchEthTeleportsFromSubgraphResult[] = (\n    await response.json()\n  ).data\n\n  return transactions.map(tx => ({\n    ...tx,\n    parentChainId: String(l1ChainId),\n    childChainId: String(l3ChainId),\n    teleport_type: 'eth'\n  }))\n}\n","import { hasTeleporterSubgraph } from '../SubgraphUtils'\nimport { getAPIBaseUrl, sanitizeQueryParams } from '../index'\n\nexport type FetchErc20TeleportsFromSubgraphResult = {\n  id: string\n  sender: string\n  l1Token: string\n  l3FeeTokenL1Addr: string\n  l1l2Router: string\n  l2l3RouterOrInbox: string\n  to: string\n  amount: string\n  transactionHash: string\n  timestamp: string\n  teleport_type: 'erc20'\n  parentChainId: string\n}\n\n/**\n * Fetches initiated ETH Teleports from subgraph in range of [fromBlock, toBlock] and pageParams.\n *\n * @param query Query params\n * @param query.sender Address that initiated the teleport\n * @param query.fromBlock Start at this block number (including)\n * @param query.toBlock Stop at this block number (including)\n * @param query.l1ChainId Chain id for the L2 network\n * @param query.pageSize Fetch these many records from subgraph\n * @param query.pageNumber Fetch records starting [pageNumber * pageSize] records\n */\n\nexport const fetchErc20TeleportsFromSubgraph = async ({\n  sender,\n  fromBlock,\n  toBlock,\n  l1ChainId,\n  pageSize = 10,\n  pageNumber = 0\n}: {\n  sender?: string\n  fromBlock: number\n  toBlock?: number\n  l1ChainId: number\n  pageSize?: number\n  pageNumber?: number\n}): Promise<FetchErc20TeleportsFromSubgraphResult[]> => {\n  if (toBlock && fromBlock >= toBlock) {\n    // if fromBlock > toBlock or both are equal / 0\n    return []\n  }\n\n  const urlParams = new URLSearchParams(\n    sanitizeQueryParams({\n      sender,\n      l1ChainId,\n      pageSize,\n      page: pageNumber\n    })\n  )\n\n  if (!hasTeleporterSubgraph(Number(l1ChainId))) {\n    throw new Error(\n      `Teleporter subgraph not available for network: ${l1ChainId}`\n    )\n  }\n\n  if (pageSize === 0) return [] // don't query subgraph if nothing requested\n\n  const response = await fetch(\n    `${getAPIBaseUrl()}/api/teleports/erc20?${urlParams}`,\n    {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' }\n    }\n  )\n\n  const transactions: FetchErc20TeleportsFromSubgraphResult[] = (\n    await response.json()\n  ).data\n\n  return transactions.map(tx => ({\n    ...tx,\n    parentChainId: String(l1ChainId),\n    teleport_type: 'erc20'\n  }))\n}\n","import { Provider } from '@ethersproject/providers'\nimport {\n  fetchEthTeleportsFromSubgraph,\n  FetchEthTeleportsFromSubgraphResult\n} from './fetchEthTeleportsFromSubgraph'\n\nimport {\n  fetchErc20TeleportsFromSubgraph,\n  FetchErc20TeleportsFromSubgraphResult\n} from './fetchErc20TeleportsFromSubgraph'\nimport {\n  getL2ConfigForTeleport,\n  isTeleport\n} from '../../token-bridge-sdk/teleport'\nimport { getChainIdFromProvider } from '../../token-bridge-sdk/utils'\n\nexport type FetchTeleportsParams = {\n  sender?: string\n  receiver?: string\n  fromBlock?: number\n  toBlock?: number\n  parentChainProvider: Provider\n  childChainProvider: Provider\n  pageSize?: number\n  pageNumber?: number\n  searchString?: string\n}\n\nexport type TeleportFromSubgraph =\n  | FetchEthTeleportsFromSubgraphResult\n  | FetchErc20TeleportsFromSubgraphResult\n\nexport const fetchTeleports = async ({\n  sender,\n  receiver,\n  fromBlock,\n  toBlock,\n  parentChainProvider, // l1 provider\n  childChainProvider, // l3 provider\n  pageSize = 10,\n  pageNumber = 0,\n  searchString = ''\n}: FetchTeleportsParams): Promise<TeleportFromSubgraph[]> => {\n  if (typeof sender === 'undefined' && typeof receiver === 'undefined')\n    return []\n\n  if (!parentChainProvider || !childChainProvider) return []\n\n  const l1ChainId = await getChainIdFromProvider(parentChainProvider)\n  const l3ChainId = await getChainIdFromProvider(childChainProvider)\n\n  // don't query if not a valid teleport configuration\n  if (\n    !isTeleport({\n      sourceChainId: l1ChainId,\n      destinationChainId: l3ChainId\n    })\n  ) {\n    console.error(\n      `Error fetching teleports from subgraph: invalid source and destination chain ids: ${l1ChainId} -> ${l3ChainId}`\n    )\n    return []\n  }\n\n  const { l2ChainId } = await getL2ConfigForTeleport({\n    destinationChainProvider: childChainProvider\n  })\n\n  if (!fromBlock) {\n    fromBlock = 0\n  }\n\n  let ethTeleportsFromSubgraph: FetchEthTeleportsFromSubgraphResult[] = []\n  try {\n    ethTeleportsFromSubgraph = await fetchEthTeleportsFromSubgraph({\n      sender,\n      receiver,\n      fromBlock,\n      toBlock,\n      l1ChainId,\n      l2ChainId,\n      l3ChainId,\n      pageSize,\n      pageNumber,\n      searchString\n    })\n  } catch (error: any) {\n    console.log('Error fetching eth teleports from subgraph', error)\n  }\n\n  let erc20TeleportsFromSubgraph: FetchErc20TeleportsFromSubgraphResult[] = []\n  try {\n    erc20TeleportsFromSubgraph = await fetchErc20TeleportsFromSubgraph({\n      sender,\n      fromBlock,\n      toBlock,\n      l1ChainId,\n      pageSize,\n      pageNumber\n    })\n  } catch (error: any) {\n    console.log('Error fetching erc20 teleports from subgraph', error)\n  }\n\n  const combinedTeleports: TeleportFromSubgraph[] = [\n    ...ethTeleportsFromSubgraph,\n    ...erc20TeleportsFromSubgraph\n  ]\n\n  return combinedTeleports\n}\n","import { utils } from 'ethers'\nimport { getProviderForChainId } from '@/token-bridge-sdk/utils'\nimport { RetryableMessageParams } from '@arbitrum/sdk'\nimport {\n  fetchTeleportInputParametersFromTxId,\n  getL3ChainIdFromTeleportEvents\n} from '@/token-bridge-sdk/teleport'\nimport { Transfer } from '../../hooks/useTransactionHistory'\nimport { MergedTransaction } from '../../state/app/state'\nimport { FetchEthTeleportsFromSubgraphResult } from './fetchEthTeleportsFromSubgraph'\nimport { TeleportFromSubgraph } from './fetchTeleports'\nimport { AssetType } from '../../hooks/arbTokenBridge.types'\nimport { Transaction } from '../../hooks/useTransactions'\nimport { transformDeposit } from '../../state/app/utils'\nimport { updateAdditionalDepositData } from '../deposits/helpers'\nimport { fetchErc20Data } from '../TokenUtils'\n\nexport function isTransferTeleportFromSubgraph(\n  tx: Transfer\n): tx is TeleportFromSubgraph {\n  return typeof (tx as TeleportFromSubgraph).teleport_type !== 'undefined'\n}\n\nfunction isTransactionEthTeleportFromSubgraph(\n  tx: TeleportFromSubgraph\n): tx is FetchEthTeleportsFromSubgraphResult {\n  return tx.teleport_type === 'eth'\n}\n\n// converts the `teleport-from-subgraph` to our tx-history compatible `merged-transaction` type\n// detects the token and destination `l3ChainId` in case of ERC20 teleports\nexport async function transformTeleportFromSubgraph(\n  tx: TeleportFromSubgraph\n): Promise<MergedTransaction> {\n  const parentChainProvider = getProviderForChainId(Number(tx.parentChainId))\n\n  // Eth transfers\n  if (isTransactionEthTeleportFromSubgraph(tx)) {\n    // to get the exact value of the ETH deposit we need to fetch the teleport parameters, otherwise tx.value will also include all the L2,L3 gas fee paid\n    const depositParameters = (await fetchTeleportInputParametersFromTxId({\n      txId: tx.transactionHash,\n      sourceChainProvider: parentChainProvider,\n      destinationChainProvider: getProviderForChainId(Number(tx.childChainId)),\n      isNativeCurrencyTransfer: true\n    })) as {\n      l1l2TicketData: RetryableMessageParams\n      l2l3TicketData: RetryableMessageParams\n    }\n\n    const depositTx = {\n      type: 'deposit-l1',\n      status: 'pending',\n      direction: 'deposit',\n      source: 'subgraph',\n      value: utils.formatEther(\n        depositParameters.l2l3TicketData.l2CallValue.toString() || 0\n      ),\n      txID: tx.transactionHash,\n      tokenAddress: '',\n      sender: tx.sender,\n      destination: tx.sender,\n      assetName: 'ETH',\n      assetType: AssetType.ETH,\n      l1NetworkID: tx.parentChainId,\n      l2NetworkID: tx.childChainId,\n      blockNumber: Number(tx.blockCreatedAt),\n      timestampCreated: tx.timestamp,\n      isClassic: false,\n      parentChainId: Number(tx.parentChainId),\n      childChainId: Number(tx.childChainId)\n    } as Transaction\n\n    const childChainProvider = getProviderForChainId(Number(tx.childChainId))\n    return transformDeposit(\n      await updateAdditionalDepositData({\n        depositTx,\n        l1Provider: parentChainProvider,\n        l2Provider: childChainProvider\n      })\n    )\n  }\n\n  // Erc20 transfers\n  const l1TokenAddress = tx.l1Token\n  const { symbol, decimals } = await fetchErc20Data({\n    address: l1TokenAddress,\n    provider: parentChainProvider\n  })\n  const l3ChainId = await getL3ChainIdFromTeleportEvents(\n    tx,\n    parentChainProvider\n  )\n  const transactionDetails = await parentChainProvider.getTransaction(\n    tx.transactionHash\n  ) // we need to fetch the transaction details to get the blockNumber\n\n  const depositTx = {\n    type: 'deposit-l1',\n    status: 'pending',\n    direction: 'deposit',\n    source: 'subgraph',\n    value: utils.formatUnits(tx.amount || 0, decimals),\n    txID: tx.transactionHash,\n    tokenAddress: l1TokenAddress,\n    sender: tx.sender,\n    destination: tx.sender,\n    assetName: symbol,\n    assetType: AssetType.ERC20,\n    l1NetworkID: tx.parentChainId,\n    l2NetworkID: String(l3ChainId),\n    blockNumber: Number(transactionDetails.blockNumber),\n    timestampCreated: tx.timestamp,\n    isClassic: false,\n    parentChainId: Number(tx.parentChainId),\n    childChainId: l3ChainId\n  } as Transaction\n\n  const childChainProvider = getProviderForChainId(l3ChainId)\n  return transformDeposit(\n    await updateAdditionalDepositData({\n      depositTx,\n      l1Provider: parentChainProvider,\n      l2Provider: childChainProvider\n    })\n  )\n}\n","import { useAccount, useNetwork } from 'wagmi'\nimport useSWRImmutable from 'swr/immutable'\nimport useSWRInfinite from 'swr/infinite'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport dayjs from 'dayjs'\n\nimport {\n  ChainId,\n  getChains,\n  getChildChainIds,\n  isNetwork\n} from '../util/networks'\nimport { fetchWithdrawals } from '../util/withdrawals/fetchWithdrawals'\nimport { fetchDeposits } from '../util/deposits/fetchDeposits'\nimport {\n  AssetType,\n  L2ToL1EventResultPlus,\n  WithdrawalInitiated\n} from './arbTokenBridge.types'\nimport { isTeleporterTransaction, Transaction } from './useTransactions'\nimport { MergedTransaction } from '../state/app/state'\nimport {\n  getStandardizedTimestamp,\n  transformDeposit,\n  transformWithdrawal\n} from '../state/app/utils'\nimport {\n  EthWithdrawal,\n  isTokenWithdrawal,\n  mapETHWithdrawalToL2ToL1EventResult,\n  mapTokenWithdrawalFromEventLogsToL2ToL1EventResult,\n  mapWithdrawalToL2ToL1EventResult\n} from '../util/withdrawals/helpers'\nimport { FetchWithdrawalsFromSubgraphResult } from '../util/withdrawals/fetchWithdrawalsFromSubgraph'\nimport { updateAdditionalDepositData } from '../util/deposits/helpers'\nimport { useCctpFetching } from '../state/cctpState'\nimport {\n  getDepositsWithoutStatusesFromCache,\n  getUpdatedCctpTransfer,\n  getUpdatedEthDeposit,\n  getUpdatedTeleportTransfer,\n  getUpdatedTokenDeposit,\n  getUpdatedWithdrawal,\n  isCctpTransfer,\n  isSameTransaction,\n  isTxPending\n} from '../components/TransactionHistory/helpers'\nimport { useIsTestnetMode } from './useIsTestnetMode'\nimport { useAccountType } from './useAccountType'\nimport {\n  shouldIncludeReceivedTxs,\n  shouldIncludeSentTxs\n} from '../util/SubgraphUtils'\nimport { isTeleport } from '@/token-bridge-sdk/teleport'\nimport { getProviderForChainId } from '@/token-bridge-sdk/utils'\nimport { Address } from '../util/AddressUtils'\nimport {\n  TeleportFromSubgraph,\n  fetchTeleports\n} from '../util/teleports/fetchTeleports'\nimport {\n  isTransferTeleportFromSubgraph,\n  transformTeleportFromSubgraph\n} from '../util/teleports/helpers'\n\nexport type UseTransactionHistoryResult = {\n  transactions: MergedTransaction[]\n  loading: boolean\n  completed: boolean\n  error: unknown\n  failedChainPairs: ChainPair[]\n  pause: () => void\n  resume: () => void\n  addPendingTransaction: (tx: MergedTransaction) => void\n  updatePendingTransaction: (tx: MergedTransaction) => Promise<void>\n}\n\nexport type ChainPair = { parentChainId: ChainId; childChainId: ChainId }\n\nexport type Deposit = Transaction\n\nexport type Withdrawal =\n  | FetchWithdrawalsFromSubgraphResult\n  | WithdrawalInitiated\n  | EthWithdrawal\n\ntype DepositOrWithdrawal = Deposit | Withdrawal\nexport type Transfer =\n  | DepositOrWithdrawal\n  | MergedTransaction\n  | TeleportFromSubgraph\n\nfunction getStandardizedTimestampByTx(tx: Transfer) {\n  if (isCctpTransfer(tx)) {\n    return (tx.createdAt ?? 0) / 1_000\n  }\n\n  if (isTransferTeleportFromSubgraph(tx)) {\n    return tx.timestamp\n  }\n\n  if (isDeposit(tx)) {\n    return tx.timestampCreated ?? 0\n  }\n\n  if (isWithdrawalFromSubgraph(tx)) {\n    return getStandardizedTimestamp(tx.l2BlockTimestamp)\n  }\n\n  return getStandardizedTimestamp(tx.timestamp ?? '0')\n}\n\nfunction sortByTimestampDescending(a: Transfer, b: Transfer) {\n  return getStandardizedTimestampByTx(a) > getStandardizedTimestampByTx(b)\n    ? -1\n    : 1\n}\n\nfunction getMultiChainFetchList(): ChainPair[] {\n  return getChains().flatMap(chain => {\n    // We only grab child chains because we don't want duplicates and we need the parent chain\n    // Although the type is correct here we default to an empty array for custom networks backwards compatibility\n    const childChainIds = getChildChainIds(chain)\n\n    const isParentChain = childChainIds.length > 0\n\n    if (!isParentChain) {\n      // Skip non-parent chains\n      return []\n    }\n\n    // For each destination chain, map to an array of ChainPair objects\n    return childChainIds.map(childChainId => ({\n      parentChainId: chain.chainId,\n      childChainId: childChainId\n    }))\n  })\n}\n\nfunction isWithdrawalFromSubgraph(\n  tx: Withdrawal\n): tx is FetchWithdrawalsFromSubgraphResult {\n  return tx.source === 'subgraph'\n}\n\nfunction isDeposit(tx: DepositOrWithdrawal): tx is Deposit {\n  return tx.direction === 'deposit'\n}\n\nasync function transformTransaction(tx: Transfer): Promise<MergedTransaction> {\n  // teleport-from-subgraph doesn't have a child-chain-id, we detect it later, hence, an early return\n  if (isTransferTeleportFromSubgraph(tx)) {\n    return await transformTeleportFromSubgraph(tx)\n  }\n\n  const parentChainProvider = getProviderForChainId(tx.parentChainId)\n  const childChainProvider = getProviderForChainId(tx.childChainId)\n\n  if (isCctpTransfer(tx)) {\n    return tx\n  }\n\n  if (isDeposit(tx)) {\n    return transformDeposit(\n      await updateAdditionalDepositData({\n        depositTx: tx,\n        l1Provider: parentChainProvider,\n        l2Provider: childChainProvider\n      })\n    )\n  }\n\n  let withdrawal: L2ToL1EventResultPlus | undefined\n\n  if (isWithdrawalFromSubgraph(tx)) {\n    withdrawal = await mapWithdrawalToL2ToL1EventResult({\n      withdrawal: tx,\n      l1Provider: parentChainProvider,\n      l2Provider: childChainProvider\n    })\n  } else {\n    if (isTokenWithdrawal(tx)) {\n      withdrawal = await mapTokenWithdrawalFromEventLogsToL2ToL1EventResult({\n        result: tx,\n        l1Provider: parentChainProvider,\n        l2Provider: childChainProvider\n      })\n    } else {\n      withdrawal = await mapETHWithdrawalToL2ToL1EventResult({\n        event: tx,\n        l1Provider: parentChainProvider,\n        l2Provider: childChainProvider\n      })\n    }\n  }\n\n  if (withdrawal) {\n    return transformWithdrawal(withdrawal)\n  }\n\n  // Throw user friendly error in case we catch it and display in the UI.\n  throw new Error(\n    'An error has occurred while fetching a transaction. Please try again later or contact the support.'\n  )\n}\n\nfunction getTxIdFromTransaction(tx: Transfer) {\n  if (isTransferTeleportFromSubgraph(tx)) {\n    return tx.transactionHash\n  }\n\n  if (isCctpTransfer(tx)) {\n    return tx.txId\n  }\n  if (isDeposit(tx)) {\n    return tx.txID\n  }\n  if (isWithdrawalFromSubgraph(tx)) {\n    return tx.l2TxHash\n  }\n  if (isTokenWithdrawal(tx)) {\n    return tx.txHash\n  }\n  return tx.l2TxHash ?? tx.transactionHash\n}\n\nfunction getCacheKeyFromTransaction(\n  tx: Transaction | MergedTransaction | TeleportFromSubgraph | Withdrawal\n) {\n  const txId = getTxIdFromTransaction(tx)\n  if (!txId) {\n    return undefined\n  }\n  return `${tx.parentChainId}-${txId.toLowerCase()}`\n}\n\n// remove the duplicates from the transactions passed\nfunction dedupeTransactions(txs: Transfer[]) {\n  return Array.from(\n    new Map(txs.map(tx => [getCacheKeyFromTransaction(tx), tx])).values()\n  )\n}\n\n/**\n * Fetches transaction history only for deposits and withdrawals, without their statuses.\n */\nconst useTransactionHistoryWithoutStatuses = (address: Address | undefined) => {\n  const { chain } = useNetwork()\n  const [isTestnetMode] = useIsTestnetMode()\n  const { isSmartContractWallet, isLoading: isLoadingAccountType } =\n    useAccountType()\n\n  // Check what type of CCTP (deposit, withdrawal or all) to fetch\n  // We need this because of Smart Contract Wallets\n  const cctpTypeToFetch = useCallback(\n    (chainPair: ChainPair): 'deposits' | 'withdrawals' | 'all' | undefined => {\n      if (isLoadingAccountType || !chain) {\n        return undefined\n      }\n      if (isSmartContractWallet) {\n        // fetch based on the connected network\n        if (chain.id === chainPair.parentChainId) {\n          return 'deposits'\n        }\n        if (chain.id === chainPair.childChainId) {\n          return 'withdrawals'\n        }\n        return undefined\n      }\n      // EOA\n      return isNetwork(chainPair.parentChainId).isTestnet === isTestnetMode\n        ? 'all'\n        : undefined\n    },\n    [isSmartContractWallet, isLoadingAccountType, chain, isTestnetMode]\n  )\n\n  const cctpTransfersMainnet = useCctpFetching({\n    walletAddress: address,\n    l1ChainId: ChainId.Ethereum,\n    l2ChainId: ChainId.ArbitrumOne,\n    pageNumber: 0,\n    pageSize: cctpTypeToFetch({\n      parentChainId: ChainId.Ethereum,\n      childChainId: ChainId.ArbitrumOne\n    })\n      ? 1000\n      : 0,\n    type:\n      cctpTypeToFetch({\n        parentChainId: ChainId.Ethereum,\n        childChainId: ChainId.ArbitrumOne\n      }) ?? 'all'\n  })\n\n  const cctpTransfersTestnet = useCctpFetching({\n    walletAddress: address,\n    l1ChainId: ChainId.Sepolia,\n    l2ChainId: ChainId.ArbitrumSepolia,\n    pageNumber: 0,\n    pageSize: cctpTypeToFetch({\n      parentChainId: ChainId.Sepolia,\n      childChainId: ChainId.ArbitrumSepolia\n    })\n      ? 1000\n      : 0,\n    type:\n      cctpTypeToFetch({\n        parentChainId: ChainId.Sepolia,\n        childChainId: ChainId.ArbitrumSepolia\n      }) ?? 'all'\n  })\n\n  // TODO: Clean up this logic when introducing testnet/mainnet split\n  const combinedCctpTransfers = [\n    ...(cctpTransfersMainnet.deposits?.completed || []),\n    ...(cctpTransfersMainnet.withdrawals?.completed || []),\n    ...(cctpTransfersTestnet.deposits?.completed || []),\n    ...(cctpTransfersTestnet.withdrawals?.completed || []),\n    ...(cctpTransfersMainnet.deposits?.pending || []),\n    ...(cctpTransfersMainnet.withdrawals?.pending || []),\n    ...(cctpTransfersTestnet.deposits?.pending || []),\n    ...(cctpTransfersTestnet.withdrawals?.pending || [])\n  ]\n\n  const cctpLoading =\n    cctpTransfersMainnet.isLoadingDeposits ||\n    cctpTransfersMainnet.isLoadingWithdrawals ||\n    cctpTransfersTestnet.isLoadingDeposits ||\n    cctpTransfersTestnet.isLoadingWithdrawals\n\n  const { data: failedChainPairs, mutate: addFailedChainPair } =\n    useSWRImmutable<ChainPair[]>(\n      address ? ['failed_chain_pairs', address] : null\n    )\n\n  const fetcher = useCallback(\n    (type: 'deposits' | 'withdrawals') => {\n      if (!chain) {\n        return []\n      }\n\n      const fetcherFn = type === 'deposits' ? fetchDeposits : fetchWithdrawals\n\n      return Promise.all(\n        getMultiChainFetchList()\n          .filter(chainPair => {\n            if (isSmartContractWallet) {\n              // only fetch txs from the connected network\n              return [chainPair.parentChainId, chainPair.childChainId].includes(\n                chain.id\n              )\n            }\n\n            return (\n              isNetwork(chainPair.parentChainId).isTestnet === isTestnetMode\n            )\n          })\n          .map(async chainPair => {\n            // SCW address is tied to a specific network\n            // that's why we need to limit shown txs either to sent or received funds\n            // otherwise we'd display funds for a different network, which could be someone else's account\n            const isConnectedToParentChain =\n              chainPair.parentChainId === chain.id\n\n            const includeSentTxs = shouldIncludeSentTxs({\n              type,\n              isSmartContractWallet,\n              isConnectedToParentChain\n            })\n\n            const includeReceivedTxs = shouldIncludeReceivedTxs({\n              type,\n              isSmartContractWallet,\n              isConnectedToParentChain\n            })\n            try {\n              // early check for fetching teleport\n              if (\n                isTeleport({\n                  sourceChainId: chainPair.parentChainId,\n                  destinationChainId: chainPair.childChainId\n                })\n              ) {\n                // teleporter does not support withdrawals\n                if (type === 'withdrawals') return []\n\n                return await fetchTeleports({\n                  sender: includeSentTxs ? address : undefined,\n                  receiver: includeReceivedTxs ? address : undefined,\n                  parentChainProvider: getProviderForChainId(\n                    chainPair.parentChainId\n                  ),\n                  childChainProvider: getProviderForChainId(\n                    chainPair.childChainId\n                  ),\n                  pageNumber: 0,\n                  pageSize: 1000\n                })\n              }\n\n              // else, fetch deposits or withdrawals\n              return await fetcherFn({\n                sender: includeSentTxs ? address : undefined,\n                receiver: includeReceivedTxs ? address : undefined,\n                l1Provider: getProviderForChainId(chainPair.parentChainId),\n                l2Provider: getProviderForChainId(chainPair.childChainId),\n                pageNumber: 0,\n                pageSize: 1000\n              })\n            } catch {\n              addFailedChainPair(prevFailedChainPairs => {\n                if (!prevFailedChainPairs) {\n                  return [chainPair]\n                }\n                if (\n                  typeof prevFailedChainPairs.find(\n                    prevPair =>\n                      prevPair.parentChainId === chainPair.parentChainId &&\n                      prevPair.childChainId === chainPair.childChainId\n                  ) !== 'undefined'\n                ) {\n                  // already added\n                  return prevFailedChainPairs\n                }\n\n                return [...prevFailedChainPairs, chainPair]\n              })\n\n              return []\n            }\n          })\n      )\n    },\n    [address, isTestnetMode, addFailedChainPair, isSmartContractWallet, chain]\n  )\n\n  const shouldFetch = address && chain && !isLoadingAccountType\n\n  const {\n    data: depositsData,\n    error: depositsError,\n    isLoading: depositsLoading\n  } = useSWRImmutable(\n    shouldFetch ? ['tx_list', 'deposits', address, isTestnetMode] : null,\n    () => fetcher('deposits')\n  )\n\n  const {\n    data: withdrawalsData,\n    error: withdrawalsError,\n    isLoading: withdrawalsLoading\n  } = useSWRImmutable(\n    shouldFetch ? ['tx_list', 'withdrawals', address, isTestnetMode] : null,\n    () => fetcher('withdrawals')\n  )\n\n  const deposits = (depositsData || []).flat()\n\n  const withdrawals = (withdrawalsData || []).flat()\n\n  // merge deposits and withdrawals and sort them by date\n  const transactions = [\n    ...deposits,\n    ...withdrawals,\n    ...combinedCctpTransfers\n  ].flat()\n\n  return {\n    data: transactions,\n    loading: depositsLoading || withdrawalsLoading || cctpLoading,\n    error: depositsError ?? withdrawalsError,\n    failedChainPairs: failedChainPairs || []\n  }\n}\n\n/**\n * Maps additional info to previously fetches transaction history, starting with the earliest data.\n * This is done in small batches to safely meet RPC limits.\n */\nexport const useTransactionHistory = (\n  address: Address | undefined,\n  // TODO: look for a solution to this. It's used for now so that useEffect that handles pagination runs only a single instance.\n  { runFetcher = false } = {}\n): UseTransactionHistoryResult => {\n  const [isTestnetMode] = useIsTestnetMode()\n  const { chain } = useNetwork()\n  const { isSmartContractWallet, isLoading: isLoadingAccountType } =\n    useAccountType()\n  const { connector } = useAccount()\n  // max number of transactions mapped in parallel\n  const MAX_BATCH_SIZE = 3\n  // Pause fetching after specified number of days. User can resume fetching to get another batch.\n  const PAUSE_SIZE_DAYS = 30\n\n  const [fetching, setFetching] = useState(true)\n  const [pauseCount, setPauseCount] = useState(0)\n\n  const {\n    data,\n    loading: isLoadingTxsWithoutStatus,\n    error,\n    failedChainPairs\n  } = useTransactionHistoryWithoutStatuses(address)\n\n  const getCacheKey = useCallback(\n    (pageNumber: number, prevPageTxs: MergedTransaction[]) => {\n      if (prevPageTxs) {\n        if (prevPageTxs.length === 0) {\n          // THIS is the last page\n          return null\n        }\n      }\n\n      return address && !isLoadingTxsWithoutStatus && !isLoadingAccountType\n        ? (['complete_tx_list', address, pageNumber, data] as const)\n        : null\n    },\n    [address, isLoadingTxsWithoutStatus, data, isLoadingAccountType]\n  )\n\n  const depositsFromCache = useMemo(() => {\n    if (isLoadingAccountType || !chain) {\n      return []\n    }\n    return getDepositsWithoutStatusesFromCache(address)\n      .filter(tx => isNetwork(tx.parentChainId).isTestnet === isTestnetMode)\n      .filter(tx => {\n        const chainPairExists = getMultiChainFetchList().some(chainPair => {\n          return (\n            chainPair.parentChainId === tx.parentChainId &&\n            chainPair.childChainId === tx.childChainId\n          )\n        })\n\n        if (!chainPairExists) {\n          // chain pair doesn't exist in the fetch list but exists in cached transactions\n          // this could happen if user made a transfer with a custom Orbit chain and then removed the network\n          // we don't want to include these txs as it would cause tx history errors\n          return false\n        }\n\n        if (isSmartContractWallet) {\n          // only include txs for the connected network\n          return tx.parentChainId === chain.id\n        }\n        return true\n      })\n  }, [\n    address,\n    isTestnetMode,\n    isLoadingAccountType,\n    isSmartContractWallet,\n    chain\n  ])\n\n  const {\n    data: txPages,\n    error: txPagesError,\n    size: page,\n    setSize: setPage,\n    mutate: mutateTxPages,\n    isValidating,\n    isLoading: isLoadingFirstPage\n  } = useSWRInfinite(\n    getCacheKey,\n    ([, , _page, _data]) => {\n      // we get cached data and dedupe here because we need to ensure _data never mutates\n      // otherwise, if we added a new tx to cache, it would return a new reference and cause the SWR key to update, resulting in refetching\n      const dataWithCache = [..._data, ...depositsFromCache]\n\n      // duplicates may occur when txs are taken from the local storage\n      // we don't use Set because it wouldn't dedupe objects with different reference (we fetch them from different sources)\n      const dedupedTransactions = dedupeTransactions(dataWithCache).sort(\n        sortByTimestampDescending\n      )\n\n      const startIndex = _page * MAX_BATCH_SIZE\n      const endIndex = startIndex + MAX_BATCH_SIZE\n\n      return Promise.all(\n        dedupedTransactions\n          .slice(startIndex, endIndex)\n          .map(transformTransaction)\n      )\n    },\n    {\n      revalidateOnFocus: false,\n      revalidateOnReconnect: false,\n      revalidateIfStale: false,\n      shouldRetryOnError: false,\n      refreshWhenOffline: false,\n      refreshWhenHidden: false,\n      revalidateFirstPage: false,\n      keepPreviousData: true,\n      dedupingInterval: 1_000_000\n    }\n  )\n\n  // based on an example from SWR\n  // https://swr.vercel.app/examples/infinite-loading\n  const isLoadingMore =\n    page > 0 &&\n    typeof txPages !== 'undefined' &&\n    typeof txPages[page - 1] === 'undefined'\n\n  const completed =\n    !isLoadingFirstPage &&\n    typeof txPages !== 'undefined' &&\n    data.length === txPages.flat().length\n\n  // transfers initiated by the user during the current session\n  // we store it separately as there are a lot of side effects when mutating SWRInfinite\n  const { data: newTransactionsData, mutate: mutateNewTransactionsData } =\n    useSWRImmutable<MergedTransaction[]>(\n      address ? ['new_tx_list', address] : null\n    )\n\n  const transactions: MergedTransaction[] = useMemo(() => {\n    const txs = [...(newTransactionsData || []), ...(txPages || [])].flat()\n    // make sure txs are for the current account, we can have a mismatch when switching accounts for a bit\n    return txs.filter(tx =>\n      [tx.sender?.toLowerCase(), tx.destination?.toLowerCase()].includes(\n        address?.toLowerCase()\n      )\n    )\n  }, [newTransactionsData, txPages, address])\n\n  const addPendingTransaction = useCallback(\n    (tx: MergedTransaction) => {\n      if (!isTxPending(tx)) {\n        return\n      }\n\n      mutateNewTransactionsData(currentNewTransactions => {\n        if (!currentNewTransactions) {\n          return [tx]\n        }\n\n        return [tx, ...currentNewTransactions]\n      })\n    },\n    [mutateNewTransactionsData]\n  )\n\n  const updateCachedTransaction = useCallback(\n    (newTx: MergedTransaction) => {\n      // check if tx is a new transaction initiated by the user, and update it\n      const foundInNewTransactions =\n        typeof newTransactionsData?.find(oldTx =>\n          isSameTransaction(oldTx, newTx)\n        ) !== 'undefined'\n\n      if (foundInNewTransactions) {\n        // replace the existing tx with the new tx\n        mutateNewTransactionsData(txs =>\n          txs?.map(oldTx => {\n            return { ...(isSameTransaction(oldTx, newTx) ? newTx : oldTx) }\n          })\n        )\n        return\n      }\n\n      // tx not found in the new user initiated transaction list\n      // look in the paginated historical data\n      mutateTxPages(prevTxPages => {\n        if (!prevTxPages) {\n          return\n        }\n\n        let pageNumberToUpdate = 0\n\n        // search cache for the tx to update\n        while (\n          !prevTxPages[pageNumberToUpdate]?.find(oldTx =>\n            isSameTransaction(oldTx, newTx)\n          )\n        ) {\n          pageNumberToUpdate++\n\n          if (pageNumberToUpdate > prevTxPages.length) {\n            // tx not found\n            return prevTxPages\n          }\n        }\n\n        const oldPageToUpdate = prevTxPages[pageNumberToUpdate]\n\n        if (!oldPageToUpdate) {\n          return prevTxPages\n        }\n\n        // replace the old tx with the new tx\n        const updatedPage = oldPageToUpdate.map(oldTx => {\n          return isSameTransaction(oldTx, newTx) ? newTx : oldTx\n        })\n\n        // all old pages including the new updated page\n        const newTxPages = [\n          ...prevTxPages.slice(0, pageNumberToUpdate),\n          updatedPage,\n          ...prevTxPages.slice(pageNumberToUpdate + 1)\n        ]\n\n        return newTxPages\n      }, false)\n    },\n    [mutateNewTransactionsData, mutateTxPages, newTransactionsData]\n  )\n\n  const updatePendingTransaction = useCallback(\n    async (tx: MergedTransaction) => {\n      if (!isTxPending(tx)) {\n        // if not pending we don't need to check for status, we accept whatever status is passed in\n        updateCachedTransaction(tx)\n        return\n      }\n\n      if (isTeleport(tx) && isTeleporterTransaction(tx)) {\n        const updatedTeleportTransfer = await getUpdatedTeleportTransfer(tx)\n        updateCachedTransaction(updatedTeleportTransfer)\n        return\n      }\n\n      if (tx.isCctp) {\n        const updatedCctpTransfer = await getUpdatedCctpTransfer(tx)\n        updateCachedTransaction(updatedCctpTransfer)\n        return\n      }\n\n      // ETH or token withdrawal\n      if (tx.isWithdrawal) {\n        const updatedWithdrawal = await getUpdatedWithdrawal(tx)\n        updateCachedTransaction(updatedWithdrawal)\n        return\n      }\n\n      // ETH deposit\n      if (tx.assetType === AssetType.ETH) {\n        const updatedEthDeposit = await getUpdatedEthDeposit(tx)\n        updateCachedTransaction(updatedEthDeposit)\n        return\n      }\n\n      // Token deposit\n      const updatedTokenDeposit = await getUpdatedTokenDeposit(tx)\n      updateCachedTransaction(updatedTokenDeposit)\n    },\n    [updateCachedTransaction]\n  )\n\n  useEffect(() => {\n    if (!runFetcher || !connector) {\n      return\n    }\n    connector.on('change', e => {\n      // reset state on account change\n      if (e.account) {\n        setPage(1)\n        setPauseCount(0)\n        setFetching(true)\n      }\n    })\n  }, [connector, runFetcher, setPage])\n\n  useEffect(() => {\n    if (!txPages || !fetching || !runFetcher || isValidating) {\n      return\n    }\n\n    const firstPage = txPages[0]\n    const lastPage = txPages[txPages.length - 1]\n\n    if (!firstPage || !lastPage) {\n      return\n    }\n\n    // if a full page is fetched, we need to fetch more\n    const shouldFetchNextPage = lastPage.length === MAX_BATCH_SIZE\n\n    if (!shouldFetchNextPage) {\n      setFetching(false)\n      return\n    }\n\n    const newestTx = firstPage[0]\n    const oldestTx = lastPage[lastPage.length - 1]\n\n    if (!newestTx || !oldestTx) {\n      return\n    }\n\n    const oldestTxDaysAgo = dayjs().diff(dayjs(oldestTx.createdAt ?? 0), 'days')\n\n    const nextPauseThresholdDays = (pauseCount + 1) * PAUSE_SIZE_DAYS\n    const shouldPause = oldestTxDaysAgo >= nextPauseThresholdDays\n\n    if (shouldPause) {\n      pause()\n      setPauseCount(prevPauseCount => prevPauseCount + 1)\n      return\n    }\n\n    // make sure we don't over-fetch\n    if (page === txPages.length) {\n      setPage(prevPage => prevPage + 1)\n    }\n  }, [txPages, setPage, page, pauseCount, fetching, runFetcher, isValidating])\n\n  function pause() {\n    setFetching(false)\n  }\n\n  function resume() {\n    setFetching(true)\n    setPage(prevPage => prevPage + 1)\n  }\n\n  if (isLoadingTxsWithoutStatus || error) {\n    return {\n      transactions: [],\n      loading: isLoadingTxsWithoutStatus,\n      error,\n      failedChainPairs: [],\n      completed: true,\n      pause,\n      resume,\n      addPendingTransaction,\n      updatePendingTransaction\n    }\n  }\n\n  return {\n    transactions,\n    loading: isLoadingFirstPage || isLoadingMore,\n    completed,\n    error: txPagesError ?? error,\n    failedChainPairs,\n    pause,\n    resume,\n    addPendingTransaction,\n    updatePendingTransaction\n  }\n}\n","import { BigNumber } from 'ethers'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport { create } from 'zustand'\nimport useSWRImmutable from 'swr/immutable'\nimport { useInterval } from 'react-use'\n\nimport { getCctpUtils } from '@/token-bridge-sdk/cctp'\nimport {\n  ChainId,\n  getL1BlockTime,\n  getNetworkName,\n  isNetwork\n} from '../util/networks'\nimport { fetchCCTPDeposits, fetchCCTPWithdrawals } from '../util/cctp/fetchCCTP'\nimport { DepositStatus, MergedTransaction, WithdrawalStatus } from './app/state'\nimport { getStandardizedTimestamp } from './app/utils'\nimport { useAccount, useSigner } from 'wagmi'\nimport dayjs from 'dayjs'\nimport {\n  ChainDomain,\n  CompletedCCTPTransfer,\n  PendingCCTPTransfer,\n  Response\n} from '../pages/api/cctp/[type]'\nimport { CommonAddress } from '../util/CommonAddressUtils'\nimport { trackEvent } from '../util/AnalyticsUtils'\nimport { useAccountType } from '../hooks/useAccountType'\nimport { AssetType } from '../hooks/arbTokenBridge.types'\nimport { useTransactionHistory } from '../hooks/useTransactionHistory'\nimport { Address } from '../util/AddressUtils'\nimport { captureSentryErrorWithExtraData } from '../util/SentryUtils'\n\n// see https://developers.circle.com/stablecoin/docs/cctp-technical-reference#block-confirmations-for-attestations\n// Blocks need to be awaited on the L1 whether it's a deposit or a withdrawal\nexport function getBlockBeforeConfirmation(chainId: ChainId) {\n  const { isTestnet } = isNetwork(chainId)\n  // Required blocks are 65 (mainnet) and 5 (testnet), we're adding a buffer of ~30%\n  return isTestnet ? 7 : 85\n}\n\nexport type CCTPSupportedChainId =\n  | ChainId.Ethereum\n  | ChainId.Sepolia\n  | ChainId.ArbitrumOne\n  | ChainId.ArbitrumSepolia\n\nfunction getSourceChainIdFromSourceDomain(\n  sourceDomain: ChainDomain,\n  chainId: ChainId\n): CCTPSupportedChainId {\n  const { isTestnet } = isNetwork(chainId)\n\n  // Deposits\n  if (sourceDomain === ChainDomain.Ethereum) {\n    return isTestnet ? ChainId.Sepolia : ChainId.Ethereum\n  }\n\n  // Withdrawals\n  return isTestnet ? ChainId.ArbitrumSepolia : ChainId.ArbitrumOne\n}\n\nfunction getDestinationChainIdFromSourceDomain(\n  sourceDomain: ChainDomain,\n  chainId: ChainId\n): CCTPSupportedChainId {\n  const { isTestnet } = isNetwork(chainId)\n\n  // Deposits\n  if (sourceDomain === ChainDomain.Ethereum) {\n    return isTestnet ? ChainId.ArbitrumSepolia : ChainId.ArbitrumOne\n  }\n\n  // Withdrawals\n  return isTestnet ? ChainId.Sepolia : ChainId.Ethereum\n}\n\nexport function getUSDCAddresses(chainId: CCTPSupportedChainId) {\n  return {\n    [ChainId.Ethereum]: CommonAddress.Ethereum,\n    [ChainId.ArbitrumOne]: CommonAddress.ArbitrumOne,\n    [ChainId.Sepolia]: CommonAddress.Sepolia,\n    [ChainId.ArbitrumSepolia]: CommonAddress.ArbitrumSepolia\n  }[chainId]\n}\n\nexport function getUsdcTokenAddressFromSourceChainId(\n  sourceChainId: CCTPSupportedChainId\n) {\n  return getUSDCAddresses(sourceChainId).USDC\n}\n\nfunction parseTransferToMergedTransaction(\n  transfer: PendingCCTPTransfer | CompletedCCTPTransfer,\n  chainId: ChainId\n): MergedTransaction {\n  const { messageSent } = transfer\n  let status = 'Unconfirmed'\n  let resolvedAt = null\n  let receiveMessageTransactionHash = null\n\n  if ('messageReceived' in transfer) {\n    const { messageReceived } = transfer\n    status = 'Executed'\n    resolvedAt = getStandardizedTimestamp(\n      (parseInt(messageReceived.blockTimestamp, 10) * 1_000).toString()\n    )\n    receiveMessageTransactionHash = messageReceived.transactionHash\n  }\n  const sourceChainId = getSourceChainIdFromSourceDomain(\n    parseInt(messageSent.sourceDomain, 10),\n    chainId\n  )\n  const destinationChainId = getDestinationChainIdFromSourceDomain(\n    parseInt(messageSent.sourceDomain, 10),\n    chainId\n  )\n  const isDeposit =\n    parseInt(messageSent.sourceDomain, 10) === ChainDomain.Ethereum\n\n  return {\n    sender: messageSent.sender,\n    destination: messageSent.recipient,\n    direction: isDeposit ? 'deposit' : 'withdraw',\n    status,\n    createdAt: getStandardizedTimestamp(\n      (parseInt(messageSent.blockTimestamp, 10) * 1_000).toString()\n    ),\n    resolvedAt,\n    txId: messageSent.transactionHash,\n    asset: 'USDC',\n    assetType: AssetType.ERC20,\n    value: messageSent.amount,\n    uniqueId: null,\n    isWithdrawal: !isDeposit,\n    blockNum: parseInt(messageSent.blockNumber, 10),\n    tokenAddress: getUsdcTokenAddressFromSourceChainId(sourceChainId),\n    depositStatus: DepositStatus.CCTP_DEFAULT_STATE,\n    isCctp: true,\n    parentChainId: isDeposit ? sourceChainId : destinationChainId,\n    childChainId: isDeposit ? destinationChainId : sourceChainId,\n    sourceChainId,\n    destinationChainId,\n    cctpData: {\n      sourceChainId,\n      attestationHash: messageSent.attestationHash,\n      messageBytes: messageSent.message,\n      receiveMessageTransactionHash,\n      receiveMessageTimestamp: resolvedAt || null\n    }\n  }\n}\n\ntype ParsedResponse = {\n  pending: MergedTransaction[]\n  completed: MergedTransaction[]\n}\nfunction parseSWRResponse(\n  { pending, completed }: Response['data'],\n  chainId: ChainId\n): ParsedResponse {\n  return {\n    pending: pending.map(pendingDeposit =>\n      parseTransferToMergedTransaction(pendingDeposit, chainId)\n    ),\n    completed: completed.map(completedDeposit =>\n      parseTransferToMergedTransaction(completedDeposit, chainId)\n    )\n  }\n}\n\ntype fetchCctpParams = {\n  walletAddress?: string\n  l1ChainId: ChainId\n  pageNumber: number\n  pageSize: number\n  enabled: boolean\n}\nexport const useCCTPDeposits = ({\n  walletAddress,\n  l1ChainId,\n  pageNumber,\n  pageSize,\n  enabled\n}: fetchCctpParams) => {\n  return useSWRImmutable(\n    // Only fetch when we have walletAddress\n    () => {\n      if (!walletAddress || !enabled) {\n        return null\n      }\n\n      return [walletAddress, l1ChainId, pageNumber, pageSize, 'cctp-deposits']\n    },\n    ([_walletAddress, _l1ChainId, _pageNumber, _pageSize]) =>\n      fetchCCTPDeposits({\n        walletAddress: _walletAddress,\n        l1ChainId: _l1ChainId,\n        pageNumber: _pageNumber,\n        pageSize: _pageSize\n      })\n        .then(deposits => parseSWRResponse(deposits, _l1ChainId))\n        .then(deposits => {\n          return {\n            completed: deposits.completed,\n            pending: deposits.pending.map(tx => {\n              return {\n                ...tx,\n                status: isTransferConfirmed(tx) ? 'Confirmed' : tx.status\n              }\n            })\n          }\n        })\n  )\n}\n\nexport const useCCTPWithdrawals = ({\n  walletAddress,\n  l1ChainId,\n  pageNumber,\n  pageSize,\n  enabled\n}: fetchCctpParams) => {\n  return useSWRImmutable(\n    // Only fetch when we have walletAddress\n    () => {\n      if (!walletAddress || !enabled) {\n        return null\n      }\n\n      return [\n        walletAddress,\n        l1ChainId,\n        pageNumber,\n        pageSize,\n        'cctp-withdrawals'\n      ]\n    },\n    ([_walletAddress, _l1ChainId, _pageNumber, _pageSize]) =>\n      fetchCCTPWithdrawals({\n        walletAddress: _walletAddress,\n        l1ChainId: _l1ChainId,\n        pageNumber: _pageNumber,\n        pageSize: _pageSize\n      })\n        .then(withdrawals => parseSWRResponse(withdrawals, _l1ChainId))\n        .then(withdrawals => {\n          return {\n            completed: withdrawals.completed,\n            pending: withdrawals.pending.map(tx => {\n              return {\n                ...tx,\n                status: isTransferConfirmed(tx) ? 'Confirmed' : tx.status\n              }\n            })\n          }\n        })\n  )\n}\n\ntype PartialMergedTransaction = Partial<Omit<MergedTransaction, 'cctpData'>> & {\n  txId: MergedTransaction['txId']\n  cctpData?: Partial<MergedTransaction['cctpData']>\n}\ntype CctpStore = {\n  transfers: { [id: string]: MergedTransaction }\n  transfersIds: string[]\n  setTransfers: (transfers: {\n    pending: MergedTransaction[]\n    completed: MergedTransaction[]\n  }) => void\n  resetTransfers: () => void\n  updateTransfer: (transfer: PartialMergedTransaction) => void\n}\n\nconst useCctpStore = create<CctpStore>((set, get) => ({\n  transfers: {},\n  transfersIds: [],\n  resetTransfers: () => {\n    return set({\n      transfers: {},\n      transfersIds: []\n    })\n  },\n  setTransfers: transfers => {\n    const { pending, completed } = transfers\n\n    const previousTransfersMap = get().transfers\n\n    const transactions = [...pending, ...completed]\n      .concat(Object.values(previousTransfersMap))\n      .sort((t1, t2) => (dayjs(t2.createdAt).isAfter(t1.createdAt) ? 1 : -1))\n\n    const ids = new Set<string>()\n    const transfersMap = transactions.reduce(\n      (acc, transaction) => {\n        acc[transaction.txId] = transaction\n        ids.add(transaction.txId)\n        return acc\n      },\n      {} as {\n        [txId: string]: MergedTransaction\n      }\n    )\n\n    return set({\n      transfers: transfersMap,\n      transfersIds: [...ids]\n    })\n  },\n  updateTransfer: transfer => {\n    const prevTransfer = get().transfers[transfer.txId]\n    if (!prevTransfer) {\n      return\n    }\n\n    set(prevState => ({\n      transfers: {\n        ...prevState.transfers,\n        [transfer.txId]: {\n          ...prevTransfer,\n          ...transfer,\n          cctpData: {\n            ...prevTransfer.cctpData,\n            ...transfer.cctpData\n          }\n        } as MergedTransaction\n      }\n    }))\n  }\n}))\n\nexport function useCctpState() {\n  const {\n    transfersIds,\n    transfers,\n    resetTransfers,\n    setTransfers,\n    updateTransfer\n  } = useCctpStore()\n\n  const { pendingIds, completedIds, depositIds, withdrawalIds } =\n    useMemo(() => {\n      return transfersIds.reduce(\n        (acc, id) => {\n          const transfer = transfers[id]\n          if (!transfer) {\n            return acc\n          }\n\n          if (transfer.direction === 'deposit') {\n            acc.depositIds.push(id)\n          } else {\n            acc.withdrawalIds.push(id)\n          }\n          if (transfer.status !== 'Executed') {\n            acc.pendingIds.push(id)\n          } else {\n            acc.completedIds.push(id)\n          }\n\n          return acc\n        },\n        {\n          pendingIds: [] as string[],\n          completedIds: [] as string[],\n          depositIds: [] as string[],\n          withdrawalIds: [] as string[]\n        }\n      )\n    }, [transfersIds, transfers])\n\n  return {\n    resetTransfers,\n    setTransfers,\n    transfersIds,\n    transfers,\n    pendingIds,\n    completedIds,\n    depositIds,\n    withdrawalIds,\n    updateTransfer\n  }\n}\n\ntype useCctpFetchingParams = {\n  l1ChainId: ChainId\n  l2ChainId: ChainId\n  walletAddress: Address | undefined\n  pageSize: number\n  pageNumber: number\n  type: 'deposits' | 'withdrawals' | 'all'\n}\nexport function useCctpFetching({\n  l1ChainId,\n  l2ChainId,\n  walletAddress,\n  pageSize = 10,\n  pageNumber,\n  type\n}: useCctpFetchingParams) {\n  const { isEthereumMainnet: isL1Ethereum, isSepolia: isL1Sepolia } =\n    isNetwork(l1ChainId)\n  const {\n    isArbitrumOne: isL2ArbitrumOne,\n    isArbitrumSepolia: isL2ArbitrumSepolia\n  } = isNetwork(l2ChainId)\n  const isValidChainPair =\n    (isL1Ethereum && isL2ArbitrumOne) || (isL1Sepolia && isL2ArbitrumSepolia)\n\n  const {\n    data: deposits,\n    isLoading: isLoadingDeposits,\n    error: depositsError,\n    mutate: mutateDeposits\n  } = useCCTPDeposits({\n    l1ChainId,\n    walletAddress,\n    pageNumber,\n    pageSize,\n    enabled: type !== 'withdrawals' && isValidChainPair\n  })\n\n  const {\n    data: withdrawals,\n    isLoading: isLoadingWithdrawals,\n    error: withdrawalsError,\n    mutate: mutateWithdrawals\n  } = useCCTPWithdrawals({\n    l1ChainId,\n    walletAddress,\n    pageNumber,\n    pageSize,\n    enabled: type !== 'deposits' && isValidChainPair\n  })\n  const { setTransfers } = useCctpState()\n\n  useEffect(() => {\n    if (deposits) {\n      setTransfers(deposits)\n    }\n  }, [deposits, setTransfers])\n\n  useEffect(() => {\n    if (withdrawals) {\n      setTransfers(withdrawals)\n    }\n  }, [withdrawals, setTransfers])\n\n  const setPendingTransfer = useCallback(\n    (transfer: PartialMergedTransaction, type: 'deposit' | 'withdrawal') => {\n      const mutate = type === 'deposit' ? mutateDeposits : mutateWithdrawals\n      mutate(\n        {\n          pending: [transfer as MergedTransaction],\n          completed: []\n        },\n        {\n          populateCache(result: ParsedResponse, currentData) {\n            const transfer = result.pending[0]\n            if (!currentData || !transfer) {\n              return result\n            }\n            const index = currentData.pending.findIndex(\n              tx => tx.txId === transfer.txId\n            )\n            const existingTransfer = currentData.pending[index]\n            if (existingTransfer) {\n              const { cctpData, ...txData } = existingTransfer\n              const { cctpData: resultCctpData, ...resultTxData } = transfer\n\n              currentData.pending[index] = {\n                ...txData,\n                ...resultTxData,\n                cctpData: {\n                  ...cctpData,\n                  ...resultCctpData\n                }\n              }\n\n              return currentData\n            }\n\n            return {\n              pending: [...result.pending, ...currentData.pending],\n              completed: [...result.completed, ...currentData.completed]\n            }\n          },\n          revalidate: false\n        }\n      )\n    },\n    [mutateDeposits, mutateWithdrawals]\n  )\n\n  return {\n    deposits,\n    withdrawals,\n    isLoadingDeposits,\n    isLoadingWithdrawals,\n    depositsError,\n    withdrawalsError,\n    mutateDeposits,\n    mutateWithdrawals,\n    setPendingTransfer\n  }\n}\n\nexport function useClaimCctp(tx: MergedTransaction) {\n  const { address } = useAccount()\n  const { updatePendingTransaction } = useTransactionHistory(address)\n  const [isClaiming, setIsClaiming] = useState(false)\n  const { waitForAttestation, receiveMessage } = getCctpUtils({\n    sourceChainId: tx.cctpData?.sourceChainId\n  })\n  const { isSmartContractWallet } = useAccountType()\n\n  const { data: signer } = useSigner({\n    chainId: tx.destinationChainId\n  })\n\n  const claim = useCallback(async () => {\n    if (!tx.cctpData?.attestationHash || !tx.cctpData.messageBytes || !signer) {\n      return\n    }\n\n    setIsClaiming(true)\n    try {\n      const attestation = await waitForAttestation(tx.cctpData.attestationHash)\n      const receiveTx = await receiveMessage({\n        attestation,\n        messageBytes: tx.cctpData.messageBytes as Address,\n        signer\n      })\n      const receiveReceiptTx = await receiveTx.wait()\n\n      const resolvedAt =\n        receiveReceiptTx.status === 1\n          ? getStandardizedTimestamp(BigNumber.from(Date.now()).toString())\n          : null\n      await updatePendingTransaction({\n        ...tx,\n        resolvedAt,\n        depositStatus: tx.isWithdrawal ? undefined : DepositStatus.L2_SUCCESS,\n        status: WithdrawalStatus.EXECUTED,\n        cctpData: {\n          ...tx.cctpData,\n          receiveMessageTimestamp: resolvedAt,\n          receiveMessageTransactionHash:\n            receiveReceiptTx.status === 1\n              ? (receiveReceiptTx.transactionHash as Address)\n              : null\n        }\n      })\n\n      const targetChainId = getTargetChainIdFromSourceChain(tx)\n      const currentNetworkName = getNetworkName(targetChainId)\n      const { isEthereumMainnetOrTestnet } = isNetwork(targetChainId)\n\n      trackEvent(\n        isEthereumMainnetOrTestnet ? 'CCTP Withdrawal' : 'CCTP Deposit',\n        {\n          accountType: isSmartContractWallet ? 'Smart Contract' : 'EOA',\n          network: currentNetworkName,\n          amount: Number(tx.value),\n          complete: true\n        }\n      )\n\n      if (receiveReceiptTx.status === 0) {\n        throw new Error('Transaction failed')\n      }\n    } catch (error) {\n      captureSentryErrorWithExtraData({\n        error,\n        originFunction: 'useClaimCctp claim'\n      })\n      throw error\n    } finally {\n      setIsClaiming(false)\n    }\n  }, [\n    isSmartContractWallet,\n    receiveMessage,\n    signer,\n    tx,\n    updatePendingTransaction,\n    waitForAttestation\n  ])\n\n  return {\n    isClaiming,\n    claim\n  }\n}\n\nexport function getTargetChainIdFromSourceChain(tx: MergedTransaction) {\n  if (!tx.cctpData?.sourceChainId) {\n    return ChainId.Ethereum\n  }\n\n  return {\n    [ChainId.Ethereum]: ChainId.ArbitrumOne,\n    [ChainId.Sepolia]: ChainId.ArbitrumSepolia,\n    [ChainId.ArbitrumOne]: ChainId.Ethereum,\n    [ChainId.ArbitrumSepolia]: ChainId.Sepolia\n  }[tx.cctpData.sourceChainId]\n}\n\nfunction getConfirmedDate(tx: MergedTransaction) {\n  const requiredL1BlocksBeforeConfirmation = getBlockBeforeConfirmation(\n    tx.parentChainId\n  )\n  const blockTime = getL1BlockTime(tx.parentChainId)\n\n  return dayjs(tx.createdAt).add(\n    requiredL1BlocksBeforeConfirmation * blockTime,\n    'seconds'\n  )\n}\n\nexport function isTransferConfirmed(tx: MergedTransaction) {\n  return dayjs().isAfter(getConfirmedDate(tx))\n}\n\nexport function useRemainingTimeCctp(tx: MergedTransaction) {\n  const [estimatedMinutesLeftCctp, setEstimatedMinutesLeftCctp] = useState<\n    number | null\n  >(null)\n  const [canBeClaimedDate, setCanBeClaimedDate] = useState<dayjs.Dayjs>()\n  const [isConfirmed, setIsConfirmed] = useState(\n    tx.status === 'Confirmed' || tx.status === 'Executed'\n  )\n\n  useEffect(() => {\n    if (tx.status === 'Failure') {\n      setEstimatedMinutesLeftCctp(null)\n    }\n  }, [tx.status, setEstimatedMinutesLeftCctp])\n\n  useEffect(() => {\n    if (!tx.createdAt || tx.status === 'Failure') {\n      return\n    }\n\n    setCanBeClaimedDate(getConfirmedDate(tx))\n  }, [tx])\n\n  useInterval(() => {\n    if (!canBeClaimedDate) {\n      return\n    }\n\n    if (isTransferConfirmed(tx)) {\n      setIsConfirmed(true)\n      setEstimatedMinutesLeftCctp(0)\n    } else {\n      setEstimatedMinutesLeftCctp(canBeClaimedDate.diff(dayjs(), 'minutes'))\n    }\n  }, 2000)\n\n  return {\n    estimatedMinutesLeftCctp,\n    isConfirmed\n  }\n}\n","import dayjs from 'dayjs'\nimport { isTeleport } from '@/token-bridge-sdk/teleport'\n\nimport { MergedTransaction } from '../state/app/state'\nimport { useRemainingTimeCctp } from '../state/cctpState'\nimport {\n  getBaseChainIdByChainId,\n  getConfirmPeriodBlocks,\n  getL1BlockTime,\n  isNetwork\n} from '../util/networks'\n\nconst DEPOSIT_TIME_MINUTES = {\n  mainnet: 15,\n  testnet: 10\n}\n\nconst TRANSFER_TIME_MINUTES_CCTP = {\n  mainnet: 15,\n  testnet: 1\n}\n\n/**\n * TODO: An assumption should be 15 minutes for mainnet orbit deposits\n * We should default to 15 and allow custom deposit times in orbit config (e.g. Xai should be 1 min)\n * For now set 5 minutes for mainnet, 1 minute for testnet\n */\nconst DEPOSIT_TIME_MINUTES_ORBIT = {\n  mainnet: 5,\n  testnet: 1\n}\n\n/**\n * Buffer for after a node is confirmable but isn't yet confirmed.\n * A rollup block (RBlock) typically gets asserted every 30-60 minutes.\n */\nconst CONFIRMATION_BUFFER_MINUTES = 60\nconst SECONDS_IN_MIN = 60\n\ntype UseTransferDurationResult = {\n  approximateDurationInMinutes: number\n  estimatedMinutesLeft: number | null\n}\n\n/**\n * Calculates the transfer duration in minutes for a given transaction.\n *\n * @param {MergedTransaction} tx - The transaction object.\n * @returns {UseTransferDurationResult} - An object containing the total duration, first leg duration, and remaining time.\n * @property {number} approximateDurationInMinutes - The total duration of the transfer in minutes.\n * @property {number | null} estimatedMinutesLeft - The remaining time for the transfer in minutes, or null if calculating or unavailable.\n */\nexport const useTransferDuration = (\n  tx: MergedTransaction\n): UseTransferDurationResult => {\n  const { estimatedMinutesLeftCctp } = useRemainingTimeCctp(tx)\n\n  const { sourceChainId, destinationChainId, isCctp, childChainId } = tx\n  const { isTestnet, isOrbitChain } = isNetwork(childChainId)\n\n  const standardDepositDuration = getStandardDepositDuration(isTestnet)\n  const orbitDepositDuration = getOrbitDepositDuration(isTestnet)\n\n  if (isTeleport({ sourceChainId, destinationChainId })) {\n    // Deposit only\n    return {\n      approximateDurationInMinutes:\n        standardDepositDuration + orbitDepositDuration,\n      estimatedMinutesLeft: getRemainingMinutes({\n        createdAt: tx.createdAt,\n        totalDuration: standardDepositDuration + orbitDepositDuration\n      })\n    }\n  }\n\n  if (isCctp) {\n    const cctpTransferDuration = getCctpTransferDuration(isTestnet)\n    return {\n      approximateDurationInMinutes: cctpTransferDuration,\n      estimatedMinutesLeft: estimatedMinutesLeftCctp\n    }\n  }\n\n  if (tx.isWithdrawal) {\n    const withdrawalDuration = getWithdrawalDuration(tx)\n    return {\n      approximateDurationInMinutes: withdrawalDuration,\n      estimatedMinutesLeft: getRemainingMinutes({\n        createdAt: tx.createdAt,\n        totalDuration: withdrawalDuration\n      })\n    }\n  }\n\n  if (isOrbitChain) {\n    return {\n      approximateDurationInMinutes: orbitDepositDuration,\n      estimatedMinutesLeft: getRemainingMinutes({\n        createdAt: tx.createdAt,\n        totalDuration: orbitDepositDuration\n      })\n    }\n  }\n\n  return {\n    approximateDurationInMinutes: standardDepositDuration,\n    estimatedMinutesLeft: getRemainingMinutes({\n      createdAt: tx.createdAt,\n      totalDuration: standardDepositDuration\n    })\n  }\n}\n\nexport function getWithdrawalConfirmationDate({\n  createdAt,\n  withdrawalFromChainId\n}: {\n  createdAt: number | null\n  withdrawalFromChainId: number\n}) {\n  // For new txs createdAt won't be defined yet, we default to the current time in that case\n  const createdAtDate = createdAt ? dayjs(createdAt) : dayjs()\n\n  const baseChainId = getBaseChainIdByChainId({\n    chainId: withdrawalFromChainId\n  })\n  // the block time is always base chain's block time regardless of withdrawing from L3 to L2 or from L2 to L1\n  // and similarly, the confirm period blocks is always the number of blocks on the base chain\n  const confirmationSeconds =\n    getL1BlockTime(baseChainId) *\n      getConfirmPeriodBlocks(withdrawalFromChainId) +\n    CONFIRMATION_BUFFER_MINUTES * SECONDS_IN_MIN\n  return createdAtDate.add(confirmationSeconds, 'second')\n}\n\nfunction getWithdrawalDuration(tx: MergedTransaction) {\n  const confirmationDate = getWithdrawalConfirmationDate({\n    createdAt: tx.createdAt,\n    withdrawalFromChainId: tx.sourceChainId\n  })\n  return Math.max(confirmationDate.diff(tx.createdAt, 'minute'), 0)\n}\n\nexport function getStandardDepositDuration(testnet: boolean) {\n  return testnet ? DEPOSIT_TIME_MINUTES.testnet : DEPOSIT_TIME_MINUTES.mainnet\n}\n\nexport function getOrbitDepositDuration(testnet: boolean) {\n  return testnet\n    ? DEPOSIT_TIME_MINUTES_ORBIT.testnet\n    : DEPOSIT_TIME_MINUTES_ORBIT.mainnet\n}\n\nexport function getCctpTransferDuration(testnet: boolean) {\n  return testnet\n    ? TRANSFER_TIME_MINUTES_CCTP.testnet\n    : TRANSFER_TIME_MINUTES_CCTP.mainnet\n}\n\nfunction getRemainingMinutes({\n  createdAt,\n  totalDuration\n}: {\n  createdAt: number | null\n  totalDuration: number\n}): number {\n  // For new txs createdAt won't be defined yet, we default to the current time in that case\n  const createdAtDate = createdAt ? dayjs(createdAt) : dayjs()\n  const estimatedCompletionTime = createdAtDate.add(totalDuration, 'minutes')\n\n  return Math.max(estimatedCompletionTime.diff(dayjs(), 'minute'), 0)\n}\n\nexport function minutesToHumanReadableTime(minutes: number | null) {\n  if (minutes === null) {\n    return 'Calculating...'\n  }\n  if (minutes <= 0) {\n    return 'Less than a minute'\n  }\n  // will convert number to '20 minutes', '1 hour', '7 days', etc\n  return dayjs().add(minutes, 'minutes').fromNow(true)\n}\n","import { useState } from 'react'\nimport { Tab } from '@headlessui/react'\nimport dayjs from 'dayjs'\nimport Image from 'next/image'\n\nimport { Dialog, UseDialogProps } from '../common/Dialog'\nimport { Checkbox } from '../common/Checkbox'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { TabButton } from '../common/Tab'\nimport { BridgesTable } from '../common/BridgesTable'\nimport { useAppState } from '../../state'\nimport { trackEvent } from '../../util/AnalyticsUtils'\nimport { getNetworkName, isNetwork } from '../../util/networks'\nimport { getFastBridges } from '../../util/fastBridges'\nimport { CONFIRMATION_PERIOD_ARTICLE_LINK } from '../../constants'\nimport { useNativeCurrency } from '../../hooks/useNativeCurrency'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { SecurityGuaranteed, SecurityNotGuaranteed } from './SecurityLabels'\nimport { getWithdrawalConfirmationDate } from '../../hooks/useTransferDuration'\n\nfunction getCalendarUrl(\n  withdrawalDate: dayjs.Dayjs,\n  amount: string,\n  token: string,\n  networkName: string\n) {\n  const title = `${amount} ${token} Withdrawal from ${networkName}`\n\n  // Google event date format: YYYYMMDDTHHmmss/YYYYMMDDTHHmmss\n  const parsedWithdrawalDate = withdrawalDate.format(\n    'YYYYMMDD[T]HHmm[00%2F]YYYYMMDD[T]HHmm[00]'\n  )\n\n  return `https://calendar.google.com/calendar/event?action=TEMPLATE&text=${title}&dates=${parsedWithdrawalDate}&details=Withdrawn+on+%3Ca%20href=%22https://bridge.arbitrum.io%22%3Ehttps://bridge.arbitrum.io%3C/a%3E`\n}\n\nexport function WithdrawalConfirmationDialog(\n  props: UseDialogProps & { amount: string }\n) {\n  const [networks] = useNetworks()\n  const { childChain, childChainProvider, parentChain } =\n    useNetworksRelationship(networks)\n\n  const [selectedIndex, setSelectedIndex] = useState(0)\n\n  const destinationNetworkName = getNetworkName(parentChain.id)\n\n  const {\n    app: { selectedToken }\n  } = useAppState()\n\n  const nativeCurrency = useNativeCurrency({\n    provider: childChainProvider\n  })\n\n  const fastBridges = getFastBridges({\n    from: childChain.id,\n    to: parentChain.id,\n    tokenSymbol: selectedToken?.symbol ?? nativeCurrency.symbol,\n    amount: props.amount\n  })\n\n  const [checkbox1Checked, setCheckbox1Checked] = useState(false)\n  const [checkbox2Checked, setCheckbox2Checked] = useState(false)\n\n  const { isArbitrumOne } = isNetwork(childChain.id)\n  const bothCheckboxesChecked = checkbox1Checked && checkbox2Checked\n\n  const estimatedConfirmationDate = getWithdrawalConfirmationDate({\n    createdAt: null,\n    withdrawalFromChainId: childChain.id\n  })\n\n  const confirmationPeriod = estimatedConfirmationDate.fromNow(true)\n\n  const isFastBridgesTab = isArbitrumOne && selectedIndex === 0\n\n  function closeWithReset(confirmed: boolean) {\n    props.onClose(confirmed)\n\n    setCheckbox1Checked(false)\n    setCheckbox2Checked(false)\n    setSelectedIndex(0)\n  }\n\n  return (\n    <Dialog\n      {...props}\n      onClose={closeWithReset}\n      className=\"max-w-[700px]\"\n      title={`Move funds to ${destinationNetworkName}`}\n      actionButtonProps={{\n        disabled: !bothCheckboxesChecked,\n        hidden: isFastBridgesTab\n      }}\n    >\n      <div className=\"flex flex-col pt-4\">\n        <Tab.Group onChange={setSelectedIndex}>\n          <Tab.List className=\"border-b border-gray-dark\">\n            {isArbitrumOne && <TabButton>Third party bridge</TabButton>}\n            <TabButton>Arbitrums bridge</TabButton>\n          </Tab.List>\n\n          {isArbitrumOne && (\n            <Tab.Panel className=\"flex flex-col space-y-4 py-4\">\n              <div className=\"flex flex-col space-y-4\">\n                <p className=\"font-light\">\n                  Get your funds in under 30 min with a fast exit bridge.\n                </p>\n              </div>\n\n              <BridgesTable bridgeList={fastBridges} />\n              <SecurityNotGuaranteed />\n            </Tab.Panel>\n          )}\n\n          <Tab.Panel className=\"flex flex-col justify-between\">\n            <div className=\"flex flex-col space-y-4 py-4\">\n              <div className=\"flex flex-col space-y-4\">\n                <p className=\"font-light\">\n                  Get your funds in ~{confirmationPeriod} and pay a small fee\n                  twice.{' '}\n                  <ExternalLink\n                    href={CONFIRMATION_PERIOD_ARTICLE_LINK}\n                    className=\"underline\"\n                  >\n                    Learn more.\n                  </ExternalLink>\n                </p>\n              </div>\n\n              <div className=\"flex flex-col space-y-4\">\n                <Checkbox\n                  label={\n                    <span className=\"font-light\">\n                      I understand that it will take ~{confirmationPeriod}{' '}\n                      before I can claim my funds on {destinationNetworkName}\n                    </span>\n                  }\n                  checked={checkbox1Checked}\n                  onChange={setCheckbox1Checked}\n                />\n\n                <Checkbox\n                  label={\n                    <span className=\"font-light\">\n                      I understand that after claiming my funds, Ill have to\n                      send{' '}\n                      <span className=\"font-medium\">\n                        another transaction on {destinationNetworkName}\n                      </span>{' '}\n                      and pay another {destinationNetworkName} fee\n                    </span>\n                  }\n                  checked={checkbox2Checked}\n                  onChange={setCheckbox2Checked}\n                />\n\n                <div className=\"flex\">\n                  <SecurityGuaranteed />\n                </div>\n\n                <div className=\"flex flex-col justify-center space-y-2.5 rounded border border-gray-dark bg-black/80 py-4 align-middle text-white\">\n                  <p className=\"text-center text-sm font-light\">\n                    Set calendar reminder for {confirmationPeriod} from now\n                  </p>\n                  <div className=\"flex justify-center\">\n                    <ExternalLink\n                      href={getCalendarUrl(\n                        estimatedConfirmationDate,\n                        props.amount,\n                        selectedToken?.symbol || nativeCurrency.symbol,\n                        getNetworkName(childChain.id)\n                      )}\n                      onClick={() => trackEvent('Add to Google Calendar Click')}\n                      className=\"arb-hover flex items-center space-x-2 rounded border border-white p-2 text-sm\"\n                    >\n                      <Image\n                        src=\"/images/GoogleCalendar.svg\"\n                        alt=\"Google Calendar Icon\"\n                        width={24}\n                        height={24}\n                      />\n                      <span>Add to Google calendar</span>\n                    </ExternalLink>\n                  </div>\n                  <p className=\"text-center text-xs font-light\">\n                    We dont store any email data\n                  </p>\n                </div>\n              </div>\n            </div>\n          </Tab.Panel>\n        </Tab.Group>\n      </div>\n    </Dialog>\n  )\n}\n","import { BigNumber, Signer } from 'ethers'\nimport useSWR from 'swr'\nimport { useSigner } from 'wagmi'\n\nimport { DepositGasEstimates, GasEstimates } from '../arbTokenBridge.types'\nimport { BridgeTransferStarterFactory } from '@/token-bridge-sdk/BridgeTransferStarterFactory'\nimport { getProviderForChainId } from '@/token-bridge-sdk/utils'\n\nasync function fetcher([\n  signer,\n  sourceChainId,\n  destinationChainId,\n  sourceChainErc20Address,\n  destinationChainErc20Address,\n  amount\n]: [\n  signer: Signer,\n  sourceChainId: number,\n  destinationChainId: number,\n  sourceChainErc20Address: string | undefined,\n  destinationChainErc20Address: string | undefined,\n  amount: BigNumber\n]): Promise<GasEstimates | DepositGasEstimates | undefined> {\n  // use chainIds to initialize the bridgeTransferStarter to save RPC calls\n  const bridgeTransferStarter = BridgeTransferStarterFactory.create({\n    sourceChainId,\n    sourceChainErc20Address,\n    destinationChainId,\n    destinationChainErc20Address\n  })\n\n  return await bridgeTransferStarter.transferEstimateGas({\n    amount,\n    signer\n  })\n}\n\nexport function useGasEstimates({\n  walletAddress,\n  sourceChainId,\n  destinationChainId,\n  sourceChainErc20Address,\n  destinationChainErc20Address,\n  amount,\n  sourceChainBalance\n}: {\n  walletAddress?: string\n  sourceChainId: number\n  destinationChainId: number\n  sourceChainErc20Address?: string\n  destinationChainErc20Address?: string\n  amount: BigNumber\n  sourceChainBalance: BigNumber | null\n}): {\n  gasEstimates: GasEstimates | DepositGasEstimates | undefined\n  error: any\n} {\n  const { data: signer } = useSigner()\n\n  const { data: gasEstimates, error } = useSWR(\n    signer && sourceChainBalance && sourceChainBalance.gte(amount)\n      ? ([\n          sourceChainId,\n          destinationChainId,\n          sourceChainErc20Address,\n          destinationChainErc20Address,\n          amount.toString(), // BigNumber is not serializable\n          walletAddress,\n          'gasEstimates'\n        ] as const)\n      : null,\n    ([\n      _sourceChainId,\n      _destinationChainId,\n      _sourceChainErc20Address,\n      _destinationChainErc20Address,\n      _amount,\n      _walletAddress\n    ]) => {\n      const sourceProvider = getProviderForChainId(_sourceChainId)\n      const _signer = sourceProvider.getSigner(_walletAddress)\n\n      return fetcher([\n        _signer,\n        _sourceChainId,\n        _destinationChainId,\n        _sourceChainErc20Address,\n        _destinationChainErc20Address,\n        BigNumber.from(_amount)\n      ])\n    },\n    {\n      refreshInterval: 30_000,\n      shouldRetryOnError: true,\n      errorRetryCount: 2,\n      errorRetryInterval: 5_000\n    }\n  )\n\n  return { gasEstimates, error }\n}\n","import { useAppState } from '../../state'\nimport { useNativeCurrency } from '../useNativeCurrency'\nimport { useNetworksRelationship } from '../useNetworksRelationship'\nimport { useNetworks } from '../useNetworks'\n\nexport function useSelectedTokenDecimals() {\n  const {\n    app: { selectedToken }\n  } = useAppState()\n  const [networks] = useNetworks()\n  const { childChainProvider } = useNetworksRelationship(networks)\n\n  const nativeCurrency = useNativeCurrency({ provider: childChainProvider })\n\n  return selectedToken ? selectedToken.decimals : nativeCurrency.decimals\n}\n","import { constants, utils } from 'ethers'\nimport { useAccount } from 'wagmi'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport { useDebounce } from '@uidotdev/usehooks'\n\nimport { useAppState } from '../../state'\nimport { useGasPrice } from '../useGasPrice'\nimport {\n  isTokenArbitrumSepoliaNativeUSDC,\n  isTokenArbitrumOneNativeUSDC\n} from '../../util/TokenUtils'\nimport { useNetworksRelationship } from '../useNetworksRelationship'\nimport { useNetworks } from '../useNetworks'\nimport { useArbQueryParams } from '../useArbQueryParams'\nimport { useGasEstimates } from './useGasEstimates'\nimport { useBalanceOnSourceChain } from '../useBalanceOnSourceChain'\nimport { DepositGasEstimates } from '../arbTokenBridge.types'\nimport { truncateExtraDecimals } from '../../util/NumberUtils'\nimport { useSelectedTokenDecimals } from './useSelectedTokenDecimals'\nimport { percentIncrease } from '@/token-bridge-sdk/utils'\nimport { DEFAULT_GAS_PRICE_PERCENT_INCREASE } from '@/token-bridge-sdk/Erc20DepositStarter'\n\nconst INITIAL_GAS_SUMMARY_RESULT: UseGasSummaryResult = {\n  status: 'loading',\n  estimatedParentChainGasFees: undefined,\n  estimatedChildChainGasFees: undefined\n}\n\nexport type GasEstimationStatus =\n  | 'loading'\n  | 'success'\n  | 'error'\n  | 'unavailable'\n  | 'insufficientBalance'\n\nexport type UseGasSummaryResult = {\n  status: GasEstimationStatus\n  estimatedParentChainGasFees: number | undefined\n  estimatedChildChainGasFees: number | undefined\n}\n\nexport function useGasSummary(): UseGasSummaryResult {\n  const {\n    app: { selectedToken: token }\n  } = useAppState()\n  const [networks] = useNetworks()\n  const { childChainProvider, parentChainProvider, isDepositMode } =\n    useNetworksRelationship(networks)\n  const { address: walletAddress } = useAccount()\n\n  const [{ amount }] = useArbQueryParams()\n  const debouncedAmount = useDebounce(amount, 300)\n  const [gasSummary, setGasSummary] = useState<UseGasSummaryResult>(\n    INITIAL_GAS_SUMMARY_RESULT\n  )\n  const decimals = useSelectedTokenDecimals()\n\n  const amountBigNumber = useMemo(() => {\n    if (isNaN(Number(debouncedAmount))) {\n      return constants.Zero\n    }\n    const amountSafe = debouncedAmount || '0'\n\n    const correctDecimalsAmount = truncateExtraDecimals(amountSafe, decimals)\n\n    return utils.parseUnits(correctDecimalsAmount, decimals)\n  }, [debouncedAmount, decimals])\n\n  const parentChainGasPrice = useGasPrice({ provider: parentChainProvider })\n  const childChainGasPrice = useGasPrice({ provider: childChainProvider })\n\n  const setGasSummaryStatus = useCallback(\n    (status: GasEstimationStatus) =>\n      setGasSummary(previousGasSummary => ({\n        ...previousGasSummary,\n        status\n      })),\n    []\n  )\n\n  const balance = useBalanceOnSourceChain(token)\n\n  const { gasEstimates: estimateGasResult, error: gasEstimatesError } =\n    useGasEstimates({\n      walletAddress,\n      sourceChainId: networks.sourceChain.id,\n      destinationChainId: networks.destinationChain.id,\n      amount: amountBigNumber,\n      sourceChainErc20Address: isDepositMode\n        ? token?.address\n        : token?.l2Address,\n      destinationChainErc20Address: isDepositMode\n        ? token?.l2Address\n        : token?.address,\n      sourceChainBalance: balance\n    })\n\n  const estimatedParentChainGasFees = useMemo(() => {\n    if (!estimateGasResult?.estimatedParentChainGas) {\n      return\n    }\n    return parseFloat(\n      utils.formatEther(\n        estimateGasResult.estimatedParentChainGas.mul(parentChainGasPrice)\n      )\n    )\n  }, [estimateGasResult, parentChainGasPrice])\n\n  const estimatedChildChainGasFees = useMemo(() => {\n    if (!estimateGasResult) {\n      return\n    }\n    if (\n      isDepositMode &&\n      'estimatedChildChainSubmissionCost' in estimateGasResult\n    ) {\n      return parseFloat(\n        utils.formatEther(\n          estimateGasResult.estimatedChildChainGas\n            .mul(\n              percentIncrease(\n                childChainGasPrice,\n                DEFAULT_GAS_PRICE_PERCENT_INCREASE\n              )\n            )\n            .add(\n              (estimateGasResult as DepositGasEstimates)\n                .estimatedChildChainSubmissionCost\n            )\n        )\n      )\n    }\n    return parseFloat(\n      utils.formatEther(\n        estimateGasResult.estimatedChildChainGas.mul(childChainGasPrice)\n      )\n    )\n  }, [childChainGasPrice, estimateGasResult, isDepositMode])\n\n  useEffect(() => {\n    if (\n      !isDepositMode &&\n      (isTokenArbitrumOneNativeUSDC(token?.address) ||\n        isTokenArbitrumSepoliaNativeUSDC(token?.address))\n    ) {\n      setGasSummaryStatus('unavailable')\n      return\n    }\n\n    if (!balance) {\n      setGasSummaryStatus('loading')\n      return\n    }\n\n    // If user has input an amount over their balance, don't estimate gas\n    if (amountBigNumber.gt(balance)) {\n      setGasSummaryStatus('insufficientBalance')\n      return\n    }\n\n    if (\n      typeof estimatedParentChainGasFees === 'undefined' ||\n      typeof estimatedChildChainGasFees === 'undefined'\n    ) {\n      setGasSummaryStatus('loading')\n      return\n    }\n\n    if (gasEstimatesError) {\n      setGasSummaryStatus('error')\n      return\n    }\n\n    setGasSummary({\n      status: 'success',\n      estimatedParentChainGasFees,\n      estimatedChildChainGasFees\n    })\n  }, [\n    walletAddress,\n    balance,\n    token,\n    childChainProvider,\n    setGasSummaryStatus,\n    isDepositMode,\n    estimatedParentChainGasFees,\n    estimatedChildChainGasFees,\n    gasEstimatesError,\n    amountBigNumber\n  ])\n\n  return gasSummary\n}\n","import { useMemo } from 'react'\nimport { ERC20BridgeToken } from '../../hooks/arbTokenBridge.types'\nimport {\n  NativeCurrencyErc20,\n  useNativeCurrency\n} from '../../hooks/useNativeCurrency'\nimport { isTokenNativeUSDC, sanitizeTokenSymbol } from '../../util/TokenUtils'\nimport { ExternalLink } from './ExternalLink'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { captureSentryErrorWithExtraData } from '../../util/SentryUtils'\n\nconst createBlockExplorerUrlForToken = ({\n  explorerLink,\n  tokenAddress\n}: {\n  explorerLink: string | undefined\n  tokenAddress: string | undefined\n}): string | undefined => {\n  if (!explorerLink) {\n    return undefined\n  }\n  if (!tokenAddress) {\n    return undefined\n  }\n  try {\n    const url = new URL(explorerLink)\n    url.pathname += `token/${tokenAddress}`\n    return url.toString()\n  } catch (error) {\n    captureSentryErrorWithExtraData({\n      error,\n      originFunction: 'createBlockExplorerUrlForToken'\n    })\n    return undefined\n  }\n}\n\nconst isERC20BridgeToken = (\n  token: ERC20BridgeToken | NativeCurrencyErc20 | null\n): token is ERC20BridgeToken =>\n  token !== null && !token.hasOwnProperty('isCustom')\n\nexport function TokenSymbolWithExplorerLink({\n  token,\n  tokenSymbolOverride,\n  isParentChain\n}: {\n  token: ERC20BridgeToken | NativeCurrencyErc20 | null\n  tokenSymbolOverride?: string\n  isParentChain: boolean\n}) {\n  const [networks] = useNetworks()\n  const { childChain, childChainProvider, parentChain } =\n    useNetworksRelationship(networks)\n  const chain = isParentChain ? parentChain : childChain\n  // always use native currency of child chain\n  const nativeCurrency = useNativeCurrency({\n    provider: childChainProvider\n  })\n\n  const symbol = useMemo(() => {\n    if (!token) {\n      return nativeCurrency.symbol\n    }\n\n    return (\n      tokenSymbolOverride ??\n      sanitizeTokenSymbol(token.symbol, {\n        erc20L1Address: token.address,\n        chainId: chain.id\n      })\n    )\n  }, [token, tokenSymbolOverride, chain, nativeCurrency.symbol])\n\n  /* we don't want to show explorer link for native currency (either ETH or custom token), or USDC because user can bridge USDC to USDC.e or native USDC, vice versa */\n  if (\n    token === null ||\n    !isERC20BridgeToken(token) ||\n    isTokenNativeUSDC(token.address)\n  ) {\n    return <span>{symbol}</span>\n  }\n\n  const href = createBlockExplorerUrlForToken({\n    explorerLink: chain.blockExplorers\n      ? chain.blockExplorers.default.url\n      : undefined,\n    tokenAddress: isParentChain ? token.address : token.l2Address\n  })\n\n  return (\n    <ExternalLink className=\"arb-hover underline\" href={href}>\n      <span>{symbol}</span>\n    </ExternalLink>\n  )\n}\n","import { NativeCurrency } from '../../hooks/useNativeCurrency'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { useAppState } from '../../state'\nimport { isNetwork } from '../../util/networks'\nimport { useETHPrice } from '../../hooks/useETHPrice'\nimport { formatUSD } from '../../util/NumberUtils'\n\nexport function useIsBridgingEth(childChainNativeCurrency: NativeCurrency) {\n  const {\n    app: { selectedToken }\n  } = useAppState()\n  const isBridgingEth =\n    selectedToken === null && !childChainNativeCurrency.isCustom\n  return isBridgingEth\n}\n\nexport function NativeCurrencyPrice({\n  amount,\n  showBrackets = false\n}: {\n  amount: number | undefined\n  showBrackets?: boolean\n}) {\n  const [networks] = useNetworks()\n  const { childChain } = useNetworksRelationship(networks)\n  const { isTestnet } = isNetwork(childChain.id)\n\n  // currently only ETH price is supported\n  const { ethToUSD } = useETHPrice()\n\n  if (isTestnet) {\n    return null\n  }\n\n  if (typeof amount === 'undefined') {\n    return null\n  }\n\n  return (\n    <span className=\"tabular-nums\">\n      {showBrackets && '('}\n      {formatUSD(ethToUSD(amount))}\n      {showBrackets && ')'}\n    </span>\n  )\n}\n","export enum TransferReadinessRichErrorMessage {\n  GAS_ESTIMATION_FAILURE,\n  TOKEN_WITHDRAW_ONLY,\n  TOKEN_TRANSFER_DISABLED\n}\n\nexport type GetInsufficientFundsErrorMessageParams = {\n  asset: string\n  chain: string\n}\n\nexport function getInsufficientFundsErrorMessage({\n  asset,\n  chain\n}: GetInsufficientFundsErrorMessageParams) {\n  return `Insufficient ${asset}. Please add more funds to ${chain}.`\n}\n\nexport function getInsufficientFundsForGasFeesErrorMessage({\n  asset,\n  chain\n}: GetInsufficientFundsErrorMessageParams) {\n  return `Insufficient ${asset} to pay for gas fees. Please add more funds to ${chain}.`\n}\n\nexport function getSmartContractWalletNativeCurrencyTransfersNotSupportedErrorMessage({\n  asset\n}: {\n  asset: string\n}) {\n  return `${asset} transfers using smart contract wallets aren't supported yet.`\n}\n\nexport function getSmartContractWalletTeleportTransfersNotSupportedErrorMessage() {\n  return `LayerLeap transfers using smart contract wallets aren't supported yet.`\n}\n","import { useMemo } from 'react'\nimport { useAccount } from 'wagmi'\nimport { utils } from 'ethers'\n\nimport { useAccountType } from '../../hooks/useAccountType'\nimport { useAppState } from '../../state'\nimport { useNativeCurrency } from '../../hooks/useNativeCurrency'\nimport {\n  isTokenArbitrumSepoliaNativeUSDC,\n  isTokenArbitrumOneNativeUSDC\n} from '../../util/TokenUtils'\nimport { useAppContextState } from '../App/AppContext'\nimport { useDestinationAddressStore } from './AdvancedSettings'\nimport { isWithdrawOnlyToken } from '../../util/WithdrawOnlyUtils'\nimport {\n  TransferReadinessRichErrorMessage,\n  getInsufficientFundsErrorMessage,\n  getInsufficientFundsForGasFeesErrorMessage,\n  getSmartContractWalletNativeCurrencyTransfersNotSupportedErrorMessage,\n  getSmartContractWalletTeleportTransfersNotSupportedErrorMessage\n} from './useTransferReadinessUtils'\nimport { ether } from '../../constants'\nimport { UseGasSummaryResult } from '../../hooks/TransferPanel/useGasSummary'\nimport { isTransferDisabledToken } from '../../util/TokenTransferDisabledUtils'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { isTeleportEnabledToken } from '../../util/TokenTeleportEnabledUtils'\nimport { isNetwork } from '../../util/networks'\nimport { useBalances } from '../../hooks/useBalances'\n\n// Add chains IDs that are currently down or disabled\n// It will block transfers and display an info box in the transfer panel\nexport const DISABLED_CHAIN_IDS: number[] = []\n\nfunction sanitizeEstimatedGasFees(\n  gasSummary: UseGasSummaryResult,\n  options: { isSmartContractWallet: boolean; isDepositMode: boolean }\n) {\n  const { estimatedParentChainGasFees, estimatedChildChainGasFees } = gasSummary\n\n  if (\n    typeof estimatedParentChainGasFees === 'undefined' ||\n    typeof estimatedChildChainGasFees === 'undefined'\n  ) {\n    return {\n      estimatedL1GasFees: 0,\n      estimatedL2GasFees: 0\n    }\n  }\n\n  // For smart contract wallets, the relayer pays the gas fees\n  if (options.isSmartContractWallet) {\n    if (options.isDepositMode) {\n      // The L2 fee is paid in callvalue and needs to come from the smart contract wallet for retryable cost estimation to succeed\n      return {\n        estimatedL1GasFees: 0,\n        estimatedL2GasFees: estimatedChildChainGasFees\n      }\n    }\n\n    return {\n      estimatedL1GasFees: 0,\n      estimatedL2GasFees: 0\n    }\n  }\n\n  return {\n    estimatedL1GasFees: estimatedParentChainGasFees,\n    estimatedL2GasFees: estimatedChildChainGasFees\n  }\n}\n\nfunction withdrawalDisabled(token: string) {\n  return [\n    '0x0e192d382a36de7011f795acc4391cd302003606',\n    '0x488cc08935458403a0458e45e20c0159c8ab2c92'\n  ].includes(token.toLowerCase())\n}\n\nfunction ready() {\n  const result: UseTransferReadinessResult = {\n    transferReady: { deposit: true, withdrawal: true }\n  }\n\n  return result\n}\n\nfunction notReady(\n  params: {\n    errorMessage: string | TransferReadinessRichErrorMessage | undefined\n  } = {\n    errorMessage: undefined\n  }\n) {\n  const result: UseTransferReadinessResult = {\n    transferReady: { deposit: false, withdrawal: false }\n  }\n\n  return { ...result, ...params }\n}\n\nexport type UseTransferReadinessTransferReady = {\n  deposit: boolean\n  withdrawal: boolean\n}\n\nexport type UseTransferReadinessResult = {\n  transferReady: UseTransferReadinessTransferReady\n  errorMessage?: string | TransferReadinessRichErrorMessage\n}\n\nexport function useTransferReadiness({\n  amount,\n  gasSummary\n}: {\n  amount: string\n  gasSummary: UseGasSummaryResult\n}): UseTransferReadinessResult {\n  const {\n    app: { selectedToken }\n  } = useAppState()\n  const {\n    layout: { isTransferring }\n  } = useAppContextState()\n  const [networks] = useNetworks()\n  const {\n    childChain,\n    childChainProvider,\n    parentChain,\n    isDepositMode,\n    isTeleportMode\n  } = useNetworksRelationship(networks)\n\n  const { address: walletAddress } = useAccount()\n  const { isSmartContractWallet } = useAccountType()\n  const nativeCurrency = useNativeCurrency({ provider: childChainProvider })\n  const {\n    ethParentBalance,\n    erc20ParentBalances,\n    ethChildBalance,\n    erc20ChildBalances\n  } = useBalances({\n    parentWalletAddress: walletAddress,\n    childWalletAddress: walletAddress\n  })\n  const { error: destinationAddressError } = useDestinationAddressStore()\n\n  const ethL1BalanceFloat = ethParentBalance\n    ? parseFloat(utils.formatEther(ethParentBalance))\n    : null\n\n  const ethL2BalanceFloat = ethChildBalance\n    ? parseFloat(utils.formatEther(ethChildBalance))\n    : null\n\n  const selectedTokenL1BalanceFloat = useMemo(() => {\n    if (!selectedToken) {\n      return null\n    }\n\n    const balance = erc20ParentBalances?.[selectedToken.address.toLowerCase()]\n\n    if (!balance) {\n      return null\n    }\n\n    return parseFloat(utils.formatUnits(balance, selectedToken.decimals))\n  }, [selectedToken, erc20ParentBalances])\n\n  const selectedTokenL2BalanceFloat = useMemo(() => {\n    if (!selectedToken) {\n      return null\n    }\n\n    const { isOrbitChain } = isNetwork(childChain.id)\n\n    const isL2NativeUSDC =\n      isTokenArbitrumOneNativeUSDC(selectedToken.address) ||\n      isTokenArbitrumSepoliaNativeUSDC(selectedToken.address)\n\n    const selectedTokenL2Address =\n      isL2NativeUSDC && !isOrbitChain\n        ? selectedToken.address.toLowerCase()\n        : (selectedToken.l2Address || '').toLowerCase()\n\n    const balance = erc20ChildBalances?.[selectedTokenL2Address]\n\n    if (!balance) {\n      return null\n    }\n\n    return parseFloat(utils.formatUnits(balance, selectedToken.decimals))\n  }, [selectedToken, childChain.id, erc20ChildBalances])\n\n  const customFeeTokenL1BalanceFloat = useMemo(() => {\n    if (!nativeCurrency.isCustom) {\n      return null\n    }\n\n    const balance = erc20ParentBalances?.[nativeCurrency.address]\n\n    if (!balance) {\n      return null\n    }\n\n    return parseFloat(utils.formatUnits(balance, nativeCurrency.decimals))\n  }, [nativeCurrency, erc20ParentBalances])\n\n  return useMemo(() => {\n    if (isNaN(Number(amount)) || Number(amount) === 0) {\n      return notReady()\n    }\n\n    if (isTransferring) {\n      return notReady()\n    }\n\n    if (DISABLED_CHAIN_IDS.includes(childChain.id)) {\n      return notReady()\n    }\n\n    // native currency (ETH or custom fee token) transfers using SC wallets not enabled yet\n    if (isSmartContractWallet && !selectedToken) {\n      return notReady({\n        errorMessage:\n          getSmartContractWalletNativeCurrencyTransfersNotSupportedErrorMessage(\n            { asset: nativeCurrency.symbol }\n          )\n      })\n    }\n\n    // teleport transfers using SC wallets not enabled yet\n    if (isSmartContractWallet && isTeleportMode) {\n      return notReady({\n        errorMessage:\n          getSmartContractWalletTeleportTransfersNotSupportedErrorMessage()\n      })\n    }\n\n    // Check if destination address is valid for ERC20 transfers\n    if (destinationAddressError) {\n      return notReady()\n    }\n\n    const ethBalanceFloat = isDepositMode\n      ? ethL1BalanceFloat\n      : ethL2BalanceFloat\n    const selectedTokenBalanceFloat = isDepositMode\n      ? selectedTokenL1BalanceFloat\n      : selectedTokenL2BalanceFloat\n    const customFeeTokenBalanceFloat = isDepositMode\n      ? customFeeTokenL1BalanceFloat\n      : ethL2BalanceFloat\n\n    // No error while loading balance\n    if (ethBalanceFloat === null) {\n      return notReady()\n    }\n\n    // ERC-20\n    if (selectedToken) {\n      const selectedTokenIsWithdrawOnly = isWithdrawOnlyToken(\n        selectedToken.address,\n        childChain.id\n      )\n\n      const selectedTokenIsDisabled =\n        isTransferDisabledToken(selectedToken.address, childChain.id) ||\n        (isTeleportMode &&\n          !isTeleportEnabledToken(\n            selectedToken.address,\n            parentChain.id,\n            childChain.id\n          ))\n\n      if (isDepositMode && selectedTokenIsWithdrawOnly) {\n        return notReady({\n          errorMessage: TransferReadinessRichErrorMessage.TOKEN_WITHDRAW_ONLY\n        })\n      } else if (selectedTokenIsDisabled) {\n        return notReady({\n          errorMessage:\n            TransferReadinessRichErrorMessage.TOKEN_TRANSFER_DISABLED\n        })\n      } else if (withdrawalDisabled(selectedToken.address)) {\n        return notReady()\n      }\n\n      // No error while loading balance\n      if (selectedTokenBalanceFloat === null) {\n        return notReady()\n      }\n\n      // Check amount against ERC-20 balance\n      if (Number(amount) > selectedTokenBalanceFloat) {\n        return notReady({\n          errorMessage: getInsufficientFundsErrorMessage({\n            asset: selectedToken.symbol,\n            chain: networks.sourceChain.name\n          })\n        })\n      }\n    }\n    // Custom fee token\n    else if (nativeCurrency.isCustom) {\n      // No error while loading balance\n      if (customFeeTokenBalanceFloat === null) {\n        return notReady()\n      }\n\n      // Check amount against custom fee token balance\n      if (Number(amount) > customFeeTokenBalanceFloat) {\n        return notReady({\n          errorMessage: getInsufficientFundsErrorMessage({\n            asset: nativeCurrency.symbol,\n            chain: networks.sourceChain.name\n          })\n        })\n      }\n    }\n    // ETH\n    // Check amount against ETH balance\n    else if (Number(amount) > ethBalanceFloat) {\n      return notReady({\n        errorMessage: getInsufficientFundsErrorMessage({\n          asset: ether.symbol,\n          chain: networks.sourceChain.name\n        })\n      })\n    }\n\n    // The amount entered is enough funds, but now let's include gas costs\n    switch (gasSummary.status) {\n      // No error while loading gas costs\n      case 'loading':\n        return notReady()\n\n      case 'unavailable':\n        return ready()\n\n      case 'error':\n        return notReady({\n          errorMessage: TransferReadinessRichErrorMessage.GAS_ESTIMATION_FAILURE\n        })\n\n      case 'insufficientBalance':\n        return notReady()\n\n      case 'success': {\n        const { estimatedL1GasFees, estimatedL2GasFees } =\n          sanitizeEstimatedGasFees(gasSummary, {\n            isSmartContractWallet,\n            isDepositMode\n          })\n\n        if (selectedToken) {\n          // If depositing into a custom fee token network, gas is split between ETH and the custom fee token\n          if (nativeCurrency.isCustom && isDepositMode) {\n            // Still loading custom fee token balance\n            if (customFeeTokenL1BalanceFloat === null) {\n              return notReady()\n            }\n\n            // We have to check if there's enough ETH to cover L1 gas\n            if (estimatedL1GasFees > ethBalanceFloat) {\n              return notReady({\n                errorMessage: getInsufficientFundsForGasFeesErrorMessage({\n                  asset: ether.symbol,\n                  chain: networks.sourceChain.name\n                })\n              })\n            }\n\n            // We have to check if there's enough of the custom fee token to cover L2 gas\n            if (estimatedL2GasFees > customFeeTokenL1BalanceFloat) {\n              return notReady({\n                errorMessage: getInsufficientFundsForGasFeesErrorMessage({\n                  asset: nativeCurrency.symbol,\n                  chain: networks.sourceChain.name\n                })\n              })\n            }\n\n            return ready()\n          }\n\n          // Everything is paid in ETH, so we sum it up\n          if (estimatedL1GasFees + estimatedL2GasFees > ethBalanceFloat) {\n            return notReady({\n              errorMessage: getInsufficientFundsForGasFeesErrorMessage({\n                asset: ether.symbol,\n                chain: networks.sourceChain.name\n              })\n            })\n          }\n\n          return ready()\n        }\n\n        if (nativeCurrency.isCustom && isDepositMode) {\n          // Deposits of the custom fee token will be paid in ETH, so we have to check if there's enough ETH to cover L1 gas\n          // Withdrawals of the custom fee token will be treated same as ETH withdrawals (in the case below)\n          if (estimatedL1GasFees + estimatedL2GasFees > ethBalanceFloat) {\n            return notReady({\n              errorMessage: getInsufficientFundsForGasFeesErrorMessage({\n                asset: ether.symbol,\n                chain: networks.sourceChain.name\n              })\n            })\n          }\n\n          return ready()\n        }\n\n        // Everything is in the same currency\n        // This case also handles custom fee token withdrawals, as `ethBalanceFloat` will reflect the custom fee token balance on the Orbit chain\n        const total = Number(amount) + estimatedL1GasFees + estimatedL2GasFees\n\n        if (total > ethBalanceFloat) {\n          return notReady({\n            errorMessage: getInsufficientFundsForGasFeesErrorMessage({\n              asset: nativeCurrency.symbol,\n              chain: networks.sourceChain.name\n            })\n          })\n        }\n\n        return ready()\n      }\n    }\n  }, [\n    amount,\n    isTransferring,\n    destinationAddressError,\n    isSmartContractWallet,\n    selectedToken,\n    isDepositMode,\n    ethL1BalanceFloat,\n    ethL2BalanceFloat,\n    selectedTokenL1BalanceFloat,\n    selectedTokenL2BalanceFloat,\n    customFeeTokenL1BalanceFloat,\n    nativeCurrency.isCustom,\n    nativeCurrency.symbol,\n    gasSummary,\n    childChain.id,\n    parentChain.id,\n    networks.sourceChain.name,\n    isTeleportMode\n  ])\n}\n","import React, { useMemo } from 'react'\nimport { twMerge } from 'tailwind-merge'\n\nimport { formatAmount } from '../../util/NumberUtils'\nimport { getNetworkName, isNetwork } from '../../util/networks'\nimport { useNativeCurrency } from '../../hooks/useNativeCurrency'\nimport { useGasSummary } from '../../hooks/TransferPanel/useGasSummary'\nimport { useArbQueryParams } from '../../hooks/useArbQueryParams'\nimport { TokenSymbolWithExplorerLink } from '../common/TokenSymbolWithExplorerLink'\nimport { ERC20BridgeToken } from '../../hooks/arbTokenBridge.types'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { NativeCurrencyPrice, useIsBridgingEth } from './NativeCurrencyPrice'\nimport { useAppState } from '../../state'\nimport { Loader } from '../common/atoms/Loader'\nimport { isTokenNativeUSDC } from '../../util/TokenUtils'\nimport { NoteBox } from '../common/NoteBox'\nimport { DISABLED_CHAIN_IDS } from './useTransferReadiness'\n\nexport type TransferPanelSummaryToken = {\n  symbol: string\n  address: string\n  l2Address?: string\n}\n\nexport type TransferPanelSummaryProps = {\n  amount: number\n  token: ERC20BridgeToken | null\n}\n\nfunction StyledLoader() {\n  return (\n    <span className=\"flex\">\n      <Loader size=\"small\" />\n    </span>\n  )\n}\n\nfunction TotalGasFees() {\n  const {\n    app: { selectedToken }\n  } = useAppState()\n\n  const {\n    status: gasSummaryStatus,\n    estimatedParentChainGasFees,\n    estimatedChildChainGasFees\n  } = useGasSummary()\n\n  const [networks] = useNetworks()\n  const { childChainProvider, parentChainProvider, isDepositMode } =\n    useNetworksRelationship(networks)\n\n  const childChainNativeCurrency = useNativeCurrency({\n    provider: childChainProvider\n  })\n  const parentChainNativeCurrency = useNativeCurrency({\n    provider: parentChainProvider\n  })\n\n  const gasSummaryLoading = gasSummaryStatus === 'loading'\n\n  const sameNativeCurrency = useMemo(\n    // we'll have to change this if we ever have L4s that are built on top of L3s with a custom fee token\n    () =>\n      childChainNativeCurrency.isCustom === parentChainNativeCurrency.isCustom,\n    [childChainNativeCurrency, parentChainNativeCurrency]\n  )\n\n  const estimatedTotalGasFees = useMemo(() => {\n    if (\n      gasSummaryStatus === 'loading' ||\n      typeof estimatedChildChainGasFees == 'undefined' ||\n      typeof estimatedParentChainGasFees == 'undefined'\n    ) {\n      return undefined\n    }\n\n    return estimatedParentChainGasFees + estimatedChildChainGasFees\n  }, [\n    gasSummaryStatus,\n    estimatedChildChainGasFees,\n    estimatedParentChainGasFees\n  ])\n\n  if (gasSummaryLoading) {\n    return <StyledLoader />\n  }\n\n  /**\n   * Same Native Currencies between Parent and Child chains\n   * 1. ETH/ER20 deposit: L1->L2\n   * 2. ETH/ERC20 withdrawal: L2->L1\n   * 3. ETH/ER20 deposit: L2->L3 (ETH as gas token)\n   * 4. ETH/ERC20 withdrawal: L3 (ETH as gas token)->L2\n   *\n   * x ETH\n   */\n  if (sameNativeCurrency) {\n    return (\n      <span className=\"tabular-nums\">\n        {formatAmount(estimatedTotalGasFees, {\n          symbol: childChainNativeCurrency.symbol\n        })}{' '}\n        <NativeCurrencyPrice amount={estimatedTotalGasFees} showBrackets />\n      </span>\n    )\n  }\n  /** Different Native Currencies between Parent and Child chains\n   *\n   *  Custom gas token deposit: L2->Xai\n   *  x ETH\n   *\n   *  ERC20 deposit: L2->Xai\n   *  x ETH and x XAI\n   *\n   *  Custom gas token/ERC20 withdrawal: L3->L2\n   *  only show child chain native currency\n   *  x XAI\n   */\n  return (\n    <>\n      {isDepositMode && (\n        <span className=\"tabular-nums\">\n          {formatAmount(estimatedParentChainGasFees, {\n            symbol: parentChainNativeCurrency.symbol\n          })}{' '}\n          <NativeCurrencyPrice\n            amount={estimatedParentChainGasFees}\n            showBrackets\n          />\n          {selectedToken && ' and '}\n        </span>\n      )}\n      {(selectedToken || !isDepositMode) &&\n        formatAmount(estimatedChildChainGasFees, {\n          symbol: childChainNativeCurrency.symbol\n        })}\n    </>\n  )\n}\n\nfunction TransferPanelSummaryContainer({\n  children,\n  className = ''\n}: {\n  children: React.ReactNode\n  className?: string\n}) {\n  const [networks] = useNetworks()\n  const { childChain } = useNetworksRelationship(networks)\n\n  const isDisabled = DISABLED_CHAIN_IDS.includes(childChain.id)\n\n  return (\n    <div className=\"mb-8 flex flex-col text-white\">\n      <span className=\"mb-3 text-xl\">Summary</span>\n      <div className={twMerge('mb-3 flex flex-col space-y-3', className)}>\n        {children}\n      </div>\n      {isDisabled && (\n        <NoteBox variant=\"error\">\n          {getNetworkName(childChain.id)} is currently down. You will be able to\n          bridge again once it is back online.\n        </NoteBox>\n      )}\n    </div>\n  )\n}\n\nexport function TransferPanelSummary({ token }: TransferPanelSummaryProps) {\n  const { status: gasSummaryStatus } = useGasSummary()\n\n  const [networks] = useNetworks()\n  const { childChainProvider, isDepositMode } =\n    useNetworksRelationship(networks)\n\n  const childChainNativeCurrency = useNativeCurrency({\n    provider: childChainProvider\n  })\n\n  const isBridgingEth = useIsBridgingEth(childChainNativeCurrency)\n\n  const [{ amount }] = useArbQueryParams()\n\n  const {\n    isArbitrumOne: isDestinationChainArbitrumOne,\n    isArbitrumSepolia: isDestinationChainArbitrumSepolia\n  } = isNetwork(networks.destinationChain.id)\n\n  const isDepositingUSDCtoArbOneOrArbSepolia =\n    isTokenNativeUSDC(token?.address) &&\n    isDepositMode &&\n    (isDestinationChainArbitrumOne || isDestinationChainArbitrumSepolia)\n\n  if (gasSummaryStatus === 'unavailable') {\n    return (\n      <TransferPanelSummaryContainer>\n        <div className=\"flex flex-row justify-between text-sm lg:text-base\">\n          Gas estimates are not available for this action.\n        </div>\n      </TransferPanelSummaryContainer>\n    )\n  }\n\n  if (gasSummaryStatus === 'insufficientBalance') {\n    return (\n      <TransferPanelSummaryContainer>\n        <div className=\"flex flex-row justify-between text-sm lg:text-base\">\n          Gas estimates will be displayed after entering a valid amount.\n        </div>\n      </TransferPanelSummaryContainer>\n    )\n  }\n\n  return (\n    <TransferPanelSummaryContainer>\n      <div\n        className={twMerge(\n          'grid grid-cols-[260px_auto] items-center text-sm font-light'\n        )}\n      >\n        <span className=\"text-left\">You will pay in gas fees:</span>\n\n        <span className=\"font-medium\">\n          <TotalGasFees />\n        </span>\n      </div>\n\n      <div\n        className={twMerge(\n          'grid grid-cols-[260px_auto] items-center text-sm font-light'\n        )}\n      >\n        <span>\n          You will receive on {getNetworkName(networks.destinationChain.id)}:\n        </span>\n        <span className=\"font-medium\">\n          <span className=\"tabular-nums\">{formatAmount(Number(amount))}</span>{' '}\n          {isDepositingUSDCtoArbOneOrArbSepolia ? (\n            <>USDC</>\n          ) : (\n            <TokenSymbolWithExplorerLink\n              token={token}\n              isParentChain={!isDepositMode}\n            />\n          )}\n          {isBridgingEth && (\n            <NativeCurrencyPrice amount={Number(amount)} showBrackets />\n          )}\n        </span>\n      </div>\n    </TransferPanelSummaryContainer>\n  )\n}\n","import { Tab } from '@headlessui/react'\nimport Hop from '@/images/bridge/hop.png'\n\nimport { useAppState } from '../../state'\nimport { TabButton } from '../common/Tab'\nimport { BridgesTable } from '../common/BridgesTable'\nimport { SecurityNotGuaranteed } from './SecurityLabels'\nimport { Dialog, UseDialogProps } from '../common/Dialog'\nimport { FastBridgeInfo, FastBridgeNames } from '../../util/fastBridges'\nimport { ChainId, getNetworkName } from '../../util/networks'\nimport { ether } from '../../constants'\n\nexport function OneNovaTransferDialog(\n  props: UseDialogProps & {\n    destinationChainId: number | null\n    amount: string\n  }\n) {\n  const {\n    app: { selectedToken }\n  } = useAppState()\n\n  const { destinationChainId } = props\n\n  const sourceChainId =\n    destinationChainId === ChainId.ArbitrumNova\n      ? ChainId.ArbitrumOne\n      : ChainId.ArbitrumNova\n\n  const sourceNetworkSlug =\n    sourceChainId === ChainId.ArbitrumOne ? 'arbitrum' : 'nova'\n  const destinationNetworkSlug =\n    destinationChainId === ChainId.ArbitrumOne ? 'arbitrum' : 'nova'\n\n  const bridgeDeepLink = `https://app.hop.exchange/#/send?sourceNetwork=${sourceNetworkSlug}&destNetwork=${destinationNetworkSlug}&token=${\n    selectedToken?.symbol || ether.symbol\n  }&amount=${props.amount}`\n\n  // only enable Hop for now\n  const fastBridgeList: FastBridgeInfo[] = [\n    { name: FastBridgeNames.Hop, imageSrc: Hop, href: bridgeDeepLink }\n  ]\n\n  return (\n    <Dialog\n      {...props}\n      onClose={() => props.onClose(false)}\n      title={`Move funds from ${getNetworkName(\n        sourceChainId\n      )} to ${getNetworkName(destinationChainId ?? 0)}`}\n      actionButtonProps={{ hidden: true }}\n      className=\"max-w-[700px]\"\n    >\n      <div className=\"flex flex-col pt-4\">\n        <Tab.Group>\n          <Tab.List className=\"border-b border-gray-dark\">\n            <TabButton>Third party bridge</TabButton>\n          </Tab.List>\n\n          <Tab.Panel className=\"flex flex-col space-y-4 py-4\">\n            <div className=\"flex flex-col space-y-3\">\n              <p className=\"font-light\">\n                Use a third party bridge to transfer funds between Arbitrum One\n                and Arbitrum Nova.\n              </p>\n            </div>\n\n            <BridgesTable bridgeList={fastBridgeList} />\n            <SecurityNotGuaranteed />\n          </Tab.Panel>\n        </Tab.Group>\n      </div>\n    </Dialog>\n  )\n}\n","import { useEffect } from 'react'\n\nimport {\n  isTokenArbitrumOneNativeUSDC,\n  isTokenArbitrumSepoliaNativeUSDC\n} from '../../../util/TokenUtils'\nimport { useActions, useAppState } from '../../../state'\nimport { useNetworks } from '../../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../../hooks/useNetworksRelationship'\nimport { TokenType } from '../../../hooks/arbTokenBridge.types'\nimport { CommonAddress } from '../../../util/CommonAddressUtils'\nimport { isNetwork } from '../../../util/networks'\n\nconst commonUSDC = {\n  name: 'USD Coin',\n  type: TokenType.ERC20,\n  symbol: 'USDC',\n  decimals: 6,\n  listIds: new Set<number>()\n}\n\nexport function useUpdateUSDCTokenData() {\n  const actions = useActions()\n  const {\n    app: {\n      arbTokenBridge: { token },\n      selectedToken\n    }\n  } = useAppState()\n  const [networks] = useNetworks()\n  const { isDepositMode } = useNetworksRelationship(networks)\n  const {\n    isArbitrumOne: isDestinationChainArbitrumOne,\n    isArbitrumSepolia: isDestinationChainArbitrumSepolia\n  } = isNetwork(networks.destinationChain.id)\n\n  useEffect(() => {\n    const isArbOneUSDC = isTokenArbitrumOneNativeUSDC(selectedToken?.address)\n    const isArbSepoliaUSDC = isTokenArbitrumSepoliaNativeUSDC(\n      selectedToken?.address\n    )\n\n    // If user select native USDC on L2, when switching to deposit mode,\n    // we need to default to set the corresponding USDC on L1\n    if (!isDepositMode) {\n      return\n    }\n\n    if (isArbOneUSDC && isDestinationChainArbitrumOne) {\n      token.updateTokenData(CommonAddress.Ethereum.USDC)\n      actions.app.setSelectedToken({\n        ...commonUSDC,\n        address: CommonAddress.Ethereum.USDC,\n        l2Address: CommonAddress.ArbitrumOne['USDC.e']\n      })\n    }\n\n    if (isArbSepoliaUSDC && isDestinationChainArbitrumSepolia) {\n      token.updateTokenData(CommonAddress.Sepolia.USDC)\n      actions.app.setSelectedToken({\n        ...commonUSDC,\n        address: CommonAddress.Sepolia.USDC,\n        l2Address: CommonAddress.ArbitrumSepolia['USDC.e']\n      })\n    }\n  }, [\n    actions.app,\n    isDepositMode,\n    isDestinationChainArbitrumOne,\n    isDestinationChainArbitrumSepolia,\n    selectedToken,\n    token\n  ])\n}\n","import Image from 'next/image'\nimport { twMerge } from 'tailwind-merge'\n\nimport { getNetworkName } from '../../util/networks'\nimport { getBridgeUiConfigForChain } from '../../util/bridgeUiConfig'\n\nexport const NetworkImage = ({\n  chainId,\n  className,\n  size\n}: {\n  chainId: number\n  className?: string\n  size?: number\n}) => {\n  const imageSize = size ?? 16\n  const { network, color } = getBridgeUiConfigForChain(chainId)\n  const networkName = getNetworkName(chainId)\n\n  return (\n    <div\n      style={{\n        backgroundColor: `${color}33`\n      }}\n      className={twMerge(\n        'flex w-4 shrink-0 items-center justify-center rounded-full p-[4px]',\n        className\n      )}\n    >\n      <Image\n        src={network.logo}\n        alt={`${networkName} logo`}\n        className=\"h-full w-auto\"\n        width={imageSize}\n        height={imageSize}\n      />\n    </div>\n  )\n}\n","import { Listbox } from '@headlessui/react'\nimport { ChevronDownIcon } from '@heroicons/react/24/outline'\nimport { twMerge } from 'tailwind-merge'\nimport { Chain } from 'wagmi'\n\nimport { getNetworkName } from '../../util/networks'\nimport { getBridgeUiConfigForChain } from '../../util/bridgeUiConfig'\nimport { Transition } from '../common/Transition'\nimport { NetworkImage } from '../common/NetworkImage'\n\nexport type NetworkListboxProps = {\n  disabled?: boolean\n  label: string\n  options: Chain[]\n  value: Chain\n  onChange: (value: Chain) => void\n}\n\nexport function NetworkListbox({\n  disabled = false,\n  label,\n  options,\n  value,\n  onChange\n}: NetworkListboxProps) {\n  const { color: backgroundColor } = getBridgeUiConfigForChain(value.id)\n\n  return (\n    <Listbox\n      as=\"div\"\n      className=\"relative\"\n      disabled={disabled}\n      value={value}\n      onChange={onChange}\n    >\n      {({ open }) => (\n        <>\n          <Listbox.Button\n            style={{ backgroundColor }}\n            className=\"arb-hover flex w-max items-center gap-1 rounded px-3 py-2 text-sm text-white md:gap-2 md:text-xl\"\n          >\n            <span className=\"max-w-[220px] truncate leading-extra-tight md:max-w-[250px]\">\n              {label} {getNetworkName(value.id)}\n            </span>\n            {!disabled && (\n              <ChevronDownIcon\n                className={twMerge(\n                  'h-[12px] w-[12px] transition-transform sm:h-3 sm:w-3',\n                  open ? '-rotate-180' : 'rotate-0'\n                )}\n              />\n            )}\n          </Listbox.Button>\n\n          <Transition className=\"absolute left-0 right-auto z-[1] min-w-full\">\n            <Listbox.Options className=\"mt-2 flex max-h-[365px] min-w-full flex-col gap-[8px] overflow-y-auto overflow-x-hidden rounded border border-white/30 bg-gray-1 font-normal text-white\">\n              {options.map(option => {\n                return (\n                  <Listbox.Option\n                    key={option.id}\n                    value={option}\n                    className={twMerge(\n                      'hover:white/20 flex h-12 cursor-pointer select-none items-center gap-2 px-3 py-2 transition-[background] duration-200 ui-selected:bg-white/20 ui-active:bg-white/20'\n                    )}\n                  >\n                    <div className=\"flex h-6 w-6 items-center justify-center\">\n                      <NetworkImage\n                        chainId={option.id}\n                        className=\"h-[32px] w-[32px] p-[6px]\"\n                        size={20}\n                      />\n                    </div>\n                    <span className=\"max-w-[150px] truncate\">\n                      {getNetworkName(option.id)}\n                    </span>\n                  </Listbox.Option>\n                )\n              })}\n            </Listbox.Options>\n          </Transition>\n        </>\n      )}\n    </Listbox>\n  )\n}\n","export enum NetworkType {\n  parentChain = 'parentChain',\n  childChain = 'childChain'\n}\n","import { BigNumber } from 'ethers'\n\nimport { ERC20BridgeToken } from '../../../hooks/arbTokenBridge.types'\nimport { NativeCurrencyErc20 } from '../../../hooks/useNativeCurrency'\nimport { Loader } from '../../common/atoms/Loader'\nimport { TokenSymbolWithExplorerLink } from '../../common/TokenSymbolWithExplorerLink'\nimport { formatAmount } from '../../../util/NumberUtils'\n\nimport { NetworkType } from './utils'\n\nexport function TokenBalance({\n  forToken,\n  balance,\n  on,\n  prefix = '',\n  tokenSymbolOverride\n}: {\n  forToken: ERC20BridgeToken | NativeCurrencyErc20 | null\n  balance: BigNumber | null\n  on: NetworkType\n  prefix?: string\n  tokenSymbolOverride?: string\n}) {\n  const isParentChain = on === NetworkType.parentChain\n\n  if (!forToken) {\n    return null\n  }\n\n  if (!balance) {\n    return <Loader color=\"white\" size=\"small\" />\n  }\n\n  const tokenSymbol = tokenSymbolOverride ?? forToken.symbol\n\n  return (\n    <p>\n      <span className=\"font-light\">{prefix}</span>\n      <span aria-label={`${tokenSymbol} balance amount on ${on}`}>\n        {formatAmount(balance, {\n          decimals: forToken.decimals\n        })}\n      </span>{' '}\n      <TokenSymbolWithExplorerLink\n        token={forToken}\n        tokenSymbolOverride={tokenSymbolOverride}\n        isParentChain={isParentChain}\n      />\n    </p>\n  )\n}\n","import { InformationCircleIcon } from '@heroicons/react/24/outline'\nimport { useMemo } from 'react'\nimport { twMerge } from 'tailwind-merge'\n\nimport { useAppState } from '../../state'\nimport { ChainId, getNetworkName, isNetwork } from '../../util/networks'\nimport { Tooltip } from '../common/Tooltip'\nimport { formatAmount } from '../../util/NumberUtils'\nimport { useNativeCurrency } from '../../hooks/useNativeCurrency'\nimport { useGasSummary } from '../../hooks/TransferPanel/useGasSummary'\nimport { Loader } from '../common/atoms/Loader'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { NativeCurrencyPrice, useIsBridgingEth } from './NativeCurrencyPrice'\nimport { isTokenNativeUSDC } from '../../util/TokenUtils'\n\nfunction getGasFeeTooltip(chainId: ChainId) {\n  const { isEthereumMainnetOrTestnet } = isNetwork(chainId)\n  const networkName = getNetworkName(chainId)\n\n  if (isEthereumMainnetOrTestnet) {\n    return `${networkName} fees go to ${networkName} Validators.`\n  }\n\n  // Arbitrum and Orbit chains\n  return `${networkName} fees are collected by the chain to cover costs of execution. This is an estimated fee. If the true fee is lower, you'll be refunded.`\n}\n\nfunction StyledLoader() {\n  return (\n    <span className=\"flex justify-end\">\n      <Loader size=\"small\" />\n    </span>\n  )\n}\n\nfunction GasFeeForClaimTxMessage({ networkName }: { networkName: string }) {\n  return (\n    <div\n      className={twMerge(\n        'grid items-center',\n        'rounded bg-white/30 p-2 opacity-80',\n        'text-xs font-light text-white'\n      )}\n    >\n      You&apos;ll have to pay {networkName} gas fee upon claiming.\n    </div>\n  )\n}\n\nexport function EstimatedGas({\n  chainType\n}: {\n  chainType: 'source' | 'destination'\n}) {\n  const {\n    app: { selectedToken }\n  } = useAppState()\n  const [networks] = useNetworks()\n  const {\n    childChain,\n    childChainProvider,\n    parentChain,\n    parentChainProvider,\n    isDepositMode\n  } = useNetworksRelationship(networks)\n  const childChainNativeCurrency = useNativeCurrency({\n    provider: childChainProvider\n  })\n  const parentChainNativeCurrency = useNativeCurrency({\n    provider: parentChainProvider\n  })\n  const isSourceChain = chainType === 'source'\n  const isParentChain = isSourceChain\n    ? networks.sourceChain.id === parentChain.id\n    : networks.destinationChain.id === parentChain.id\n  const {\n    status: gasSummaryStatus,\n    estimatedParentChainGasFees,\n    estimatedChildChainGasFees\n  } = useGasSummary()\n  const parentChainName = getNetworkName(parentChain.id)\n  const isBridgingEth = useIsBridgingEth(childChainNativeCurrency)\n  const showPrice = useMemo(\n    () => isBridgingEth && !isNetwork(childChain.id).isTestnet,\n    [isBridgingEth, childChain.id]\n  )\n\n  const isDestinationArbOne = isNetwork(\n    networks.destinationChain.id\n  ).isArbitrumOne\n  const isDestinationArbSepolia = isNetwork(\n    networks.destinationChain.id\n  ).isArbitrumSepolia\n\n  const isWithdrawalParentChain = !isDepositMode && isParentChain\n\n  const estimatedGasFee = useMemo(() => {\n    if (\n      !isDepositMode &&\n      !isParentChain &&\n      typeof estimatedParentChainGasFees !== 'undefined' &&\n      typeof estimatedChildChainGasFees !== 'undefined'\n    ) {\n      return estimatedParentChainGasFees + estimatedChildChainGasFees\n    }\n    return isParentChain\n      ? estimatedParentChainGasFees\n      : estimatedChildChainGasFees\n  }, [\n    estimatedParentChainGasFees,\n    estimatedChildChainGasFees,\n    isDepositMode,\n    isParentChain\n  ])\n\n  const layerGasFeeTooltipContent = useMemo(\n    () =>\n      getGasFeeTooltip(\n        isSourceChain ? networks.sourceChain.id : networks.destinationChain.id\n      ),\n    [isSourceChain, networks.sourceChain.id, networks.destinationChain.id]\n  )\n\n  if (isWithdrawalParentChain) {\n    return <GasFeeForClaimTxMessage networkName={parentChainName} />\n  }\n\n  if (\n    isTokenNativeUSDC(selectedToken?.address) &&\n    !isSourceChain &&\n    (isDestinationArbSepolia || isDestinationArbOne)\n  ) {\n    return (\n      <GasFeeForClaimTxMessage networkName={networks.destinationChain.name} />\n    )\n  }\n\n  return (\n    <div\n      className={twMerge(\n        'flex items-center justify-between',\n        'rounded-md bg-white/30 p-2',\n        'text-right text-xs font-light text-white opacity-80'\n      )}\n    >\n      <div className=\"flex w-1/2 flex-row items-center gap-1\">\n        <span className=\"text-left\">\n          {isSourceChain\n            ? networks.sourceChain.name\n            : networks.destinationChain.name}{' '}\n          gas fee\n        </span>\n        <Tooltip content={layerGasFeeTooltipContent}>\n          <InformationCircleIcon className=\"h-3 w-3\" />\n        </Tooltip>\n      </div>\n      {gasSummaryStatus === 'loading' ||\n      typeof estimatedGasFee === 'undefined' ? (\n        <>\n          {showPrice && <span />}\n          <StyledLoader />\n        </>\n      ) : (\n        <div\n          className={twMerge(\n            'flex w-1/2',\n            showPrice ? ' justify-between' : 'justify-end'\n          )}\n        >\n          <span className=\"text-right\">\n            {formatAmount(estimatedGasFee, {\n              symbol: isParentChain\n                ? parentChainNativeCurrency.symbol\n                : childChainNativeCurrency.symbol\n            })}\n          </span>\n\n          {showPrice && <NativeCurrencyPrice amount={estimatedGasFee} />}\n        </div>\n      )}\n    </div>\n  )\n}\n","import { BigNumber, constants } from 'ethers'\nimport { useMemo } from 'react'\nimport { useAppState } from '../../state'\nimport { useNetworks } from '../useNetworks'\nimport {\n  isTokenArbitrumOneNativeUSDC,\n  isTokenArbitrumSepoliaNativeUSDC\n} from '../../util/TokenUtils'\nimport { CommonAddress } from '../../util/CommonAddressUtils'\nimport { isNetwork } from '../../util/networks'\nimport { useBalances } from '../useBalances'\n\nexport type Balances = {\n  parentBalance: BigNumber | null\n  childBalance: BigNumber | null\n}\n\nexport function useSelectedTokenBalances(): Balances {\n  const { app } = useAppState()\n  const { selectedToken } = app\n  const [networks] = useNetworks()\n\n  const {\n    isArbitrumOne: isSourceChainArbitrumOne,\n    isEthereumMainnet: isSourceChainEthereum,\n    isSepolia: isSourceChainSepolia,\n    isArbitrumSepolia: isSourceChainArbitrumSepolia\n  } = isNetwork(networks.sourceChain.id)\n  const {\n    isArbitrumOne: isDestinationChainArbitrumOne,\n    isEthereumMainnet: isDestinationChainEthereum,\n    isSepolia: isDestinationChainSepolia,\n    isArbitrumSepolia: isDestinationChainArbitrumSepolia\n  } = isNetwork(networks.destinationChain.id)\n\n  const isSepoliaArbSepoliaPair =\n    (isSourceChainSepolia && isDestinationChainArbitrumSepolia) ||\n    (isSourceChainArbitrumSepolia && isDestinationChainSepolia)\n\n  const isEthereumArbitrumOnePair =\n    (isSourceChainEthereum && isDestinationChainArbitrumOne) ||\n    (isSourceChainArbitrumOne && isDestinationChainEthereum)\n\n  const { erc20ParentBalances, erc20ChildBalances } = useBalances()\n\n  return useMemo(() => {\n    const result: Balances = {\n      parentBalance: null,\n      childBalance: null\n    }\n\n    if (!selectedToken) {\n      return result\n    }\n\n    if (erc20ParentBalances) {\n      result.parentBalance =\n        erc20ParentBalances[selectedToken.address.toLowerCase()] ?? null\n    }\n\n    if (\n      erc20ChildBalances &&\n      selectedToken.l2Address &&\n      selectedToken.l2Address in erc20ChildBalances\n    ) {\n      result.childBalance =\n        erc20ChildBalances[selectedToken.l2Address.toLowerCase()] ??\n        constants.Zero\n    }\n\n    // token not bridged to the child chain, show zero\n    if (!selectedToken.l2Address) {\n      result.childBalance = constants.Zero\n    }\n\n    if (\n      isTokenArbitrumOneNativeUSDC(selectedToken.address) &&\n      isEthereumArbitrumOnePair &&\n      erc20ParentBalances &&\n      erc20ChildBalances\n    ) {\n      return {\n        parentBalance:\n          erc20ParentBalances[CommonAddress.Ethereum.USDC.toLowerCase()] ??\n          null,\n        childBalance:\n          erc20ChildBalances[selectedToken.address.toLowerCase()] ?? null\n      }\n    }\n    if (\n      isTokenArbitrumSepoliaNativeUSDC(selectedToken.address.toLowerCase()) &&\n      isSepoliaArbSepoliaPair &&\n      erc20ParentBalances &&\n      erc20ChildBalances\n    ) {\n      return {\n        parentBalance:\n          erc20ParentBalances[CommonAddress.Sepolia.USDC.toLowerCase()] ?? null,\n        childBalance:\n          erc20ChildBalances[selectedToken.address.toLowerCase()] ?? null\n      }\n    }\n\n    return result\n  }, [\n    erc20ParentBalances,\n    erc20ChildBalances,\n    isEthereumArbitrumOnePair,\n    isSepoliaArbSepoliaPair,\n    selectedToken\n  ])\n}\n","import { constants, utils } from 'ethers'\n\nimport { useNetworks } from '../../../hooks/useNetworks'\nimport { useDestinationAddressStore } from '../AdvancedSettings'\nimport { NetworkListbox, NetworkListboxProps } from '../NetworkListbox'\nimport {\n  BalancesContainer,\n  ETHBalance,\n  NetworkContainer,\n  NetworkListboxPlusBalancesContainer\n} from '../TransferPanelMain'\nimport { TokenBalance } from './TokenBalance'\nimport { useAccount } from 'wagmi'\nimport { useNetworksRelationship } from '../../../hooks/useNetworksRelationship'\nimport { NetworkType } from './utils'\nimport { useAppState } from '../../../state'\nimport { sanitizeTokenSymbol } from '../../../util/TokenUtils'\nimport { useBalances } from '../../../hooks/useBalances'\nimport { CommonAddress } from '../../../util/CommonAddressUtils'\nimport { isNetwork } from '../../../util/networks'\nimport { EstimatedGas } from '../EstimatedGas'\nimport {\n  Balances,\n  useSelectedTokenBalances\n} from '../../../hooks/TransferPanel/useSelectedTokenBalances'\nimport { useNativeCurrency } from '../../../hooks/useNativeCurrency'\n\nexport function DestinationNetworkBox({\n  customFeeTokenBalances,\n  showUsdcSpecificInfo,\n  destinationNetworkListboxProps\n}: {\n  customFeeTokenBalances: Balances\n  showUsdcSpecificInfo: boolean\n  destinationNetworkListboxProps: Omit<NetworkListboxProps, 'label'>\n}) {\n  const { address: walletAddress } = useAccount()\n  const [networks] = useNetworks()\n  const { childChain, childChainProvider, isDepositMode } =\n    useNetworksRelationship(networks)\n  const { isArbitrumOne } = isNetwork(childChain.id)\n  const {\n    app: { selectedToken }\n  } = useAppState()\n  const { ethParentBalance, ethChildBalance, erc20ChildBalances } =\n    useBalances()\n  const selectedTokenBalances = useSelectedTokenBalances()\n  const nativeCurrency = useNativeCurrency({ provider: childChainProvider })\n  const { destinationAddress } = useDestinationAddressStore()\n  const destinationAddressOrWalletAddress = destinationAddress || walletAddress\n\n  return (\n    <NetworkContainer\n      bgLogoHeight={58}\n      network={networks.destinationChain}\n      customAddress={destinationAddress}\n    >\n      <NetworkListboxPlusBalancesContainer>\n        <NetworkListbox label=\"To:\" {...destinationNetworkListboxProps} />\n        <BalancesContainer>\n          {destinationAddressOrWalletAddress &&\n            utils.isAddress(destinationAddressOrWalletAddress) && (\n              <>\n                <TokenBalance\n                  balance={\n                    isDepositMode\n                      ? selectedTokenBalances.childBalance\n                      : selectedTokenBalances.parentBalance\n                  }\n                  on={\n                    isDepositMode\n                      ? NetworkType.childChain\n                      : NetworkType.parentChain\n                  }\n                  forToken={selectedToken}\n                  prefix={selectedToken ? 'Balance: ' : ''}\n                  tokenSymbolOverride={\n                    // we need to send the proper, sanitized token-name to the component\n                    selectedToken?.symbol\n                      ? sanitizeTokenSymbol(selectedToken?.symbol, {\n                          chainId: networks.destinationChain.id,\n                          erc20L1Address: selectedToken?.address\n                        })\n                      : undefined\n                  }\n                />\n                {/* In deposit mode, when user selected USDC on mainnet,\n              the UI shows the Arb One balance of both USDC.e and native USDC */}\n                {isDepositMode && showUsdcSpecificInfo && (\n                  <TokenBalance\n                    balance={\n                      (isArbitrumOne\n                        ? erc20ChildBalances?.[CommonAddress.ArbitrumOne.USDC]\n                        : erc20ChildBalances?.[\n                            CommonAddress.ArbitrumSepolia.USDC\n                          ]) ?? constants.Zero\n                    }\n                    on={NetworkType.childChain}\n                    forToken={\n                      selectedToken\n                        ? { ...selectedToken, symbol: 'USDC' }\n                        : null\n                    }\n                    tokenSymbolOverride=\"USDC\"\n                  />\n                )}\n                {nativeCurrency.isCustom ? (\n                  <>\n                    <TokenBalance\n                      on={\n                        isDepositMode\n                          ? NetworkType.childChain\n                          : NetworkType.parentChain\n                      }\n                      balance={\n                        isDepositMode\n                          ? customFeeTokenBalances.childBalance\n                          : customFeeTokenBalances.parentBalance\n                      }\n                      forToken={nativeCurrency}\n                      prefix={selectedToken ? '' : 'Balance: '}\n                    />\n                    {!isDepositMode && (\n                      <ETHBalance\n                        balance={ethParentBalance}\n                        on={NetworkType.parentChain}\n                      />\n                    )}\n                  </>\n                ) : (\n                  <ETHBalance\n                    balance={isDepositMode ? ethChildBalance : ethParentBalance}\n                    prefix={selectedToken ? '' : 'Balance: '}\n                    on={\n                      isDepositMode\n                        ? NetworkType.childChain\n                        : NetworkType.parentChain\n                    }\n                  />\n                )}\n              </>\n            )}\n        </BalancesContainer>\n      </NetworkListboxPlusBalancesContainer>\n      <EstimatedGas chainType=\"destination\" />\n    </NetworkContainer>\n  )\n}\n","import { twMerge } from 'tailwind-merge'\n\nimport { useIsTestnetMode } from '../../hooks/useIsTestnetMode'\n\nimport { Switch } from './atoms/Switch'\n\nexport const TestnetToggle = ({\n  className,\n  label,\n  description,\n  includeToggleStateOnLabel\n}: {\n  className?: {\n    wrapper?: string\n    switch?: string\n  }\n  label: string\n  description?: string\n  includeToggleStateOnLabel?: boolean\n}) => {\n  const [isTestnetMode, toggleTestnetMode] = useIsTestnetMode()\n\n  const labelText = includeToggleStateOnLabel\n    ? `${label} ${isTestnetMode ? 'ON' : 'OFF'}`\n    : label\n\n  return (\n    <label className={twMerge('cursor-pointer', className?.wrapper)}>\n      <Switch\n        className={className?.switch}\n        label={labelText}\n        description={description}\n        checked={isTestnetMode}\n        onChange={toggleTestnetMode}\n      />\n    </label>\n  )\n}\n","import { twMerge } from 'tailwind-merge'\n\nexport const panelWrapperClassnames = twMerge(\n  'h-screen w-full bg-bg-gray-1 text-white border-gray-dark border w-screen',\n  'sm:h-auto sm:w-auto sm:min-w-[448px] sm:gap-3 sm:rounded sm:shadow-modal'\n)\n\nexport function onPopoverClose() {\n  document.body.classList.remove('overflow-hidden', 'sm:overflow-visible')\n}\n\nexport function onPopoverButtonClick() {\n  document.body.classList.add('overflow-hidden', 'sm:overflow-visible')\n}\n","import { Popover } from '@headlessui/react'\nimport {\n  CSSProperties,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'react'\nimport { Chain } from 'wagmi'\nimport { useDebounce } from '@uidotdev/usehooks'\nimport { ShieldExclamationIcon } from '@heroicons/react/24/outline'\nimport { twMerge } from 'tailwind-merge'\nimport { AutoSizer, List, ListRowProps } from 'react-virtualized'\nimport { ChevronDownIcon } from '@heroicons/react/24/outline'\n\nimport { ChainId, getSupportedChainIds, isNetwork } from '../../util/networks'\nimport { useAccountType } from '../../hooks/useAccountType'\nimport { useIsTestnetMode } from '../../hooks/useIsTestnetMode'\nimport { SearchPanel } from './SearchPanel/SearchPanel'\nimport { SearchPanelTable } from './SearchPanel/SearchPanelTable'\nimport { TestnetToggle } from './TestnetToggle'\nimport { useArbQueryParams } from '../../hooks/useArbQueryParams'\nimport {\n  panelWrapperClassnames,\n  onPopoverButtonClick,\n  onPopoverClose\n} from './SearchPanel/SearchPanelUtils'\nimport { getBridgeUiConfigForChain } from '../../util/bridgeUiConfig'\nimport { getWagmiChain } from '../../util/wagmi/getWagmiChain'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { Transition } from './Transition'\nimport { NetworkImage } from './NetworkImage'\n\ntype NetworkType = 'core' | 'orbit'\n\nenum ChainGroupName {\n  core = 'CORE CHAINS',\n  orbit = 'ORBIT CHAINS'\n}\n\ntype ChainGroupInfo = {\n  name: ChainGroupName\n  description?: React.ReactNode\n}\n\nconst chainGroupInfo: { [key in NetworkType]: ChainGroupInfo } = {\n  core: {\n    name: ChainGroupName.core\n  },\n  orbit: {\n    name: ChainGroupName.orbit,\n    description: (\n      <p className=\"mt-2 flex gap-1 whitespace-normal rounded bg-orange-dark px-2 py-1 text-xs text-orange\">\n        <ShieldExclamationIcon className=\"h-4 w-4 shrink-0\" />\n        <span>\n          Independent projects using Arbitrum technology. Orbit chains have\n          varying degrees of decentralization.{' '}\n          <span className=\"font-semibold\">Bridge at your own risk.</span>\n        </span>\n      </p>\n    )\n  }\n}\n\nfunction ChainTypeInfoRow({\n  chainGroup,\n  style\n}: {\n  chainGroup: ChainGroupInfo\n  style: CSSProperties\n}) {\n  const { name, description } = chainGroup\n  const isCoreGroup = chainGroup.name === ChainGroupName.core\n\n  return (\n    <div\n      key={name}\n      style={style}\n      className={twMerge(\n        'px-4 py-3',\n        !isCoreGroup &&\n          'before:-mt-3 before:mb-3 before:block before:h-[1px] before:w-full before:bg-white/30 before:content-[\"\"]'\n      )}\n    >\n      <p className=\"text-sm text-white/70\">{name}</p>\n      {description}\n    </div>\n  )\n}\n\nfunction NetworkRow({\n  chainId,\n  style,\n  onClick,\n  close\n}: {\n  chainId: ChainId\n  style: CSSProperties\n  onClick: (value: Chain) => void\n  close: (focusableElement?: HTMLElement) => void\n}) {\n  const { network, nativeTokenData } = getBridgeUiConfigForChain(chainId)\n  const chain = getWagmiChain(chainId)\n  const [{ sourceChain }] = useNetworks()\n\n  function handleClick() {\n    onClick(chain)\n    close() // close the popover after option-click\n  }\n\n  return (\n    <button\n      onClick={handleClick}\n      key={chainId}\n      style={style}\n      type=\"button\"\n      aria-label={`Switch to ${network.name}`}\n      className={twMerge(\n        'flex h-[90px] w-full items-center gap-4 px-4 py-2 text-lg transition-[background] duration-200 hover:bg-white/10',\n        chainId === sourceChain.id && 'bg-white/10' // selected row\n      )}\n    >\n      <NetworkImage\n        chainId={chainId}\n        className=\"h-[32px] w-[32px] p-[6px]\"\n        size={20}\n      />\n      <div className={twMerge('flex flex-col items-start gap-1')}>\n        <span className=\"truncate leading-[1.1]\">{network.name}</span>\n        {network.description && (\n          <p className=\"whitespace-pre-wrap text-left text-xs leading-[1.15] text-white/70\">\n            {network.description}\n          </p>\n        )}\n        <p className=\"text-[10px] leading-none text-white/50\">\n          {nativeTokenData?.symbol ?? 'ETH'} is the native gas token\n        </p>\n      </div>\n    </button>\n  )\n}\n\nfunction AddCustomOrbitChainButton() {\n  const [, setQueryParams] = useArbQueryParams()\n  const [isTestnetMode] = useIsTestnetMode()\n\n  const openSettingsPanel = () => setQueryParams({ settingsOpen: true })\n\n  if (!isTestnetMode) {\n    return null\n  }\n\n  return (\n    <button className=\"arb-hover text-sm underline\" onClick={openSettingsPanel}>\n      <span>Add Custom Orbit Chain</span>\n    </button>\n  )\n}\n\nfunction NetworksPanel({\n  onNetworkRowClick,\n  close\n}: {\n  onNetworkRowClick: (value: Chain) => void\n  close: (focusableElement?: HTMLElement) => void\n}) {\n  const [errorMessage, setErrorMessage] = useState('')\n  const [networkSearched, setNetworkSearched] = useState('')\n  const debouncedNetworkSearched = useDebounce(networkSearched, 200)\n  const listRef = useRef<List>(null)\n  const [isTestnetMode] = useIsTestnetMode()\n\n  const chainIds = useMemo(\n    () =>\n      getSupportedChainIds({\n        includeMainnets: !isTestnetMode,\n        includeTestnets: isTestnetMode\n      }),\n    [isTestnetMode]\n  )\n\n  const networksToShow = useMemo(() => {\n    const _networkSearched = debouncedNetworkSearched.trim().toLowerCase()\n\n    if (_networkSearched) {\n      return chainIds.filter(chainId => {\n        const networkName =\n          getBridgeUiConfigForChain(chainId).network.name.toLowerCase()\n        return networkName.includes(_networkSearched)\n      })\n    }\n\n    const coreNetworks = chainIds.filter(\n      chainId => !isNetwork(chainId).isOrbitChain\n    )\n    const orbitNetworks = chainIds.filter(\n      chainId => isNetwork(chainId).isOrbitChain\n    )\n\n    return {\n      core: coreNetworks,\n      orbit: orbitNetworks\n    }\n  }, [debouncedNetworkSearched, chainIds])\n\n  const isNetworkSearchResult = Array.isArray(networksToShow)\n\n  const networkRowsWithChainInfoRows = useMemo(() => {\n    if (isNetworkSearchResult) {\n      return networksToShow\n    }\n    return [\n      ChainGroupName.core,\n      ...networksToShow.core,\n      ChainGroupName.orbit,\n      ...networksToShow.orbit\n    ]\n  }, [isNetworkSearchResult, networksToShow])\n\n  function getRowHeight({ index }: { index: number }) {\n    const rowItemOrChainId = networkRowsWithChainInfoRows[index]\n    if (!rowItemOrChainId) {\n      return 0\n    }\n    if (typeof rowItemOrChainId === 'string') {\n      return rowItemOrChainId === ChainGroupName.core ? 45 : 115\n    }\n    const rowItem = getBridgeUiConfigForChain(rowItemOrChainId)\n    if (rowItem.network.description) {\n      return 90\n    }\n    return 60\n  }\n\n  useEffect(() => {\n    listRef.current?.recomputeRowHeights()\n  }, [isTestnetMode, networkRowsWithChainInfoRows])\n\n  const rowRenderer = useCallback(\n    ({ index, style }: ListRowProps) => {\n      const networkOrChainTypeName = networkRowsWithChainInfoRows[index]\n\n      if (!networkOrChainTypeName) {\n        return null\n      }\n\n      if (networkOrChainTypeName === ChainGroupName.core) {\n        return (\n          <ChainTypeInfoRow chainGroup={chainGroupInfo.core} style={style} />\n        )\n      }\n\n      if (networkOrChainTypeName === ChainGroupName.orbit) {\n        return (\n          <ChainTypeInfoRow chainGroup={chainGroupInfo.orbit} style={style} />\n        )\n      }\n\n      return (\n        <NetworkRow\n          key={networkOrChainTypeName}\n          style={style}\n          chainId={networkOrChainTypeName}\n          onClick={onNetworkRowClick}\n          close={close}\n        />\n      )\n    },\n    [close, networkRowsWithChainInfoRows, onNetworkRowClick]\n  )\n\n  const onSearchInputChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      setErrorMessage('')\n      setNetworkSearched(event.target.value)\n    },\n    []\n  )\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n      <SearchPanelTable\n        searchInputPlaceholder=\"Search a network name\"\n        searchInputValue={networkSearched}\n        searchInputOnChange={onSearchInputChange}\n        errorMessage={errorMessage}\n      >\n        <AutoSizer>\n          {({ height, width }) => (\n            <List\n              ref={listRef}\n              width={width - 2}\n              height={height}\n              rowCount={networkRowsWithChainInfoRows.length}\n              rowHeight={getRowHeight}\n              rowRenderer={rowRenderer}\n              listRef={listRef}\n            />\n          )}\n        </AutoSizer>\n      </SearchPanelTable>\n      <div className=\"flex justify-between pb-2\">\n        <TestnetToggle label=\"Testnet mode\" includeToggleStateOnLabel />\n        <AddCustomOrbitChainButton />\n      </div>\n    </div>\n  )\n}\n\nexport const NetworkSelectionContainer = ({\n  children,\n  buttonClassName,\n  buttonStyle,\n  onChange\n}: {\n  children: React.ReactNode\n  buttonClassName: string\n  buttonStyle?: CSSProperties\n  onChange: (value: Chain) => void\n}) => {\n  const { isSmartContractWallet, isLoading: isLoadingAccountType } =\n    useAccountType()\n\n  return (\n    <Popover className=\"relative w-max\">\n      {({ open }) => (\n        <>\n          <Popover.Button\n            style={buttonStyle}\n            disabled={isSmartContractWallet || isLoadingAccountType}\n            className={buttonClassName}\n            onClick={onPopoverButtonClick}\n          >\n            {children}\n            {!isSmartContractWallet && (\n              <ChevronDownIcon\n                className={twMerge(\n                  'h-[12px] w-[12px] transition-transform duration-200 sm:h-3 sm:w-3',\n                  open ? '-rotate-180' : 'rotate-0'\n                )}\n              />\n            )}\n          </Popover.Button>\n\n          <Transition\n            className=\"fixed left-0 top-0 z-50 sm:absolute sm:top-[54px]\"\n            // we don't unmount on leave here because otherwise transition won't work with virtualized lists\n            options={{ unmountOnLeave: false }}\n            afterLeave={onPopoverClose}\n          >\n            <Popover.Panel className={twMerge(panelWrapperClassnames)}>\n              {({ close }) => {\n                function onClose() {\n                  onPopoverClose()\n                  close()\n                }\n                return (\n                  <SearchPanel>\n                    <SearchPanel.MainPage className=\"flex h-full flex-col px-5 py-4\">\n                      <SearchPanel.PageTitle title=\"Select Network\">\n                        <SearchPanel.CloseButton onClick={onClose} />\n                      </SearchPanel.PageTitle>\n                      <NetworksPanel\n                        close={onClose}\n                        onNetworkRowClick={onChange}\n                      />\n                    </SearchPanel.MainPage>\n                  </SearchPanel>\n                )\n              }}\n            </Popover.Panel>\n          </Transition>\n        </>\n      )}\n    </Popover>\n  )\n}\n","import { useMemo } from 'react'\nimport { Popover } from '@headlessui/react'\nimport { ChevronDownIcon } from '@heroicons/react/24/outline'\nimport { twMerge } from 'tailwind-merge'\n\nimport { useAppState } from '../../state'\nimport { sanitizeImageSrc } from '../../util'\nimport { TokenSearch } from '../TransferPanel/TokenSearch'\nimport { sanitizeTokenSymbol } from '../../util/TokenUtils'\nimport { useNativeCurrency } from '../../hooks/useNativeCurrency'\nimport {\n  onPopoverButtonClick,\n  onPopoverClose,\n  panelWrapperClassnames\n} from '../common/SearchPanel/SearchPanelUtils'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { Transition } from '../common/Transition'\n\nexport function TokenButton(): JSX.Element {\n  const {\n    app: {\n      selectedToken,\n      arbTokenBridge: { bridgeTokens },\n      arbTokenBridgeLoaded\n    }\n  } = useAppState()\n  const [networks] = useNetworks()\n  const { childChainProvider } = useNetworksRelationship(networks)\n\n  const nativeCurrency = useNativeCurrency({ provider: childChainProvider })\n\n  const tokenLogo = useMemo<string | undefined>(() => {\n    const selectedAddress = selectedToken?.address\n    if (!selectedAddress) {\n      return nativeCurrency.logoUrl\n    }\n    if (!arbTokenBridgeLoaded) {\n      return undefined\n    }\n    if (typeof bridgeTokens === 'undefined') {\n      return undefined\n    }\n    const logo = bridgeTokens[selectedAddress]?.logoURI\n    if (logo) {\n      return sanitizeImageSrc(logo)\n    }\n    return undefined\n  }, [\n    nativeCurrency,\n    bridgeTokens,\n    selectedToken?.address,\n    arbTokenBridgeLoaded\n  ])\n\n  const tokenSymbol = useMemo(() => {\n    if (!selectedToken) {\n      return nativeCurrency.symbol\n    }\n\n    return sanitizeTokenSymbol(selectedToken.symbol, {\n      erc20L1Address: selectedToken.address,\n      chainId: networks.sourceChain.id\n    })\n  }, [selectedToken, networks.sourceChain.id, nativeCurrency.symbol])\n\n  return (\n    <>\n      <Popover className=\"relative\">\n        {({ open }) => (\n          <>\n            <Popover.Button\n              className=\"arb-hover h-full w-max rounded-bl rounded-tl px-3 py-3 text-white\"\n              aria-label=\"Select Token\"\n              onClick={onPopoverButtonClick}\n            >\n              <div className=\"flex items-center gap-2\">\n                {/* Commenting it out until we update the token image source files to be of better quality */}\n                {/* {tokenLogo && ( \n                 // SafeImage is used for token logo, we don't know at buildtime\n                where those images will be loaded from // It would throw error\n                if it's loaded from external domains // eslint-disable-next-line\n                @next/next/no-img-element \n                 <img\n                    src={tokenLogo}\n                    alt=\"Token logo\"\n                    className=\"h-5 w-5 sm:h-7 sm:w-7\"\n                  />\n                )} */}\n                <span className=\"text-xl font-light sm:text-3xl\">\n                  {tokenSymbol}\n                </span>\n                <ChevronDownIcon\n                  className={twMerge(\n                    'h-3 w-3 text-gray-6 transition-transform duration-200',\n                    open ? '-rotate-180' : 'rotate-0'\n                  )}\n                />\n              </div>\n            </Popover.Button>\n\n            <Transition\n              // we don't unmount on leave here because otherwise transition won't work with virtualized lists\n              options={{ unmountOnLeave: false }}\n              className=\"fixed left-0 top-0 z-20 sm:absolute sm:top-[76px] sm:max-w-[466px]\"\n              afterLeave={onPopoverClose}\n            >\n              <Popover.Panel\n                className={twMerge(panelWrapperClassnames, 'px-5 py-4')}\n              >\n                {({ close }) => {\n                  function onClose() {\n                    onPopoverClose()\n                    close()\n                  }\n                  return <TokenSearch close={onClose} />\n                }}\n              </Popover.Panel>\n            </Transition>\n          </>\n        )}\n      </Popover>\n    </>\n  )\n}\n","import { useCallback } from 'react'\n\nimport { truncateExtraDecimals } from '../../util/NumberUtils'\nimport { useArbQueryParams } from '../useArbQueryParams'\nimport { useSelectedTokenDecimals } from './useSelectedTokenDecimals'\n\nexport function useSetInputAmount() {\n  const [, setQueryParams] = useArbQueryParams()\n  const decimals = useSelectedTokenDecimals()\n\n  const setAmount = useCallback(\n    (newAmount: string) => {\n      const correctDecimalsAmount = truncateExtraDecimals(newAmount, decimals)\n\n      setQueryParams({ amount: correctDecimalsAmount })\n    },\n    [decimals, setQueryParams]\n  )\n\n  return setAmount\n}\n","import { twMerge } from 'tailwind-merge'\nimport { useEffect, useMemo } from 'react'\n\nimport { TokenButton } from './TokenButton'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { useSelectedTokenBalances } from '../../hooks/TransferPanel/useSelectedTokenBalances'\nimport { useAppState } from '../../state'\nimport { useSetInputAmount } from '../../hooks/TransferPanel/useSetInputAmount'\nimport { countDecimals } from '../../util/NumberUtils'\nimport { useSelectedTokenDecimals } from '../../hooks/TransferPanel/useSelectedTokenDecimals'\nimport { useBalances } from '../../hooks/useBalances'\nimport { TransferReadinessRichErrorMessage } from './useTransferReadinessUtils'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { useTransferDisabledDialogStore } from './TransferDisabledDialog'\n\nfunction MaxButton(props: React.ButtonHTMLAttributes<HTMLButtonElement>) {\n  const { className = '', ...rest } = props\n\n  const {\n    app: { selectedToken }\n  } = useAppState()\n  const [networks] = useNetworks()\n  const { isDepositMode } = useNetworksRelationship(networks)\n\n  const { ethParentBalance, ethChildBalance } = useBalances()\n  const selectedTokenBalances = useSelectedTokenBalances()\n\n  const maxButtonVisible = useMemo(() => {\n    const ethBalance = isDepositMode ? ethParentBalance : ethChildBalance\n    const tokenBalance = isDepositMode\n      ? selectedTokenBalances.parentBalance\n      : selectedTokenBalances.childBalance\n\n    if (selectedToken) {\n      if (!tokenBalance) {\n        return false\n      }\n\n      return !tokenBalance.isZero()\n    }\n\n    if (!ethBalance) {\n      return false\n    }\n\n    return !ethBalance.isZero()\n  }, [\n    ethParentBalance,\n    ethChildBalance,\n    selectedTokenBalances,\n    selectedToken,\n    isDepositMode\n  ])\n\n  if (!maxButtonVisible) {\n    return null\n  }\n\n  return (\n    <button\n      type=\"button\"\n      className={twMerge(\n        'arb-hover px-2 py-2 text-sm font-light text-gray-6 sm:px-4',\n        className\n      )}\n      {...rest}\n    >\n      MAX\n    </button>\n  )\n}\n\nfunction TransferPanelInputField(\n  props: React.InputHTMLAttributes<HTMLInputElement>\n) {\n  const { value = '', onChange, ...rest } = props\n  const setAmount = useSetInputAmount()\n  const decimals = useSelectedTokenDecimals()\n\n  useEffect(() => {\n    // if number of decimals of query param value is greater than token decimals,\n    // truncate the decimals and update the amount query param value\n    if (countDecimals(String(value)) > decimals) {\n      setAmount(String(value))\n    }\n  }, [value, decimals, setAmount])\n\n  return (\n    <input\n      type=\"text\"\n      inputMode=\"decimal\"\n      placeholder=\"Enter amount\"\n      className=\"h-full w-full bg-transparent px-3 text-xl font-light placeholder:text-gray-dark sm:text-3xl\"\n      value={value}\n      onChange={event => {\n        onChange?.(event)\n        setAmount(event.target.value)\n      }}\n      {...rest}\n    />\n  )\n}\n\nfunction ErrorMessage({\n  errorMessage\n}: {\n  errorMessage: string | TransferReadinessRichErrorMessage | undefined\n}) {\n  const { openDialog: openTransferDisabledDialog } =\n    useTransferDisabledDialogStore()\n\n  if (typeof errorMessage === 'undefined') {\n    return null\n  }\n\n  if (typeof errorMessage === 'string') {\n    return <span className=\"text-sm text-brick\">{errorMessage}</span>\n  }\n\n  switch (errorMessage) {\n    case TransferReadinessRichErrorMessage.GAS_ESTIMATION_FAILURE:\n      return (\n        <span className=\"text-sm text-brick\">\n          Gas estimation failed, join our{' '}\n          <ExternalLink\n            href=\"https://discord.com/invite/ZpZuw7p\"\n            className=\"underline\"\n          >\n            Discord\n          </ExternalLink>{' '}\n          and reach out in #support for assistance.\n        </span>\n      )\n\n    case TransferReadinessRichErrorMessage.TOKEN_WITHDRAW_ONLY:\n    case TransferReadinessRichErrorMessage.TOKEN_TRANSFER_DISABLED:\n      return (\n        <>\n          <span className=\"text-sm text-brick\">\n            This token can&apos;t be bridged over.\n          </span>{' '}\n          <button\n            className=\"arb-hover underline\"\n            onClick={openTransferDisabledDialog}\n          >\n            Learn more.\n          </button>\n        </>\n      )\n  }\n}\n\nexport type TransferPanelMainInputProps =\n  React.InputHTMLAttributes<HTMLInputElement> & {\n    errorMessage?: string | TransferReadinessRichErrorMessage | undefined\n    maxButtonOnClick: React.ButtonHTMLAttributes<HTMLButtonElement>['onClick']\n    value: string\n  }\n\nexport function TransferPanelMainInput(props: TransferPanelMainInputProps) {\n  const { errorMessage, maxButtonOnClick, ...rest } = props\n\n  return (\n    <>\n      <div\n        className={twMerge(\n          'flex flex-row rounded border bg-black/40 shadow-2',\n          errorMessage\n            ? 'border-brick text-brick'\n            : 'border-white/30 text-white'\n        )}\n      >\n        <TokenButton />\n        <div\n          className={twMerge(\n            'flex grow flex-row items-center justify-center border-l',\n            errorMessage ? 'border-brick' : 'border-white/30'\n          )}\n        >\n          <TransferPanelInputField {...rest} />\n          <MaxButton onClick={maxButtonOnClick} />\n        </div>\n      </div>\n\n      <ErrorMessage errorMessage={errorMessage} />\n    </>\n  )\n}\n","import { useMemo } from 'react'\nimport { utils } from 'ethers'\n\nimport { useNetworksRelationship } from '../../../hooks/useNetworksRelationship'\nimport { useNetworks } from '../../../hooks/useNetworks'\nimport { useAppState } from '../../../state'\nimport {\n  Balances,\n  useSelectedTokenBalances\n} from '../../../hooks/TransferPanel/useSelectedTokenBalances'\nimport { defaultErc20Decimals } from '../../../defaults'\nimport { useGasSummary } from '../../../hooks/TransferPanel/useGasSummary'\nimport { useNativeCurrency } from '../../../hooks/useNativeCurrency'\nimport { useBalances } from '../../../hooks/useBalances'\n\nexport function useMaxAmount({\n  customFeeTokenBalances\n}: {\n  customFeeTokenBalances: Balances\n}) {\n  const {\n    app: { selectedToken }\n  } = useAppState()\n  const selectedTokenBalances = useSelectedTokenBalances()\n  const [networks] = useNetworks()\n  const { childChainProvider, isDepositMode } =\n    useNetworksRelationship(networks)\n  const nativeCurrency = useNativeCurrency({ provider: childChainProvider })\n  const { ethParentBalance, ethChildBalance } = useBalances()\n\n  const { estimatedParentChainGasFees, estimatedChildChainGasFees } =\n    useGasSummary()\n\n  const maxAmount = useMemo(() => {\n    if (selectedToken) {\n      const tokenBalance = isDepositMode\n        ? selectedTokenBalances.parentBalance\n        : selectedTokenBalances.childBalance\n\n      if (!tokenBalance) {\n        return\n      }\n\n      // For token deposits and withdrawals, we can set the max amount, as gas fees are paid in ETH / custom fee token\n      return utils.formatUnits(\n        tokenBalance,\n        selectedToken?.decimals ?? defaultErc20Decimals\n      )\n    }\n\n    const customFeeTokenParentBalance = customFeeTokenBalances.parentBalance\n    // For custom fee token deposits, we can set the max amount, as the fees will be paid in ETH\n    if (\n      nativeCurrency.isCustom &&\n      isDepositMode &&\n      customFeeTokenParentBalance\n    ) {\n      return utils.formatUnits(\n        customFeeTokenParentBalance,\n        nativeCurrency.decimals\n      )\n    }\n\n    // We have already handled token deposits and deposits of the custom fee token\n    // The remaining cases are ETH deposits, and ETH/custom fee token withdrawals (which can be handled in the same case)\n    const nativeCurrencyBalance = isDepositMode\n      ? ethParentBalance\n      : ethChildBalance\n\n    if (!nativeCurrencyBalance) {\n      return\n    }\n\n    const nativeCurrencyBalanceFormatted = utils.formatUnits(\n      nativeCurrencyBalance,\n      nativeCurrency.decimals\n    )\n\n    const estimatedTotalGasFees =\n      (estimatedParentChainGasFees ?? 0) + (estimatedChildChainGasFees ?? 0)\n\n    const maxAmount =\n      parseFloat(nativeCurrencyBalanceFormatted) - estimatedTotalGasFees * 1.4\n\n    // make sure it's always a positive number\n    // if it's negative, set it to user's balance to show insufficient for gas error\n    if (maxAmount > 0) {\n      return String(maxAmount)\n    }\n\n    return nativeCurrencyBalanceFormatted\n  }, [\n    nativeCurrency,\n    ethParentBalance,\n    ethChildBalance,\n    isDepositMode,\n    selectedToken,\n    selectedTokenBalances,\n    estimatedParentChainGasFees,\n    estimatedChildChainGasFees,\n    customFeeTokenBalances\n  ])\n\n  return {\n    maxAmount\n  }\n}\n","import { twMerge } from 'tailwind-merge'\nimport { Chain } from 'wagmi'\nimport { useCallback, useEffect } from 'react'\n\nimport { getNetworkName } from '../../../util/networks'\nimport { NetworkSelectionContainer } from '../../common/NetworkSelectionContainer'\nimport {\n  BalancesContainer,\n  ETHBalance,\n  NetworkContainer,\n  NetworkListboxPlusBalancesContainer\n} from '../TransferPanelMain'\nimport { TokenBalance } from './TokenBalance'\nimport { NetworkType } from './utils'\nimport { useActions, useAppState } from '../../../state'\nimport { useNetworks } from '../../../hooks/useNetworks'\nimport { useNativeCurrency } from '../../../hooks/useNativeCurrency'\nimport { useNetworksRelationship } from '../../../hooks/useNetworksRelationship'\nimport {\n  Balances,\n  useSelectedTokenBalances\n} from '../../../hooks/TransferPanel/useSelectedTokenBalances'\nimport { useBalances } from '../../../hooks/useBalances'\nimport {\n  ETH_BALANCE_ARTICLE_LINK,\n  USDC_LEARN_MORE_LINK\n} from '../../../constants'\nimport { ExternalLink } from '../../common/ExternalLink'\nimport { EstimatedGas } from '../EstimatedGas'\nimport { TransferPanelMainInput } from '../TransferPanelMainInput'\nimport { getBridgeUiConfigForChain } from '../../../util/bridgeUiConfig'\nimport { AmountQueryParamEnum } from '../../../hooks/useArbQueryParams'\nimport { TransferReadinessRichErrorMessage } from '../useTransferReadinessUtils'\nimport { useMaxAmount } from './useMaxAmount'\nimport { useSetInputAmount } from '../../../hooks/TransferPanel/useSetInputAmount'\n\nexport function SourceNetworkBox({\n  amount,\n  errorMessage,\n  customFeeTokenBalances,\n  showUsdcSpecificInfo\n}: {\n  amount: string\n  errorMessage: string | TransferReadinessRichErrorMessage | undefined\n  customFeeTokenBalances: Balances\n  showUsdcSpecificInfo: boolean\n}) {\n  const actions = useActions()\n  const [networks, setNetworks] = useNetworks()\n  const { childChain, childChainProvider, isDepositMode } =\n    useNetworksRelationship(networks)\n  const {\n    app: { selectedToken }\n  } = useAppState()\n  const { ethParentBalance, ethChildBalance } = useBalances()\n  const selectedTokenBalances = useSelectedTokenBalances()\n  const nativeCurrency = useNativeCurrency({ provider: childChainProvider })\n  const setAmount = useSetInputAmount()\n  const { maxAmount } = useMaxAmount({\n    customFeeTokenBalances\n  })\n\n  const isMaxAmount = amount === AmountQueryParamEnum.MAX\n\n  // whenever the user changes the `amount` input, it should update the amount in browser query params as well\n  useEffect(() => {\n    if (isMaxAmount && typeof maxAmount !== 'undefined') {\n      setAmount(maxAmount)\n    } else {\n      setAmount(amount)\n    }\n  }, [amount, maxAmount, isMaxAmount, setAmount])\n\n  const maxButtonOnClick = useCallback(() => {\n    if (typeof maxAmount !== 'undefined') {\n      setAmount(maxAmount)\n    }\n  }, [maxAmount, setAmount])\n\n  const buttonStyle = {\n    backgroundColor: getBridgeUiConfigForChain(networks.sourceChain.id).color\n  }\n\n  const onChange = useCallback(\n    (network: Chain) => {\n      if (networks.destinationChain.id === network.id) {\n        setNetworks({\n          sourceChainId: networks.destinationChain.id,\n          destinationChainId: networks.sourceChain.id\n        })\n        return\n      }\n\n      // if changing sourceChainId, let the destinationId be the same, and let the `setNetworks` func decide whether it's a valid or invalid chain pair\n      // this way, the destination doesn't reset to the default chain if the source chain is changed, and if both are valid\n      setNetworks({\n        sourceChainId: network.id,\n        destinationChainId: networks.destinationChain.id\n      })\n\n      actions.app.setSelectedToken(null)\n    },\n    [\n      actions.app,\n      networks.destinationChain.id,\n      networks.sourceChain.id,\n      setNetworks\n    ]\n  )\n\n  return (\n    <NetworkContainer bgLogoHeight={138} network={networks.sourceChain}>\n      <NetworkListboxPlusBalancesContainer>\n        <NetworkSelectionContainer\n          buttonStyle={buttonStyle}\n          buttonClassName={twMerge(\n            'arb-hover flex w-max items-center gap-1 md:gap-2 rounded px-3 py-2 text-sm text-white outline-none md:text-2xl'\n          )}\n          onChange={onChange}\n        >\n          <span className=\"max-w-[220px] truncate text-sm leading-[1.1] md:max-w-[250px] md:text-xl\">\n            From: {getNetworkName(networks.sourceChain.id)}\n          </span>\n        </NetworkSelectionContainer>\n        <BalancesContainer>\n          <TokenBalance\n            on={\n              isDepositMode ? NetworkType.parentChain : NetworkType.childChain\n            }\n            balance={\n              isDepositMode\n                ? selectedTokenBalances.parentBalance\n                : selectedTokenBalances.childBalance\n            }\n            forToken={selectedToken}\n            prefix={selectedToken ? 'Balance: ' : ''}\n          />\n          {nativeCurrency.isCustom ? (\n            <>\n              <TokenBalance\n                on={\n                  isDepositMode\n                    ? NetworkType.parentChain\n                    : NetworkType.childChain\n                }\n                balance={\n                  isDepositMode\n                    ? customFeeTokenBalances.parentBalance\n                    : customFeeTokenBalances.childBalance\n                }\n                forToken={nativeCurrency}\n                prefix={selectedToken ? '' : 'Balance: '}\n              />\n              {/* Only show ETH balance on parent chain */}\n              {isDepositMode && (\n                <ETHBalance\n                  balance={ethParentBalance}\n                  on={NetworkType.parentChain}\n                />\n              )}\n            </>\n          ) : (\n            <ETHBalance\n              balance={isDepositMode ? ethParentBalance : ethChildBalance}\n              prefix={selectedToken ? '' : 'Balance: '}\n              on={\n                isDepositMode ? NetworkType.parentChain : NetworkType.childChain\n              }\n            />\n          )}\n        </BalancesContainer>\n      </NetworkListboxPlusBalancesContainer>\n\n      <div className=\"flex flex-col gap-1\">\n        <TransferPanelMainInput\n          maxButtonOnClick={maxButtonOnClick}\n          errorMessage={errorMessage}\n          value={isMaxAmount ? '' : amount}\n        />\n\n        {showUsdcSpecificInfo && (\n          <p className=\"mt-1 text-xs font-light text-white\">\n            Bridged USDC (USDC.e) will work but is different from Native USDC.{' '}\n            <ExternalLink\n              href={USDC_LEARN_MORE_LINK}\n              className=\"arb-hover underline\"\n            >\n              Learn more\n            </ExternalLink>\n            .\n          </p>\n        )}\n\n        {isDepositMode && selectedToken && (\n          <p className=\"mt-1 text-xs font-light text-white\">\n            Make sure you have {nativeCurrency.symbol} in your{' '}\n            {getNetworkName(childChain.id)} account, as youll need it to power\n            transactions.\n            <br />\n            <ExternalLink\n              href={ETH_BALANCE_ARTICLE_LINK}\n              className=\"arb-hover underline\"\n            >\n              Learn more\n            </ExternalLink>\n            .\n          </p>\n        )}\n      </div>\n      <EstimatedGas chainType=\"source\" />\n    </NetworkContainer>\n  )\n}\n","import React, { useEffect, useMemo, useState } from 'react'\nimport { ArrowsUpDownIcon, ArrowDownIcon } from '@heroicons/react/24/outline'\nimport { twMerge } from 'tailwind-merge'\nimport { BigNumber, utils } from 'ethers'\nimport { Chain, useAccount } from 'wagmi'\nimport { useMedia } from 'react-use'\n\nimport { Loader } from '../common/atoms/Loader'\nimport { useActions, useAppState } from '../../state'\nimport { formatAmount } from '../../util/NumberUtils'\nimport {\n  ChainId,\n  getExplorerUrl,\n  getDestinationChainIds,\n  isNetwork\n} from '../../util/networks'\nimport { getWagmiChain } from '../../util/wagmi/getWagmiChain'\nimport { useDestinationAddressStore } from './AdvancedSettings'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { useDialog } from '../common/Dialog'\n\nimport { useAccountType } from '../../hooks/useAccountType'\nimport {\n  isTokenArbitrumSepoliaNativeUSDC,\n  isTokenArbitrumOneNativeUSDC,\n  isTokenSepoliaUSDC,\n  isTokenMainnetUSDC\n} from '../../util/TokenUtils'\nimport { ether } from '../../constants'\nimport { NetworkListboxProps } from './NetworkListbox'\nimport { OneNovaTransferDialog } from './OneNovaTransferDialog'\nimport { useUpdateUSDCBalances } from '../../hooks/CCTP/useUpdateUSDCBalances'\nimport { useNativeCurrency } from '../../hooks/useNativeCurrency'\nimport { TransferReadinessRichErrorMessage } from './useTransferReadinessUtils'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { TransferDisabledDialog } from './TransferDisabledDialog'\nimport { getBridgeUiConfigForChain } from '../../util/bridgeUiConfig'\nimport { useUpdateUSDCTokenData } from './TransferPanelMain/hooks'\nimport { Balances } from '../../hooks/TransferPanel/useSelectedTokenBalances'\nimport { useBalances } from '../../hooks/useBalances'\nimport { DestinationNetworkBox } from './TransferPanelMain/DestinationNetworkBox'\nimport { SourceNetworkBox } from './TransferPanelMain/SourceNetworkBox'\nimport { NetworkType } from './TransferPanelMain/utils'\n\nexport function SwitchNetworksButton(\n  props: React.ButtonHTMLAttributes<HTMLButtonElement>\n) {\n  const { isSmartContractWallet, isLoading: isLoadingAccountType } =\n    useAccountType()\n\n  const disabled = isSmartContractWallet || isLoadingAccountType\n\n  const [networks, setNetworks] = useNetworks()\n\n  return (\n    <div className=\"z-[1] flex h-4 w-full items-center justify-center lg:h-1\">\n      <button\n        type=\"button\"\n        disabled={disabled}\n        className={twMerge(\n          'group relative flex h-7 w-7 items-center justify-center rounded bg-gray-1 p-1',\n          disabled && 'pointer-events-none'\n        )}\n        onClick={() => {\n          setNetworks({\n            sourceChainId: networks.destinationChain.id,\n            destinationChainId: networks.sourceChain.id\n          })\n        }}\n        aria-label=\"Switch Networks\"\n        {...props}\n      >\n        <SwitchNetworkButtonBorderTop />\n        {isSmartContractWallet ? (\n          <ArrowDownIcon className=\"h-6 w-6 stroke-1 text-white\" />\n        ) : (\n          <ArrowsUpDownIcon className=\"h-8 w-8 stroke-1 text-white transition duration-300 group-hover:rotate-180 group-hover:opacity-80\" />\n        )}\n        <SwitchNetworkButtonBorderBottom />\n      </button>\n    </div>\n  )\n}\n\nfunction SwitchNetworkButtonBorderTop() {\n  const [networks] = useNetworks()\n\n  const sourceNetworkColor = getBridgeUiConfigForChain(\n    networks.sourceChain.id\n  ).color\n\n  return (\n    <div\n      className=\"absolute left-0 right-0 top-0 m-auto h-[7.5px] w-full rounded-t border-x border-t transition-[border-color] duration-200 lg:h-[10px]\"\n      style={{ borderColor: sourceNetworkColor }}\n    />\n  )\n}\n\nfunction SwitchNetworkButtonBorderBottom() {\n  const [networks] = useNetworks()\n\n  const destinationNetworkColor = getBridgeUiConfigForChain(\n    networks.destinationChain.id\n  ).color\n\n  return (\n    <div\n      className=\"absolute bottom-0 left-0 right-0 m-auto h-[7.5px] w-full rounded-b border-x border-b transition-[border-color] duration-200 lg:h-[10px]\"\n      style={{ borderColor: destinationNetworkColor }}\n    />\n  )\n}\n\nfunction CustomAddressBanner({\n  network,\n  customAddress\n}: {\n  network: Chain\n  customAddress: string | undefined\n}) {\n  const { color } = getBridgeUiConfigForChain(network.id)\n\n  if (!customAddress) {\n    return null\n  }\n\n  return (\n    <div\n      style={{\n        backgroundColor: `${color}AA`,\n        color: 'white',\n        borderColor: color\n      }}\n      className={twMerge(\n        'w-full rounded-t border border-b-0 p-2 text-center text-sm'\n      )}\n    >\n      <span>\n        Showing balance for{' '}\n        <ExternalLink\n          className=\"arb-hover underline\"\n          href={`${getExplorerUrl(network.id)}/address/${customAddress}`}\n        >\n          {customAddress}\n        </ExternalLink>\n      </span>\n    </div>\n  )\n}\n\nexport function NetworkContainer({\n  network,\n  customAddress,\n  bgLogoHeight = 58,\n  children\n}: {\n  network: Chain\n  customAddress?: string\n  bgLogoHeight?: number\n  children: React.ReactNode\n}) {\n  const { address } = useAccount()\n  const {\n    color,\n    network: { logo: networkLogo }\n  } = getBridgeUiConfigForChain(network.id)\n  const isSmallScreen = useMedia('(max-width: 639px)')\n\n  const backgroundImage = `url(${networkLogo})`\n\n  const walletAddressLowercased = address?.toLowerCase()\n\n  const showCustomAddressBanner = useMemo(() => {\n    if (!customAddress || !walletAddressLowercased) {\n      return false\n    }\n    if (customAddress === walletAddressLowercased) {\n      return false\n    }\n    return utils.isAddress(customAddress)\n  }, [customAddress, walletAddressLowercased])\n\n  return (\n    <div>\n      {showCustomAddressBanner && (\n        <CustomAddressBanner network={network} customAddress={customAddress} />\n      )}\n      <div\n        style={{\n          backgroundColor: `${color}66`, // 255*40% is 102, = 66 in hex\n          borderColor: color\n        }}\n        className={twMerge(\n          'relative rounded border transition-colors duration-400',\n          showCustomAddressBanner && 'rounded-t-none'\n        )}\n      >\n        <div\n          className=\"absolute left-0 top-0 h-full w-full bg-[-2px_0] bg-no-repeat bg-origin-content p-3 opacity-50\"\n          style={{\n            backgroundImage,\n            backgroundSize: `auto ${bgLogoHeight + (isSmallScreen ? -12 : 0)}px`\n          }}\n        />\n        <div className=\"relative space-y-3.5 bg-contain bg-no-repeat p-3 sm:flex-row\">\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction StyledLoader() {\n  return <Loader color=\"white\" size=\"small\" />\n}\n\nexport function ETHBalance({\n  balance,\n  prefix = '',\n  on\n}: {\n  balance: BigNumber | null\n  prefix?: string\n  on: NetworkType\n}) {\n  if (!balance) {\n    return <StyledLoader />\n  }\n\n  return (\n    <p>\n      <span className=\"font-light\">{prefix}</span>\n      <span aria-label={`ETH balance amount on ${on}`}>\n        {formatAmount(balance, { symbol: ether.symbol })}\n      </span>\n    </p>\n  )\n}\n\nexport function BalancesContainer({ children }: { children: React.ReactNode }) {\n  return (\n    <div className=\"flex flex-col flex-nowrap items-end break-all text-sm tracking-[.25px] text-white sm:text-lg\">\n      {children}\n    </div>\n  )\n}\n\nexport function NetworkListboxPlusBalancesContainer({\n  children\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <div className=\"flex flex-row flex-wrap items-center justify-between gap-1 gap-y-2.5 whitespace-nowrap\">\n      {children}\n    </div>\n  )\n}\n\nexport function TransferPanelMain({\n  amount,\n  errorMessage\n}: {\n  amount: string\n  errorMessage?: TransferReadinessRichErrorMessage | string\n}) {\n  const actions = useActions()\n  const [networks, setNetworks] = useNetworks()\n  const { childChain, childChainProvider, isTeleportMode } =\n    useNetworksRelationship(networks)\n\n  const { isSmartContractWallet, isLoading: isLoadingAccountType } =\n    useAccountType()\n  const { isArbitrumOne, isArbitrumSepolia } = isNetwork(childChain.id)\n  const nativeCurrency = useNativeCurrency({ provider: childChainProvider })\n\n  const {\n    app: { selectedToken }\n  } = useAppState()\n\n  const { address: walletAddress } = useAccount()\n\n  const { destinationAddress, setDestinationAddress } =\n    useDestinationAddressStore()\n\n  const destinationAddressOrWalletAddress = destinationAddress || walletAddress\n\n  const {\n    ethParentBalance,\n    erc20ParentBalances,\n    updateErc20ParentBalances,\n    ethChildBalance,\n    updateErc20ChildBalances\n  } = useBalances()\n\n  const { updateUSDCBalances } = useUpdateUSDCBalances({\n    walletAddress: destinationAddressOrWalletAddress\n  })\n\n  useEffect(() => {\n    if (nativeCurrency.isCustom) {\n      updateErc20ParentBalances([nativeCurrency.address])\n    }\n  }, [nativeCurrency, updateErc20ParentBalances])\n\n  useEffect(() => {\n    if (\n      !selectedToken ||\n      !destinationAddressOrWalletAddress ||\n      !utils.isAddress(destinationAddressOrWalletAddress)\n    ) {\n      return\n    }\n\n    if (\n      !isTeleportMode &&\n      (isTokenMainnetUSDC(selectedToken.address) ||\n        isTokenSepoliaUSDC(selectedToken.address) ||\n        isTokenArbitrumOneNativeUSDC(selectedToken.address) ||\n        isTokenArbitrumSepoliaNativeUSDC(selectedToken.address))\n    ) {\n      updateUSDCBalances()\n      return\n    }\n\n    updateErc20ParentBalances([selectedToken.address])\n    if (selectedToken.l2Address) {\n      updateErc20ChildBalances([selectedToken.l2Address])\n    }\n  }, [\n    selectedToken,\n    updateErc20ParentBalances,\n    updateErc20ChildBalances,\n    destinationAddressOrWalletAddress,\n    updateUSDCBalances,\n    isTeleportMode\n  ])\n\n  // TODO: move into a hook (FS-714)\n  // when customFeeTokenBalances is moved to an independent hook file, use `setAmount` directly in useMaxAmount and do not pass `customFeeTokenBalances` as a prop\n  const customFeeTokenBalances: Balances = useMemo(() => {\n    if (!nativeCurrency.isCustom) {\n      return { parentBalance: ethParentBalance, childBalance: ethChildBalance }\n    }\n\n    return {\n      parentBalance: erc20ParentBalances?.[nativeCurrency.address] ?? null,\n      childBalance: ethChildBalance\n    }\n  }, [nativeCurrency, ethParentBalance, ethChildBalance, erc20ParentBalances])\n\n  const [oneNovaTransferDialogProps, openOneNovaTransferDialog] = useDialog()\n  const [\n    oneNovaTransferDestinationNetworkId,\n    setOneNovaTransferDestinationNetworkId\n  ] = useState<number | null>(null)\n\n  const showUSDCSpecificInfo =\n    !isTeleportMode &&\n    ((isTokenMainnetUSDC(selectedToken?.address) && isArbitrumOne) ||\n      (isTokenSepoliaUSDC(selectedToken?.address) && isArbitrumSepolia))\n\n  useEffect(() => {\n    // Different destination address only allowed for tokens\n    if (!selectedToken) {\n      setDestinationAddress(undefined)\n    }\n  }, [selectedToken, setDestinationAddress])\n\n  useUpdateUSDCTokenData()\n\n  type NetworkListboxesProps = {\n    to: Omit<NetworkListboxProps, 'label'>\n  }\n\n  const networkListboxProps: NetworkListboxesProps = useMemo(() => {\n    function getDestinationChains() {\n      const destinationChainIds = getDestinationChainIds(\n        networks.sourceChain.id\n      )\n\n      // if source chain is Arbitrum One, add Arbitrum Nova to destination\n      if (networks.sourceChain.id === ChainId.ArbitrumOne) {\n        destinationChainIds.push(ChainId.ArbitrumNova)\n      }\n\n      // if source chain is Arbitrum Nova, add Arbitrum One to destination\n      if (networks.sourceChain.id === ChainId.ArbitrumNova) {\n        destinationChainIds.push(ChainId.ArbitrumOne)\n      }\n\n      return (\n        destinationChainIds\n          // remove self\n          .filter(chainId => chainId !== networks.destinationChain.id)\n          .map(getWagmiChain)\n      )\n    }\n\n    function shouldOpenOneNovaDialog(selectedChainIds: number[]) {\n      return [ChainId.ArbitrumOne, ChainId.ArbitrumNova].every(chainId =>\n        selectedChainIds.includes(chainId)\n      )\n    }\n\n    const destinationChains = getDestinationChains()\n\n    return {\n      to: {\n        disabled:\n          isSmartContractWallet ||\n          isLoadingAccountType ||\n          destinationChains.length === 0,\n        options: destinationChains,\n        value: networks.destinationChain,\n        onChange: async network => {\n          if (shouldOpenOneNovaDialog([network.id, networks.sourceChain.id])) {\n            setOneNovaTransferDestinationNetworkId(network.id)\n            openOneNovaTransferDialog()\n            return\n          }\n\n          setNetworks({\n            sourceChainId: networks.sourceChain.id,\n            destinationChainId: network.id\n          })\n          actions.app.setSelectedToken(null)\n        }\n      }\n    }\n  }, [\n    isSmartContractWallet,\n    isLoadingAccountType,\n    networks.sourceChain,\n    networks.destinationChain,\n    setNetworks,\n    openOneNovaTransferDialog\n  ])\n\n  return (\n    <div className=\"flex flex-col pb-6 lg:gap-y-1\">\n      <SourceNetworkBox\n        amount={amount}\n        errorMessage={errorMessage}\n        customFeeTokenBalances={customFeeTokenBalances}\n        showUsdcSpecificInfo={showUSDCSpecificInfo}\n      />\n\n      <SwitchNetworksButton />\n\n      <DestinationNetworkBox\n        customFeeTokenBalances={customFeeTokenBalances}\n        showUsdcSpecificInfo={showUSDCSpecificInfo}\n        destinationNetworkListboxProps={networkListboxProps.to}\n      />\n\n      <TransferDisabledDialog />\n      <OneNovaTransferDialog\n        {...oneNovaTransferDialogProps}\n        destinationChainId={oneNovaTransferDestinationNetworkId}\n        amount={amount}\n      />\n    </div>\n  )\n}\n","import { useSwitchNetwork } from 'wagmi'\nimport { SwitchNetworkArgs } from '@wagmi/core'\n\nimport { getNetworkName, isNetwork } from '../util/networks'\nimport { isUserRejectedError } from '../util/isUserRejectedError'\nimport { warningToast } from '../components/common/atoms/Toast'\nimport { captureSentryErrorWithExtraData } from '../util/SentryUtils'\n\ntype SwitchNetworkConfig = {\n  isSwitchingNetworkBeforeTx?: boolean\n}\n\nconst handleSwitchNetworkNotSupported = (\n  attemptedChainId: number,\n  isSwitchingNetworkBeforeTx: boolean\n) => {\n  const isDeposit = isNetwork(attemptedChainId).isEthereumMainnetOrTestnet\n  const targetTxName = isDeposit ? 'deposit' : 'withdraw'\n  const networkName = getNetworkName(attemptedChainId)\n\n  const message = isSwitchingNetworkBeforeTx\n    ? `Please connect to ${networkName} on your wallet before signing your ${targetTxName} transaction.`\n    : `Please connect to ${networkName} on your wallet.`\n\n  warningToast(message)\n}\n\n/**\n * Function to invoke when an error is thrown while attempting to switch network.\n * https://wagmi.sh/react/hooks/useSwitchNetwork#onerror-optional\n * @param error\n * @param param1 - `{ chainId: number }`\n * @param context - default value `{ isSwitchingNetworkBeforeTx: false }`\n */\nfunction handleSwitchNetworkError(\n  error: any,\n  { chainId }: SwitchNetworkArgs,\n  context: unknown = { isSwitchingNetworkBeforeTx: false }\n) {\n  const { isSwitchingNetworkBeforeTx } = context as {\n    isSwitchingNetworkBeforeTx: boolean\n  }\n  if (isUserRejectedError(error)) {\n    return\n  }\n  if (error.name === 'SwitchChainNotSupportedError') {\n    handleSwitchNetworkNotSupported(chainId, isSwitchingNetworkBeforeTx)\n  } else {\n    captureSentryErrorWithExtraData({\n      error,\n      originFunction: 'handleSwitchNetworkError'\n    })\n  }\n}\n\nexport function useSwitchNetworkWithConfig({\n  isSwitchingNetworkBeforeTx = false\n}: SwitchNetworkConfig = {}) {\n  const config = {\n    throwForSwitchChainNotSupported: true,\n    /**\n     * onMutate:\n     * The return value will be the `context` param received by the error\n     * handler of `switchNetwork`.\n     *\n     * Function fires before switch network function and is passed same\n     * variables switch network function would receive.\n     * Value returned from this function will be passed to both `onError` and\n     * `onSettled` functions in event of a switch network failure.\n     * https://wagmi.sh/react/hooks/useSwitchNetwork#onmutate-optional\n     *\n     * @returns `{ isSwitchingNetworkBeforeTx: boolean }`\n     */\n    onMutate: () => ({ isSwitchingNetworkBeforeTx }),\n    onError: handleSwitchNetworkError\n  }\n\n  return useSwitchNetwork(config)\n}\n","import { useNetwork } from 'wagmi'\n\nimport { isNetwork } from '../util/networks'\n\nexport function useIsConnectedToArbitrum() {\n  const { chain } = useNetwork()\n\n  if (typeof chain === 'undefined') {\n    return undefined\n  }\n\n  return isNetwork(chain.id).isArbitrum\n}\n","import { useNetwork } from 'wagmi'\n\nimport { isNetwork } from '../util/networks'\n\nexport function useIsConnectedToOrbitChain() {\n  const { chain } = useNetwork()\n\n  if (typeof chain === 'undefined') {\n    return undefined\n  }\n\n  return isNetwork(chain.id).isOrbitChain\n}\n","import { ExternalLink } from '../../common/ExternalLink'\nimport { Checkbox } from '../../common/Checkbox'\nimport { useEffect, useState } from 'react'\nimport { isNetwork } from '../../../util/networks'\nimport { useNetwork } from 'wagmi'\nimport { getCctpTransferDuration } from '../../../hooks/useTransferDuration'\nimport { minutesToHumanReadableTime } from '../../../hooks/useTransferDuration'\n\nexport function USDCDepositConfirmationDialogCheckbox({\n  onChange,\n  onAllCheckboxesCheched,\n  isBridgingNativeUSDC\n}: {\n  onChange: (checked: boolean) => void\n  onAllCheckboxesCheched?: () => void\n  isBridgingNativeUSDC?: true\n}) {\n  const [checkboxesChecked, setCheckboxesChecked] = useState([\n    false,\n    false,\n    false\n  ])\n  const externalLinkClassnames = 'arb-hover underline'\n  const { chain } = useNetwork()\n  const { isTestnet } = isNetwork(chain?.id ?? 0)\n\n  const destinationNetworkName = isTestnet ? 'Arbitrum Sepolia' : 'Arbitrum One'\n\n  function linksOnClickHandler(event: React.MouseEvent<HTMLAnchorElement>) {\n    event.stopPropagation()\n    event.nativeEvent.stopImmediatePropagation()\n  }\n\n  useEffect(() => {\n    if (checkboxesChecked.every(checked => checked)) {\n      onAllCheckboxesCheched?.()\n    }\n  }, [checkboxesChecked, onAllCheckboxesCheched])\n\n  return (\n    <>\n      {isBridgingNativeUSDC && (\n        <>\n          <Checkbox\n            label={\n              <span className=\"select-none font-light\">\n                I understand that I&apos;ll have to send{' '}\n                <span className=\"font-medium\">\n                  a second transaction on {destinationNetworkName}\n                </span>{' '}\n                and pay another {destinationNetworkName} fee to claim my USDC.\n              </span>\n            }\n            checked={checkboxesChecked[0] ?? false}\n            onChange={checked => {\n              onChange(checked)\n              setCheckboxesChecked(prevCheckboxesState => {\n                const newState = [...prevCheckboxesState]\n                newState[0] = checked\n                return newState\n              })\n            }}\n          />\n          <Checkbox\n            label={\n              <span className=\"select-none font-light\">\n                I understand that it will take{' '}\n                <span className=\"font-medium\">\n                  ~\n                  {minutesToHumanReadableTime(\n                    getCctpTransferDuration(isTestnet)\n                  )}\n                </span>{' '}\n                before I can claim my USDC on {destinationNetworkName}.\n              </span>\n            }\n            checked={checkboxesChecked[1] ?? false}\n            onChange={checked => {\n              onChange(checked)\n              setCheckboxesChecked(prevCheckboxesState => {\n                const newState = [...prevCheckboxesState]\n                newState[1] = checked\n                return newState\n              })\n            }}\n          />\n        </>\n      )}\n      <Checkbox\n        label={\n          <span className=\"select-none font-light\">\n            I understand <span className=\"font-medium\">USDC.e</span> is\n            different from <span className=\"font-medium\">USDC</span>.{' '}\n            <ExternalLink\n              className={externalLinkClassnames}\n              href=\"https://arbitrumfoundation.medium.com/usdc-to-come-natively-to-arbitrum-f751a30e3d83\"\n              onClick={linksOnClickHandler}\n            >\n              Learn more\n            </ExternalLink>\n            .\n          </span>\n        }\n        checked={checkboxesChecked[2] ?? false}\n        onChange={checked => {\n          onChange(checked)\n          setCheckboxesChecked(prevCheckboxesState => {\n            const newState = [...prevCheckboxesState]\n            newState[2] = checked\n            return newState\n          })\n        }}\n      />\n    </>\n  )\n}\n","import useSWRImmutable from 'swr/immutable'\nimport { ChainId } from '../../util/networks'\nimport { getCctpUtils } from '@/token-bridge-sdk/cctp'\n\nexport function useCCTPIsBlocked() {\n  const { fetchAttestation } = getCctpUtils({ sourceChainId: ChainId.Ethereum })\n  return useSWRImmutable(['cctp-check'], async () => {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#checking_that_the_fetch_was_successful\n    // Circle API returns 403 with Cors error for unauthorized users which throws instantly.\n    // All successful calls are assumed to be authorized users\n    try {\n      await fetchAttestation('0x')\n      return false\n    } catch (_) {\n      return true\n    }\n  })\n}\n","import { PropsWithChildren } from 'react'\nimport { CCTP_DOCUMENTATION } from '../../constants'\nimport { useCCTPIsBlocked } from '../../hooks/CCTP/useCCTPIsBlocked'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { getExplorerUrl, getNetworkName } from '../../util/networks'\nimport { CCTPSupportedChainId, getUSDCAddresses } from '../../state/cctpState'\n\nexport const CctpTabContent = ({\n  destinationChainId,\n  children\n}: PropsWithChildren<{\n  destinationChainId: CCTPSupportedChainId\n}>) => {\n  const { data: isCctpBlocked, isLoading: isLoadingIsCctpBlocked } =\n    useCCTPIsBlocked()\n\n  if (isLoadingIsCctpBlocked || isCctpBlocked) {\n    return (\n      <p className=\"font-light\">\n        Access to Circle&apos;s bridge is restricted in certain jurisdictions.\n        For more details, please consult Circle&apos;s{' '}\n        <ExternalLink className=\"arb-hover underline\" href={CCTP_DOCUMENTATION}>\n          documentation.\n        </ExternalLink>{' '}\n      </p>\n    )\n  }\n\n  return (\n    <>\n      <p className=\"font-light\">\n        Receive{' '}\n        <ExternalLink\n          className=\"arb-hover underline\"\n          href={`${getExplorerUrl(destinationChainId)}/token/${\n            getUSDCAddresses(destinationChainId).USDC\n          }`}\n        >\n          Native USDC\n        </ExternalLink>{' '}\n        on {getNetworkName(destinationChainId)} with Circle&apos;s{' '}\n        <ExternalLink className=\"arb-hover underline\" href={CCTP_DOCUMENTATION}>\n          Cross-Chain Transfer Protocol\n        </ExternalLink>{' '}\n        within the Arbitrum Bridge.\n      </p>\n      {children}\n    </>\n  )\n}\n","import React, { useCallback, useEffect, useState } from 'react'\nimport { Tab } from '@headlessui/react'\n\nimport { Dialog, UseDialogProps } from '../../common/Dialog'\nimport { ExternalLink } from '../../common/ExternalLink'\nimport {\n  SpecialTokenSymbol,\n  USDCFastBridges,\n  FastBridgeInfo\n} from '../../../util/fastBridges'\nimport { TabButton } from '../../common/Tab'\nimport { BridgesTable } from '../../common/BridgesTable'\nimport { useAppState } from '../../../state'\nimport {\n  getExplorerUrl,\n  getNetworkName,\n  isNetwork\n} from '../../../util/networks'\nimport { trackEvent } from '../../../util/AnalyticsUtils'\nimport { CommonAddress } from '../../../util/CommonAddressUtils'\nimport { USDCDepositConfirmationDialogCheckbox } from './USDCDepositConfirmationDialogCheckbox'\nimport {\n  isTokenSepoliaUSDC,\n  isTokenMainnetUSDC\n} from '../../../util/TokenUtils'\nimport { CctpTabContent } from '../CctpTabContent'\nimport { CCTP_DOCUMENTATION } from '../../../constants'\nimport { useNetworks } from '../../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../../hooks/useNetworksRelationship'\nimport { SecurityGuaranteed, SecurityNotGuaranteed } from '../SecurityLabels'\nimport { getUSDCAddresses } from '../../../state/cctpState'\n\ntype Props = UseDialogProps & {\n  amount: string\n}\n\nenum SelectedTabName {\n  Bridged = 'bridged',\n  ThirdParty = 'third_party',\n  Cctp = 'cctp'\n}\n\nconst defaultSelectedTabName: SelectedTabName = SelectedTabName.Cctp\n\nexport function USDCDepositConfirmationDialog(props: Props) {\n  const {\n    app: { selectedToken }\n  } = useAppState()\n  const [networks] = useNetworks()\n  const { childChain, parentChain } = useNetworksRelationship(networks)\n  const { isArbitrumSepolia } = isNetwork(childChain.id)\n  const [allCheckboxesCheched, setAllCheckboxesChecked] = useState(false)\n  const [selectedTabName, setSelectedTabName] = useState<SelectedTabName>(\n    defaultSelectedTabName\n  )\n  const destinationNetworkName = getNetworkName(childChain.id)\n\n  const tokenSymbol = SpecialTokenSymbol.USDC\n  const usdceTokenDestinationAddress = isNetwork(parentChain.id).isTestnet\n    ? CommonAddress.ArbitrumSepolia['USDC.e']\n    : CommonAddress.ArbitrumOne['USDC.e']\n\n  useEffect(() => {\n    setAllCheckboxesChecked(false)\n  }, [props.isOpen])\n\n  const handleActionButtonClick = useCallback(\n    (confirmed: boolean) => {\n      if (confirmed) {\n        const eventName =\n          selectedTabName === SelectedTabName.Bridged\n            ? 'Use Arbitrum Bridge Click'\n            : 'Use CCTP Click'\n        trackEvent(eventName, { tokenSymbol, type: 'Deposit' })\n      }\n\n      props.onClose(confirmed, selectedTabName)\n      // reset tab\n      setSelectedTabName(defaultSelectedTabName)\n    },\n    [props, selectedTabName, tokenSymbol]\n  )\n\n  if (!selectedToken) {\n    return null\n  }\n\n  if (\n    !isTokenMainnetUSDC(selectedToken.address) &&\n    !isTokenSepoliaUSDC(selectedToken.address)\n  ) {\n    return null\n  }\n\n  const fastBridges: FastBridgeInfo[] = USDCFastBridges.map(USDCFastBridge => ({\n    name: USDCFastBridge.name,\n    imageSrc: USDCFastBridge.imageSrc,\n    href: USDCFastBridge.getHref({\n      from: parentChain.id,\n      to: childChain.id,\n      fromTokenAddress: isArbitrumSepolia\n        ? CommonAddress.Sepolia.USDC\n        : CommonAddress.Ethereum.USDC,\n      toTokenAddress: isArbitrumSepolia\n        ? CommonAddress.ArbitrumSepolia.USDC\n        : CommonAddress.ArbitrumOne.USDC,\n      amount: props.amount,\n      transferMode: 'deposit'\n    })\n  }))\n\n  return (\n    <Dialog\n      {...props}\n      title={`Move funds to ${destinationNetworkName}`}\n      actionButtonProps={{\n        disabled: !allCheckboxesCheched,\n        hidden: selectedTabName === SelectedTabName.ThirdParty\n      }}\n      onClose={handleActionButtonClick}\n    >\n      <div className=\"flex flex-col pt-4\">\n        <Tab.Group\n          onChange={() => {\n            setAllCheckboxesChecked(false)\n          }}\n        >\n          <Tab.List className=\"flex border-b border-gray-dark\">\n            <TabButton\n              aria-label=\"Native USDC\"\n              onClick={() => setSelectedTabName(SelectedTabName.Cctp)}\n            >\n              Native USDC\n            </TabButton>\n            <TabButton\n              aria-label=\"Native USDC (Third Party Bridge)\"\n              onClick={() => setSelectedTabName(SelectedTabName.ThirdParty)}\n            >\n              Native USDC (Third Party Bridge)\n            </TabButton>\n            <TabButton\n              aria-label=\"Wrapped USDC (USDC.e)\"\n              onClick={() => setSelectedTabName(SelectedTabName.Bridged)}\n            >\n              Wrapped USDC (USDC.e)\n            </TabButton>\n          </Tab.List>\n\n          <Tab.Panel className=\"flex flex-col space-y-4 py-4\">\n            <div className=\"flex flex-col space-y-4\">\n              <CctpTabContent destinationChainId={childChain.id}>\n                <div className=\"flex flex-col space-y-4\">\n                  <USDCDepositConfirmationDialogCheckbox\n                    onAllCheckboxesCheched={() => {\n                      setAllCheckboxesChecked(true)\n                    }}\n                    onChange={checked => {\n                      if (!checked) {\n                        setAllCheckboxesChecked(false)\n                      }\n                    }}\n                    isBridgingNativeUSDC\n                  />\n                </div>\n              </CctpTabContent>\n              <SecurityNotGuaranteed />\n            </div>\n          </Tab.Panel>\n\n          <Tab.Panel className=\"flex flex-col space-y-4 py-4\">\n            <div className=\"flex flex-col space-y-4\">\n              <p className=\"font-light\">\n                Receive{' '}\n                <ExternalLink\n                  className=\"arb-hover underline\"\n                  href={`${getExplorerUrl(childChain.id)}/token/${\n                    getUSDCAddresses(childChain.id)?.USDC\n                  }`}\n                >\n                  Native USDC\n                </ExternalLink>{' '}\n                on {destinationNetworkName} using a third-party bridge with\n                Circle&apos;s{' '}\n                <ExternalLink\n                  className=\"arb-hover underline\"\n                  href={CCTP_DOCUMENTATION}\n                >\n                  Cross-Chain Transfer Protocol\n                </ExternalLink>{' '}\n                integrated.\n              </p>\n            </div>\n\n            <BridgesTable\n              bridgeList={fastBridges}\n              selectedNonCanonicalToken={tokenSymbol}\n            />\n            <SecurityNotGuaranteed />\n          </Tab.Panel>\n\n          <Tab.Panel className=\"flex flex-col space-y-4 py-4\">\n            <div className=\"flex flex-col space-y-4\">\n              <p className=\"font-light\">\n                Receive{' '}\n                <ExternalLink\n                  className=\"arb-hover underline\"\n                  href={`${getExplorerUrl(\n                    childChain.id\n                  )}/token/${usdceTokenDestinationAddress}`}\n                >\n                  Wrapped USDC (USDC.e)\n                </ExternalLink>{' '}\n                on {destinationNetworkName} using Arbitrum&apos;s native bridge.\n              </p>\n\n              <div className=\"flex flex-col space-y-4\">\n                <USDCDepositConfirmationDialogCheckbox\n                  onChange={checked => {\n                    setAllCheckboxesChecked(checked)\n                  }}\n                />\n              </div>\n            </div>\n            <SecurityGuaranteed />\n          </Tab.Panel>\n        </Tab.Group>\n      </div>\n    </Dialog>\n  )\n}\n","import { useEffect, useState } from 'react'\n\nimport { Checkbox } from '../../common/Checkbox'\nimport { getNetworkName, isNetwork } from '../../../util/networks'\nimport { useNetworks } from '../../../hooks/useNetworks'\nimport {\n  getCctpTransferDuration,\n  minutesToHumanReadableTime\n} from '../../../hooks/useTransferDuration'\n\nexport function USDCWithdrawalConfirmationDialogCheckbox({\n  onChange,\n  onAllCheckboxesCheched\n}: {\n  onChange: (checked: boolean) => void\n  onAllCheckboxesCheched?: () => void\n}) {\n  const [checkboxesChecked, setCheckboxesChecked] = useState([false, false])\n  const [networks] = useNetworks()\n  const { isTestnet } = isNetwork(networks.sourceChain.id)\n\n  const destinationNetworkName = getNetworkName(networks.destinationChain.id)\n\n  useEffect(() => {\n    if (checkboxesChecked.every(checked => checked)) {\n      onAllCheckboxesCheched?.()\n    }\n  }, [checkboxesChecked, onAllCheckboxesCheched])\n\n  return (\n    <>\n      <Checkbox\n        label={\n          <span className=\"select-none font-light\">\n            I understand that I&apos;ll have to send{' '}\n            <span className=\"font-medium\">\n              a second transaction on {destinationNetworkName}\n            </span>{' '}\n            and pay another {destinationNetworkName} fee to claim my USDC.\n          </span>\n        }\n        checked={checkboxesChecked[0] ?? false}\n        onChange={checked => {\n          onChange(checked)\n          setCheckboxesChecked(prevCheckboxesState => {\n            const newState = [...prevCheckboxesState]\n            newState[0] = checked\n            return newState\n          })\n        }}\n      />\n      <Checkbox\n        label={\n          <span className=\"select-none font-light\">\n            I understand that it will take{' '}\n            <span className=\"font-medium\">\n              ~{minutesToHumanReadableTime(getCctpTransferDuration(isTestnet))}\n            </span>{' '}\n            before I can claim my USDC on {isTestnet ? 'Sepolia' : 'Ethereum'}.\n          </span>\n        }\n        checked={checkboxesChecked[1] ?? false}\n        onChange={checked => {\n          onChange(checked)\n          setCheckboxesChecked(prevCheckboxesState => {\n            const newState = [...prevCheckboxesState]\n            newState[1] = checked\n            return newState\n          })\n        }}\n      />\n    </>\n  )\n}\n","import { useCallback, useEffect, useState } from 'react'\n\nimport { Tab } from '@headlessui/react'\n\nimport { Dialog, UseDialogProps } from '../../common/Dialog'\nimport { ExternalLink } from '../../common/ExternalLink'\nimport {\n  SpecialTokenSymbol,\n  USDCFastBridges,\n  FastBridgeInfo\n} from '../../../util/fastBridges'\nimport { TabButton } from '../../common/Tab'\nimport { BridgesTable } from '../../common/BridgesTable'\nimport {\n  getExplorerUrl,\n  getNetworkName,\n  isNetwork\n} from '../../../util/networks'\nimport { CommonAddress } from '../../../util/CommonAddressUtils'\nimport { USDCWithdrawalConfirmationDialogCheckbox } from './USDCWithdrawalConfirmationDialogCheckbox'\nimport { CctpTabContent } from '../CctpTabContent'\nimport { CCTP_DOCUMENTATION } from '../../../constants'\nimport { useNetworks } from '../../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../../hooks/useNetworksRelationship'\nimport { SecurityNotGuaranteed } from '../SecurityLabels'\nimport { trackEvent } from '../../../util/AnalyticsUtils'\nimport { getUSDCAddresses } from '../../../state/cctpState'\n\nenum SelectedTabName {\n  ThirdParty = 'third_party',\n  Cctp = 'cctp'\n}\n\nconst defaultSelectedTabName: SelectedTabName = SelectedTabName.Cctp\n\nexport function USDCWithdrawalConfirmationDialog(\n  props: UseDialogProps & { amount: string }\n) {\n  const [networks] = useNetworks()\n  const { childChain, parentChain } = useNetworksRelationship(networks)\n\n  const [allCheckboxesCheched, setAllCheckboxesChecked] = useState(false)\n  const [selectedTabName, setSelectedTabName] = useState<SelectedTabName>(\n    defaultSelectedTabName\n  )\n  const { isArbitrumSepolia } = isNetwork(childChain.id)\n  const destinationNetworkName = getNetworkName(parentChain.id)\n  const tokenSymbol = SpecialTokenSymbol.USDC\n\n  const handleActionButtonClick = useCallback(\n    (confirmed: boolean) => {\n      if (confirmed) {\n        trackEvent('Use CCTP Click', { tokenSymbol, type: 'Withdrawal' })\n      }\n      props.onClose(confirmed, selectedTabName)\n      // reset tab\n      setSelectedTabName(defaultSelectedTabName)\n    },\n    [props, tokenSymbol, selectedTabName]\n  )\n\n  useEffect(() => {\n    setAllCheckboxesChecked(false)\n  }, [props.isOpen])\n\n  const fastBridges: FastBridgeInfo[] = USDCFastBridges.map(USDCFastBridge => ({\n    name: USDCFastBridge.name,\n    imageSrc: USDCFastBridge.imageSrc,\n    href: USDCFastBridge.getHref({\n      from: childChain.id,\n      to: parentChain.id,\n      fromTokenAddress: isArbitrumSepolia\n        ? CommonAddress.ArbitrumSepolia.USDC\n        : CommonAddress.ArbitrumOne.USDC,\n      toTokenAddress: isArbitrumSepolia\n        ? CommonAddress.Sepolia.USDC\n        : CommonAddress.Ethereum.USDC,\n      amount: props.amount,\n      transferMode: 'withdraw'\n    })\n  }))\n\n  return (\n    <Dialog\n      {...props}\n      title={`Move funds to ${destinationNetworkName}`}\n      actionButtonProps={{\n        disabled: !allCheckboxesCheched,\n        hidden: selectedTabName === SelectedTabName.ThirdParty\n      }}\n      onClose={handleActionButtonClick}\n    >\n      <div className=\"flex max-h-screen w-full flex-col pt-4\">\n        <Tab.Group>\n          <Tab.List className=\"flex border-b border-gray-dark\">\n            <TabButton\n              aria-label=\"Native USDC\"\n              onClick={() => setSelectedTabName(SelectedTabName.Cctp)}\n            >\n              Native USDC\n            </TabButton>\n            <TabButton\n              aria-label=\"Native USDC (Third Party Bridge)\"\n              onClick={() => setSelectedTabName(SelectedTabName.ThirdParty)}\n            >\n              Native USDC (Third Party Bridge)\n            </TabButton>\n          </Tab.List>\n\n          <Tab.Panel className=\"flex flex-col space-y-4 py-4\">\n            <div className=\"flex flex-col space-y-4\">\n              <CctpTabContent destinationChainId={parentChain.id}>\n                <div className=\"flex flex-col space-y-4\">\n                  <USDCWithdrawalConfirmationDialogCheckbox\n                    onAllCheckboxesCheched={() => {\n                      setAllCheckboxesChecked(true)\n                    }}\n                    onChange={checked => {\n                      if (!checked) {\n                        setAllCheckboxesChecked(false)\n                      }\n                    }}\n                  />\n                </div>\n              </CctpTabContent>\n              <SecurityNotGuaranteed />\n            </div>\n          </Tab.Panel>\n\n          <Tab.Panel className=\"flex flex-col space-y-4 py-4\">\n            <div className=\"flex flex-col space-y-4 font-light\">\n              <p>\n                Receive{' '}\n                <ExternalLink\n                  className=\"arb-hover underline\"\n                  href={`${getExplorerUrl(parentChain.id)}/token/${\n                    getUSDCAddresses(parentChain.id)?.USDC\n                  }`}\n                >\n                  Native USDC\n                </ExternalLink>{' '}\n                on {destinationNetworkName} using a third-party bridge with\n                Circle&apos;s{' '}\n                <ExternalLink\n                  className=\"arb-hover underline\"\n                  href={CCTP_DOCUMENTATION}\n                >\n                  Cross-Chain Transfer Protocol\n                </ExternalLink>{' '}\n                integrated.\n              </p>\n            </div>\n\n            <BridgesTable\n              bridgeList={fastBridges}\n              selectedNonCanonicalToken={tokenSymbol}\n            />\n            <SecurityNotGuaranteed />\n          </Tab.Panel>\n        </Tab.Group>\n      </div>\n    </Dialog>\n  )\n}\n","import { useEffect, useMemo, useState } from 'react'\nimport { useSigner } from 'wagmi'\nimport { BigNumber, constants, utils } from 'ethers'\nimport { Dialog, UseDialogProps } from '../common/Dialog'\nimport { Checkbox } from '../common/Checkbox'\nimport { SafeImage } from '../common/SafeImage'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { useETHPrice } from '../../hooks/useETHPrice'\nimport { formatAmount, formatUSD } from '../../util/NumberUtils'\nimport { getExplorerUrl, isNetwork } from '../../util/networks'\nimport { useGasPrice } from '../../hooks/useGasPrice'\nimport { NativeCurrencyErc20 } from '../../hooks/useNativeCurrency'\nimport { useAppState } from '../../state'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { shortenAddress } from '../../util/CommonUtils'\nimport { NoteBox } from '../common/NoteBox'\nimport { BridgeTransferStarterFactory } from '@/token-bridge-sdk/BridgeTransferStarterFactory'\n\nexport type CustomFeeTokenApprovalDialogProps = UseDialogProps & {\n  customFeeToken: NativeCurrencyErc20\n}\n\nexport function CustomFeeTokenApprovalDialog(\n  props: CustomFeeTokenApprovalDialogProps\n) {\n  const { customFeeToken, isOpen } = props\n\n  const { ethToUSD } = useETHPrice()\n  const { app } = useAppState()\n  const { selectedToken } = app\n\n  const [networks] = useNetworks()\n  const { sourceChain, destinationChain } = networks\n  const { parentChain, parentChainProvider } = useNetworksRelationship(networks)\n  const { isEthereumMainnet } = isNetwork(parentChain.id)\n\n  const { data: l1Signer } = useSigner({ chainId: parentChain.id })\n  const l1GasPrice = useGasPrice({ provider: parentChainProvider })\n\n  const [checked, setChecked] = useState(false)\n  const [estimatedGas, setEstimatedGas] = useState<BigNumber>(constants.Zero)\n\n  // Estimated gas fees, denominated in Ether, represented as a floating point number\n  const estimatedGasFees = useMemo(\n    () => parseFloat(utils.formatEther(estimatedGas.mul(l1GasPrice))),\n    [estimatedGas, l1GasPrice]\n  )\n\n  const approvalFeeText = useMemo(() => {\n    const eth = formatAmount(estimatedGasFees, { symbol: 'ETH' })\n    const usd = formatUSD(ethToUSD(estimatedGasFees))\n    return `${eth}${isEthereumMainnet ? ` (${usd})` : ''}`\n  }, [estimatedGasFees, ethToUSD, isEthereumMainnet])\n\n  useEffect(() => {\n    if (!isOpen) {\n      return\n    }\n\n    async function getEstimatedGas() {\n      if (l1Signer) {\n        /*\n         Note:\n          1. we do not consider CCTP case here, since we are not using it with custom fee token approval\n          2. we are assuming deposits only (withdrawals will return `requiresNativeCurrencyApproval` as false)\n          These will need to be supported on a case-by-case basis later, with checks like in `TokenApprovalDialogue.tsx`\n        */\n        const bridgeTransferStarter = await BridgeTransferStarterFactory.create(\n          {\n            sourceChainId: sourceChain.id,\n            sourceChainErc20Address: selectedToken?.address,\n            destinationChainId: destinationChain.id,\n            destinationChainErc20Address: selectedToken?.l2Address\n          }\n        )\n\n        const estimatedGas =\n          await bridgeTransferStarter.approveNativeCurrencyEstimateGas({\n            signer: l1Signer\n          })\n\n        if (estimatedGas) {\n          setEstimatedGas(estimatedGas)\n        }\n      }\n    }\n\n    getEstimatedGas()\n  }, [isOpen, selectedToken, l1Signer, sourceChain, destinationChain])\n\n  function closeWithReset(confirmed: boolean) {\n    props.onClose(confirmed)\n\n    setChecked(false)\n  }\n\n  return (\n    <Dialog\n      {...props}\n      onClose={closeWithReset}\n      title=\"Acknowledge approval fees\"\n      actionButtonTitle={`Pay approval fee of ${approvalFeeText}`}\n      actionButtonProps={{ disabled: !checked }}\n    >\n      <div className=\"flex flex-col space-y-4 py-4\">\n        <div className=\"flex flex-row items-center space-x-3\">\n          <SafeImage\n            src={customFeeToken.logoUrl}\n            alt={`${customFeeToken.name} logo`}\n            className=\"h-6 w-6 grow-0\"\n            fallback={\n              <div className=\"flex h-6 w-6 items-center justify-center rounded-full border border-white/30 bg-gray-dark text-sm font-medium\">\n                ?\n              </div>\n            }\n          />\n          <div className=\"flex flex-col\">\n            <div className=\"flex items-center space-x-1\">\n              <span className=\"text-base\">{customFeeToken.symbol}</span>\n              <span className=\"text-xs text-white/70\">\n                {customFeeToken.name}\n              </span>\n            </div>\n            <ExternalLink\n              href={`${getExplorerUrl(parentChain.id)}/token/${\n                customFeeToken.address\n              }`}\n              className=\"arb-hover text-xs underline\"\n            >\n              {shortenAddress(customFeeToken.address)}\n            </ExternalLink>\n          </div>\n        </div>\n\n        <span className=\"font-light\">\n          The network you are trying to deposit to uses{' '}\n          <span className=\"font-medium\">\n            {customFeeToken.name} ({customFeeToken.symbol})\n          </span>{' '}\n          as the fee token. Before continuing with your deposit, you must first\n          allow the bridge contract to access your{' '}\n          <span className=\"font-medium\">{customFeeToken.symbol}</span>.\n        </span>\n\n        <Checkbox\n          label={\n            <span className=\"font-light\">\n              I understand that I have to pay a one-time{' '}\n              <span className=\"font-medium\">\n                approval fee of {approvalFeeText}\n              </span>{' '}\n              for this.\n            </span>\n          }\n          checked={checked}\n          onChange={setChecked}\n        />\n\n        <div className=\"flex flex-col\">\n          <NoteBox>\n            {selectedToken ? (\n              <span className=\"text-sm font-light text-cyan-dark\">\n                After approval, you&apos;ll see additional prompts related to\n                depositing your{' '}\n                <span className=\"font-medium\">{selectedToken.symbol}</span>.\n              </span>\n            ) : (\n              <span className=\"text-sm font-light text-cyan-dark\">\n                After approval, you&apos;ll see an additional prompt in your\n                wallet to deposit your{' '}\n                <span className=\"font-medium\">{customFeeToken.symbol}</span>.\n              </span>\n            )}\n          </NoteBox>\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n","import { useEffect } from 'react'\nimport { ImportTokenModalStatus } from '../../components/TransferPanel/TransferPanelUtils'\nimport { ConnectionState } from '../../util'\nimport { useTokenImportDialogStore } from '../../components/TransferPanel/TokenImportDialog'\n\nexport function useImportTokenModal({\n  importTokenModalStatus,\n  connectionState\n}: {\n  importTokenModalStatus: ImportTokenModalStatus\n  connectionState: number\n}) {\n  const { openDialog: openTokenImportDialog } = useTokenImportDialogStore()\n  useEffect(() => {\n    if (importTokenModalStatus !== ImportTokenModalStatus.IDLE) {\n      return\n    }\n\n    if (\n      connectionState === ConnectionState.L1_CONNECTED ||\n      connectionState === ConnectionState.L2_CONNECTED\n    ) {\n      openTokenImportDialog()\n    }\n  }, [connectionState, importTokenModalStatus, openTokenImportDialog])\n}\n","// the conversion layer for making bridge-sdk results compatible with our current ui code\n\nimport { BigNumber, utils } from 'ethers'\nimport dayjs from 'dayjs'\nimport { TransactionResponse } from '@ethersproject/providers'\n\nimport { BridgeTransfer } from '@/token-bridge-sdk/BridgeTransferStarter'\nimport {\n  DepositStatus,\n  MergedTransaction,\n  WithdrawalStatus\n} from '../../state/app/state'\nimport { Deposit } from '../../hooks/useTransactionHistory'\nimport { AssetType, ERC20BridgeToken } from '../../hooks/arbTokenBridge.types'\nimport { NativeCurrency } from '../../hooks/useNativeCurrency'\n\ntype SdkToUiConversionProps = {\n  bridgeTransfer: BridgeTransfer\n  parentChainId: number\n  childChainId: number\n  selectedToken: ERC20BridgeToken | null\n  walletAddress: string\n  destinationAddress?: string\n  nativeCurrency: NativeCurrency\n  amount: BigNumber\n  timestampCreated: string\n}\n\nexport const convertBridgeSdkToMergedTransaction = ({\n  bridgeTransfer,\n  parentChainId,\n  childChainId,\n  selectedToken,\n  walletAddress,\n  destinationAddress,\n  nativeCurrency,\n  amount\n}: SdkToUiConversionProps): MergedTransaction => {\n  const { transferType } = bridgeTransfer\n  const isDeposit =\n    transferType === 'eth_deposit' ||\n    transferType === 'erc20_deposit' ||\n    transferType === 'eth_teleport' ||\n    transferType === 'erc20_teleport'\n\n  return {\n    sender: walletAddress!,\n    destination: destinationAddress ?? walletAddress,\n    direction: isDeposit ? 'deposit-l1' : 'withdraw',\n    status: isDeposit ? 'pending' : WithdrawalStatus.UNCONFIRMED,\n    createdAt: dayjs().valueOf(),\n    resolvedAt: null,\n    txId: bridgeTransfer.sourceChainTransaction.hash,\n    asset: selectedToken ? selectedToken.symbol : nativeCurrency.symbol,\n    assetType: selectedToken ? AssetType.ERC20 : AssetType.ETH,\n    value: utils.formatUnits(\n      amount,\n      selectedToken ? selectedToken.decimals : nativeCurrency.decimals\n    ),\n    depositStatus: isDeposit ? DepositStatus.L1_PENDING : undefined,\n    uniqueId: null,\n    isWithdrawal: !isDeposit,\n    blockNum: null,\n    tokenAddress: selectedToken ? selectedToken.address : undefined,\n    parentChainId: Number(parentChainId),\n    childChainId: Number(childChainId),\n    sourceChainId: isDeposit ? Number(parentChainId) : Number(childChainId),\n    destinationChainId: isDeposit ? Number(childChainId) : Number(parentChainId)\n  } as MergedTransaction\n}\n\nexport const convertBridgeSdkToPendingDepositTransaction = ({\n  bridgeTransfer,\n  parentChainId,\n  childChainId,\n  walletAddress,\n  selectedToken,\n  nativeCurrency,\n  destinationAddress,\n  amount,\n  timestampCreated\n}: SdkToUiConversionProps): Deposit => {\n  const transaction =\n    bridgeTransfer.sourceChainTransaction as TransactionResponse\n  return {\n    sender: walletAddress!,\n    destination: destinationAddress ?? walletAddress,\n    status: 'pending',\n    txID: transaction.hash,\n    assetName: selectedToken ? selectedToken.symbol : nativeCurrency.symbol,\n    assetType: selectedToken ? AssetType.ERC20 : AssetType.ETH,\n    l1NetworkID: String(parentChainId),\n    l2NetworkID: String(childChainId),\n    value: utils.formatUnits(\n      amount,\n      selectedToken ? selectedToken.decimals : nativeCurrency.decimals\n    ),\n    parentChainId,\n    childChainId,\n    direction: 'deposit',\n    type: 'deposit-l1',\n    source: 'local_storage_cache',\n    timestampCreated: String(timestampCreated),\n    nonce: transaction.nonce\n  } as Deposit\n}\n","import dayjs from 'dayjs'\nimport { useState, useMemo } from 'react'\nimport Tippy from '@tippyjs/react'\nimport { constants, utils } from 'ethers'\nimport { useLatest } from 'react-use'\nimport { useAccount, useChainId, useSigner } from 'wagmi'\nimport { TransactionResponse } from '@ethersproject/providers'\nimport { twMerge } from 'tailwind-merge'\n\nimport { useAppState } from '../../state'\nimport { getNetworkName, isNetwork } from '../../util/networks'\nimport { Button } from '../common/Button'\nimport {\n  TokenDepositCheckDialog,\n  TokenDepositCheckDialogType\n} from './TokenDepositCheckDialog'\nimport { TokenImportDialog } from './TokenImportDialog'\nimport { useArbQueryParams } from '../../hooks/useArbQueryParams'\nimport { useDialog } from '../common/Dialog'\nimport { TokenApprovalDialog } from './TokenApprovalDialog'\nimport { WithdrawalConfirmationDialog } from './WithdrawalConfirmationDialog'\nimport { TransferPanelSummary } from './TransferPanelSummary'\nimport { useAppContextActions, useAppContextState } from '../App/AppContext'\nimport { trackEvent } from '../../util/AnalyticsUtils'\nimport { TransferPanelMain } from './TransferPanelMain'\nimport {\n  isTokenArbitrumSepoliaNativeUSDC,\n  isTokenArbitrumOneNativeUSDC,\n  isTokenSepoliaUSDC,\n  isTokenMainnetUSDC,\n  isGatewayRegistered\n} from '../../util/TokenUtils'\nimport { useSwitchNetworkWithConfig } from '../../hooks/useSwitchNetworkWithConfig'\nimport { useIsConnectedToArbitrum } from '../../hooks/useIsConnectedToArbitrum'\nimport { useIsConnectedToOrbitChain } from '../../hooks/useIsConnectedToOrbitChain'\nimport { errorToast, warningToast } from '../common/atoms/Toast'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { useAccountType } from '../../hooks/useAccountType'\nimport { DOCS_DOMAIN, GET_HELP_LINK } from '../../constants'\nimport {\n  AdvancedSettings,\n  getDestinationAddressError,\n  useDestinationAddressStore\n} from './AdvancedSettings'\nimport { USDCDepositConfirmationDialog } from './USDCDeposit/USDCDepositConfirmationDialog'\nimport { USDCWithdrawalConfirmationDialog } from './USDCWithdrawal/USDCWithdrawalConfirmationDialog'\nimport { CustomFeeTokenApprovalDialog } from './CustomFeeTokenApprovalDialog'\nimport { isUserRejectedError } from '../../util/isUserRejectedError'\nimport { getUsdcTokenAddressFromSourceChainId } from '../../state/cctpState'\nimport { DepositStatus, MergedTransaction } from '../../state/app/state'\nimport { useNativeCurrency } from '../../hooks/useNativeCurrency'\nimport { AssetType } from '../../hooks/arbTokenBridge.types'\nimport {\n  ImportTokenModalStatus,\n  getWarningTokenDescription,\n  useTokenFromSearchParams\n} from './TransferPanelUtils'\nimport { useImportTokenModal } from '../../hooks/TransferPanel/useImportTokenModal'\nimport { useTransferReadiness } from './useTransferReadiness'\nimport { useGasSummary } from '../../hooks/TransferPanel/useGasSummary'\nimport { useTransactionHistory } from '../../hooks/useTransactionHistory'\nimport { getBridgeUiConfigForChain } from '../../util/bridgeUiConfig'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { CctpTransferStarter } from '@/token-bridge-sdk/CctpTransferStarter'\nimport { BridgeTransferStarterFactory } from '@/token-bridge-sdk/BridgeTransferStarterFactory'\nimport { BridgeTransfer } from '@/token-bridge-sdk/BridgeTransferStarter'\nimport { addDepositToCache } from '../TransactionHistory/helpers'\nimport {\n  convertBridgeSdkToMergedTransaction,\n  convertBridgeSdkToPendingDepositTransaction\n} from './bridgeSdkConversionUtils'\nimport { getBridgeTransferProperties } from '../../token-bridge-sdk/utils'\nimport { useSetInputAmount } from '../../hooks/TransferPanel/useSetInputAmount'\nimport { getSmartContractWalletTeleportTransfersNotSupportedErrorMessage } from './useTransferReadinessUtils'\nimport { useBalances } from '../../hooks/useBalances'\nimport { captureSentryErrorWithExtraData } from '../../util/SentryUtils'\n\nconst networkConnectionWarningToast = () =>\n  warningToast(\n    <>\n      Network connection issue. Please contact{' '}\n      <ExternalLink href={GET_HELP_LINK} className=\"underline\">\n        support\n      </ExternalLink>\n      .\n    </>,\n    { autoClose: false }\n  )\n\nexport function TransferPanel() {\n  const { tokenFromSearchParams, setTokenQueryParam } =\n    useTokenFromSearchParams()\n\n  const [tokenDepositCheckDialogType, setTokenDepositCheckDialogType] =\n    useState<TokenDepositCheckDialogType>('new-token')\n  const [importTokenModalStatus, setImportTokenModalStatus] =\n    useState<ImportTokenModalStatus>(ImportTokenModalStatus.IDLE)\n  const [showSmartContractWalletTooltip, setShowSmartContractWalletTooltip] =\n    useState(false)\n\n  const {\n    app: {\n      connectionState,\n      selectedToken,\n      arbTokenBridgeLoaded,\n      arbTokenBridge: { eth, token },\n      warningTokens\n    }\n  } = useAppState()\n  const { layout } = useAppContextState()\n  const { isTransferring } = layout\n  const { address: walletAddress, isConnected } = useAccount()\n  const { switchNetworkAsync } = useSwitchNetworkWithConfig({\n    isSwitchingNetworkBeforeTx: true\n  })\n  const chainId = useChainId()\n  const [networks] = useNetworks()\n  const {\n    childChain,\n    childChainProvider,\n    parentChain,\n    parentChainProvider,\n    isDepositMode,\n    isTeleportMode\n  } = useNetworksRelationship(networks)\n  const latestNetworks = useLatest(networks)\n\n  const nativeCurrency = useNativeCurrency({ provider: childChainProvider })\n\n  const { isEOA, isSmartContractWallet } = useAccountType()\n\n  const { data: parentSigner } = useSigner({\n    chainId: parentChain.id\n  })\n  const { data: childSigner } = useSigner({\n    chainId: childChain.id\n  })\n\n  const { openTransactionHistoryPanel, setTransferring } =\n    useAppContextActions()\n  const { addPendingTransaction } = useTransactionHistory(walletAddress)\n\n  const { isArbitrumOne, isArbitrumSepolia } = isNetwork(childChain.id)\n\n  const latestEth = useLatest(eth)\n\n  const isConnectedToArbitrum = useLatest(useIsConnectedToArbitrum())\n  const isConnectedToOrbitChain = useLatest(useIsConnectedToOrbitChain())\n\n  // Link the amount state directly to the amount in query params -  no need of useState\n  // Both `amount` getter and setter will internally be using `useArbQueryParams` functions\n  const [{ amount }] = useArbQueryParams()\n\n  const setAmount = useSetInputAmount()\n\n  const [tokenImportDialogProps] = useDialog()\n  const [tokenCheckDialogProps, openTokenCheckDialog] = useDialog()\n  const [tokenApprovalDialogProps, openTokenApprovalDialog] = useDialog()\n  const [customFeeTokenApprovalDialogProps, openCustomFeeTokenApprovalDialog] =\n    useDialog()\n  const [withdrawalConfirmationDialogProps, openWithdrawalConfirmationDialog] =\n    useDialog()\n  const [\n    usdcWithdrawalConfirmationDialogProps,\n    openUSDCWithdrawalConfirmationDialog\n  ] = useDialog()\n  const [\n    usdcDepositConfirmationDialogProps,\n    openUSDCDepositConfirmationDialog\n  ] = useDialog()\n\n  const { destinationAddress } = useDestinationAddressStore()\n\n  const {\n    updateEthParentBalance,\n    updateErc20ParentBalances,\n    updateEthChildBalance\n  } = useBalances()\n\n  const [isCctp, setIsCctp] = useState(false)\n\n  const gasSummary = useGasSummary()\n\n  const { transferReady, errorMessage } = useTransferReadiness({\n    amount,\n    gasSummary\n  })\n\n  const { color: destinationChainUIcolor } = getBridgeUiConfigForChain(\n    networks.destinationChain.id\n  )\n\n  function closeWithResetTokenImportDialog() {\n    setTokenQueryParam(undefined)\n    setImportTokenModalStatus(ImportTokenModalStatus.CLOSED)\n    tokenImportDialogProps.onClose(false)\n  }\n\n  function clearAmountInput() {\n    // clear amount input on transfer panel\n    setAmount('')\n  }\n\n  useImportTokenModal({\n    importTokenModalStatus,\n    connectionState\n  })\n\n  const isBridgingANewStandardToken = useMemo(() => {\n    const isUnbridgedToken =\n      selectedToken !== null && typeof selectedToken.l2Address === 'undefined'\n\n    return isDepositMode && isUnbridgedToken\n  }, [isDepositMode, selectedToken])\n\n  async function depositToken() {\n    if (!selectedToken) {\n      throw new Error('Invalid app state: no selected token')\n    }\n\n    // Check if we need to show `TokenDepositCheckDialog` for first-time bridging\n    const dialogType = getDialogType()\n\n    if (dialogType) {\n      setTokenDepositCheckDialogType(dialogType)\n\n      const waitForInput = openTokenCheckDialog()\n      const [confirmed] = await waitForInput()\n\n      if (confirmed) {\n        transfer()\n      }\n    } else {\n      transfer()\n    }\n  }\n\n  const amountBigNumber = useMemo(() => {\n    try {\n      const amountSafe = amount || '0'\n\n      if (selectedToken) {\n        return utils.parseUnits(amountSafe, selectedToken.decimals)\n      }\n\n      return utils.parseUnits(amountSafe, nativeCurrency.decimals)\n    } catch (error) {\n      return constants.Zero\n    }\n  }, [amount, selectedToken, nativeCurrency])\n\n  const confirmUsdcDepositFromNormalOrCctpBridge = async () => {\n    const waitForInput = openUSDCDepositConfirmationDialog()\n    const [confirmed, primaryButtonClicked] = await waitForInput()\n\n    // user declined to transfer altogether\n    if (!confirmed) {\n      return false\n    }\n\n    // user has selected normal bridge (USDC.e)\n    if (primaryButtonClicked === 'bridged') {\n      return 'bridge-normal-usdce'\n    }\n\n    // user wants to bridge to native usdc using Circle's CCTP on destination chain\n    return 'bridge-cctp-usd'\n  }\n\n  const confirmUsdcWithdrawalForCctp = async () => {\n    const waitForInput = openUSDCWithdrawalConfirmationDialog()\n    const [confirmed] = await waitForInput()\n    return confirmed\n  }\n\n  const tokenAllowanceApprovalCctp = async () => {\n    setIsCctp(true)\n    const waitForInput = openTokenApprovalDialog()\n    const [confirmed] = await waitForInput()\n    return confirmed\n  }\n\n  const customFeeTokenApproval = async () => {\n    const waitForInput = openCustomFeeTokenApprovalDialog()\n    const [confirmed] = await waitForInput()\n    return confirmed\n  }\n\n  const tokenAllowanceApproval = async () => {\n    setIsCctp(false)\n    const waitForInput = openTokenApprovalDialog()\n    const [confirmed] = await waitForInput()\n    return confirmed\n  }\n\n  const showDelayInSmartContractTransaction = async () => {\n    // a custom 3 second delay to show a tooltip after SC transaction goes through\n    // to give a visual feedback to the user that something happened\n    await setTimeout(() => {\n      setShowSmartContractWalletTooltip(true)\n    }, 3000)\n    return true\n  }\n\n  function getDialogType(): TokenDepositCheckDialogType | null {\n    if (isBridgingANewStandardToken) {\n      return 'new-token'\n    }\n\n    const isUserAddedToken =\n      selectedToken &&\n      selectedToken?.listIds.size === 0 &&\n      typeof selectedToken.l2Address === 'undefined'\n\n    return isUserAddedToken ? 'user-added-token' : null\n  }\n\n  const firstTimeTokenBridgingConfirmation = async () => {\n    // Check if we need to show `TokenDepositCheckDialog` for first-time bridging\n    const dialogType = getDialogType()\n    if (dialogType) {\n      setTokenDepositCheckDialogType(dialogType)\n      const waitForInput = openTokenCheckDialog()\n      const [confirmed] = await waitForInput()\n      return confirmed\n    }\n\n    // else pass the check\n    return true\n  }\n\n  const confirmWithdrawal = async () => {\n    const waitForInput = openWithdrawalConfirmationDialog()\n    const [confirmed] = await waitForInput()\n    return confirmed\n  }\n\n  // SC wallet transfer requests are sent immediately, delay it to give user an impression of a tx sent\n  const showDelayedSmartContractTxRequest = () =>\n    setTimeout(() => {\n      setTransferring(false)\n      setShowSmartContractWalletTooltip(true)\n    }, 3000)\n\n  const transferCctp = async () => {\n    if (!selectedToken) {\n      return\n    }\n    if (!walletAddress) {\n      return\n    }\n    const signer = isDepositMode ? parentSigner : childSigner\n    if (!signer) {\n      throw 'Signer is undefined'\n    }\n\n    setTransferring(true)\n    const childChainName = getNetworkName(childChain.id)\n    const isConnectedToTheWrongChain =\n      chainId !== latestNetworks.current.sourceChain.id\n\n    if (isConnectedToTheWrongChain) {\n      trackEvent('Switch Network and Transfer', {\n        type: isDepositMode ? 'Deposit' : 'Withdrawal',\n        tokenSymbol: 'USDC',\n        assetType: 'ERC-20',\n        accountType: isSmartContractWallet ? 'Smart Contract' : 'EOA',\n        network: childChainName,\n        amount: Number(amount),\n        version: 2\n      })\n\n      const switchTargetChainId = latestNetworks.current.sourceChain.id\n      try {\n        await switchNetworkAsync?.(switchTargetChainId)\n      } catch (error) {\n        captureSentryErrorWithExtraData({\n          error,\n          originFunction: 'transferCctp switchNetworkAsync'\n        })\n      }\n    }\n\n    try {\n      const { sourceChainProvider, destinationChainProvider, sourceChain } =\n        networks\n\n      // show confirmation popup before cctp transfer\n      if (isDepositMode) {\n        const depositConfirmation =\n          await confirmUsdcDepositFromNormalOrCctpBridge()\n\n        if (!depositConfirmation) return false\n\n        // if user selects usdc.e, redirect to our canonical transfer function\n        if (depositConfirmation === 'bridge-normal-usdce') {\n          await depositToken()\n          return\n        }\n      } else {\n        const withdrawalConfirmation = await confirmUsdcWithdrawalForCctp()\n        if (!withdrawalConfirmation) return\n      }\n\n      const destinationAddressError = await getDestinationAddressError({\n        destinationAddress,\n        isSmartContractWallet,\n        isTeleportMode\n      })\n      if (destinationAddressError) {\n        console.error(destinationAddressError)\n        return\n      }\n\n      const cctpTransferStarter = new CctpTransferStarter({\n        sourceChainProvider,\n        destinationChainProvider\n      })\n\n      const isTokenApprovalRequired =\n        await cctpTransferStarter.requiresTokenApproval({\n          amount: amountBigNumber,\n          signer\n        })\n\n      if (isTokenApprovalRequired) {\n        const userConfirmation = await tokenAllowanceApprovalCctp()\n        if (!userConfirmation) return false\n\n        if (isSmartContractWallet) {\n          showDelayedSmartContractTxRequest()\n        }\n        try {\n          const tx = await cctpTransferStarter.approveToken({\n            signer,\n            amount: amountBigNumber\n          })\n\n          await tx.wait()\n        } catch (error) {\n          if (isUserRejectedError(error)) {\n            return\n          }\n          captureSentryErrorWithExtraData({\n            error,\n            originFunction: 'cctpTransferStarter.approveToken'\n          })\n          errorToast(\n            `USDC approval transaction failed: ${\n              (error as Error)?.message ?? error\n            }`\n          )\n          return\n        }\n      }\n\n      let depositForBurnTx\n\n      try {\n        if (isSmartContractWallet) {\n          showDelayedSmartContractTxRequest()\n        }\n        const transfer = await cctpTransferStarter.transfer({\n          amount: amountBigNumber,\n          signer,\n          destinationAddress\n        })\n        depositForBurnTx = transfer.sourceChainTransaction\n      } catch (error) {\n        if (isUserRejectedError(error)) {\n          return\n        }\n        captureSentryErrorWithExtraData({\n          error,\n          originFunction: 'cctpTransferStarter.transfer'\n        })\n        errorToast(\n          `USDC ${\n            isDepositMode ? 'Deposit' : 'Withdrawal'\n          } transaction failed: ${(error as Error)?.message ?? error}`\n        )\n      }\n\n      if (isSmartContractWallet) {\n        // For SCW, we assume that the transaction went through\n        trackEvent(isDepositMode ? 'CCTP Deposit' : 'CCTP Withdrawal', {\n          accountType: 'Smart Contract',\n          network: childChainName,\n          amount: Number(amount),\n          complete: false,\n          version: 2\n        })\n\n        return\n      }\n\n      if (!depositForBurnTx) {\n        return\n      }\n\n      trackEvent(isDepositMode ? 'CCTP Deposit' : 'CCTP Withdrawal', {\n        accountType: 'EOA',\n        network: childChainName,\n        amount: Number(amount),\n        complete: false,\n        version: 2\n      })\n\n      const newTransfer: MergedTransaction = {\n        txId: depositForBurnTx.hash,\n        asset: 'USDC',\n        assetType: AssetType.ERC20,\n        blockNum: null,\n        createdAt: dayjs().valueOf(),\n        direction: isDepositMode ? 'deposit' : 'withdraw',\n        isWithdrawal: !isDepositMode,\n        resolvedAt: null,\n        status: 'pending',\n        uniqueId: null,\n        value: amount,\n        depositStatus: DepositStatus.CCTP_DEFAULT_STATE,\n        destination: destinationAddress ?? walletAddress,\n        sender: walletAddress,\n        isCctp: true,\n        tokenAddress: getUsdcTokenAddressFromSourceChainId(sourceChain.id),\n        cctpData: {\n          sourceChainId: sourceChain.id,\n          attestationHash: null,\n          messageBytes: null,\n          receiveMessageTransactionHash: null,\n          receiveMessageTimestamp: null\n        },\n        parentChainId: parentChain.id,\n        childChainId: childChain.id,\n        sourceChainId: networks.sourceChain.id,\n        destinationChainId: networks.destinationChain.id\n      }\n\n      addPendingTransaction(newTransfer)\n      openTransactionHistoryPanel()\n      setTransferring(false)\n      clearAmountInput()\n    } catch (e) {\n      //\n    } finally {\n      setTransferring(false)\n      setIsCctp(false)\n    }\n  }\n\n  const transfer = async () => {\n    const signerUndefinedError = 'Signer is undefined'\n\n    try {\n      setTransferring(true)\n      if (chainId !== networks.sourceChain.id) {\n        await switchNetworkAsync?.(networks.sourceChain.id)\n      }\n    } finally {\n      setTransferring(false)\n    }\n\n    if (!isConnected) {\n      return\n    }\n    if (!walletAddress) {\n      return\n    }\n\n    const hasBothSigners = parentSigner && childSigner\n    if (isEOA && !hasBothSigners) {\n      throw signerUndefinedError\n    }\n\n    const destinationAddressError = await getDestinationAddressError({\n      destinationAddress,\n      isSmartContractWallet,\n      isTeleportMode\n    })\n    if (destinationAddressError) {\n      console.error(destinationAddressError)\n      return\n    }\n\n    // SC ETH transfers aren't enabled yet. Safety check, shouldn't be able to get here.\n    if (isSmartContractWallet && !selectedToken) {\n      console.error(\"ETH transfers aren't enabled for smart contract wallets.\")\n      return\n    }\n\n    // SC Teleport transfers aren't enabled yet. Safety check, shouldn't be able to get here.\n    if (isSmartContractWallet && isTeleportMode) {\n      console.error(\n        getSmartContractWalletTeleportTransfersNotSupportedErrorMessage()\n      )\n      return\n    }\n\n    const childChainName = getNetworkName(childChain.id)\n\n    setTransferring(true)\n\n    try {\n      if (\n        (isDepositMode && !parentSigner) ||\n        (!isDepositMode && !childSigner)\n      ) {\n        throw signerUndefinedError\n      }\n\n      const warningToken =\n        selectedToken && warningTokens[selectedToken.address.toLowerCase()]\n      if (warningToken) {\n        const description = getWarningTokenDescription(warningToken.type)\n        warningToast(\n          `${selectedToken?.address} is ${description}; it will likely have unusual behavior when deployed as as standard token to Arbitrum. It is not recommended that you deploy it. (See ${DOCS_DOMAIN}/for-devs/concepts/token-bridge/token-bridge-erc20 for more info.)`\n        )\n        return\n      }\n\n      const depositRequiresChainSwitch = () => {\n        const isParentChainEthereum = isNetwork(\n          parentChain.id\n        ).isEthereumMainnetOrTestnet\n\n        return (\n          isDepositMode &&\n          ((isParentChainEthereum && isConnectedToArbitrum.current) ||\n            isConnectedToOrbitChain.current)\n        )\n      }\n\n      const withdrawalRequiresChainSwitch = () => {\n        const isConnectedToEthereum =\n          !isConnectedToArbitrum.current && !isConnectedToOrbitChain.current\n\n        const { isOrbitChain: isSourceChainOrbit } = isNetwork(childChain.id)\n\n        return (\n          !isDepositMode &&\n          (isConnectedToEthereum ||\n            (isConnectedToArbitrum.current && isSourceChainOrbit))\n        )\n      }\n\n      if (depositRequiresChainSwitch() || withdrawalRequiresChainSwitch()) {\n        trackEvent('Switch Network and Transfer', {\n          type: isTeleportMode\n            ? 'Teleport'\n            : isDepositMode\n            ? 'Deposit'\n            : 'Withdrawal',\n          tokenSymbol: selectedToken?.symbol,\n          assetType: selectedToken ? 'ERC-20' : 'ETH',\n          accountType: isSmartContractWallet ? 'Smart Contract' : 'EOA',\n          network: childChainName,\n          amount: Number(amount),\n          version: 2\n        })\n\n        const switchTargetChainId = latestNetworks.current.sourceChain.id\n\n        await switchNetworkAsync?.(switchTargetChainId)\n\n        // keep checking till we know the connected chain-pair are correct for transfer\n        while (\n          depositRequiresChainSwitch() ||\n          withdrawalRequiresChainSwitch() ||\n          !latestEth.current ||\n          !arbTokenBridgeLoaded\n        ) {\n          await new Promise(r => setTimeout(r, 100))\n        }\n\n        await new Promise(r => setTimeout(r, 3000))\n      }\n\n      const sourceChainId = latestNetworks.current.sourceChain.id\n      const destinationChainId = latestNetworks.current.destinationChain.id\n      const connectedChainId = networks.sourceChain.id\n      const sourceChainEqualsConnectedChain = sourceChainId === connectedChainId\n\n      // Transfer is invalid if the connected chain doesn't mismatches source-destination chain requirements\n      const depositNetworkConnectionWarning =\n        isDepositMode &&\n        (!sourceChainEqualsConnectedChain || isConnectedToOrbitChain.current)\n      const withdrawalNetworkConnectionWarning =\n        !isDepositMode && !sourceChainEqualsConnectedChain\n      if (\n        depositNetworkConnectionWarning ||\n        withdrawalNetworkConnectionWarning\n      ) {\n        return networkConnectionWarningToast()\n      }\n\n      const sourceChainErc20Address = isDepositMode\n        ? selectedToken?.address\n        : selectedToken?.l2Address\n\n      const destinationChainErc20Address = isDepositMode\n        ? selectedToken?.l2Address\n        : selectedToken?.address\n\n      const signer = isDepositMode ? parentSigner : childSigner\n\n      const bridgeTransferStarter = await BridgeTransferStarterFactory.create({\n        sourceChainId,\n        sourceChainErc20Address,\n        destinationChainId,\n        destinationChainErc20Address\n      })\n\n      const { isNativeCurrencyTransfer, isWithdrawal } =\n        getBridgeTransferProperties({\n          sourceChainId,\n          sourceChainErc20Address,\n          destinationChainId\n        })\n\n      if (!signer) throw Error('Signer not connected!')\n\n      if (isWithdrawal && selectedToken && !sourceChainErc20Address) {\n        /*\n        just a fail-safe - since our types allow for an optional `selectedToken?.l2Address`, we can theoretically end up with a case\n        where user is trying to make an ERC-20 withdrawal but passing `sourceChainErc20Address` as undefined, ending up with\n        the SDK to initialize wrongly and make an ETH withdrawal instead. To summarize:\n        - if it's a withdrawal\n        - if a token is selected\n        - but the token's address on the child chain is not found (ie. sourceChainErc20Address)\n      */\n        throw Error(\n          'Source chain token address not found for ERC-20 withdrawal.'\n        )\n      }\n\n      // SCW transfers are not enabled for ETH transfers yet\n      if (isNativeCurrencyTransfer && isSmartContractWallet) {\n        console.error(\n          \"ETH transfers aren't enabled for smart contract wallets.\"\n        )\n        return\n      }\n\n      // if destination address is added, validate it\n      const destinationAddressError = await getDestinationAddressError({\n        destinationAddress,\n        isSmartContractWallet,\n        isTeleportMode\n      })\n      if (destinationAddressError) {\n        console.error(destinationAddressError)\n        return\n      }\n\n      const isNativeCurrencyApprovalRequired =\n        await bridgeTransferStarter.requiresNativeCurrencyApproval({\n          signer,\n          amount: amountBigNumber\n        })\n\n      if (isNativeCurrencyApprovalRequired) {\n        // show native currency approval dialog\n        const userConfirmation = await customFeeTokenApproval()\n        if (!userConfirmation) return false\n\n        const approvalTx = await bridgeTransferStarter.approveNativeCurrency({\n          signer,\n          amount: amountBigNumber\n        })\n\n        if (approvalTx) {\n          await approvalTx.wait()\n        }\n      }\n\n      // checks for the selected token\n      if (selectedToken) {\n        const tokenAddress = selectedToken.address\n\n        // is selected token deployed on parent-chain?\n        if (!tokenAddress) Error('Token not deployed on source chain.')\n\n        // warning token handling\n        const warningToken =\n          selectedToken && warningTokens[selectedToken.address.toLowerCase()]\n        if (warningToken) {\n          const description = getWarningTokenDescription(warningToken.type)\n          warningToast(\n            `${selectedToken?.address} is ${description}; it will likely have unusual behavior when deployed as as standard token to Arbitrum. It is not recommended that you deploy it. (See ${DOCS_DOMAIN}/for-devs/concepts/token-bridge/token-bridge-erc20 for more info.)`\n          )\n          return\n        }\n\n        // token suspension handling\n        const isTokenSuspended = !(await isGatewayRegistered({\n          erc20ParentChainAddress: selectedToken.address,\n          parentChainProvider,\n          childChainProvider\n        }))\n        if (isTokenSuspended) {\n          warningToast(\n            'Depositing is currently suspended for this token as a new gateway is being registered. Please try again later and contact support if this issue persists.'\n          )\n          return\n        }\n\n        // if token is being bridged for first time, it will need to be registered in gateway\n        const userConfirmationForFirstTimeTokenBridging =\n          await firstTimeTokenBridgingConfirmation()\n        if (!userConfirmationForFirstTimeTokenBridging) {\n          throw Error('User declined bridging the token for the first time')\n        }\n      }\n\n      // if withdrawal (and not smart-contract-wallet), confirm from user about the delays involved\n      if (isWithdrawal && !isSmartContractWallet) {\n        const withdrawalConfirmation = await confirmWithdrawal()\n        if (!withdrawalConfirmation) return false\n      }\n\n      // token approval\n      if (selectedToken) {\n        const isTokenApprovalRequired =\n          await bridgeTransferStarter.requiresTokenApproval({\n            amount: amountBigNumber,\n            signer,\n            destinationAddress\n          })\n        if (isTokenApprovalRequired) {\n          const userConfirmation = await tokenAllowanceApproval()\n          if (!userConfirmation) return false\n\n          if (isSmartContractWallet && isWithdrawal) {\n            showDelayInSmartContractTransaction()\n          }\n          const approvalTx = await bridgeTransferStarter.approveToken({\n            signer,\n            amount: amountBigNumber\n          })\n\n          if (approvalTx) {\n            await approvalTx.wait()\n          }\n        }\n      }\n\n      // show a delay in case of SCW because tx is executed in an external app\n      if (isSmartContractWallet) {\n        showDelayInSmartContractTransaction()\n\n        trackEvent(\n          isTeleportMode ? 'Teleport' : isDepositMode ? 'Deposit' : 'Withdraw',\n          {\n            tokenSymbol: selectedToken?.symbol,\n            assetType: 'ERC-20',\n            accountType: 'Smart Contract',\n            network: childChainName,\n            amount: Number(amount)\n          }\n        )\n      }\n\n      // finally, call the transfer function\n      const transfer = await bridgeTransferStarter.transfer({\n        amount: amountBigNumber,\n        signer,\n        destinationAddress\n      })\n\n      // transaction submitted callback\n      onTxSubmit(transfer)\n    } catch (error) {\n      captureSentryErrorWithExtraData({\n        error,\n        originFunction: 'bridgeTransferStarter.transfer',\n        additionalData: selectedToken\n          ? {\n              erc20_address_on_parent_chain: selectedToken.address,\n              transfer_type: 'token'\n            }\n          : { transfer_type: 'native currency' }\n      })\n    } finally {\n      setTransferring(false)\n    }\n  }\n\n  const onTxSubmit = async (bridgeTransfer: BridgeTransfer) => {\n    if (!walletAddress) return // at this point, walletAddress will always be defined, we just have this to avoid TS checks in this function\n\n    if (!isSmartContractWallet) {\n      trackEvent(\n        isTeleportMode ? 'Teleport' : isDepositMode ? 'Deposit' : 'Withdraw',\n        {\n          tokenSymbol: selectedToken?.symbol,\n          assetType: selectedToken ? 'ERC-20' : 'ETH',\n          accountType: 'EOA',\n          network: getNetworkName(childChain.id),\n          amount: Number(amount)\n        }\n      )\n    }\n\n    const { sourceChainTransaction } = bridgeTransfer\n\n    const timestampCreated = Math.floor(Date.now() / 1000).toString()\n\n    const txHistoryCompatibleObject = convertBridgeSdkToMergedTransaction({\n      bridgeTransfer,\n      parentChainId: parentChain.id,\n      childChainId: childChain.id,\n      selectedToken,\n      walletAddress,\n      destinationAddress,\n      nativeCurrency,\n      amount: amountBigNumber,\n      timestampCreated\n    })\n\n    // add transaction to the transaction history\n    addPendingTransaction(txHistoryCompatibleObject)\n\n    // if deposit, add to local cache\n    if (isDepositMode) {\n      addDepositToCache(\n        convertBridgeSdkToPendingDepositTransaction({\n          bridgeTransfer,\n          parentChainId: parentChain.id,\n          childChainId: childChain.id,\n          selectedToken,\n          walletAddress,\n          destinationAddress,\n          nativeCurrency,\n          amount: amountBigNumber,\n          timestampCreated\n        })\n      )\n    }\n\n    openTransactionHistoryPanel()\n    setTransferring(false)\n    clearAmountInput()\n\n    await (sourceChainTransaction as TransactionResponse).wait()\n\n    // tx confirmed, update balances\n    await Promise.all([updateEthParentBalance(), updateEthChildBalance()])\n\n    if (selectedToken) {\n      token.updateTokenData(selectedToken.address)\n    }\n\n    if (nativeCurrency.isCustom) {\n      await updateErc20ParentBalances([nativeCurrency.address])\n    }\n  }\n\n  const isCctpTransfer = useMemo(() => {\n    if (!selectedToken) {\n      return false\n    }\n\n    if (isTeleportMode) {\n      return false\n    }\n\n    if (isDepositMode) {\n      if (isTokenMainnetUSDC(selectedToken.address) && isArbitrumOne) {\n        return true\n      }\n\n      if (isTokenSepoliaUSDC(selectedToken.address) && isArbitrumSepolia) {\n        return true\n      }\n    } else {\n      if (\n        isTokenArbitrumOneNativeUSDC(selectedToken.address) &&\n        isArbitrumOne\n      ) {\n        return true\n      }\n\n      if (\n        isTokenArbitrumSepoliaNativeUSDC(selectedToken.address) &&\n        isArbitrumSepolia\n      ) {\n        return true\n      }\n    }\n\n    return false\n  }, [isArbitrumOne, isArbitrumSepolia, isDepositMode, selectedToken])\n\n  return (\n    <>\n      <TokenApprovalDialog\n        {...tokenApprovalDialogProps}\n        token={selectedToken}\n        isCctp={isCctp}\n      />\n\n      {nativeCurrency.isCustom && (\n        <CustomFeeTokenApprovalDialog\n          {...customFeeTokenApprovalDialogProps}\n          customFeeToken={nativeCurrency}\n        />\n      )}\n\n      <WithdrawalConfirmationDialog\n        {...withdrawalConfirmationDialogProps}\n        amount={amount}\n      />\n\n      <USDCWithdrawalConfirmationDialog\n        {...usdcWithdrawalConfirmationDialogProps}\n        amount={amount}\n      />\n\n      <USDCDepositConfirmationDialog\n        {...usdcDepositConfirmationDialogProps}\n        amount={amount}\n      />\n\n      <div\n        className={twMerge(\n          'mb-7 flex flex-col border-y border-white/30 bg-gray-1 p-4 shadow-[0px_4px_20px_rgba(0,0,0,0.2)]',\n          'sm:rounded sm:border'\n        )}\n      >\n        <TransferPanelMain amount={amount} errorMessage={errorMessage} />\n        <AdvancedSettings />\n        <TransferPanelSummary\n          amount={parseFloat(amount)}\n          token={selectedToken}\n        />\n        <div className=\"transfer-panel-stats\">\n          {isDepositMode ? (\n            <Button\n              variant=\"primary\"\n              loading={isTransferring}\n              disabled={!transferReady.deposit}\n              onClick={() => {\n                if (isCctpTransfer) {\n                  transferCctp()\n                } else if (selectedToken) {\n                  depositToken()\n                } else {\n                  transfer()\n                }\n              }}\n              style={{\n                borderColor: destinationChainUIcolor,\n                backgroundColor: `${destinationChainUIcolor}66`\n              }}\n              className={twMerge(\n                'w-full border bg-eth-dark py-3 text-lg',\n                'disabled:!border-white/10 disabled:!bg-white/10',\n                'lg:text-2xl'\n              )}\n            >\n              {isSmartContractWallet && isTransferring\n                ? 'Sending request...'\n                : `Move funds to ${getNetworkName(\n                    networks.destinationChain.id\n                  )}`}\n            </Button>\n          ) : (\n            <Button\n              variant=\"primary\"\n              loading={isTransferring}\n              disabled={!transferReady.withdrawal}\n              onClick={() => {\n                if (isCctpTransfer) {\n                  transferCctp()\n                } else {\n                  transfer()\n                }\n              }}\n              style={{\n                borderColor: destinationChainUIcolor,\n                backgroundColor: `${destinationChainUIcolor}66`\n              }}\n              className={twMerge(\n                'w-full border py-3 text-lg',\n                'disabled:!border-white/10 disabled:!bg-white/10',\n                'lg:text-2xl'\n              )}\n            >\n              {isSmartContractWallet && isTransferring\n                ? 'Sending request...'\n                : `Move funds to ${getNetworkName(\n                    networks.destinationChain.id\n                  )}`}\n            </Button>\n          )}\n        </div>\n\n        {typeof tokenFromSearchParams !== 'undefined' && (\n          <TokenImportDialog\n            {...tokenImportDialogProps}\n            onClose={closeWithResetTokenImportDialog}\n            tokenAddress={tokenFromSearchParams}\n          />\n        )}\n\n        <TokenDepositCheckDialog\n          {...tokenCheckDialogProps}\n          type={tokenDepositCheckDialogType}\n          symbol={selectedToken ? selectedToken.symbol : nativeCurrency.symbol}\n        />\n\n        {showSmartContractWalletTooltip && (\n          <Tippy\n            placement=\"bottom-end\"\n            maxWidth=\"auto\"\n            onClickOutside={() => setShowSmartContractWalletTooltip(false)}\n            theme=\"orange\"\n            visible={showSmartContractWalletTooltip}\n            content={\n              <div className=\"flex flex-col\">\n                <span>\n                  <b>\n                    To continue, please approve tx on your smart contract\n                    wallet.\n                  </b>\n                </span>\n                <span>\n                  If you have k of n signers, then k of n will need to sign.\n                </span>\n              </div>\n            }\n          >\n            {/* Override margin coming from Tippy that causes layout disruptions */}\n            <div className=\"!m-0\" />\n          </Tippy>\n        )}\n      </div>\n    </>\n  )\n}\n","import { Fragment, useCallback, useEffect, useState } from 'react'\nimport { Dialog } from '@headlessui/react'\nimport { twMerge } from 'tailwind-merge'\nimport { XMarkIcon } from '@heroicons/react/24/outline'\nimport { Transition } from '@headlessui/react'\n\ntype SidePanelProps = {\n  heading?: string\n  isOpen: boolean\n  onClose?: () => void\n  children: React.ReactNode\n  panelClassNameOverrides?: string\n  scrollable?: boolean\n}\n\nexport const SidePanel = ({\n  isOpen,\n  heading,\n  onClose,\n  children,\n  panelClassNameOverrides = '',\n  scrollable = true\n}: SidePanelProps) => {\n  const [open, setOpen] = useState(false)\n  const [isClosing, setIsClosing] = useState(false)\n\n  // When user refreshes the page with the panel open, the query param starts as true\n  // For the transition to trigger we need to start from false, that's why we need another state\n  // Otherwise it also causes the backdrop to have no opacity so it looks quite bad\n  useEffect(() => {\n    setOpen(isOpen)\n  }, [isOpen])\n\n  const handleCloseStart = useCallback(() => {\n    setIsClosing(true)\n  }, [setIsClosing])\n\n  const handleCloseEnd = useCallback(() => {\n    onClose?.()\n\n    // prevent flickering caused by race conditions\n    setTimeout(() => {\n      setIsClosing(false)\n    }, 0)\n  }, [onClose, setIsClosing])\n\n  return (\n    <Transition show={open && !isClosing} as={Fragment}>\n      <Dialog\n        open={open}\n        onClose={handleCloseStart}\n        className=\"fixed z-40 h-screen max-h-screen\"\n      >\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-200\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-80\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-80\"\n          leaveTo=\"opacity-0\"\n        >\n          {/* The backdrop, rendered as a fixed sibling to the panel container */}\n          <div className=\"fixed inset-0 bg-dark\" aria-hidden=\"true\" />\n        </Transition.Child>\n\n        {/* Full-screen container to center the panel */}\n        <div className=\"fixed inset-0 right-0 top-0 flex h-full w-full items-start justify-end\">\n          <Transition.Child\n            as={Fragment}\n            enter=\"ease-out duration-200\"\n            enterFrom=\"translate-x-full\"\n            enterTo=\"translate-x-0\"\n            leave=\"ease-in duration-200\"\n            leaveFrom=\"translate-x-0\"\n            leaveTo=\"translate-x-full\"\n            afterLeave={handleCloseEnd}\n          >\n            {/* The heading of dialog  */}\n            <Dialog.Panel\n              className={twMerge(\n                'side-panel flex h-full w-screen max-w-[1000px] flex-col border-l border-gray-dark bg-black',\n                panelClassNameOverrides,\n                scrollable && 'overflow-y-auto'\n              )}\n            >\n              <Dialog.Title\n                className={twMerge(\n                  'sticky top-0 z-50 mx-4 flex flex-row justify-between bg-black pt-4 text-white',\n                  !heading && 'pb-4'\n                )}\n              >\n                {heading && <span className=\"text-2xl\">{heading}</span>}\n                <button\n                  className=\"arb-hover\"\n                  onClick={handleCloseStart}\n                  aria-label=\"Close side panel\"\n                >\n                  <XMarkIcon\n                    className={twMerge(\n                      'h-5 w-5 text-white',\n                      !heading && 'ml-2'\n                    )}\n                  />\n                </button>\n              </Dialog.Title>\n\n              {/* Contents of the panel */}\n              <div\n                className={twMerge(\n                  'side-panel-content z-40 h-full px-4 pb-4',\n                  heading && 'p-4'\n                )}\n              >\n                {children}\n              </div>\n            </Dialog.Panel>\n          </Transition.Child>\n        </div>\n      </Dialog>\n    </Transition>\n  )\n}\n","// Used to fetch the TPS (Transactions per Second) information for a network\n\nimport axios from 'axios'\nimport { load } from 'cheerio'\nimport useSWR from 'swr'\n\nimport { getExplorerUrl, isNetwork } from '../util/networks'\nimport { useNetworks } from './useNetworks'\nimport { useNetworksRelationship } from './useNetworksRelationship'\n\nconst emptyData = { tps: null }\n\nconst fetchNetworkTPS = async (l2ChainId: number) => {\n  // currently we only support TPS information for Arb-one and nova\n  // return null for rest of the networks\n  const canFetchTPS =\n    isNetwork(Number(l2ChainId)).isArbitrumNova ||\n    isNetwork(Number(l2ChainId)).isArbitrumOne\n  if (!canFetchTPS) return emptyData\n\n  // url from where we'll fetch stats\n  const explorerUrl = getExplorerUrl(Number(l2ChainId))\n\n  // for 403 or CORS blocked errors while scraping external endpoints, we use cors-proxy\n  const finalUrl = `https://corsproxy.io/?${encodeURIComponent(explorerUrl)}`\n  const response = await axios.get(finalUrl)\n\n  // Get the HTML code of the webpage\n  const html = response.data\n  const $ = load(html)\n  const tpsElement = $(\n    'span[title=\"Transactions per Second - Adjusted for Arbitrum Nitro system txs\"]'\n  )\n  const tps = (tpsElement?.text() || '')\n    .trim()\n    .replace(/[()]/g, '')\n    .split(' ')[0]\n\n  return { tps: isNaN(Number(tps)) ? null : Number(tps) }\n}\n\nexport const useNetworkTPS = () => {\n  const [networks] = useNetworks()\n  const { childChain } = useNetworksRelationship(networks)\n\n  return useSWR(\n    ['tps', childChain.id],\n    ([, _childChainId]) => fetchNetworkTPS(_childChainId),\n    {\n      refreshInterval: 30_000,\n      shouldRetryOnError: false\n    }\n  )\n}\n","import { utils } from 'ethers'\nimport { useBlockNumber } from 'wagmi'\nimport Image from 'next/image'\nimport { useLocalStorage } from '@uidotdev/usehooks'\n\nimport { getNetworkName, isNetwork } from '../../util/networks'\nimport { useNetworkTPS } from '../../hooks/useNetworkTPS'\nimport { useGasPrice } from '../../hooks/useGasPrice'\nimport { useArbQueryParams } from '../../hooks/useArbQueryParams'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { XMarkIcon } from '@heroicons/react/24/outline'\nimport { getBridgeUiConfigForChain } from '../../util/bridgeUiConfig'\n\nexport const statsLocalStorageKey = 'arbitrum:bridge:preferences:stats'\n\nconst getActivityThresholdL1 = (gasPrice: number) => {\n  if (gasPrice < 20) return { className: 'text-green-300' }\n  if (gasPrice < 40) return { className: 'text-orange-arbitrum-nova' }\n  return { className: 'text-red-400' }\n}\n\nconst getActivityThresholdL2 = (gasPrice: number) => {\n  if (gasPrice < 0.5) return { className: 'text-green-300' }\n  if (gasPrice < 2) return { className: 'text-orange-arbitrum-nova' }\n  return { className: 'text-red-400' }\n}\n\nexport const ArbitrumStats = () => {\n  const [, setIsArbitrumStatsVisible] =\n    useLocalStorage<boolean>(statsLocalStorageKey)\n\n  const [{ settingsOpen }] = useArbQueryParams()\n\n  const [networks] = useNetworks()\n  const { childChain, childChainProvider, parentChain, parentChainProvider } =\n    useNetworksRelationship(networks)\n\n  const { data: currentL1BlockNumber } = useBlockNumber({\n    chainId: parentChain.id,\n    watch: true\n  })\n\n  const { data: currentL2BlockNumber } = useBlockNumber({\n    chainId: childChain.id,\n    watch: true\n  })\n\n  const { data: tpsData, isValidating: tpsLoading } = useNetworkTPS()\n\n  const currentL1GasPrice = useGasPrice({ provider: parentChainProvider })\n  const currentL1GasPriceGwei = utils.formatUnits(currentL1GasPrice, 'gwei')\n  const currentL1Activity = getActivityThresholdL1(\n    Number(currentL1GasPriceGwei || 0)\n  )\n\n  const currentL2GasPrice = useGasPrice({ provider: childChainProvider })\n  const currentL2GasPriceGwei = utils.formatUnits(currentL2GasPrice, 'gwei')\n  const currentL2Activity = getActivityThresholdL2(\n    Number(currentL2GasPriceGwei || 0)\n  )\n\n  const closeArbitrumStats = () => {\n    setIsArbitrumStatsVisible(false)\n  }\n\n  return (\n    <div className=\"fixed bottom-0 right-0 m-4 flex flex-col gap-2 whitespace-nowrap rounded border border-gray-dark bg-dark py-2 pl-3 pr-7 font-[monospace] text-xs text-gray-3 opacity-90\">\n      <div className=\"section flex flex-col\">\n        <span className=\"text-md flex items-center text-white\">\n          <span className=\"mr-1 animate-pulse text-lg text-green-300\">\n            &bull;\n          </span>{' '}\n          <Image\n            height={10}\n            width={10}\n            src={getBridgeUiConfigForChain(parentChain.id).network.logo}\n            alt=\"Parent chain logo\"\n            className=\"mr-1\"\n          />\n          {getNetworkName(parentChain.id)}\n        </span>\n        <span>\n          Block: {currentL1BlockNumber ? currentL1BlockNumber : 'Loading...'}\n        </span>\n        <span>\n          Gas price:{' '}\n          <span className={`${currentL1Activity.className}`}>\n            {' '}\n            {Number(currentL1GasPriceGwei).toFixed(2)} Gwei{' '}\n          </span>\n        </span>\n      </div>\n\n      <div className=\"section flex flex-col\">\n        <span className=\"text-md flex items-center text-white\">\n          <span className=\"mr-1 animate-pulse text-lg text-green-300\">\n            &bull;\n          </span>{' '}\n          <Image\n            height={10}\n            width={10}\n            src={getBridgeUiConfigForChain(childChain.id).network.logo}\n            alt=\"Parent chain logo\"\n            className=\"mr-1\"\n          />\n          {getNetworkName(childChain.id)}\n        </span>\n        <span>\n          Block: {currentL2BlockNumber ? currentL2BlockNumber : 'Loading...'}\n        </span>\n        <span>\n          Gas price:{' '}\n          <span className={`${currentL2Activity.className}`}>\n            {' '}\n            {Number(currentL2GasPriceGwei).toFixed(2)} Gwei{' '}\n          </span>\n        </span>\n\n        {/* TPS info is not available for testnets */}\n        {!isNetwork(childChain.id).isTestnet && (\n          <span>\n            TPS: {tpsLoading && <span>Loading...</span>}\n            {!tpsLoading && (\n              <span>{tpsData?.tps ? `${tpsData.tps} TPS` : '-'}</span>\n            )}\n          </span>\n        )}\n      </div>\n\n      {/* Don't show the close button if the settings panel is visible */}\n      {!settingsOpen && (\n        <button\n          className=\"arb-hover absolute right-3 top-3 cursor-pointer\"\n          onClick={closeArbitrumStats}\n        >\n          <XMarkIcon height={16} />\n        </button>\n      )}\n    </div>\n  )\n}\n","import { useState } from 'react'\nimport { isAddress } from 'ethers/lib/utils.js'\nimport { Popover } from '@headlessui/react'\nimport { registerCustomArbitrumNetwork } from '@arbitrum/sdk'\nimport { StaticJsonRpcProvider } from '@ethersproject/providers'\nimport { EllipsisHorizontalIcon, XMarkIcon } from '@heroicons/react/24/outline'\nimport { constants } from 'ethers'\nimport { z } from 'zod'\nimport { RollupAdminLogic__factory } from '@arbitrum/sdk/dist/lib/abi/factories/RollupAdminLogic__factory'\n\nimport {\n  ChainId,\n  ChainWithRpcUrl,\n  getCustomChainsFromLocalStorage,\n  getCustomChainFromLocalStorageById,\n  getNetworkName,\n  removeCustomChainFromLocalStorage,\n  saveCustomChainToLocalStorage,\n  supportedCustomOrbitParentChains,\n  rpcURLs,\n  isNetwork\n} from '../../util/networks'\nimport { Loader } from './atoms/Loader'\nimport { Erc20Data, fetchErc20Data } from '../../util/TokenUtils'\nimport { getProviderForChainId } from '@/token-bridge-sdk/utils'\nimport { Transition } from './Transition'\nimport { Button } from './Button'\n\nconst orbitConfigsLocalStorageKey = 'arbitrum:orbit:configs'\n\ntype Contracts = {\n  customGateway: string\n  multicall: string\n  proxyAdmin: string\n  router: string\n  standardGateway: string\n  weth: string\n  wethGateway: string\n}\n\ntype OrbitConfig = {\n  chainInfo: {\n    minL2BaseFee: number\n    networkFeeReceiver: string\n    infrastructureFeeCollector: string\n    batchPoster: string\n    staker: string\n    chainOwner: string\n    chainName: string\n    chainId: number\n    parentChainId: number\n    rpcUrl: string\n    explorerUrl: string\n    nativeToken?: string\n  }\n  coreContracts: {\n    rollup: string\n    inbox: string\n    outbox: string\n    adminProxy: string\n    sequencerInbox: string\n    bridge: string\n    utils: string\n    validatorWalletCreator: string\n  }\n  tokenBridgeContracts: {\n    l2Contracts: Contracts\n    l3Contracts: Contracts\n  }\n}\n\nconst zAddress = z\n  .string()\n  .refine(address => isAddress(address), 'Invalid address')\n\nconst zChainId = z\n  .number()\n  .int()\n  .positive()\n  .refine(\n    chainId => !Object.values(ChainId).includes(chainId),\n    'Invalid custom Orbit chain ID'\n  )\n  .refine(\n    chainId => !getCustomChainFromLocalStorageById(chainId),\n    'Custom chain already added'\n  )\n\nconst zParentChainId = z\n  .number()\n  .int()\n  .positive()\n  .refine(\n    chainId => supportedCustomOrbitParentChains.includes(chainId),\n    'Unsupported parent chain ID'\n  )\n\nconst zContract = z.object({\n  customGateway: zAddress,\n  multicall: zAddress,\n  proxyAdmin: zAddress,\n  router: zAddress,\n  standardGateway: zAddress,\n  weth: zAddress,\n  wethGateway: zAddress\n})\n\nconst ZodOrbitConfig = z.object({\n  chainInfo: z.object({\n    minL2BaseFee: z.number().nonnegative().int(),\n    networkFeeReceiver: zAddress,\n    infrastructureFeeCollector: zAddress,\n    batchPoster: zAddress,\n    staker: zAddress,\n    chainOwner: zAddress,\n    chainName: z.string(),\n    chainId: zChainId,\n    parentChainId: zParentChainId,\n    rpcUrl: z.string().url(),\n    explorerUrl: z.string().url(),\n    nativeToken: zAddress.optional()\n  }),\n  coreContracts: z.object({\n    rollup: zAddress,\n    inbox: zAddress,\n    outbox: zAddress,\n    adminProxy: zAddress,\n    sequencerInbox: zAddress,\n    bridge: zAddress,\n    utils: zAddress,\n    validatorWalletCreator: zAddress\n  }),\n  tokenBridgeContracts: z.object({\n    l2Contracts: zContract,\n    l3Contracts: zContract\n  })\n})\n\nfunction getOrbitConfigsFromLocalStorage(): OrbitConfig[] {\n  const configs = localStorage.getItem(orbitConfigsLocalStorageKey)\n\n  if (!configs) {\n    return []\n  }\n\n  return JSON.parse(configs)\n}\n\nfunction getOrbitConfigFromLocalStorageById(\n  chainId: ChainId\n): OrbitConfig | undefined {\n  const configs = getOrbitConfigsFromLocalStorage()\n  return configs.find(config => config.chainInfo.chainId === chainId)\n}\n\nfunction removeOrbitConfigFromLocalStorage(chainId: ChainId) {\n  const configs = getOrbitConfigsFromLocalStorage()\n  const newConfigs = configs.filter(\n    config => config.chainInfo.chainId !== chainId\n  )\n  localStorage.setItem(orbitConfigsLocalStorageKey, JSON.stringify(newConfigs))\n}\n\nfunction saveOrbitConfigToLocalStorage(data: OrbitConfig) {\n  const configs = getOrbitConfigsFromLocalStorage()\n  localStorage.setItem(\n    orbitConfigsLocalStorageKey,\n    JSON.stringify([...configs, data])\n  )\n}\n\nasync function mapOrbitConfigToOrbitChain(\n  data: OrbitConfig\n): Promise<ChainWithRpcUrl> {\n  const rollup = RollupAdminLogic__factory.connect(\n    data.coreContracts.rollup,\n    getProviderForChainId(data.chainInfo.parentChainId)\n  )\n  const confirmPeriodBlocks =\n    (await rollup.confirmPeriodBlocks()).toNumber() ?? 150\n  const { isTestnet } = isNetwork(data.chainInfo.parentChainId)\n\n  return {\n    chainId: data.chainInfo.chainId,\n    confirmPeriodBlocks,\n    ethBridge: {\n      bridge: data.coreContracts.bridge,\n      inbox: data.coreContracts.inbox,\n      outbox: data.coreContracts.outbox,\n      rollup: data.coreContracts.rollup,\n      sequencerInbox: data.coreContracts.sequencerInbox\n    },\n    rpcUrl: data.chainInfo.rpcUrl,\n    explorerUrl: data.chainInfo.explorerUrl,\n    isCustom: true,\n    isTestnet,\n    name: data.chainInfo.chainName,\n    parentChainId: data.chainInfo.parentChainId,\n    retryableLifetimeSeconds: 604800,\n    nativeToken: data.chainInfo.nativeToken,\n    tokenBridge: {\n      parentCustomGateway: data.tokenBridgeContracts.l2Contracts.customGateway,\n      parentErc20Gateway: data.tokenBridgeContracts.l2Contracts.standardGateway,\n      parentGatewayRouter: data.tokenBridgeContracts.l2Contracts.router,\n      parentMultiCall: data.tokenBridgeContracts.l2Contracts.multicall,\n      parentProxyAdmin: data.tokenBridgeContracts.l2Contracts.proxyAdmin,\n      parentWeth: data.tokenBridgeContracts.l2Contracts.weth,\n      parentWethGateway: data.tokenBridgeContracts.l2Contracts.wethGateway,\n      childCustomGateway: data.tokenBridgeContracts.l3Contracts.customGateway,\n      childErc20Gateway: data.tokenBridgeContracts.l3Contracts.standardGateway,\n      childGatewayRouter: data.tokenBridgeContracts.l3Contracts.router,\n      childMultiCall: data.tokenBridgeContracts.l3Contracts.multicall,\n      childProxyAdmin: data.tokenBridgeContracts.l3Contracts.proxyAdmin,\n      childWeth: data.tokenBridgeContracts.l3Contracts.weth,\n      childWethGateway: data.tokenBridgeContracts.l3Contracts.wethGateway\n    }\n  }\n}\n\nasync function fetchNativeToken(\n  data: OrbitConfig\n): Promise<\n  | { nativeToken: undefined; nativeTokenData: undefined }\n  | { nativeToken: string; nativeTokenData: Erc20Data }\n> {\n  const nativeToken = data.chainInfo.nativeToken\n  const nativeTokenIsEther =\n    typeof nativeToken === 'undefined' || nativeToken === constants.AddressZero\n\n  if (nativeTokenIsEther) {\n    return { nativeToken: undefined, nativeTokenData: undefined }\n  }\n\n  const nativeTokenData = await fetchErc20Data({\n    address: nativeToken,\n    provider: new StaticJsonRpcProvider(rpcURLs[data.chainInfo.parentChainId])\n  })\n\n  return { nativeToken, nativeTokenData }\n}\n\nexport const AddCustomChain = () => {\n  const [chainJson, setChainJson] = useState<string>('')\n  const [error, setError] = useState<string | null>(null)\n  const [addingChain, setAddingChain] = useState(false)\n\n  const customChains = getCustomChainsFromLocalStorage()\n\n  async function onAddChain() {\n    setAddingChain(true)\n    setError(null)\n\n    try {\n      const data = JSON.parse(\n        chainJson.trim().replace(/[\\r\\n]+/g, '')\n      ) as OrbitConfig\n\n      if (!data) {\n        throw new Error('JSON input is empty.')\n      }\n\n      // validate config\n      ZodOrbitConfig.parse(data)\n\n      const customChain = await mapOrbitConfigToOrbitChain(data)\n      const nativeToken = await fetchNativeToken(data)\n      // Orbit config has been validated and will be added to the custom list after page refreshes\n      // let's still try to add it here to handle eventual errors\n      registerCustomArbitrumNetwork(customChain)\n      saveCustomChainToLocalStorage({ ...customChain, ...nativeToken })\n      saveOrbitConfigToLocalStorage(data)\n      // reload to apply changes\n      location.reload()\n    } catch (error: any) {\n      setError(error.message ?? 'Something went wrong.')\n      setAddingChain(false)\n    }\n  }\n\n  return (\n    <>\n      <textarea\n        onChange={e => setChainJson(e.target.value)}\n        placeholder=\"Paste the JSON configuration from the 'outputInfo.json' file that's generated at the end of the custom Orbit chain deployment.\"\n        className=\"min-h-[154px] w-full rounded border border-gray-dark bg-dark p-4 text-sm font-light text-white placeholder:text-white/70\"\n      />\n      {error && (\n        <div className=\"relative\">\n          <pre className=\"scroll mb-2 max-h-[400px] overflow-auto rounded border border-gray-dark bg-dark p-4 text-sm text-error\">\n            <button\n              onClick={() => setError(null)}\n              className=\"arb-hover absolute right-4 top-4 text-white\"\n            >\n              <XMarkIcon width={20} />\n            </button>\n            {error}\n          </pre>\n        </div>\n      )}\n      <div className=\"flex w-full justify-end\">\n        {addingChain ? (\n          <Loader size=\"small\" color=\"white\" />\n        ) : (\n          <Button\n            variant=\"secondary\"\n            onClick={onAddChain}\n            disabled={!chainJson.trim()}\n          >\n            Add Chain\n          </Button>\n        )}\n      </div>\n\n      {/* Custom chain list */}\n      {customChains.length > 0 && !addingChain && (\n        <div className=\"mt-4\">\n          <div className=\"heading mb-4 text-lg\">Live Orbit Chains</div>\n          <table className=\"w-full text-left\">\n            <thead className=\"border-b border-gray-dark\">\n              <tr>\n                <th className=\"pb-1 text-xs font-normal\">ORBIT CHAIN</th>\n                <th className=\"pb-1 text-xs font-normal\">ORBIT CHAIN ID</th>\n                <th className=\"pb-1 text-xs font-normal\">PARENT CHAIN</th>\n                <th className=\"pb-1 text-xs font-normal\">PARENT CHAIN ID</th>\n                <th className=\"pb-1 text-xs font-normal\"></th>\n              </tr>\n            </thead>\n            <tbody>\n              {customChains.map(customChain => (\n                <tr\n                  key={customChain.chainId}\n                  className=\"border-b border-gray-dark\"\n                >\n                  <th className=\"max-w-[100px] truncate py-3 text-sm font-normal\">\n                    {customChain.name}\n                  </th>\n                  <th className=\"py-3 text-sm font-normal\">\n                    {customChain.chainId}\n                  </th>\n                  <th className=\"py-3 text-sm font-normal\">\n                    {getNetworkName(customChain.parentChainId)}\n                  </th>\n                  <th className=\"py-3 text-sm font-normal\">\n                    {customChain.parentChainId}\n                  </th>\n                  <th className=\"py-3\">\n                    <Popover className=\"relative\">\n                      <Popover.Button className=\"arb-hover\">\n                        <EllipsisHorizontalIcon width={20} />\n                      </Popover.Button>\n                      <Transition>\n                        <Popover.Panel className=\"absolute bottom-6 right-0 flex w-[240px] flex-col rounded border border-gray-dark bg-dark text-sm font-normal text-white\">\n                          <button\n                            className=\"rounded-t p-4 text-left transition duration-300 hover:bg-[#333333]\"\n                            onClick={() => {\n                              removeCustomChainFromLocalStorage(\n                                customChain.chainId\n                              )\n                              removeOrbitConfigFromLocalStorage(\n                                customChain.chainId\n                              )\n                              // reload to apply changes\n                              location.reload()\n                            }}\n                          >\n                            Delete this chain\n                          </button>\n                          <a\n                            className=\"rounded-b p-4 text-left transition duration-300 hover:bg-[#333333]\"\n                            href={`data:text/json;charset=utf-8,${encodeURIComponent(\n                              JSON.stringify(\n                                getOrbitConfigFromLocalStorageById(\n                                  customChain.chainId\n                                )\n                              )\n                            )}`}\n                            download={`${customChain.name\n                              .split(' ')\n                              .join('')}.json`}\n                          >\n                            Download config for this chain\n                          </a>\n                        </Popover.Panel>\n                      </Transition>\n                    </Popover>\n                  </th>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </>\n  )\n}\n","import { twMerge } from 'tailwind-merge'\nimport useLocalStorage from '@rehooks/local-storage'\n\nimport { statsLocalStorageKey } from '../MainContent/ArbitrumStats'\nimport { AddCustomChain } from './AddCustomChain'\nimport { Switch } from './atoms/Switch'\nimport { SidePanel } from './SidePanel'\nimport { useArbQueryParams } from '../../hooks/useArbQueryParams'\nimport { ExternalLink } from './ExternalLink'\nimport { ORBIT_QUICKSTART_LINK } from '../../constants'\nimport { TestnetToggle } from './TestnetToggle'\n\nimport { useIsTestnetMode } from '../../hooks/useIsTestnetMode'\n\nconst SectionTitle = ({\n  className,\n  children\n}: {\n  className?: string\n  children: React.ReactNode\n}) => (\n  <div className={twMerge('heading mb-4 text-lg', className)}>{children}</div>\n)\n\nexport const SettingsDialog = () => {\n  const [isTestnetMode] = useIsTestnetMode()\n\n  const [{ settingsOpen }, setQueryParams] = useArbQueryParams()\n\n  const [isArbitrumStatsVisible, setIsArbitrumStatsVisible] =\n    useLocalStorage<boolean>(statsLocalStorageKey)\n\n  const openArbitrumStats = () => {\n    setIsArbitrumStatsVisible(true)\n  }\n\n  const closeArbitrumStats = () => {\n    setIsArbitrumStatsVisible(false)\n  }\n\n  function closeSettings() {\n    setQueryParams({ settingsOpen: false })\n  }\n\n  return (\n    <SidePanel\n      isOpen={settingsOpen}\n      heading=\"Settings\"\n      onClose={closeSettings}\n      panelClassNameOverrides=\"lg:!w-[644px] !min-w-[350px]\" // custom width\n    >\n      <div className=\"flex w-full flex-col items-center gap-6 text-white\">\n        {/* Arbitrum stats toggle */}\n        <div className=\"w-full\">\n          <SectionTitle>Stats</SectionTitle>\n\n          <Switch\n            label=\"Show Network Stats\"\n            description=\"Live, nerdy stats about Ethereum and Arbitrum chains, like\n        block number and current gas price.\"\n            checked={!!isArbitrumStatsVisible}\n            onChange={\n              isArbitrumStatsVisible ? closeArbitrumStats : openArbitrumStats\n            }\n          />\n        </div>\n\n        {/* Show testnets toggle */}\n        <div className=\"w-full\">\n          <SectionTitle>Developer Mode</SectionTitle>\n\n          <TestnetToggle\n            label=\"Turn on testnet mode\"\n            description=\"Show testnet networks and enable other testnet features.\"\n          />\n        </div>\n\n        {/* Add custom chain */}\n        <div\n          className={twMerge(\n            'w-full transition-opacity',\n            !isTestnetMode && 'pointer-events-none opacity-20'\n          )}\n        >\n          <SectionTitle className=\"mb-1\">Add Testnet Orbit Chain</SectionTitle>\n          <p className=\"mb-4 text-sm\">\n            Add in your own Orbit Testnet to the bridge. This will only be for\n            local testing.\n            <br />\n            Learn more about how to create and add your Orbit Testnet in{' '}\n            <ExternalLink\n              className=\"arb-hover underline\"\n              href={ORBIT_QUICKSTART_LINK}\n            >\n              Arbitrum Orbit Quickstart\n            </ExternalLink>\n            .\n          </p>\n\n          <AddCustomChain />\n        </div>\n      </div>\n    </SidePanel>\n  )\n}\n","import { Disclosure } from '@headlessui/react'\nimport {\n  InformationCircleIcon,\n  ChevronRightIcon\n} from '@heroicons/react/24/outline'\n\nimport { ExternalLink } from '../common/ExternalLink'\nimport { DOCS_DOMAIN } from '../../constants'\n\nexport function PendingDepositWarning() {\n  return (\n    <Disclosure\n      as=\"div\"\n      className=\"mt-4 flex w-full flex-col justify-start gap-1 rounded border border-orange-dark bg-orange p-3 text-sm text-orange-dark\"\n    >\n      <Disclosure.Button className=\"flex items-center text-left\">\n        <div className=\"flex items-start gap-1\">\n          <InformationCircleIcon className=\"mt-[2px] h-3 w-3 shrink-0 stroke-orange-dark\" />\n          <p>\n            Deposit might fail if the gas fee provided was too low. Stay on this\n            page until the transaction succeeds.\n          </p>\n        </div>\n        <ChevronRightIcon className=\"ml-auto h-3 w-3 shrink-0 ui-open:rotate-90 ui-open:transform\" />\n      </Disclosure.Button>\n      <Disclosure.Panel className=\"flex flex-col gap-2 pl-4\">\n        <p>\n          If you must leave, check back <strong>within a week</strong>. In most\n          cases, your deposits should go through successfully.\n          <br />\n          However, if it failed, re-execute <strong>within a week</strong> from\n          the time of the initial transaction, or else{' '}\n          <strong>your funds could be lost forever!</strong>\n        </p>\n        <p>\n          Learn more about{' '}\n          <ExternalLink\n            href={`${DOCS_DOMAIN}/arbos/l1-to-l2-messaging`}\n            className=\"arb-hover text-blue-link underline\"\n          >\n            retryable tickets\n          </ExternalLink>\n          , the mechanism behind deposits.\n        </p>\n      </Disclosure.Panel>\n    </Disclosure>\n  )\n}\n","import { useCallback, useState } from 'react'\nimport { useAccount, useSigner } from 'wagmi'\n\nimport { useAppState } from '../state'\nimport { MergedTransaction, WithdrawalStatus } from '../state/app/state'\nimport { isUserRejectedError } from '../util/isUserRejectedError'\nimport { errorToast } from '../components/common/atoms/Toast'\nimport { AssetType, L2ToL1EventResultPlus } from './arbTokenBridge.types'\nimport { setParentChainTxDetailsOfWithdrawalClaimTx } from '../components/TransactionHistory/helpers'\nimport { ChildTransactionReceipt } from '@arbitrum/sdk'\nimport { ContractReceipt, utils } from 'ethers'\nimport { useTransactionHistory } from './useTransactionHistory'\nimport dayjs from 'dayjs'\nimport { fetchErc20Data } from '../util/TokenUtils'\nimport { fetchNativeCurrency } from './useNativeCurrency'\nimport { getProviderForChainId } from '@/token-bridge-sdk/utils'\nimport { captureSentryErrorWithExtraData } from '../util/SentryUtils'\n\nexport type UseClaimWithdrawalResult = {\n  claim: () => Promise<void>\n  isClaiming: boolean\n}\n\nexport function useClaimWithdrawal(\n  tx: MergedTransaction\n): UseClaimWithdrawalResult {\n  const {\n    app: { arbTokenBridge }\n  } = useAppState()\n  const { address } = useAccount()\n  const { data: signer } = useSigner({ chainId: tx.parentChainId })\n  const { updatePendingTransaction } = useTransactionHistory(address)\n  const [isClaiming, setIsClaiming] = useState(false)\n\n  const claim = useCallback(async () => {\n    if (isClaiming || !tx.isWithdrawal || tx.isCctp) {\n      return\n    }\n\n    if (tx.uniqueId === null) {\n      return errorToast(\"Can't find withdrawal transaction.\")\n    }\n\n    let res, err: any\n\n    setIsClaiming(true)\n\n    const childChainProvider = getProviderForChainId(tx.childChainId)\n    const txReceipt = await childChainProvider.getTransactionReceipt(tx.txId)\n    const l2TxReceipt = new ChildTransactionReceipt(txReceipt)\n    const [event] = l2TxReceipt.getChildToParentEvents()\n\n    if (!event) {\n      setIsClaiming(false)\n      errorToast(\"Can't claim withdrawal: event not found.\")\n      return\n    }\n\n    const { symbol, decimals } =\n      tx.assetType === AssetType.ERC20\n        ? await fetchErc20Data({\n            address: tx.tokenAddress as string,\n            provider: getProviderForChainId(tx.parentChainId)\n          })\n        : await fetchNativeCurrency({ provider: childChainProvider })\n\n    const extendedEvent: L2ToL1EventResultPlus = {\n      ...event,\n      sender: tx.sender,\n      destinationAddress: tx.destination,\n      l2TxHash: tx.txId,\n      type: tx.assetType,\n      value: utils.parseEther(tx.value ?? '0'),\n      tokenAddress: tx.tokenAddress || undefined,\n      outgoingMessageState: 1,\n      symbol,\n      decimals,\n      nodeBlockDeadline: tx.nodeBlockDeadline,\n      parentChainId: tx.parentChainId,\n      childChainId: tx.childChainId\n    }\n\n    try {\n      if (!signer) {\n        throw 'Signer is undefined'\n      }\n      if (tx.assetType === AssetType.ETH) {\n        res = await arbTokenBridge.eth.triggerOutbox({\n          event: extendedEvent,\n          l1Signer: signer\n        })\n      } else {\n        res = await arbTokenBridge.token.triggerOutbox({\n          event: extendedEvent,\n          l1Signer: signer\n        })\n      }\n    } catch (error: any) {\n      err = error\n    } finally {\n      setIsClaiming(false)\n    }\n\n    // Don't show any alert / log any error in case user denies the signature\n    if (isUserRejectedError(err)) {\n      return\n    }\n\n    captureSentryErrorWithExtraData({\n      error: err,\n      originFunction: 'useClaimWithdrawal claim'\n    })\n    if (!res) {\n      errorToast(`Can't claim withdrawal: ${err?.message ?? err}`)\n    }\n\n    const isSuccess = (res as ContractReceipt).status === 1\n    const txHash = (res as ContractReceipt).transactionHash\n\n    await updatePendingTransaction({\n      ...tx,\n      status: isSuccess ? WithdrawalStatus.EXECUTED : WithdrawalStatus.FAILURE,\n      resolvedAt: isSuccess ? dayjs().valueOf() : null\n    })\n\n    if (isSuccess) {\n      setParentChainTxDetailsOfWithdrawalClaimTx(tx, txHash)\n    }\n  }, [\n    arbTokenBridge.eth,\n    arbTokenBridge.token,\n    isClaiming,\n    signer,\n    tx,\n    updatePendingTransaction\n  ])\n\n  return { claim, isClaiming }\n}\n","import { useCallback, useState } from 'react'\nimport { ParentToChildMessageStatus } from '@arbitrum/sdk'\nimport { useSigner } from 'wagmi'\nimport dayjs from 'dayjs'\n\nimport { DepositStatus, MergedTransaction } from '../state/app/state'\nimport { getRetryableTicket } from '../util/RetryableUtils'\nimport { trackEvent } from '../util/AnalyticsUtils'\nimport { getNetworkName } from '../util/networks'\nimport { isUserRejectedError } from '../util/isUserRejectedError'\nimport { errorToast } from '../components/common/atoms/Toast'\nimport { getProviderForChainId } from '@/token-bridge-sdk/utils'\nimport { useTransactionHistory } from './useTransactionHistory'\nimport { Address } from '../util/AddressUtils'\n\nexport type UseRedeemRetryableResult = {\n  redeem: () => Promise<void>\n  isRedeeming: boolean\n}\n\nexport function useRedeemRetryable(\n  tx: MergedTransaction,\n  address: Address | undefined\n): UseRedeemRetryableResult {\n  const { data: signer } = useSigner({ chainId: tx.destinationChainId })\n  const { updatePendingTransaction } = useTransactionHistory(address)\n\n  const destinationNetworkName = getNetworkName(tx.destinationChainId)\n\n  const [isRedeeming, setIsRedeeming] = useState(false)\n\n  const redeem = useCallback(async () => {\n    if (isRedeeming) {\n      return\n    }\n    try {\n      setIsRedeeming(true)\n\n      if (!signer) {\n        throw 'Signer is undefined'\n      }\n\n      const retryableTicket = await getRetryableTicket({\n        parentChainTxHash: tx.txId,\n        retryableCreationId: tx.parentToChildMsgData?.retryableCreationTxID,\n        parentChainProvider: getProviderForChainId(tx.parentChainId),\n        childChainSigner: signer\n      })\n\n      const redeemTx = await retryableTicket.redeem()\n      await redeemTx.wait()\n\n      const status = await retryableTicket.status()\n      const isSuccess = status === ParentToChildMessageStatus.REDEEMED\n      const successfulRedeem = await retryableTicket.getSuccessfulRedeem()\n\n      if (successfulRedeem.status !== ParentToChildMessageStatus.REDEEMED) {\n        throw new Error(\n          `Unexpected status for retryable ticket (parent tx hash ${tx.txId}), expected ${ParentToChildMessageStatus.REDEEMED} but got ${successfulRedeem.status}`\n        )\n      }\n\n      await updatePendingTransaction({\n        ...tx,\n        parentToChildMsgData: {\n          childTxId: successfulRedeem.childTxReceipt.transactionHash,\n          status,\n          retryableCreationTxID: retryableTicket.retryableCreationId,\n          fetchingUpdate: false\n        },\n        resolvedAt: isSuccess ? dayjs().valueOf() : null,\n        depositStatus: isSuccess ? DepositStatus.L2_SUCCESS : tx.depositStatus\n      })\n\n      // track in analytics\n      trackEvent('Redeem Retryable', { network: destinationNetworkName })\n    } catch (error: any) {\n      if (isUserRejectedError(error)) {\n        return\n      }\n      return errorToast(\n        `There was an error, here is more information: ${error.message}`\n      )\n    } finally {\n      setIsRedeeming(false)\n    }\n  }, [\n    isRedeeming,\n    destinationNetworkName,\n    signer,\n    tx,\n    updatePendingTransaction\n  ])\n\n  return { redeem, isRedeeming }\n}\n","import { DepositStatus, MergedTransaction } from '../../state/app/state'\nimport {\n  getOrbitDepositDuration,\n  minutesToHumanReadableTime,\n  useTransferDuration\n} from '../../hooks/useTransferDuration'\nimport { isNetwork } from '../../util/networks'\nimport { isTeleporterTransaction } from '../../hooks/useTransactions'\n\n/**\n * Displays a transfer countdown for a deposit, withdrawal, or cctp.\n *\n * @param {MergedTransaction} tx - The transaction object.\n * @param {boolean} firstLegOnly - Teleport has 2 txns, this flag will give us estimate of only 1st tx, else it will give consolidated duration.\n * @param {string} textAfterTime - Text to be displayed after the remaining time, e.g. if this was \"remaining\", it would result with e.g. \"15 minutes remaining\".\n */\nexport function TransferCountdown({\n  tx,\n  firstLegOnly,\n  textAfterTime = ''\n}: {\n  tx: MergedTransaction\n  firstLegOnly?: boolean\n  textAfterTime?: string\n}) {\n  const { isTestnet } = isNetwork(tx.sourceChainId)\n  let { estimatedMinutesLeft } = useTransferDuration(tx)\n\n  if (estimatedMinutesLeft === null) {\n    return <span>Calculating...</span>\n  }\n\n  const isTeleport = isTeleporterTransaction(tx)\n  // To get the first retryable only, we subtract the Orbit deposit time (second retryable)\n  if (isTeleport && firstLegOnly) {\n    estimatedMinutesLeft -= getOrbitDepositDuration(isTestnet)\n  }\n\n  const isStandardDeposit = !tx.isWithdrawal && !tx.isCctp && !isTeleport\n\n  if (isStandardDeposit) {\n    const depositStatus = tx.depositStatus\n\n    // Only show when status is Pending\n    if (\n      !depositStatus ||\n      ![DepositStatus.L1_PENDING, DepositStatus.L2_PENDING].includes(\n        depositStatus\n      )\n    ) {\n      return null\n    }\n  }\n\n  return (\n    <span className=\"whitespace-nowrap\">\n      {minutesToHumanReadableTime(estimatedMinutesLeft)} {textAfterTime}\n    </span>\n  )\n}\n","import { useCallback, useState } from 'react'\nimport { Signer } from 'ethers'\nimport {\n  ParentToChildMessageStatus,\n  ParentToChildMessageWriter\n} from '@arbitrum/sdk'\nimport { useSigner } from 'wagmi'\nimport dayjs from 'dayjs'\nimport { getProviderForChainId } from '@/token-bridge-sdk/utils'\nimport { isTeleport } from '@/token-bridge-sdk/teleport'\nimport {\n  DepositStatus,\n  MergedTransaction,\n  TeleporterMergedTransaction\n} from '../state/app/state'\nimport {\n  firstRetryableLegRequiresRedeem,\n  getChainIdForRedeemingRetryable,\n  getRetryableTicket,\n  l1L2RetryableRequiresRedeem,\n  l2ForwarderRetryableRequiresRedeem,\n  secondRetryableLegForTeleportRequiresRedeem\n} from '../util/RetryableUtils'\nimport { trackEvent } from '../util/AnalyticsUtils'\nimport { getNetworkName } from '../util/networks'\nimport { isUserRejectedError } from '../util/isUserRejectedError'\nimport { errorToast } from '../components/common/atoms/Toast'\nimport { useTransactionHistory } from './useTransactionHistory'\nimport { Address } from '../util/AddressUtils'\nimport { isTeleporterTransaction, L2ToL3MessageData } from './useTransactions'\nimport { UseRedeemRetryableResult } from './useRedeemRetryable'\nimport { getUpdatedTeleportTransfer } from '../components/TransactionHistory/helpers'\n\n// common handling for redeeming all 3 retryables for teleporter\nconst redeemRetryable = async (retryable: ParentToChildMessageWriter) => {\n  const redeemTx = await retryable.redeem({ gasLimit: 40_000_000 }) // after a few trials, this gas limit seems to be working fine\n  await redeemTx.wait()\n\n  const status = await retryable.status()\n  const isSuccess = status === ParentToChildMessageStatus.REDEEMED\n\n  if (!isSuccess) {\n    console.error('Redemption failed; status is not REDEEMED', redeemTx)\n    throw new Error(\n      'Redemption failed; status is not REDEEMED. Please try again later.'\n    )\n  }\n\n  const successfulRedeem = await retryable.getSuccessfulRedeem()\n\n  if (successfulRedeem.status !== ParentToChildMessageStatus.REDEEMED) {\n    throw new Error(\n      `Unexpected status for retryable ticket (creation id ${retryable.retryableCreationId}), expected ${ParentToChildMessageStatus.REDEEMED} but got ${successfulRedeem.status}`\n    )\n  }\n\n  return successfulRedeem\n}\n\n// this will try to redeem - 1. L1L2Retryable 2. L2ForwarderRetryable\nconst redeemTeleporterFirstLeg = async ({\n  tx,\n  signer,\n  txUpdateCallback\n}: {\n  tx: TeleporterMergedTransaction\n  signer: Signer\n  txUpdateCallback?: (tx: TeleporterMergedTransaction) => Promise<void>\n}) => {\n  let teleportTransfer = tx\n\n  // check if we require a redemption for the first retryable\n  if (l1L2RetryableRequiresRedeem(tx)) {\n    // get retryable ticket\n    const l1l2Retryable = await getRetryableTicket({\n      parentChainTxHash: tx.txId,\n      retryableCreationId: tx.l1ToL2MsgData?.retryableCreationTxID,\n      parentChainProvider: getProviderForChainId(tx.parentChainId),\n      childChainSigner: signer\n    })\n\n    // redeem retryable\n    await redeemRetryable(l1l2Retryable)\n\n    // update the teleport tx in the UI\n    teleportTransfer = await getUpdatedTeleportTransfer(tx)\n    await txUpdateCallback?.(teleportTransfer)\n  }\n\n  // check if we require a redemption for the second retryable\n  if (l2ForwarderRetryableRequiresRedeem(teleportTransfer)) {\n    // get retryable ticket\n    const l2ForwarderRetryable = await getRetryableTicket({\n      parentChainTxHash: tx.txId,\n      retryableCreationId:\n        teleportTransfer?.l2ToL3MsgData?.l2ForwarderRetryableTxID,\n      parentChainProvider: getProviderForChainId(tx.parentChainId),\n      childChainSigner: signer\n    })\n\n    // redeem retryable\n    await redeemRetryable(l2ForwarderRetryable)\n\n    // update the teleport tx in the UI\n    const updatedTeleportTransfer = await getUpdatedTeleportTransfer(\n      teleportTransfer\n    )\n    await txUpdateCallback?.(updatedTeleportTransfer)\n  }\n}\n\n// this will try to redeem - L2L3Retryable\nconst redeemTeleporterSecondLeg = async ({\n  tx,\n  signer,\n  txUpdateCallback\n}: {\n  tx: TeleporterMergedTransaction\n  signer: Signer\n  txUpdateCallback?: (tx: TeleporterMergedTransaction) => Promise<void>\n}) => {\n  // check if we require a redemption for the l2l3 retryable\n  if (\n    secondRetryableLegForTeleportRequiresRedeem(tx) &&\n    tx.l1ToL2MsgData?.childTxId &&\n    tx.l2ToL3MsgData\n  ) {\n    const l2L3Retryable = await getRetryableTicket({\n      parentChainTxHash: tx.l1ToL2MsgData.childTxId,\n      retryableCreationId: tx.l2ToL3MsgData?.retryableCreationTxID,\n      parentChainProvider: getProviderForChainId(tx.l2ToL3MsgData.l2ChainId),\n      childChainSigner: signer\n    })\n\n    // redeem retryable\n    const redemptionReceipt = await redeemRetryable(l2L3Retryable)\n\n    // update the teleport tx in the UI\n    const l2ToL3MsgData: L2ToL3MessageData = {\n      ...tx.l2ToL3MsgData,\n      l3TxID: redemptionReceipt.childTxReceipt.transactionHash,\n      status: ParentToChildMessageStatus.REDEEMED,\n      retryableCreationTxID: l2L3Retryable.retryableCreationId\n    }\n    const updatedTeleporterTx = await getUpdatedTeleportTransfer({\n      ...tx,\n      l2ToL3MsgData,\n      depositStatus: DepositStatus.L2_SUCCESS,\n      resolvedAt: dayjs().valueOf()\n    })\n    await txUpdateCallback?.(updatedTeleporterTx)\n  }\n}\n\nexport function useRedeemTeleporter(\n  tx: TeleporterMergedTransaction | MergedTransaction,\n  address: Address | undefined\n): UseRedeemRetryableResult {\n  const chainIdForRedeemingRetryable = getChainIdForRedeemingRetryable(tx)\n\n  const { data: signer } = useSigner({\n    chainId: chainIdForRedeemingRetryable\n  })\n  const { updatePendingTransaction } = useTransactionHistory(address)\n\n  const redeemerNetworkName = getNetworkName(chainIdForRedeemingRetryable)\n\n  const [isRedeeming, setIsRedeeming] = useState(false)\n\n  const redeem = useCallback(async () => {\n    if (isRedeeming) {\n      return\n    }\n\n    if (!isTeleport(tx) || !isTeleporterTransaction(tx)) {\n      throw new Error(\n        'The transaction being redeemed is not a LayerLeap transaction.'\n      )\n    }\n\n    try {\n      setIsRedeeming(true)\n\n      if (!signer) {\n        throw 'Signer is undefined'\n      }\n\n      if (\n        !firstRetryableLegRequiresRedeem(tx) &&\n        !secondRetryableLegForTeleportRequiresRedeem(tx)\n      ) {\n        // fail-safe: if there is no retryable to redeem, we should break the flow here\n        throw 'Transaction does not require redemption.'\n      }\n\n      if (firstRetryableLegRequiresRedeem(tx)) {\n        await redeemTeleporterFirstLeg({\n          tx,\n          signer,\n          txUpdateCallback: updatePendingTransaction\n        })\n      } else if (secondRetryableLegForTeleportRequiresRedeem(tx)) {\n        await redeemTeleporterSecondLeg({\n          tx,\n          signer,\n          txUpdateCallback: updatePendingTransaction\n        })\n      }\n\n      // track in analytics\n      trackEvent('Redeem Teleport Retryable', { network: redeemerNetworkName })\n    } catch (error: any) {\n      if (isUserRejectedError(error)) {\n        return\n      }\n      return errorToast(\n        `There was an error, here is more information: ${error.message}`\n      )\n    } finally {\n      setIsRedeeming(false)\n    }\n  }, [isRedeeming, redeemerNetworkName, signer, tx, updatePendingTransaction])\n\n  return { redeem, isRedeeming }\n}\n","import { useCallback } from 'react'\nimport { GET_HELP_LINK } from '../../constants'\nimport { useClaimWithdrawal } from '../../hooks/useClaimWithdrawal'\nimport { useClaimCctp } from '../../state/cctpState'\nimport {\n  DepositStatus,\n  MergedTransaction,\n  TeleporterMergedTransaction\n} from '../../state/app/state'\nimport { trackEvent } from '../../util/AnalyticsUtils'\nimport { isUserRejectedError } from '../../util/isUserRejectedError'\nimport { getNetworkName } from '../../util/networks'\nimport { errorToast } from '../common/atoms/Toast'\nimport { Button } from '../common/Button'\nimport { useSwitchNetworkWithConfig } from '../../hooks/useSwitchNetworkWithConfig'\nimport { useNetwork } from 'wagmi'\nimport { isDepositReadyToRedeem } from '../../state/app/utils'\nimport { useRedeemRetryable } from '../../hooks/useRedeemRetryable'\nimport { TransferCountdown } from '../common/TransferCountdown'\nimport { Address } from '../../util/AddressUtils'\nimport { getChainIdForRedeemingRetryable } from '../../util/RetryableUtils'\nimport { isTeleport } from '@/token-bridge-sdk/teleport'\nimport { useRedeemTeleporter } from '../../hooks/useRedeemTeleporter'\nimport { sanitizeTokenSymbol } from '../../util/TokenUtils'\nimport { formatAmount } from '../../util/NumberUtils'\n\nexport function TransactionsTableRowAction({\n  tx,\n  isError,\n  type,\n  address\n}: {\n  tx: MergedTransaction | TeleporterMergedTransaction\n  isError: boolean\n  type: 'deposits' | 'withdrawals'\n  address: Address | undefined\n}) {\n  const { chain } = useNetwork()\n  const { switchNetworkAsync } = useSwitchNetworkWithConfig()\n  const networkName = getNetworkName(chain?.id ?? 0)\n\n  const tokenSymbol = sanitizeTokenSymbol(tx.asset, {\n    erc20L1Address: tx.tokenAddress,\n    chainId: tx.sourceChainId\n  })\n\n  const { claim, isClaiming } = useClaimWithdrawal(tx)\n  const { claim: claimCctp, isClaiming: isClaimingCctp } = useClaimCctp(tx)\n  const { redeem, isRedeeming: isRetryableRedeeming } = useRedeemRetryable(\n    tx,\n    address\n  )\n  const { redeem: teleporterRedeem, isRedeeming: isTeleporterRedeeming } =\n    useRedeemTeleporter(tx, address)\n\n  const isRedeeming = isRetryableRedeeming || isTeleporterRedeeming\n\n  const chainIdForRedeemingRetryable = getChainIdForRedeemingRetryable(tx)\n\n  const isConnectedToCorrectNetworkForAction = isDepositReadyToRedeem(tx)\n    ? chain?.id === chainIdForRedeemingRetryable // for redemption actions, we can have different chain id\n    : chain?.id === tx.destinationChainId // for claims, we need to be on the destination chain\n\n  const handleRedeemRetryable = useCallback(async () => {\n    try {\n      if (!isConnectedToCorrectNetworkForAction) {\n        await switchNetworkAsync?.(chainIdForRedeemingRetryable)\n      }\n\n      if (isTeleport(tx)) {\n        await teleporterRedeem()\n      } else {\n        await redeem()\n      }\n    } catch (error: any) {\n      if (isUserRejectedError(error)) {\n        return\n      }\n      errorToast(`Can't retry the deposit: ${error?.message ?? error}`)\n    }\n  }, [\n    tx,\n    isConnectedToCorrectNetworkForAction,\n    chainIdForRedeemingRetryable,\n    redeem,\n    switchNetworkAsync,\n    teleporterRedeem\n  ])\n\n  const handleClaim = useCallback(async () => {\n    try {\n      if (!isConnectedToCorrectNetworkForAction) {\n        await switchNetworkAsync?.(tx.destinationChainId)\n      }\n\n      if (tx.isCctp) {\n        return await claimCctp()\n      } else {\n        return await claim()\n      }\n    } catch (error: any) {\n      if (isUserRejectedError(error)) {\n        return\n      }\n\n      errorToast(\n        `Can't claim ${type === 'deposits' ? 'deposit' : 'withdrawal'}: ${\n          error?.message ?? error\n        }`\n      )\n    }\n  }, [\n    claim,\n    claimCctp,\n    isConnectedToCorrectNetworkForAction,\n    switchNetworkAsync,\n    tx,\n    type\n  ])\n\n  const getHelpOnError = () => {\n    window.open(GET_HELP_LINK, '_blank')\n\n    // track the button click\n    trackEvent('Tx Error: Get Help Click', { network: networkName })\n  }\n\n  if (isDepositReadyToRedeem(tx)) {\n    // Failed retryable\n    return isRedeeming ? (\n      <span className=\"animate-pulse\">Retrying...</span>\n    ) : (\n      <Button\n        aria-label=\"Retry transaction\"\n        variant=\"primary\"\n        onClick={handleRedeemRetryable}\n        className=\"w-14 bg-red-400 p-2 text-xs text-black\"\n      >\n        Retry\n      </Button>\n    )\n  }\n\n  if (\n    tx.status === 'pending' ||\n    tx.status === 'Unconfirmed' ||\n    tx.depositStatus === DepositStatus.L1_PENDING ||\n    tx.depositStatus === DepositStatus.L2_PENDING\n  ) {\n    return (\n      <div className=\"flex flex-col text-center text-xs\">\n        <span>Time left:</span>\n        <TransferCountdown tx={tx} />\n      </div>\n    )\n  }\n\n  if (tx.status === 'Confirmed') {\n    if (tx.isCctp && tx.resolvedAt) {\n      return null\n    }\n\n    return isClaiming || isClaimingCctp ? (\n      <span className=\"my-2 animate-pulse text-xs\">Claiming...</span>\n    ) : (\n      <Button\n        aria-label={`Claim ${formatAmount(Number(tx.value), {\n          symbol: tokenSymbol\n        })}`}\n        variant=\"primary\"\n        className=\"w-14 rounded bg-green-400 p-2 text-xs text-black\"\n        onClick={handleClaim}\n      >\n        Claim\n      </Button>\n    )\n  }\n\n  if (isError) {\n    return (\n      <Button\n        variant=\"secondary\"\n        className=\"w-14 border-white/30 text-xs\"\n        onClick={getHelpOnError}\n      >\n        Get help\n      </Button>\n    )\n  }\n\n  return null\n}\n","export default {\"src\":\"/_next/static/media/EthereumLogoRoundLight.c4e5a9b4.svg\",\"height\":20,\"width\":20,\"blurWidth\":0,\"blurHeight\":0};","import EthereumLogoRoundLight from '@/images/EthereumLogoRoundLight.svg'\nimport Image from 'next/image'\n\nimport { useTokenLists } from '../../hooks/useTokenLists'\nimport { MergedTransaction } from '../../state/app/state'\nimport { orbitChains } from '../../util/orbitChainsList'\nimport { AssetType } from '../../hooks/arbTokenBridge.types'\nimport { TokenListWithId } from '../../util/TokenListUtils'\n\nfunction createTokenLogoMapFromTokenLists(\n  tokenLists: TokenListWithId[] | undefined\n) {\n  if (!tokenLists) {\n    return {}\n  }\n  const arrayOfTokens = tokenLists.flatMap(tkn => tkn.tokens) || []\n  return arrayOfTokens.reduce((acc, tkn) => {\n    acc[tkn.address.toLowerCase()] = tkn.logoURI\n    return acc\n  }, {} as { [key in string]: string | undefined })\n}\n\nexport const TransactionsTableTokenImage = ({\n  tx\n}: {\n  tx: MergedTransaction\n}) => {\n  // we need to take token image from mainnet by symbol, some token images don't exists on other networks\n  const tokenLists = useTokenLists(tx.sourceChainId)\n\n  const tokenAddressToLogoSrcMap = createTokenLogoMapFromTokenLists(\n    tokenLists.data\n  )\n\n  const tokenLogoSrc = tx.tokenAddress\n    ? tokenAddressToLogoSrcMap[tx.tokenAddress.toLowerCase()]\n    : undefined\n\n  if (tx.assetType === AssetType.ETH) {\n    const orbitChain = orbitChains[tx.childChainId]\n\n    const nativeTokenLogoSrc =\n      orbitChain?.bridgeUiConfig.nativeTokenData?.logoUrl\n\n    if (nativeTokenLogoSrc) {\n      return (\n        // we use img in case native token logos are imported from an external source\n        // eslint-disable-next-line @next/next/no-img-element\n        <img\n          className=\"w-[20px]\"\n          alt=\"Native token logo\"\n          src={nativeTokenLogoSrc}\n        />\n      )\n    }\n\n    return (\n      <Image\n        height={20}\n        width={20}\n        alt=\"ETH logo\"\n        src={EthereumLogoRoundLight}\n      />\n    )\n  }\n\n  if (!tokenLogoSrc) {\n    return <div className=\"h-[20px] w-[20px] rounded-full bg-white/20\" />\n  }\n\n  return (\n    // eslint-disable-next-line @next/next/no-img-element\n    <img className=\"w-[20px]\" alt={tx.asset + ' logo'} src={tokenLogoSrc} />\n  )\n}\n","import { Fragment, PropsWithChildren, useState } from 'react'\n\nimport { ExternalLink } from '../common/ExternalLink'\nimport { Transition } from '@headlessui/react'\nimport { ArrowTopRightOnSquareIcon } from '@heroicons/react/24/outline'\n\nexport const TransactionsTableExternalLink = ({\n  children,\n  href,\n  disabled = false\n}: PropsWithChildren<{ href: string; disabled?: boolean }>) => {\n  const [show, setShow] = useState(false)\n\n  if (disabled) {\n    return children\n  }\n\n  return (\n    <ExternalLink\n      href={href}\n      onMouseEnter={() => setShow(true)}\n      onMouseLeave={() => setShow(false)}\n      className=\"arb-hover flex items-center space-x-2\"\n    >\n      {children}\n      <Transition show={show} as={Fragment}>\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-150\"\n          enterFrom=\"translate-x-4 opacity-0\"\n          enterTo=\"translate-x-0 opacity-100\"\n          leave=\"ease-in duration-150\"\n          leaveFrom=\"translate-x-0 opacity-100\"\n          leaveTo=\"translate-x-4 opacity-0\"\n        >\n          <ArrowTopRightOnSquareIcon height={10} />\n        </Transition.Child>\n      </Transition>\n    </ExternalLink>\n  )\n}\n","import { useMemo, useState } from 'react'\nimport { useInterval } from 'react-use'\nimport { twMerge } from 'tailwind-merge'\nimport dayjs from 'dayjs'\nimport {\n  ArrowTopRightOnSquareIcon,\n  CheckCircleIcon,\n  XCircleIcon\n} from '@heroicons/react/24/outline'\n\nimport { DepositStatus, MergedTransaction } from '../../state/app/state'\nimport { formatAmount } from '../../util/NumberUtils'\nimport { sanitizeTokenSymbol } from '../../util/TokenUtils'\nimport { getExplorerUrl, getNetworkName } from '../../util/networks'\nimport { NetworkImage } from '../common/NetworkImage'\nimport {\n  getDestinationNetworkTxId,\n  isTxClaimable,\n  isTxExpired,\n  isTxFailed,\n  isTxPending\n} from './helpers'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { Button } from '../common/Button'\nimport { TransactionsTableRowAction } from './TransactionsTableRowAction'\nimport { AssetType } from '../../hooks/arbTokenBridge.types'\nimport { TransactionsTableTokenImage } from './TransactionsTableTokenImage'\nimport { useTxDetailsStore } from './TransactionHistory'\nimport { TransactionsTableExternalLink } from './TransactionsTableExternalLink'\nimport { Address } from '../../util/AddressUtils'\n\nconst StatusLabel = ({ tx }: { tx: MergedTransaction }) => {\n  const { sourceChainId, destinationChainId } = tx\n\n  if (isTxFailed(tx)) {\n    return (\n      <ExternalLink\n        href={`${getExplorerUrl(sourceChainId)}/tx/${tx.txId}`}\n        aria-label=\"Transaction status\"\n        className=\"arb-hover flex shrink-0 items-center space-x-1 text-red-400\"\n      >\n        <XCircleIcon height={14} />\n        <span>Failed</span>\n        <ArrowTopRightOnSquareIcon height={10} className=\"shrink-0\" />\n      </ExternalLink>\n    )\n  }\n\n  if (isTxExpired(tx)) {\n    return (\n      <ExternalLink\n        href={`${getExplorerUrl(sourceChainId)}/tx/${tx.txId}`}\n        aria-label=\"Transaction status\"\n        className=\"arb-hover flex shrink-0 items-center space-x-1 text-red-400\"\n      >\n        <XCircleIcon height={14} />\n        <span>Expired</span>\n        <ArrowTopRightOnSquareIcon height={10} className=\"shrink-0\" />\n      </ExternalLink>\n    )\n  }\n\n  if (isTxPending(tx)) {\n    return (\n      <ExternalLink\n        href={`${getExplorerUrl(sourceChainId)}/tx/${tx.txId}`}\n        aria-label=\"Transaction status\"\n        className=\"arb-hover flex items-center space-x-1 text-yellow-400\"\n      >\n        <div className=\"h-[10px] w-[10px] rounded-full border border-yellow-400 \" />\n        <span>Pending</span>\n        <ArrowTopRightOnSquareIcon height={10} className=\"shrink-0\" />\n      </ExternalLink>\n    )\n  }\n\n  if (isTxClaimable(tx)) {\n    return (\n      <ExternalLink\n        href={`${getExplorerUrl(sourceChainId)}/tx/${tx.txId}`}\n        aria-label=\"Transaction status\"\n        className=\"arb-hover flex items-center space-x-1 text-green-400\"\n      >\n        <div className=\"h-[10px] w-[10px] shrink-0 rounded-full border border-green-400\" />\n        <span>Claimable</span>\n        <ArrowTopRightOnSquareIcon height={10} className=\"shrink-0\" />\n      </ExternalLink>\n    )\n  }\n\n  const destinationNetworkTxId = getDestinationNetworkTxId(tx)\n\n  // Success\n  return (\n    <ExternalLink\n      href={\n        destinationNetworkTxId\n          ? `${getExplorerUrl(destinationChainId)}/tx/${destinationNetworkTxId}`\n          : ''\n      }\n      aria-label=\"Transaction status\"\n      className={destinationNetworkTxId ? 'arb-hover' : 'pointer-events-none'}\n    >\n      <div className=\"flex items-center space-x-1\">\n        <CheckCircleIcon height={14} className=\"shrink-0\" />\n        <span>Success</span>\n\n        {destinationNetworkTxId && (\n          <ArrowTopRightOnSquareIcon height={10} className=\"shrink-0\" />\n        )}\n      </div>\n    </ExternalLink>\n  )\n}\n\nexport function TransactionsTableRow({\n  tx,\n  address,\n  className = ''\n}: {\n  tx: MergedTransaction\n  address: Address | undefined\n  className?: string\n}) {\n  const { open: openTxDetails } = useTxDetailsStore()\n\n  const { sourceChainId, destinationChainId } = tx\n\n  const [txRelativeTime, setTxRelativeTime] = useState(\n    dayjs(tx.createdAt).fromNow()\n  )\n\n  const isClaimableTx = tx.isCctp || tx.isWithdrawal\n\n  // make sure relative time updates periodically\n  useInterval(() => setTxRelativeTime(dayjs(tx.createdAt).fromNow()), 10_000)\n\n  const tokenSymbol = sanitizeTokenSymbol(tx.asset, {\n    erc20L1Address: tx.tokenAddress,\n    chainId: tx.sourceChainId\n  })\n\n  const isError = useMemo(() => {\n    if (tx.isCctp || !tx.isWithdrawal) {\n      if (\n        tx.depositStatus === DepositStatus.L1_FAILURE ||\n        tx.depositStatus === DepositStatus.EXPIRED\n      ) {\n        return true\n      }\n\n      if (tx.depositStatus === DepositStatus.CREATION_FAILED) {\n        // In case of a retryable ticket creation failure, mark only the token deposits as errors\n        return tx.assetType === AssetType.ETH\n      }\n    }\n\n    // Withdrawal\n    return tx.status === 'Failure'\n  }, [tx])\n\n  return (\n    <div\n      data-testid={`${isClaimableTx ? 'claimable' : 'deposit'}-row-${tx.txId}-${\n        tx.value\n      }${tx.asset}`}\n      className={twMerge(\n        'relative mx-4 grid h-[60px] grid-cols-[140px_140px_140px_140px_100px_170px_140px] items-center justify-between border-b border-white/30 text-xs text-white',\n        className\n      )}\n    >\n      <div className=\"pr-3 align-middle\">{txRelativeTime}</div>\n      <div className=\"flex items-center pr-3 align-middle\">\n        <TransactionsTableExternalLink\n          href={`${getExplorerUrl(sourceChainId)}/token/${tx.tokenAddress}`}\n          disabled={!tx.tokenAddress}\n        >\n          <TransactionsTableTokenImage tx={tx} />\n          <span className=\"ml-2\">\n            {formatAmount(Number(tx.value), {\n              symbol: tokenSymbol\n            })}\n          </span>\n        </TransactionsTableExternalLink>\n      </div>\n      <div className=\"flex items-center space-x-2\">\n        <TransactionsTableExternalLink\n          href={`${getExplorerUrl(sourceChainId)}/address/${tx.sender}`}\n        >\n          <span>\n            <NetworkImage chainId={sourceChainId} className=\"h-5 w-5\" />\n          </span>\n          <span className=\"inline-block max-w-[55px] break-words\">\n            {getNetworkName(sourceChainId)}\n          </span>\n        </TransactionsTableExternalLink>\n      </div>\n      <div className=\"flex items-center space-x-2\">\n        <TransactionsTableExternalLink\n          href={`${getExplorerUrl(destinationChainId)}/address/${\n            tx.destination ?? tx.sender\n          }`}\n        >\n          <NetworkImage chainId={destinationChainId} className=\"h-5 w-5\" />\n\n          <span className=\"inline-block max-w-[55px] break-words\">\n            {getNetworkName(destinationChainId)}\n          </span>\n        </TransactionsTableExternalLink>\n      </div>\n      <div className=\"pr-3 align-middle\">\n        <StatusLabel tx={tx} />\n      </div>\n      <div className=\"flex justify-center px-3 align-middle\">\n        <TransactionsTableRowAction\n          tx={tx}\n          isError={isError}\n          type={tx.isWithdrawal ? 'withdrawals' : 'deposits'}\n          address={address}\n        />\n      </div>\n      <div className=\"pl-2 align-middle\">\n        <Button\n          aria-label=\"Transaction details button\"\n          variant=\"primary\"\n          className=\"rounded border border-white p-2 text-xs text-white\"\n          onClick={() => openTxDetails(tx)}\n        >\n          See Details\n        </Button>\n      </div>\n    </div>\n  )\n}\n","import { GET_HELP_LINK } from '../../constants'\nimport { ExternalLink } from '../common/ExternalLink'\nimport {\n  ContentWrapper,\n  HistoryLoader,\n  LoadMoreButton\n} from './TransactionHistoryTable'\n\nexport const EmptyTransactionHistory = ({\n  loading,\n  isError,\n  paused,\n  resume,\n  tabType\n}: {\n  loading: boolean\n  isError: boolean\n  paused: boolean\n  resume: () => void\n  tabType: 'pending' | 'settled'\n}) => {\n  if (loading) {\n    return (\n      <ContentWrapper>\n        <HistoryLoader />\n      </ContentWrapper>\n    )\n  }\n  if (isError) {\n    return (\n      <ContentWrapper>\n        <p>\n          We seem to be having a difficult time loading your data, we&apos;re\n          working hard to resolve it.\n        </p>\n        <p>Please give it a moment and then try refreshing the page.</p>\n        <p className=\"mt-4\">\n          If the problem persists, please file a ticket{' '}\n          <ExternalLink className=\"arb-hover underline\" href={GET_HELP_LINK}>\n            here\n          </ExternalLink>\n          .\n        </p>\n      </ContentWrapper>\n    )\n  }\n  if (paused) {\n    return (\n      <ContentWrapper className=\"space-y-4\">\n        <p>There are no recent {tabType} transactions.</p>\n        <LoadMoreButton onClick={resume} />\n      </ContentWrapper>\n    )\n  }\n  return <ContentWrapper>Looks like no transactions here yet.</ContentWrapper>\n}\n","import {\n  ButtonHTMLAttributes,\n  PropsWithChildren,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'react'\nimport { twMerge } from 'tailwind-merge'\nimport { AutoSizer, Column, Table } from 'react-virtualized'\nimport {\n  ExclamationCircleIcon,\n  PlusCircleIcon\n} from '@heroicons/react/24/outline'\nimport dayjs from 'dayjs'\n\nimport {\n  getStandardizedDate,\n  getStandardizedTime,\n  isTokenDeposit\n} from '../../state/app/utils'\nimport {\n  ChainPair,\n  UseTransactionHistoryResult\n} from '../../hooks/useTransactionHistory'\nimport { Tooltip } from '../common/Tooltip'\nimport { getNetworkName } from '../../util/networks'\nimport { isTxPending } from './helpers'\nimport { PendingDepositWarning } from './PendingDepositWarning'\nimport { TransactionsTableRow } from './TransactionsTableRow'\nimport { EmptyTransactionHistory } from './EmptyTransactionHistory'\nimport { Address } from '../../util/AddressUtils'\n\nexport const ContentWrapper = ({\n  children,\n  className = ''\n}: PropsWithChildren<{ className?: string }>) => {\n  return (\n    <div\n      className={twMerge(\n        'w-full flex-col items-center rounded bg-[#191919] p-4 text-center text-xs text-white',\n        className\n      )}\n    >\n      {children}\n    </div>\n  )\n}\n\nexport const TransactionDateTime = ({\n  standardizedDate\n}: {\n  standardizedDate: number | null\n}) => {\n  // Standardized formatted date-time component used across transaction rows\n\n  if (!standardizedDate) return <span className=\"whitespace-nowrap\">n/a</span>\n  return (\n    <div className=\"flex flex-nowrap gap-1\">\n      <span className=\"whitespace-nowrap\">\n        {getStandardizedDate(standardizedDate)}\n      </span>\n      <span className=\"whitespace-nowrap opacity-60\">\n        {getStandardizedTime(standardizedDate)}\n      </span>\n    </div>\n  )\n}\n\nconst TableHeader = ({\n  children,\n  className\n}: PropsWithChildren<{ className?: string }>) => (\n  <div\n    className={twMerge(\n      'h-full w-full pb-2 pt-4 text-left text-sm font-normal',\n      className\n    )}\n  >\n    {children}\n  </div>\n)\n\nexport const LoadMoreButton = (\n  props: ButtonHTMLAttributes<HTMLButtonElement>\n) => {\n  return (\n    <button {...props} className=\"arb-hover text-xs\">\n      <div className=\"flex space-x-1 rounded border border-white px-2 py-1\">\n        <span>Load more</span>\n        <PlusCircleIcon width={16} />\n      </div>\n    </button>\n  )\n}\n\nexport const HistoryLoader = () => {\n  return <span className=\"animate-pulse\">Loading transactions...</span>\n}\n\nconst FailedChainPairsTooltip = ({\n  failedChainPairs\n}: {\n  failedChainPairs: ChainPair[]\n}) => {\n  if (failedChainPairs.length === 0) {\n    return null\n  }\n\n  return (\n    <Tooltip\n      content={\n        <div className=\"flex flex-col space-y-1 text-xs\">\n          <span>\n            We were unable to fetch data for the following chain pairs:\n          </span>\n          <ul className=\"flex list-disc flex-col pl-4\">\n            {failedChainPairs.map(pair => (\n              <li key={`${pair.parentChainId}-${pair.childChainId}`}>\n                <b>{getNetworkName(pair.parentChainId)}</b>\n                {' <> '}\n                <b>{getNetworkName(pair.childChainId)}</b>\n              </li>\n            ))}\n          </ul>\n        </div>\n      }\n    >\n      <ExclamationCircleIcon height={20} className=\"text-error\" />\n    </Tooltip>\n  )\n}\n\ntype TransactionHistoryTableProps = UseTransactionHistoryResult & {\n  address: Address | undefined\n  selectedTabIndex: number\n  oldestTxTimeAgoString: string\n}\n\nexport const TransactionHistoryTable = (\n  props: TransactionHistoryTableProps\n) => {\n  const {\n    transactions,\n    address,\n    loading,\n    completed,\n    error,\n    failedChainPairs,\n    resume,\n    selectedTabIndex,\n    oldestTxTimeAgoString\n  } = props\n\n  const contentAboveTable = useRef<HTMLDivElement>(null)\n\n  const isTxHistoryEmpty = transactions.length === 0\n  const isPendingTab = selectedTabIndex === 0\n\n  const paused = !loading && !completed\n\n  const [tableHeight, setTableHeight] = useState(0)\n\n  const pendingTokenDepositsCount = useMemo(() => {\n    return transactions.filter(tx => isTokenDeposit(tx) && isTxPending(tx))\n      .length\n  }, [transactions])\n\n  const topmostPendingTxId = useMemo(() => {\n    return transactions.filter(isTxPending)[0]?.txId\n  }, [transactions])\n\n  // TODO: look into https://www.npmjs.com/package/react-intersection-observer that could simplify this\n  useEffect(() => {\n    // Calculate table height to be passed to the React Virtualized Table\n    const currentRef = contentAboveTable.current\n    const SIDE_PANEL_HEADER_HEIGHT = 125\n\n    // Adjust the table size whenever the content above it is resized\n    const observer = new ResizeObserver(entries => {\n      if (entries[0]) {\n        const aboveHeight = entries[0].contentRect.height\n        const viewportHeight = window.innerHeight\n        const newTableHeight = Math.max(\n          // we subtract a little padding at the end so that the table doesn't end at the edge of the screen\n          viewportHeight - aboveHeight - SIDE_PANEL_HEADER_HEIGHT - 20,\n          0\n        )\n        setTableHeight(newTableHeight)\n      }\n    })\n\n    if (currentRef) {\n      observer.observe(currentRef)\n    }\n\n    return () => {\n      if (currentRef) {\n        observer.unobserve(currentRef)\n      }\n    }\n  }, [transactions.length])\n\n  if (isTxHistoryEmpty) {\n    return (\n      <EmptyTransactionHistory\n        loading={loading}\n        isError={typeof error !== 'undefined'}\n        paused={paused}\n        resume={resume}\n        tabType={isPendingTab ? 'pending' : 'settled'}\n      />\n    )\n  }\n\n  return (\n    <ContentWrapper className=\"h-full overflow-x-auto p-0 text-left\">\n      <div\n        className={twMerge(\n          'w-[960px] rounded-tr-lg px-4 pt-4',\n          isPendingTab ? '' : 'rounded-tl-lg'\n        )}\n        ref={contentAboveTable}\n      >\n        {loading ? (\n          <div className=\"flex h-[28px] items-center space-x-2\">\n            <FailedChainPairsTooltip failedChainPairs={failedChainPairs} />\n            <HistoryLoader />\n          </div>\n        ) : (\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center justify-start space-x-1\">\n              <FailedChainPairsTooltip failedChainPairs={failedChainPairs} />\n              <span className=\"text-xs\">\n                Showing {transactions.length}{' '}\n                {isPendingTab ? 'pending' : 'settled'} transactions made in{' '}\n                {oldestTxTimeAgoString}.\n              </span>\n            </div>\n\n            {!completed && <LoadMoreButton onClick={resume} />}\n          </div>\n        )}\n        <div>{pendingTokenDepositsCount > 0 && <PendingDepositWarning />}</div>\n      </div>\n\n      <AutoSizer disableHeight>\n        {() => (\n          <Table\n            width={960}\n            height={tableHeight}\n            rowHeight={60}\n            rowCount={transactions.length}\n            headerHeight={52}\n            headerRowRenderer={props => (\n              <div className=\"mx-4 flex w-[920px] border-b border-white/30 text-white\">\n                {props.columns}\n              </div>\n            )}\n            className=\"table-auto last:border-b-0\"\n            rowGetter={({ index }) => transactions[index]}\n            rowRenderer={({ index, style }) => {\n              const tx = transactions[index]\n\n              if (!tx) {\n                return null\n              }\n\n              const isLastRow = index + 1 === transactions.length\n              const key = `${tx.parentChainId}-${tx.childChainId}-${tx.txId}`\n              const secondsPassed = dayjs().diff(dayjs(tx.createdAt), 'second')\n\n              // only blink the topmost tx, in case many txs are queued in a short amount of time\n              const isTopmostPendingTx =\n                topmostPendingTxId && topmostPendingTxId === tx.txId\n\n              return (\n                <div key={key} style={style}>\n                  <TransactionsTableRow\n                    tx={tx}\n                    className={twMerge(\n                      isLastRow && 'border-b-0',\n                      isTopmostPendingTx &&\n                        secondsPassed <= 30 &&\n                        'animate-blink bg-highlight'\n                    )}\n                    address={address}\n                  />\n                </div>\n              )\n            }}\n          >\n            <Column\n              label=\"time\"\n              dataKey=\"time\"\n              width={139}\n              headerRenderer={() => <TableHeader>TIME</TableHeader>}\n            />\n            <Column\n              label=\"token\"\n              dataKey=\"token\"\n              width={141}\n              headerRenderer={() => <TableHeader>TOKEN</TableHeader>}\n            />\n            <Column\n              label=\"from\"\n              dataKey=\"from\"\n              width={142}\n              headerRenderer={() => <TableHeader>FROM</TableHeader>}\n            />\n            <Column\n              label=\"to\"\n              dataKey=\"to\"\n              width={137}\n              headerRenderer={() => <TableHeader>TO</TableHeader>}\n            />\n            <Column\n              label=\"status\"\n              dataKey=\"status\"\n              width={100}\n              headerRenderer={() => <TableHeader>STATUS</TableHeader>}\n            />\n          </Table>\n        )}\n      </AutoSizer>\n    </ContentWrapper>\n  )\n}\n","export default {\"src\":\"/_next/static/media/CctpLogoColor.79c70e47.svg\",\"height\":20,\"width\":20,\"blurWidth\":0,\"blurHeight\":0};","export default {\"src\":\"/_next/static/media/ArbitrumLogo.db93275c.svg\",\"height\":2500,\"width\":2500,\"blurWidth\":0,\"blurHeight\":0};","import { useMemo } from 'react'\nimport { Address } from 'wagmi'\nimport { twMerge } from 'tailwind-merge'\nimport {\n  ArrowTopRightOnSquareIcon,\n  CheckCircleIcon\n} from '@heroicons/react/24/outline'\nimport { TeleporterMergedTransaction } from '../../state/app/state'\nimport { getExplorerUrl, getNetworkName, isNetwork } from '../../util/networks'\nimport {\n  firstRetryableLegRequiresRedeem,\n  getChainIdForRedeemingRetryable,\n  l1L2RetryableRequiresRedeem,\n  l2ForwarderRetryableRequiresRedeem,\n  secondRetryableLegForTeleportRequiresRedeem\n} from '../../util/RetryableUtils'\nimport { TransactionsTableRowAction } from './TransactionsTableRowAction'\nimport { ExternalLink } from '../common/ExternalLink'\nimport {\n  Step,\n  TransactionFailedOnNetwork\n} from './TransactionsTableDetailsSteps'\nimport { TransferCountdown } from '../common/TransferCountdown'\nimport {\n  getOrbitDepositDuration,\n  getStandardDepositDuration,\n  minutesToHumanReadableTime\n} from '../../hooks/useTransferDuration'\n\nconst TeleportMiddleStepFailureExplanationNote = ({\n  tx\n}: {\n  tx: TeleporterMergedTransaction\n}) => {\n  return (\n    <div className=\"mt-2\">\n      <div\n        className={twMerge(\n          'flex items-center gap-2',\n          l1L2RetryableRequiresRedeem(tx) && 'text-white/60'\n        )}\n      >\n        {!l1L2RetryableRequiresRedeem(tx) ? (\n          <CheckCircleIcon\n            height={15}\n            className=\"h-[15px] w-[15px] shrink-0 text-green-400\"\n          />\n        ) : (\n          <div className=\"m-[1px] h-[13px] w-[13px] shrink-0 rounded-full border border-white/60\" />\n        )}\n        Funds deposited to {getNetworkName(getChainIdForRedeemingRetryable(tx))}\n        .{' '}\n      </div>\n      <div\n        className={twMerge(\n          'mt-1 flex items-center gap-2',\n          l2ForwarderRetryableRequiresRedeem(tx) && 'text-white/60'\n        )}\n      >\n        {!l2ForwarderRetryableRequiresRedeem(tx) ? (\n          <CheckCircleIcon\n            height={15}\n            className=\"h-[15px] w-[15px] shrink-0 text-green-400\"\n          />\n        ) : (\n          <div className=\"m-[1px] h-[13px] w-[13px] shrink-0 rounded-full border border-white/60\" />\n        )}\n        Funds sent to {getNetworkName(tx.destinationChainId)}.\n      </div>\n    </div>\n  )\n}\n\nexport const TransactionsTableDetailsTeleporterSteps = ({\n  tx,\n  address\n}: {\n  tx: TeleporterMergedTransaction\n  address: Address | undefined\n}) => {\n  const l2TxID = tx.parentToChildMsgData?.childTxId\n  const isFirstRetryableLegSucceeded =\n    typeof l2TxID !== 'undefined' &&\n    typeof tx.l2ToL3MsgData?.l2ForwarderRetryableTxID === 'undefined'\n  const l2ChainId = tx.l2ToL3MsgData?.l2ChainId\n  const isFirstRetryableLegFailed = firstRetryableLegRequiresRedeem(tx)\n  const l2ForwarderRequiresRedeem = l2ForwarderRetryableRequiresRedeem(tx)\n\n  const { isTestnet } = isNetwork(tx.sourceChainId)\n\n  const isFirstRetryableLegResolved =\n    isFirstRetryableLegSucceeded || isFirstRetryableLegFailed\n\n  const isSecondRetryableLegResolved =\n    secondRetryableLegForTeleportRequiresRedeem(tx) ||\n    typeof tx.l2ToL3MsgData?.l3TxID !== 'undefined'\n\n  const firstRetryableRedeemButton = useMemo(\n    () => (\n      <TransactionsTableRowAction\n        type=\"deposits\"\n        isError={true}\n        tx={tx}\n        address={address}\n      />\n    ),\n    [tx, address]\n  )\n\n  const firstTransactionExternalLink = useMemo(\n    () =>\n      l2TxID &&\n      l2ChainId && (\n        <ExternalLink href={`${getExplorerUrl(l2ChainId)}/tx/${l2TxID}`}>\n          <ArrowTopRightOnSquareIcon height={12} />\n        </ExternalLink>\n      ),\n    [l2TxID, l2ChainId]\n  )\n\n  const firstTransactionActionItem = isFirstRetryableLegFailed\n    ? firstRetryableRedeemButton\n    : firstTransactionExternalLink\n\n  const firstRetryableWaitingDuration = getStandardDepositDuration(isTestnet)\n  const secondRetryableWaitingDuration = getOrbitDepositDuration(isTestnet)\n\n  return (\n    <>\n      {/* show waiting time for first leg of teleporter tx */}\n      <Step\n        pending={!isFirstRetryableLegResolved}\n        done={isFirstRetryableLegResolved}\n        text={`Wait ~${minutesToHumanReadableTime(\n          firstRetryableWaitingDuration\n        )}`}\n        endItem={\n          !isFirstRetryableLegResolved && (\n            <TransferCountdown\n              tx={tx}\n              firstLegOnly={true}\n              textAfterTime=\"remaining\"\n            />\n          )\n        }\n      />\n\n      {/* show mid transaction step for teleport tx */}\n      <Step\n        done={isFirstRetryableLegSucceeded}\n        failure={isFirstRetryableLegFailed}\n        text={\n          <FirstRetryableLegLabel\n            tx={tx}\n            isFirstRetryableLegFailed={isFirstRetryableLegFailed}\n            l2ForwarderRequiresRedeem={l2ForwarderRequiresRedeem}\n            l2ChainId={l2ChainId}\n          />\n        }\n        endItem={firstTransactionActionItem}\n        extendHeight={l2ForwarderRequiresRedeem} // when we show the explanatory note, we need more height for this step\n      />\n\n      {/* Show second leg of teleport transfer waiting time */}\n      <Step\n        pending={isFirstRetryableLegSucceeded && !isSecondRetryableLegResolved}\n        done={isSecondRetryableLegResolved}\n        text={`Wait ~${minutesToHumanReadableTime(\n          secondRetryableWaitingDuration\n        )}`}\n      />\n    </>\n  )\n}\n\nconst FirstRetryableLegLabel = ({\n  tx,\n  isFirstRetryableLegFailed,\n  l2ForwarderRequiresRedeem,\n  l2ChainId\n}: {\n  tx: TeleporterMergedTransaction\n  isFirstRetryableLegFailed: boolean\n  l2ForwarderRequiresRedeem: boolean\n  l2ChainId?: number\n}) => {\n  if (isFirstRetryableLegFailed) {\n    const l2NetworkName = getNetworkName(getChainIdForRedeemingRetryable(tx))\n\n    return (\n      <div>\n        <TransactionFailedOnNetwork networkName={l2NetworkName} />\n\n        {/* if we detect we will have 2 redemptions in the first leg of teleport, explain it to users */}\n        {l2ForwarderRequiresRedeem && (\n          <TeleportMiddleStepFailureExplanationNote tx={tx} />\n        )}\n      </div>\n    )\n  }\n\n  if (l2ChainId) {\n    return `Funds arrived on ${getNetworkName(l2ChainId)}`\n  }\n\n  // till the time we don't have information for l2ChainId\n  return `Funds arrived on intermediate chain`\n}\n","import { ReactNode, useMemo } from 'react'\nimport { twMerge } from 'tailwind-merge'\nimport {\n  ArrowTopRightOnSquareIcon,\n  CheckCircleIcon,\n  XCircleIcon\n} from '@heroicons/react/24/outline'\n\nimport { DepositStatus, MergedTransaction } from '../../state/app/state'\nimport { getExplorerUrl, getNetworkName } from '../../util/networks'\nimport {\n  getDestinationNetworkTxId,\n  isTxClaimable,\n  isTxCompleted,\n  isTxExpired,\n  isTxFailed,\n  isTxPending\n} from './helpers'\nimport { TransactionsTableRowAction } from './TransactionsTableRowAction'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { TransferCountdown } from '../common/TransferCountdown'\nimport { isDepositReadyToRedeem } from '../../state/app/utils'\nimport { Address } from '../../util/AddressUtils'\nimport { isTeleport } from '@/token-bridge-sdk/teleport'\nimport {\n  firstRetryableLegRequiresRedeem,\n  secondRetryableLegForTeleportRequiresRedeem\n} from '../../util/RetryableUtils'\nimport { TransactionsTableDetailsTeleporterSteps } from './TransactionsTableDetailsTeleporterSteps'\nimport {\n  minutesToHumanReadableTime,\n  useTransferDuration\n} from '../../hooks/useTransferDuration'\nimport { isTeleporterTransaction } from '../../hooks/useTransactions'\n\nfunction needsToClaimTransfer(tx: MergedTransaction) {\n  return tx.isCctp || tx.isWithdrawal\n}\n\nexport const Step = ({\n  done = false,\n  claimable = false,\n  pending = false,\n  failure = false,\n  text,\n  endItem = null,\n  extendHeight = false\n}: {\n  done?: boolean\n  claimable?: boolean\n  pending?: boolean\n  failure?: boolean\n  text: React.ReactNode\n  endItem?: ReactNode\n  extendHeight?: boolean\n}) => {\n  // defaults to a step that hasn't been started yet\n  let borderColorClassName = 'border-white/50'\n  let iconClassName = 'text-white/50 shrink-0'\n  let textColorClassName = 'text-white/50'\n\n  if (done || claimable) {\n    borderColorClassName = 'border-green-400'\n    iconClassName = 'text-green-400 shrink-0'\n    textColorClassName = 'text-white'\n  }\n\n  if (pending) {\n    borderColorClassName = 'border-yellow-400'\n    iconClassName = 'text-yellow-400 shrink-0'\n    textColorClassName = 'text-white'\n  }\n\n  if (failure) {\n    borderColorClassName = 'border-red-400'\n    iconClassName = 'text-red-400 shrink-0'\n    textColorClassName = 'text-white'\n  }\n\n  return (\n    <div\n      className={twMerge(\n        'my-3 flex h-3 items-center justify-between space-x-2',\n        pending && 'animate-pulse',\n        extendHeight && 'h-auto items-start'\n      )}\n    >\n      <div\n        className={twMerge(\n          'flex items-center space-x-3',\n          extendHeight && 'items-start'\n        )}\n      >\n        {done && <CheckCircleIcon className={iconClassName} height={18} />}\n        {failure && <XCircleIcon className={iconClassName} height={18} />}\n        {!done && !failure && (\n          <div\n            className={twMerge(\n              'ml-[2px] h-[15px] w-[15px] shrink-0 rounded-full border',\n              borderColorClassName\n            )}\n          />\n        )}\n        <span className={textColorClassName}>{text}</span>\n      </div>\n      {endItem}\n    </div>\n  )\n}\n\nconst LastStepEndItem = ({\n  tx,\n  address\n}: {\n  tx: MergedTransaction\n  address: Address | undefined\n}) => {\n  const destinationNetworkTxId = getDestinationNetworkTxId(tx)\n  const destinationChainId = tx.isWithdrawal\n    ? tx.parentChainId\n    : tx.childChainId\n  const isTeleportTx = isTeleport(tx) && isTeleporterTransaction(tx)\n\n  if (destinationNetworkTxId) {\n    return (\n      <ExternalLink\n        href={`${getExplorerUrl(\n          destinationChainId\n        )}/tx/${getDestinationNetworkTxId(tx)}`}\n      >\n        <ArrowTopRightOnSquareIcon height={12} />\n      </ExternalLink>\n    )\n  }\n\n  if (\n    (!isTeleportTx && isDepositReadyToRedeem(tx)) ||\n    (isTeleportTx && secondRetryableLegForTeleportRequiresRedeem(tx))\n  ) {\n    return (\n      <TransactionsTableRowAction\n        type=\"deposits\"\n        isError={true}\n        tx={tx}\n        address={address}\n      />\n    )\n  }\n\n  return null\n}\n\nexport const TransactionFailedOnNetwork = ({\n  networkName\n}: {\n  networkName: string\n}) => (\n  <div>\n    Transaction failed on {networkName}. You have 7 days to try again. After\n    that, your funds will be{' '}\n    <span className=\"font-bold text-red-400\">lost forever</span>.\n  </div>\n)\n\nexport const TransactionsTableDetailsSteps = ({\n  tx,\n  address\n}: {\n  tx: MergedTransaction\n  address: Address | undefined\n}) => {\n  const { approximateDurationInMinutes } = useTransferDuration(tx)\n\n  const { sourceChainId } = tx\n\n  const sourceNetworkName = getNetworkName(sourceChainId)\n\n  const isSourceChainDepositFailure =\n    typeof tx.depositStatus !== 'undefined' &&\n    [DepositStatus.CREATION_FAILED, DepositStatus.L1_FAILURE].includes(\n      tx.depositStatus\n    )\n\n  const isTeleportTx = isTeleport(tx) && isTeleporterTransaction(tx)\n\n  const isDestinationChainFailure = isTeleportTx\n    ? secondRetryableLegForTeleportRequiresRedeem(tx)\n    : !isSourceChainDepositFailure && isTxFailed(tx)\n\n  const destinationChainTxText = useMemo(() => {\n    const networkName = getNetworkName(tx.destinationChainId)\n    const fundsArrivedText = `Funds arrived on ${networkName}`\n\n    if (isTxExpired(tx)) {\n      return `Transaction expired on ${networkName}`\n    }\n    if (isTeleportTx && firstRetryableLegRequiresRedeem(tx)) {\n      return fundsArrivedText\n    }\n\n    if (isDepositReadyToRedeem(tx)) {\n      return <TransactionFailedOnNetwork networkName={networkName} />\n    }\n    if (isDestinationChainFailure) {\n      return `Transaction failed on ${networkName}.`\n    }\n    return fundsArrivedText\n  }, [tx, isDestinationChainFailure, isTeleportTx])\n\n  return (\n    <div className=\"flex flex-col text-xs\">\n      {/* First step when transfer is initiated */}\n      <Step\n        done={!isSourceChainDepositFailure}\n        failure={isSourceChainDepositFailure}\n        text={\n          isSourceChainDepositFailure\n            ? `Transaction failed on ${sourceNetworkName}`\n            : `Transaction initiated on ${sourceNetworkName}`\n        }\n        endItem={\n          <ExternalLink href={`${getExplorerUrl(sourceChainId)}/tx/${tx.txId}`}>\n            <ArrowTopRightOnSquareIcon height={12} />\n          </ExternalLink>\n        }\n      />\n\n      {/* Pending transfer showing the remaining time */}\n      {!isTeleport(tx) && (\n        <Step\n          pending={isTxPending(tx)}\n          done={!isTxPending(tx) && !isSourceChainDepositFailure}\n          text={`Wait ~${minutesToHumanReadableTime(\n            approximateDurationInMinutes\n          )}`}\n          endItem={\n            isTxPending(tx) && (\n              <TransferCountdown tx={tx} textAfterTime=\"remaining\" />\n            )\n          }\n        />\n      )}\n\n      {isTeleport(tx) && isTeleporterTransaction(tx) && (\n        <TransactionsTableDetailsTeleporterSteps tx={tx} address={address} />\n      )}\n\n      {/* If claiming is required we show this step */}\n      {needsToClaimTransfer(tx) && (\n        <Step\n          done={isTxCompleted(tx)}\n          claimable={isTxClaimable(tx)}\n          text={`Claim ${tx.isWithdrawal ? 'withdrawal' : 'deposit'}`}\n          endItem={\n            isTxClaimable(tx) && (\n              <TransactionsTableRowAction\n                type={tx.isWithdrawal ? 'withdrawals' : 'deposits'}\n                isError={false}\n                tx={tx}\n                address={address}\n              />\n            )\n          }\n        />\n      )}\n\n      {/* The final step, showing the destination chain */}\n      <Step\n        done={isTxCompleted(tx)}\n        failure={isTxExpired(tx) || isDestinationChainFailure}\n        text={destinationChainTxText}\n        endItem={<LastStepEndItem tx={tx} address={address} />}\n      />\n    </div>\n  )\n}\n","import { XMarkIcon } from '@heroicons/react/24/outline'\nimport { ArrowRightIcon } from '@heroicons/react/24/solid'\nimport { Fragment, PropsWithChildren, useMemo } from 'react'\nimport { Dialog, Transition } from '@headlessui/react'\nimport Image from 'next/image'\nimport dayjs from 'dayjs'\nimport CctpLogoColor from '@/images/CctpLogoColor.svg'\nimport ArbitrumLogo from '@/images/ArbitrumLogo.svg'\n\nimport { useTxDetailsStore } from './TransactionHistory'\nimport { getExplorerUrl, getNetworkName, isNetwork } from '../../util/networks'\nimport { NetworkImage } from '../common/NetworkImage'\nimport { TransactionsTableTokenImage } from './TransactionsTableTokenImage'\nimport { formatAmount, formatUSD } from '../../util/NumberUtils'\nimport { useETHPrice } from '../../hooks/useETHPrice'\nimport { ExternalLink } from '../common/ExternalLink'\nimport { TransactionsTableDetailsSteps } from './TransactionsTableDetailsSteps'\nimport { Button } from '../common/Button'\nimport { GET_HELP_LINK, ether } from '../../constants'\nimport { useTransactionHistory } from '../../hooks/useTransactionHistory'\nimport { shortenAddress } from '../../util/CommonUtils'\nimport { isTxCompleted } from './helpers'\nimport { Address } from '../../util/AddressUtils'\nimport { sanitizeTokenSymbol } from '../../util/TokenUtils'\n\nconst DetailsBox = ({\n  children,\n  header\n}: PropsWithChildren<{ header?: string }>) => {\n  return (\n    <div className=\"my-2 flex w-full flex-col rounded border border-white/30 bg-black p-3 font-light text-white\">\n      {header && (\n        <h4 className=\"mb-2 text-xs uppercase text-white/60\">{header}</h4>\n      )}\n      {children}\n    </div>\n  )\n}\n\nexport const TransactionsTableDetails = ({\n  address\n}: {\n  address: Address | undefined\n}) => {\n  const { tx: txFromStore, isOpen, close, reset } = useTxDetailsStore()\n  const { ethToUSD } = useETHPrice()\n  const { transactions } = useTransactionHistory(address)\n\n  const tx = useMemo(() => {\n    if (!txFromStore) {\n      return null\n    }\n\n    // we need to get tx from the hook to make sure we have up to date details, e.g. status\n    return transactions.find(\n      t =>\n        t.parentChainId === txFromStore.parentChainId &&\n        t.childChainId === txFromStore.childChainId &&\n        t.txId === txFromStore.txId\n    )\n  }, [transactions, txFromStore])\n\n  if (!tx || !address) {\n    return null\n  }\n\n  const tokenSymbol = sanitizeTokenSymbol(tx.asset, {\n    erc20L1Address: tx.tokenAddress,\n    chainId: tx.sourceChainId\n  })\n\n  const showPriceInUsd =\n    !isNetwork(tx.parentChainId).isTestnet && tx.asset === ether.symbol\n\n  const isDifferentSourceAddress =\n    address.toLowerCase() !== tx.sender?.toLowerCase()\n  const isDifferentDestinationAddress =\n    address.toLowerCase() !== tx.destination?.toLowerCase()\n\n  const { sourceChainId, destinationChainId } = tx\n\n  const sourceNetworkName = getNetworkName(sourceChainId)\n  const destinationNetworkName = getNetworkName(destinationChainId)\n\n  return (\n    <Transition show={isOpen} as={Fragment}>\n      <Dialog\n        as=\"div\"\n        open={typeof tx !== 'undefined'}\n        className=\"relative z-40\"\n        onClose={close}\n      >\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-200\"\n          enterFrom=\"opacity-0\"\n          enterTo=\"opacity-70\"\n          leave=\"ease-in duration-200\"\n          leaveFrom=\"opacity-70\"\n          leaveTo=\"opacity-0\"\n        >\n          <div className=\"fixed inset-0 bg-black\" aria-hidden=\"true\" />\n        </Transition.Child>\n\n        <div className=\"fixed inset-0 overflow-y-auto\">\n          <div className=\"flex min-h-full items-center justify-center text-center sm:p-4\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-200\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n              afterLeave={reset}\n            >\n              <Dialog.Panel className=\"h-screen w-screen transform overflow-hidden rounded border border-white/10 bg-dark p-4 text-left align-middle shadow shadow-white/10 transition-all sm:h-auto sm:w-full sm:max-w-[488px]\">\n                <Dialog.Title\n                  className=\"mb-4 flex items-center justify-between text-lg font-light text-white\"\n                  as=\"h3\"\n                >\n                  Transaction details\n                  <button\n                    onClick={close}\n                    className=\"arb-hover\"\n                    aria-label=\"Close transaction details popup\"\n                  >\n                    <XMarkIcon height={20} />\n                  </button>\n                </Dialog.Title>\n\n                <DetailsBox>\n                  <div className=\"flex flex-col space-y-3\">\n                    <div className=\"flex justify-between text-xs text-white\">\n                      <span>{dayjs(tx.createdAt).format('MMMM DD, YYYY')}</span>\n                      <span>{dayjs(tx.createdAt).format('h:mma')}</span>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <TransactionsTableTokenImage tx={tx} />\n                      <span>\n                        {formatAmount(Number(tx.value), {\n                          symbol: tokenSymbol\n                        })}\n                      </span>\n                      {showPriceInUsd && (\n                        <span className=\"text-white/70\">\n                          {formatUSD(ethToUSD(Number(tx.value)))}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                </DetailsBox>\n\n                <DetailsBox header=\"Network\">\n                  <div className=\"flex space-x-4\">\n                    <div className=\"flex items-center space-x-2\">\n                      <NetworkImage\n                        chainId={sourceChainId}\n                        className=\"h-5 w-5\"\n                      />\n                      <span>{sourceNetworkName}</span>\n                    </div>\n                    <ArrowRightIcon width={16} />\n                    <div className=\"flex space-x-2\">\n                      <NetworkImage\n                        chainId={destinationChainId}\n                        className=\"h-5 w-5\"\n                      />\n                      <span>{destinationNetworkName}</span>\n                    </div>\n                  </div>\n                </DetailsBox>\n\n                <DetailsBox header=\"Bridge\">\n                  <div className=\"flex space-x-2\">\n                    <Image\n                      alt=\"Bridge logo\"\n                      src={tx.isCctp ? CctpLogoColor : ArbitrumLogo}\n                      width={16}\n                      height={16}\n                    />\n\n                    {tx.isCctp ? (\n                      <span>\n                        CCTP{' '}\n                        <span className=\"text-white/70\">\n                          (Cross-Chain Transfer Protocol)\n                        </span>\n                      </span>\n                    ) : (\n                      <span>Arbitrum&apos;s native bridge</span>\n                    )}\n                  </div>\n                </DetailsBox>\n\n                {(isDifferentSourceAddress ||\n                  isDifferentDestinationAddress) && (\n                  <DetailsBox header=\"Custom Address\">\n                    {isDifferentSourceAddress && (\n                      <span className=\"text-xs\">\n                        Funds received from{' '}\n                        <ExternalLink\n                          className=\"arb-hover underline\"\n                          href={`${getExplorerUrl(sourceChainId)}/address/${\n                            tx.sender\n                          }`}\n                          aria-label={`Custom address: ${shortenAddress(\n                            String(tx.sender)\n                          )}`}\n                        >\n                          {shortenAddress(String(tx.sender))}\n                        </ExternalLink>\n                      </span>\n                    )}\n                    {isDifferentDestinationAddress && (\n                      <span className=\"text-xs\">\n                        Funds sent to{' '}\n                        <ExternalLink\n                          className=\"arb-hover underline\"\n                          href={`${getExplorerUrl(\n                            destinationChainId\n                          )}/address/${tx.destination}`}\n                          aria-label={`Custom address: ${shortenAddress(\n                            String(tx.destination)\n                          )}`}\n                        >\n                          {shortenAddress(String(tx.destination))}\n                        </ExternalLink>\n                      </span>\n                    )}\n                  </DetailsBox>\n                )}\n\n                <DetailsBox>\n                  <TransactionsTableDetailsSteps tx={tx} address={address} />\n                </DetailsBox>\n\n                {!isTxCompleted(tx) && (\n                  <div className=\"flex justify-end\">\n                    <ExternalLink href={GET_HELP_LINK}>\n                      <Button\n                        variant=\"secondary\"\n                        className=\"border-white/30 text-xs\"\n                      >\n                        Get help\n                      </Button>\n                    </ExternalLink>\n                  </div>\n                )}\n              </Dialog.Panel>\n            </Transition.Child>\n          </div>\n        </div>\n      </Dialog>\n    </Transition>\n  )\n}\n","import dayjs from 'dayjs'\nimport { useMemo } from 'react'\nimport { Tab } from '@headlessui/react'\nimport { create } from 'zustand'\n\nimport { UseTransactionHistoryResult } from '../../hooks/useTransactionHistory'\nimport { TransactionHistoryTable } from './TransactionHistoryTable'\nimport {\n  isTxClaimable,\n  isTxCompleted,\n  isTxExpired,\n  isTxFailed,\n  isTxPending\n} from './helpers'\nimport { MergedTransaction } from '../../state/app/state'\nimport { TabButton } from '../common/Tab'\nimport { TransactionsTableDetails } from './TransactionsTableDetails'\nimport { Address } from '../../util/AddressUtils'\n\nconst tabClasses =\n  'text-white px-3 mr-2 border-b-2 ui-selected:border-white ui-not-selected:border-transparent ui-not-selected:text-white/80 arb-hover'\n\ntype TxDetailsStore = {\n  tx: MergedTransaction | null\n  isOpen: boolean\n  open: (tx: MergedTransaction) => void\n  close: () => void\n  reset: () => void\n}\n\nexport const useTxDetailsStore = create<TxDetailsStore>(set => ({\n  tx: null,\n  isOpen: false,\n  open: (tx: MergedTransaction) => {\n    set(() => ({\n      tx\n    }))\n    // this is so that we can trigger transition when opening the panel\n    setTimeout(() => {\n      set(() => ({\n        isOpen: true\n      }))\n    }, 0)\n  },\n  close: () => set({ isOpen: false }),\n  reset: () => set({ tx: null })\n}))\n\nexport const TransactionHistory = ({\n  props\n}: {\n  props: UseTransactionHistoryResult & { address: Address | undefined }\n}) => {\n  const { transactions, address } = props\n\n  const oldestTxTimeAgoString = useMemo(() => {\n    return dayjs(transactions[transactions.length - 1]?.createdAt).toNow(true)\n  }, [transactions])\n\n  const groupedTransactions = useMemo(\n    () =>\n      transactions.reduce(\n        (acc, tx) => {\n          if (isTxCompleted(tx) || isTxExpired(tx)) {\n            acc.settled.push(tx)\n          }\n          if (isTxPending(tx)) {\n            acc.pending.push(tx)\n          }\n          if (isTxClaimable(tx)) {\n            acc.claimable.push(tx)\n          }\n          if (isTxFailed(tx)) {\n            acc.failed.push(tx)\n          }\n          return acc\n        },\n        {\n          settled: [] as MergedTransaction[],\n          pending: [] as MergedTransaction[],\n          claimable: [] as MergedTransaction[],\n          failed: [] as MergedTransaction[]\n        }\n      ),\n    [transactions]\n  )\n\n  const pendingTransactions = [\n    ...groupedTransactions.failed,\n    ...groupedTransactions.pending,\n    ...groupedTransactions.claimable\n  ]\n\n  const settledTransactions = groupedTransactions.settled\n\n  return (\n    <>\n      <Tab.Group key={address} as=\"div\" className=\"h-full overflow-hidden\">\n        <Tab.List className=\"mb-4 flex border-b border-white/30\">\n          <TabButton\n            aria-label=\"show pending transactions\"\n            className={tabClasses}\n          >\n            <span className=\"text-xs md:text-base\">Pending transactions</span>\n          </TabButton>\n          <TabButton\n            aria-label=\"show settled transactions\"\n            className={tabClasses}\n          >\n            <span className=\"text-xs md:text-base\">Settled transactions</span>\n          </TabButton>\n        </Tab.List>\n\n        <Tab.Panels className=\"h-full overflow-hidden\">\n          <Tab.Panel className=\"h-full\">\n            <TransactionHistoryTable\n              {...props}\n              address={address}\n              transactions={pendingTransactions}\n              selectedTabIndex={0}\n              oldestTxTimeAgoString={oldestTxTimeAgoString}\n            />\n          </Tab.Panel>\n          <Tab.Panel className=\"h-full\">\n            <TransactionHistoryTable\n              {...props}\n              address={address}\n              transactions={settledTransactions}\n              selectedTabIndex={1}\n              oldestTxTimeAgoString={oldestTxTimeAgoString}\n            />\n          </Tab.Panel>\n        </Tab.Panels>\n      </Tab.Group>\n      <TransactionsTableDetails address={address} />\n    </>\n  )\n}\n","export default {\"src\":\"/_next/static/media/arrows.e5bc7004.svg\",\"height\":24,\"width\":24,\"blurWidth\":0,\"blurHeight\":0};","/*\n  A small info banner that we show when the user has some pending claim withdrawals OR some retryables to redeem.\n  Format: \"You have [X] deposits to retry and [Y] withdrawals ready to claim. [CTA]\"\n*/\n\nimport { useAccount } from 'wagmi'\nimport { useMemo } from 'react'\nimport {\n  DocumentTextIcon,\n  ExclamationTriangleIcon\n} from '@heroicons/react/24/outline'\nimport { twMerge } from 'tailwind-merge'\nimport Image from 'next/image'\nimport ArrowsIcon from '@/images/arrows.svg'\n\nimport { isDepositReadyToRedeem } from '../../state/app/utils'\nimport { useAppContextActions } from '../App/AppContext'\nimport { useTransactionHistory } from '../../hooks/useTransactionHistory'\nimport { Button } from '../common/Button'\nimport { isTxClaimable, isTxPending } from './helpers'\n\nconst Content = ({\n  numClaimableTransactions,\n  numRetryablesToRedeem,\n  numPendingTransactions\n}: {\n  numClaimableTransactions: number\n  numRetryablesToRedeem: number\n  numPendingTransactions: number\n}) => {\n  const numClaimableTransactionsString = `claim ${numClaimableTransactions} ${\n    numClaimableTransactions > 1 ? 'transactions' : 'transaction'\n  }`\n  const numRetryablesToRedeemString = `retry ${numRetryablesToRedeem} ${\n    numRetryablesToRedeem > 1 ? 'transactions' : 'transaction'\n  }`\n  const numPendingTransactionsString = `${numPendingTransactions} pending ${\n    numPendingTransactions > 1 ? 'transactions' : 'transaction'\n  }`\n\n  if (numClaimableTransactions > 0 && numRetryablesToRedeem > 0) {\n    return (\n      <div className=\"flex space-x-2\">\n        <ExclamationTriangleIcon width={20} />\n        <span>\n          Time sensitive: You must{' '}\n          <span className=\"font-bold\">{numRetryablesToRedeemString}</span> and{' '}\n          <span className=\"font-bold\">{numClaimableTransactionsString}</span>\n        </span>\n      </div>\n    )\n  }\n\n  if (numRetryablesToRedeem > 0) {\n    return (\n      <div className=\"flex space-x-2\">\n        <ExclamationTriangleIcon width={20} />\n        <span>\n          You must{' '}\n          <span className=\"font-bold\">{numRetryablesToRedeemString}</span>\n        </span>\n      </div>\n    )\n  }\n\n  if (numClaimableTransactions > 0) {\n    return (\n      <div className=\"flex space-x-2\">\n        <ExclamationTriangleIcon width={20} />\n        <span>\n          You must{' '}\n          <span className=\"font-bold\">{numClaimableTransactionsString}</span>\n        </span>\n      </div>\n    )\n  }\n\n  if (numPendingTransactions > 0) {\n    return (\n      <div className=\"flex space-x-2\">\n        <Image src={ArrowsIcon} width={20} height={20} alt=\"Transactions\" />\n        <span>\n          You have{' '}\n          <span className=\"font-bold\">{numPendingTransactionsString}</span>\n        </span>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex space-x-2\">\n      <DocumentTextIcon width={20} />\n      <span>See transaction history</span>\n    </div>\n  )\n}\n\nexport const TransactionStatusInfo = () => {\n  const { address } = useAccount()\n  const { openTransactionHistoryPanel } = useAppContextActions()\n  const { transactions } = useTransactionHistory(address)\n\n  const {\n    numClaimableTransactions,\n    numRetryablesToRedeem,\n    numPendingTransactions\n  } = useMemo(() => {\n    return transactions.reduce(\n      (acc, tx) => {\n        // standard bridge withdrawal\n        if (isTxClaimable(tx)) {\n          acc.numClaimableTransactions += 1\n        }\n        // failed retryable\n        if (isDepositReadyToRedeem(tx)) {\n          acc.numRetryablesToRedeem += 1\n        }\n        // all pending\n        if (isTxPending(tx)) {\n          acc.numPendingTransactions += 1\n        }\n        return acc\n      },\n      {\n        numClaimableTransactions: 0,\n        numRetryablesToRedeem: 0,\n        numPendingTransactions: 0\n      }\n    )\n  }, [transactions])\n\n  const buttonClassName = useMemo(() => {\n    if (numRetryablesToRedeem > 0) {\n      return 'bg-red-700'\n    }\n    if (numClaimableTransactions > 0) {\n      return 'bg-lime-dark'\n    }\n    if (numPendingTransactions > 0) {\n      return 'bg-cyan-dark'\n    }\n    return 'bg-gray-1 text-white/70'\n  }, [numClaimableTransactions, numPendingTransactions, numRetryablesToRedeem])\n\n  return (\n    <Button\n      className={twMerge(\n        'mb-3 mt-3 w-full rounded-none border-x-0 border-white/30 p-3 text-left sm:rounded sm:border md:mt-0',\n        buttonClassName\n      )}\n      onClick={openTransactionHistoryPanel}\n      textLeft\n      showArrow\n      truncate={false}\n      variant=\"primary\"\n      aria-label=\"Open Transaction History\"\n    >\n      <Content\n        numClaimableTransactions={numClaimableTransactions}\n        numRetryablesToRedeem={numRetryablesToRedeem}\n        numPendingTransactions={numPendingTransactions}\n      />\n    </Button>\n  )\n}\n","import { useEffect, useMemo } from 'react'\nimport { useAccount } from 'wagmi'\nimport { useLocalStorage } from '@uidotdev/usehooks'\n\nimport { TransferPanel } from '../TransferPanel/TransferPanel'\nimport { SidePanel } from '../common/SidePanel'\nimport { useAppContextActions, useAppContextState } from '../App/AppContext'\nimport { ArbitrumStats, statsLocalStorageKey } from './ArbitrumStats'\nimport { SettingsDialog } from '../common/SettingsDialog'\nimport { TransactionHistory } from '../TransactionHistory/TransactionHistory'\nimport { useTransactionHistory } from '../../hooks/useTransactionHistory'\nimport { isTxPending } from '../TransactionHistory/helpers'\nimport { TransactionStatusInfo } from '../TransactionHistory/TransactionStatusInfo'\n\nfunction TransactionHistorySidePanel() {\n  const { closeTransactionHistoryPanel } = useAppContextActions()\n  const {\n    layout: { isTransactionHistoryPanelVisible }\n  } = useAppContextState()\n  const { address } = useAccount()\n\n  const transactionHistoryProps = useTransactionHistory(address, {\n    runFetcher: true\n  })\n\n  const { transactions, updatePendingTransaction } = transactionHistoryProps\n\n  const pendingTransactions = useMemo(() => {\n    return transactions.filter(isTxPending)\n  }, [transactions])\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      pendingTransactions.forEach(updatePendingTransaction)\n    }, 10_000)\n\n    return () => clearInterval(interval)\n  }, [pendingTransactions, updatePendingTransaction])\n\n  return (\n    <SidePanel\n      isOpen={isTransactionHistoryPanelVisible}\n      onClose={closeTransactionHistoryPanel}\n      scrollable={false}\n      panelClassNameOverrides=\"pb-8\"\n    >\n      <TransactionHistory props={{ ...transactionHistoryProps, address }} />\n    </SidePanel>\n  )\n}\n\nexport function MainContent() {\n  const [isArbitrumStatsVisible] =\n    useLocalStorage<boolean>(statsLocalStorageKey)\n\n  return (\n    <>\n      <div className=\"main-panel mx-auto flex w-full flex-col sm:max-w-[600px] sm:pb-12 sm:pt-6\">\n        <TransactionStatusInfo />\n\n        <TransferPanel />\n      </div>\n\n      <TransactionHistorySidePanel />\n\n      {/* Settings panel */}\n      <SettingsDialog />\n\n      {/* Toggle-able Stats for nerds */}\n      {isArbitrumStatsVisible && <ArbitrumStats />}\n    </>\n  )\n}\n","import { useEffect } from 'react'\nimport {\n  useArbTokenBridge,\n  TokenBridgeParams\n} from '../../hooks/useArbTokenBridge'\n\nimport { useActions } from '../../state'\n\n// Syncs the arbTokenBridge data with the global store, so we dont have to drill with props but use store hooks to get data\nexport function ArbTokenBridgeStoreSync({\n  tokenBridgeParams\n}: {\n  tokenBridgeParams: TokenBridgeParams\n}): JSX.Element {\n  const actions = useActions()\n  const arbTokenBridge = useArbTokenBridge(tokenBridgeParams)\n\n  useEffect(() => {\n    actions.app.setArbTokenBridge(arbTokenBridge)\n  }, [arbTokenBridge])\n\n  return <></>\n}\n","import { useEffect } from 'react'\nimport { useLatest } from 'react-use'\nimport { useAccount } from 'wagmi'\n\nimport { useAppState } from '../../state'\nimport { useUpdateUSDCBalances } from '../../hooks/CCTP/useUpdateUSDCBalances'\n\n// Updates all balances periodically\nconst BalanceUpdater = (): JSX.Element => {\n  const {\n    app: { arbTokenBridge, selectedToken }\n  } = useAppState()\n  const { address: walletAddress } = useAccount()\n  const latestTokenBridge = useLatest(arbTokenBridge)\n\n  const { updateUSDCBalances } = useUpdateUSDCBalances({\n    walletAddress\n  })\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updateUSDCBalances()\n\n      if (selectedToken) {\n        latestTokenBridge?.current?.token?.updateTokenData(\n          selectedToken.address\n        )\n      }\n    }, 10000)\n\n    return () => clearInterval(interval)\n  }, [selectedToken])\n\n  return <></>\n}\n\nexport { BalanceUpdater }\n","import { useEffect } from 'react'\nimport { useAccount } from 'wagmi'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\n\nimport { useAppState } from '../../state'\nimport {\n  addBridgeTokenListToBridge,\n  BRIDGE_TOKEN_LISTS\n} from '../../util/TokenListUtils'\n\n// Adds whitelisted tokens to the bridge data on app load\n// In the token list we should show later only tokens with positive balances\nconst TokenListSyncer = (): JSX.Element => {\n  const {\n    app: { arbTokenBridge, arbTokenBridgeLoaded }\n  } = useAppState()\n  const { address: walletAddress } = useAccount()\n  const [networks] = useNetworks()\n  const { childChain } = useNetworksRelationship(networks)\n\n  useEffect(() => {\n    if (!arbTokenBridgeLoaded) {\n      return\n    }\n\n    if (!walletAddress) {\n      return\n    }\n\n    const tokenListsToSet = BRIDGE_TOKEN_LISTS.filter(bridgeTokenList => {\n      // Always load the Arbitrum Token token list\n      if (bridgeTokenList.isArbitrumTokenTokenList) {\n        return true\n      }\n\n      return (\n        bridgeTokenList.originChainID === childChain.id &&\n        bridgeTokenList.isDefault\n      )\n    })\n\n    tokenListsToSet.forEach(bridgeTokenList => {\n      addBridgeTokenListToBridge(bridgeTokenList, arbTokenBridge)\n    })\n  }, [walletAddress, childChain.id, arbTokenBridgeLoaded])\n\n  return <></>\n}\n\nexport { TokenListSyncer }\n","import { getOrbitChains } from '../util/orbitChainsList'\nimport { getBridgeUiConfigForChain } from '../util/bridgeUiConfig'\nimport { useNetworks } from './useNetworks'\n\ntype DestinationChainStyle =\n  | {\n      borderColor: `#${string}`\n      backgroundColor: string\n    }\n  | Record<string, never>\n\nexport const useDestinationChainStyle = (): DestinationChainStyle => {\n  const [networks] = useNetworks()\n  const orbitChains = getOrbitChains({ mainnet: true, testnet: false })\n  const orbitChain = orbitChains.find(\n    orbitChain => orbitChain.chainId === networks.destinationChain.id\n  )\n\n  // early return if the orbit chain is not found\n  if (!orbitChain) return {}\n\n  // styles for the orbit chain\n  const orbitChainColor = getBridgeUiConfigForChain(orbitChain.chainId).color\n  const orbitStyles = {\n    borderColor: orbitChainColor,\n    backgroundColor: `${orbitChainColor}40`\n  }\n\n  return orbitStyles\n}\n","export function onDisconnectHandler() {\n  if (typeof indexedDB === 'undefined') {\n    return\n  }\n\n  if (typeof localStorage === 'undefined') {\n    return\n  }\n\n  const isWalletConnect =\n    localStorage.getItem('wagmi.wallet') === '\"walletConnect\"'\n\n  if (!isWalletConnect) {\n    return\n  }\n\n  indexedDB.deleteDatabase('WALLET_CONNECT_V2_INDEXED_DB')\n\n  setTimeout(() => window.location.reload(), 100)\n}\n","import { JsonRpcProvider } from '@ethersproject/providers'\nimport { useState, useEffect, useMemo } from 'react'\nimport Resolution from '@unstoppabledomains/resolution'\n\nimport {\n  useProvider,\n  useAccount,\n  useDisconnect,\n  useNetwork,\n  useEnsName,\n  useEnsAvatar\n} from 'wagmi'\nimport { useArbQueryParams } from './useArbQueryParams'\nimport { trackEvent } from '../util/AnalyticsUtils'\nimport { shortenAddress } from '../util/CommonUtils'\nimport { useAppContextActions } from '../components/App/AppContext'\nimport { onDisconnectHandler } from '../util/walletConnectUtils'\n\ntype UDInfo = { name: string | null }\nconst udInfoDefaults: UDInfo = { name: null }\n\nasync function tryLookupUDName(provider: JsonRpcProvider, address: string) {\n  const UDresolution = Resolution.fromEthersProvider({\n    uns: {\n      // TODO => remove Layer2 config when UD lib supports our use case\n      // Layer2 (polygon) is required in the object type but we only want to use Layer1\n      // This is a hack to only support Ethereum Mainnet UD names\n      // https://github.com/unstoppabledomains/resolution/issues/229\n      locations: {\n        Layer1: {\n          network: 'mainnet',\n          provider\n        },\n        Layer2: {\n          network: 'mainnet',\n          provider\n        }\n      }\n    }\n  })\n  try {\n    return await UDresolution.reverse(address)\n  } catch (error) {\n    return null\n  }\n}\n\nexport const useAccountMenu = () => {\n  const l1Provider = useProvider({ chainId: 1 })\n  const { address } = useAccount()\n  const { disconnect } = useDisconnect({\n    onSettled: onDisconnectHandler\n  })\n  const { chain } = useNetwork()\n\n  const { openTransactionHistoryPanel } = useAppContextActions()\n  const [, setQueryParams] = useArbQueryParams()\n\n  const [udInfo, setUDInfo] = useState<UDInfo>(udInfoDefaults)\n  const { data: ensName } = useEnsName({\n    address,\n    chainId: 1\n  })\n\n  const { data: ensAvatar } = useEnsAvatar({\n    address,\n    chainId: 1\n  })\n\n  useEffect(() => {\n    if (!address) return\n    async function resolveUdName() {\n      const udName = await tryLookupUDName(\n        l1Provider as JsonRpcProvider,\n        address as string\n      )\n\n      setUDInfo({ name: udName })\n    }\n    resolveUdName()\n  }, [address, l1Provider])\n\n  const accountShort = useMemo(() => {\n    if (typeof address === 'undefined') {\n      return ''\n    }\n\n    return shortenAddress(address)\n  }, [address])\n\n  useEffect(() => {\n    if (!address) return\n    async function resolveUdName() {\n      const udName = await tryLookupUDName(\n        l1Provider as JsonRpcProvider,\n        address as string\n      )\n\n      setUDInfo({ name: udName })\n    }\n    resolveUdName()\n  }, [address, l1Provider])\n\n  function openTransactionHistory() {\n    openTransactionHistoryPanel()\n    trackEvent('Open Transaction History Click', { pageElement: 'Header' })\n  }\n\n  return {\n    address,\n    accountShort,\n    ensName,\n    ensAvatar,\n    openTransactionHistory,\n    disconnect,\n    udInfo,\n    chain,\n    setQueryParams\n  }\n}\n","import BoringAvatar from 'boring-avatars'\n\nexport function CustomBoringAvatar({\n  size,\n  name\n}: {\n  size: number\n  name?: string\n}) {\n  return (\n    <BoringAvatar\n      size={size}\n      name={name?.toLowerCase()}\n      variant=\"beam\"\n      colors={['#11365E', '#EDD75A', '#73B06F', '#0C8F8F', '#405059']}\n    />\n  )\n}\n","import {\n  ArrowLeftOnRectangleIcon,\n  ArrowTopRightOnSquareIcon,\n  Cog6ToothIcon,\n  DocumentTextIcon\n} from '@heroicons/react/24/outline'\nimport { MenuItem, MenuItemExpandable } from '@offchainlabs/cobalt'\n\nimport { getExplorerUrl } from '../../util/networks'\nimport { SafeImage } from '../common/SafeImage'\nimport { useAccountMenu } from '../../hooks/useAccountMenu'\nimport { CustomBoringAvatar } from '../common/CustomBoringAvatar'\n\nexport const AccountMenuItem = () => {\n  const {\n    address,\n    accountShort,\n    ensName,\n    ensAvatar,\n    openTransactionHistory,\n    disconnect,\n    udInfo,\n    chain,\n    setQueryParams\n  } = useAccountMenu()\n\n  return (\n    <MenuItemExpandable\n      title={ensName ?? udInfo.name ?? accountShort}\n      isMobile\n      Icon={\n        <SafeImage\n          src={ensAvatar || undefined}\n          className=\"h-6 w-6 rounded-full sm:h-8 sm:w-8\"\n          fallback={<CustomBoringAvatar size={24} name={address} />}\n        />\n      }\n    >\n      <MenuItem\n        title=\"Transactions\"\n        Icon={<DocumentTextIcon className=\"h-[18px] w-[18px]\" />}\n        onClick={openTransactionHistory}\n        isMobile\n      />\n      {chain && (\n        <MenuItem\n          title=\"Explorer\"\n          Icon={<ArrowTopRightOnSquareIcon className=\"h-[18px] w-[18px]\" />}\n          href={`${getExplorerUrl(chain.id)}/address/${address}`}\n          isMobile\n        />\n      )}\n      <MenuItem\n        title=\"Settings\"\n        Icon={<Cog6ToothIcon className=\"h-[18px] w-[18px]\" />}\n        onClick={() => setQueryParams({ settingsOpen: true })}\n        isMobile\n      />\n      <MenuItem\n        title=\"Disconnect\"\n        Icon={<ArrowLeftOnRectangleIcon className=\"h-[18px] w-[18px]\" />}\n        onClick={() => disconnect()}\n        isMobile\n      />\n    </MenuItemExpandable>\n  )\n}\n","'use client'\nimport { PlusCircleIcon } from '@heroicons/react/24/outline'\nimport { MenuItem } from '@offchainlabs/cobalt'\nimport { ConnectButton } from '@rainbow-me/rainbowkit'\nimport dynamic from 'next/dynamic'\nimport { usePostHog } from 'posthog-js/react'\nimport { useAccount } from 'wagmi'\nimport { AccountMenuItem } from './AccountMenuItem'\n\n// Dynamically import the MobileSidebar component with SSR disabled\nconst DynamicMobileSidebar = dynamic(\n  () =>\n    import('@offchainlabs/cobalt').then(mod => ({\n      default: mod.MobileSidebar\n    })),\n  { ssr: false }\n)\n\nexport const AppMobileSidebar: React.FC<React.PropsWithChildren> = () => {\n  const posthog = usePostHog()\n  const { isConnected } = useAccount()\n\n  return (\n    <div className=\"flex flex-col justify-center sm:hidden\">\n      <DynamicMobileSidebar\n        logger={posthog}\n        activeMenu=\"Bridge\"\n        mobileToggleButtonClassOverrides=\"bg-transparent\"\n      >\n        {isConnected ? (\n          <AccountMenuItem />\n        ) : (\n          <ConnectButton.Custom>\n            {({ openConnectModal }) => (\n              <MenuItem\n                title=\"Connect Wallet\"\n                onClick={openConnectModal}\n                Icon={<PlusCircleIcon className=\"h-[24px] w-[24px] stroke-1\" />}\n                className=\"border-lime-dark bg-lime-dark py-3\"\n                isMobile\n              />\n            )}\n          </ConnectButton.Custom>\n        )}\n      </DynamicMobileSidebar>\n    </div>\n  )\n}\n","import React from 'react'\nimport Image from 'next/image'\nimport { twMerge } from 'tailwind-merge'\nimport ArbitrumLogoSmall from '@/images/ArbitrumLogo.svg'\n\nimport { isNetwork } from '../../util/networks'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { useDestinationChainStyle } from '../../hooks/useDestinationChainStyle'\nimport { AppMobileSidebar } from '../Sidebar/AppMobileSidebar'\n\nexport function Header({ children }: { children?: React.ReactNode }) {\n  const [{ sourceChain }] = useNetworks()\n  const { isTestnet } = isNetwork(sourceChain.id)\n\n  const destinationChainStyle = useDestinationChainStyle()\n\n  return (\n    <header\n      className={twMerge(\n        'sticky top-0 z-10 flex h-12 w-full justify-center bg-black/70 px-4 backdrop-blur sm:relative sm:h-16 sm:px-6 sm:backdrop-blur-none [body.menu-open_&]:fixed',\n        isTestnet\n          ? 'sm:border-b sm:border-white sm:bg-white/20'\n          : 'sm:bg-transparent',\n        destinationChainStyle.borderColor ? 'sm:border-b' : ''\n      )}\n      style={destinationChainStyle}\n    >\n      <div className=\"flex w-full items-center justify-end gap-2 text-white\">\n        <Image\n          className=\"mr-auto h-6 w-6 sm:hidden\"\n          src={ArbitrumLogoSmall}\n          alt=\"Arbitrum\"\n        />\n        {isTestnet && <span className=\"grow font-medium\">TESTNET MODE</span>}\n        <div className=\"hidden sm:flex\">{children}</div>\n      </div>\n      <AppMobileSidebar />\n    </header>\n  )\n}\n","import { Popover } from '@headlessui/react'\nimport {\n  ArrowLeftOnRectangleIcon,\n  ArrowTopRightOnSquareIcon,\n  ChevronDownIcon,\n  Cog6ToothIcon,\n  DocumentDuplicateIcon,\n  DocumentTextIcon\n} from '@heroicons/react/24/outline'\nimport { useState } from 'react'\nimport { useCopyToClipboard, useMedia } from 'react-use'\nimport { twMerge } from 'tailwind-merge'\n\nimport { useAccountType } from '../../hooks/useAccountType'\nimport { useNetworks } from '../../hooks/useNetworks'\nimport { getExplorerUrl, isNetwork } from '../../util/networks'\nimport { useAccountMenu } from '../../hooks/useAccountMenu'\nimport { ExternalLink } from './ExternalLink'\nimport { SafeImage } from './SafeImage'\nimport { Transition } from './Transition'\nimport { CustomBoringAvatar } from './CustomBoringAvatar'\nimport { useDestinationChainStyle } from '../../hooks/useDestinationChainStyle'\n\nexport function HeaderAccountPopover({\n  isCorrectNetworkConnected = true\n}: {\n  isCorrectNetworkConnected?: boolean // is the app connected to a correct network? if no, then show limited options in the menu\n}) {\n  const {\n    address,\n    accountShort,\n    ensName,\n    ensAvatar,\n    openTransactionHistory,\n    disconnect,\n    udInfo,\n    chain,\n    setQueryParams\n  } = useAccountMenu()\n  const [{ sourceChain }] = useNetworks()\n  const { isTestnet } = isNetwork(sourceChain.id)\n  const [, copyToClipboard] = useCopyToClipboard()\n  const isSmallScreen = useMedia('(max-width: 639px)')\n  const { isSmartContractWallet, isLoading: isLoadingAccountType } =\n    useAccountType()\n\n  const destinationChainStyle = useDestinationChainStyle()\n\n  const [showCopied, setShowCopied] = useState(false)\n\n  function copy(value: string) {\n    setShowCopied(true)\n    copyToClipboard(value)\n    setTimeout(() => setShowCopied(false), 1000)\n  }\n\n  const headerItemsClassName =\n    'arb-hover flex w-full flex-row items-center space-x-2 px-12 py-2 text-sm sm:text-sm text-gray-4 sm:text-white hover:bg-ocl-blue sm:px-4 sm:py-1'\n\n  return (\n    <Popover className=\"relative w-full px-4 sm:w-max sm:p-0\">\n      <Popover.Button\n        className={twMerge(\n          'flex w-full flex-row items-center justify-start gap-3 px-[12px] py-[7px] transition-[background] duration-300',\n          'ui-open:bg-white/20 ui-not-open:bg-transparent ui-not-open:hover:bg-white/20',\n          'sm:w-max sm:rounded sm:border sm:px-2 sm:py-1',\n          isTestnet\n            ? 'sm:border-white sm:ui-not-open:bg-white/20'\n            : 'sm:border-gray-1 sm:ui-not-open:bg-gray-1 sm:ui-not-open:hover:bg-white/10'\n        )}\n        style={destinationChainStyle}\n        role=\"button\"\n        aria-label=\"Account Header Button\"\n      >\n        <SafeImage\n          src={ensAvatar || undefined}\n          className=\"h-6 w-6 rounded-full sm:h-8 sm:w-8\"\n          fallback={\n            <CustomBoringAvatar size={isSmallScreen ? 24 : 40} name={address} />\n          }\n        />\n        <span className=\"flex flex-col text-justify text-base leading-extra-tight text-gray-4 sm:text-white\">\n          {ensName ?? udInfo.name ?? accountShort}\n          {isSmartContractWallet && !isLoadingAccountType && (\n            <span className=\"text-[10px]\">Smart Contract Wallet</span>\n          )}\n        </span>\n\n        <ChevronDownIcon className=\"ml-auto h-[16px] w-[16px] text-gray-4 transition duration-200 sm:text-white\" />\n      </Popover.Button>\n      <Transition className=\"w-full sm:absolute sm:top-0\">\n        <Popover.Panel className=\"flex w-full flex-col overflow-hidden rounded pb-2 sm:absolute sm:top-0 sm:bg-dark\">\n          {/* Profile photo with address */}\n          {showCopied && (\n            <span className=\"absolute right-2 top-4 z-50 text-xs text-white\">\n              Copied to clipboard!\n            </span>\n          )}\n          <div className=\"relative hidden w-full flex-row items-center px-2 pb-2 pt-3 sm:flex\">\n            {/* Blurred background */}\n            <div className=\"absolute inset-0 flex h-8 w-full flex-col items-center overflow-hidden bg-dark text-center\">\n              <div className=\"scale-400 blur-2xl filter\">\n                <SafeImage\n                  className=\"h-100 w-100 rounded-full\"\n                  src={ensAvatar || undefined}\n                  fallback={<CustomBoringAvatar size={200} name={address} />}\n                />\n              </div>\n            </div>\n\n            {/* Actual image and account name */}\n            <div className=\"relative flex flex-row items-center gap-2\">\n              <div className=\"avatar-container box-content rounded-full border-[3px] border-dark\">\n                <SafeImage\n                  src={ensAvatar || undefined}\n                  className=\"h-[54px] w-[54px] rounded-full\"\n                  fallback={<CustomBoringAvatar size={54} name={address} />}\n                />\n              </div>\n              <button\n                className=\"flex translate-y-1 flex-row items-center gap-1 text-white/70 hover:text-white\"\n                onClick={() => copy(ensName ?? udInfo.name ?? address ?? '')}\n              >\n                <span className=\"max-w-[10rem] overflow-hidden text-ellipsis text-sm\">\n                  {ensName ?? udInfo.name ?? accountShort}\n                </span>\n                <DocumentDuplicateIcon className=\"h-3 w-3\" />\n              </button>\n            </div>\n          </div>\n\n          <div className=\"flex w-full flex-col justify-between sm:flex-col sm:items-end sm:px-0\">\n            {/* Transactions button */}\n            {isCorrectNetworkConnected && (\n              <button\n                className={headerItemsClassName}\n                onClick={openTransactionHistory}\n              >\n                <DocumentTextIcon className=\"h-3 w-3 text-white/60 sm:text-white\" />\n                <span>Transactions</span>\n              </button>\n            )}\n\n            {/* Explorer button */}\n            {isCorrectNetworkConnected && chain && (\n              <ExternalLink\n                href={`${getExplorerUrl(chain.id)}/address/${address}`}\n                className={headerItemsClassName}\n              >\n                <ArrowTopRightOnSquareIcon className=\"h-3 w-3 text-white/60 sm:text-white\" />\n                <span>Explorer</span>\n              </ExternalLink>\n            )}\n\n            {/* Settings */}\n            {isCorrectNetworkConnected && (\n              <button\n                className={headerItemsClassName}\n                onClick={() => setQueryParams({ settingsOpen: true })}\n              >\n                <Cog6ToothIcon className=\"h-3 w-3 text-white/60 sm:text-white\" />\n                <span>Settings</span>\n              </button>\n            )}\n\n            {/* Disconnect button */}\n            <button\n              className={headerItemsClassName}\n              onClick={() => disconnect()}\n            >\n              <ArrowLeftOnRectangleIcon className=\"h-3 w-3 text-white/60 sm:text-white\" />\n              <span>Disconnect</span>\n            </button>\n          </div>\n        </Popover.Panel>\n      </Transition>\n    </Popover>\n  )\n}\n","import { createClient, configureChains } from 'wagmi'\nimport { mainnet, arbitrum } from '@wagmi/core/chains'\nimport { publicProvider } from 'wagmi/providers/public'\nimport { connectorsForWallets, getDefaultWallets } from '@rainbow-me/rainbowkit'\nimport { trustWallet, okxWallet } from '@rainbow-me/rainbowkit/wallets'\n\nimport {\n  sepolia,\n  arbitrumNova,\n  arbitrumSepolia,\n  localL1Network as local,\n  localL2Network as arbitrumLocal,\n  localL3Network as l3Local,\n  holesky\n} from './wagmiAdditionalNetworks'\nimport { isTestingEnvironment } from '../CommonUtils'\nimport { getCustomChainsFromLocalStorage, ChainId } from '../networks'\nimport { getOrbitChains } from '../orbitChainsList'\nimport { getWagmiChain } from './getWagmiChain'\nimport { customInfuraProvider } from '../infura'\n\nconst customChains = getCustomChainsFromLocalStorage().map(chain =>\n  getWagmiChain(chain.chainId)\n)\nconst wagmiOrbitChains = getOrbitChains().map(chain =>\n  getWagmiChain(chain.chainId)\n)\n\nconst chainList = isTestingEnvironment\n  ? [\n      // mainnet, arb1, & arb nova are for network switch tests\n      mainnet,\n      arbitrum,\n      arbitrumNova,\n      // sepolia & arb sepolia are for tx history panel tests\n      sepolia,\n      arbitrumSepolia,\n      holesky,\n      // Orbit chains\n      ...wagmiOrbitChains,\n      // add local environments during testing\n      local,\n      arbitrumLocal,\n      l3Local,\n      // user-added custom chains\n      ...customChains\n    ]\n  : [\n      mainnet,\n      arbitrum,\n      arbitrumNova,\n      sepolia,\n      arbitrumSepolia,\n      holesky,\n      ...wagmiOrbitChains,\n      ...customChains\n    ]\n\nconst projectId = process.env.NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID!\n\nif (!projectId) {\n  console.error('NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID variable missing.')\n}\n\nconst appInfo = {\n  appName: 'Bridge to Arbitrum',\n  projectId\n}\n\nenum TargetChainKey {\n  Ethereum = 'mainnet',\n  ArbitrumOne = 'arbitrum-one',\n  ArbitrumNova = 'arbitrum-nova',\n  Sepolia = 'sepolia',\n  ArbitrumSepolia = 'arbitrum-sepolia'\n}\n\nfunction sanitizeTargetChainKey(targetChainKey: string | null): TargetChainKey {\n  // Default to Ethereum Mainnet if nothing passed in\n  if (targetChainKey === null) {\n    return TargetChainKey.Ethereum\n  }\n\n  // Default to Ethereum Mainnet if invalid\n  if (!(Object.values(TargetChainKey) as string[]).includes(targetChainKey)) {\n    return TargetChainKey.Ethereum\n  }\n\n  return targetChainKey as TargetChainKey\n}\n\nfunction getChainId(targetChainKey: TargetChainKey): number {\n  switch (targetChainKey) {\n    case TargetChainKey.Ethereum:\n      return ChainId.Ethereum\n\n    case TargetChainKey.ArbitrumOne:\n      return ChainId.ArbitrumOne\n\n    case TargetChainKey.ArbitrumNova:\n      return ChainId.ArbitrumNova\n\n    case TargetChainKey.Sepolia:\n      return ChainId.Sepolia\n\n    case TargetChainKey.ArbitrumSepolia:\n      return ChainId.ArbitrumSepolia\n  }\n}\n\nfunction getChains(targetChainKey: TargetChainKey) {\n  const targetChainId = getChainId(targetChainKey)\n\n  // Doing `Array.filter` instead of `Array.find` in case it's empty, just in case.\n  const target = chainList.filter(chain => chain.id === targetChainId)\n  const others = chainList.filter(chain => chain.id !== targetChainId)\n\n  return [...target, ...others]\n}\n\nexport function getProps(targetChainKey: string | null) {\n  const { chains, provider } = configureChains(\n    // Wagmi selects the first chain as the one to target in WalletConnect, so it has to be the first in the array.\n    //\n    // https://github.com/wagmi-dev/references/blob/main/packages/connectors/src/walletConnect.ts#L114\n    getChains(sanitizeTargetChainKey(targetChainKey)),\n    [customInfuraProvider(), publicProvider()]\n  )\n\n  const { wallets } = getDefaultWallets({\n    ...appInfo,\n    chains\n  })\n\n  const connectors = connectorsForWallets([\n    ...wallets,\n    {\n      groupName: 'More',\n      wallets: [\n        trustWallet({ chains, projectId }),\n        okxWallet({ chains, projectId })\n      ]\n    }\n  ])\n\n  const client = createClient({\n    autoConnect: true,\n    connectors,\n    provider\n  })\n\n  return {\n    rainbowKitProviderProps: {\n      appInfo,\n      chains\n    },\n    wagmiConfigProps: {\n      client\n    }\n  }\n}\n","import { useMemo } from 'react'\nimport { useAccount, useNetwork } from 'wagmi'\nimport useSWRImmutable from 'swr/immutable'\n\nimport { ApiResponseSuccess } from '../pages/api/screenings'\nimport { trackEvent } from '../util/AnalyticsUtils'\nimport { isNetwork } from '../util/networks'\nimport { Address } from '../util/AddressUtils'\n\nasync function isBlocked(address: Address): Promise<boolean> {\n  if (\n    process.env.NODE_ENV !== 'production' ||\n    process.env.NEXT_PUBLIC_IS_E2E_TEST\n  ) {\n    return false\n  }\n\n  const searchParams = new URLSearchParams({ address })\n  const response = await fetch('/api/screenings?' + searchParams, {\n    method: 'GET',\n    headers: { 'Content-Type': 'application/json' }\n  })\n\n  if (!response.ok) {\n    return false\n  }\n\n  return ((await response.json()) as ApiResponseSuccess).blocked\n}\n\nasync function fetcher(address: Address): Promise<boolean> {\n  const accountIsBlocked = await isBlocked(address)\n\n  if (accountIsBlocked) {\n    trackEvent('Address Block', { address })\n  }\n\n  return accountIsBlocked\n}\n\nexport function useAccountIsBlocked() {\n  const { address } = useAccount()\n  const { chain } = useNetwork()\n\n  const queryKey = useMemo(() => {\n    if (typeof address === 'undefined') {\n      // Don't fetch\n      return null\n    }\n\n    if (isNetwork(chain?.id ?? 0).isTestnet) {\n      // Don't fetch\n      return null\n    }\n\n    return [address.toLowerCase(), 'useAccountIsBlocked']\n  }, [address, chain?.id])\n\n  const { data: isBlocked } = useSWRImmutable<boolean>(\n    queryKey,\n    // Extracts the first element of the query key as the fetcher param\n    ([_address]) => fetcher(_address)\n  )\n\n  return { isBlocked }\n}\n","import { PlusCircleIcon } from '@heroicons/react/24/outline'\nimport { ConnectButton } from '@rainbow-me/rainbowkit'\nimport { twMerge } from 'tailwind-merge'\n\nexport function HeaderConnectWalletButton() {\n  return (\n    <ConnectButton.Custom>\n      {({ openConnectModal }) => (\n        <div className=\"w-full px-4 sm:px-0\">\n          <button\n            onClick={openConnectModal}\n            type=\"button\"\n            className={twMerge(\n              'arb-hover flex w-full flex-row items-center border border-lime-dark bg-lime-dark px-[12px] py-2 text-white',\n              'sm:min-w-[198px] sm:rounded sm:bg-lime-dark sm:py-1 sm:pl-2 sm:pr-3 sm:text-base sm:font-normal'\n            )}\n          >\n            <PlusCircleIcon className=\"mr-3 h-[24px] w-[24px] stroke-1 sm:h-8 sm:w-8\" />\n            Connect Wallet\n          </button>\n        </div>\n      )}\n    </ConnectButton.Custom>\n  )\n}\n","import { useCallback, useEffect, useState } from 'react'\nimport * as Sentry from '@sentry/react'\n\nimport { useAccount, useNetwork, WagmiConfig, useDisconnect } from 'wagmi'\nimport {\n  darkTheme,\n  RainbowKitProvider,\n  Theme,\n  useConnectModal\n} from '@rainbow-me/rainbowkit'\nimport merge from 'lodash-es/merge'\nimport axios from 'axios'\nimport { createOvermind, Overmind } from 'overmind'\nimport { Provider } from 'overmind-react'\nimport { useLocalStorage } from '@uidotdev/usehooks'\n\nimport { ConnectionState } from '../../util'\nimport { TokenBridgeParams } from '../../hooks/useArbTokenBridge'\nimport { WelcomeDialog } from './WelcomeDialog'\nimport { BlockedDialog } from './BlockedDialog'\nimport { AppContextProvider } from './AppContext'\nimport { config, useActions, useAppState } from '../../state'\nimport { MainContent } from '../MainContent/MainContent'\nimport { ArbTokenBridgeStoreSync } from '../syncers/ArbTokenBridgeStoreSync'\nimport { BalanceUpdater } from '../syncers/BalanceUpdater'\nimport { TokenListSyncer } from '../syncers/TokenListSyncer'\nimport { Header } from '../common/Header'\nimport { HeaderAccountPopover } from '../common/HeaderAccountPopover'\nimport { getNetworkName, isNetwork, rpcURLs } from '../../util/networks'\nimport {\n  ArbQueryParamProvider,\n  useArbQueryParams\n} from '../../hooks/useArbQueryParams'\nimport { TOS_LOCALSTORAGE_KEY } from '../../constants'\nimport { getProps } from '../../util/wagmi/setup'\nimport { useAccountIsBlocked } from '../../hooks/useAccountIsBlocked'\nimport { useCCTPIsBlocked } from '../../hooks/CCTP/useCCTPIsBlocked'\nimport { useNativeCurrency } from '../../hooks/useNativeCurrency'\nimport { sanitizeQueryParams, useNetworks } from '../../hooks/useNetworks'\nimport { useNetworksRelationship } from '../../hooks/useNetworksRelationship'\nimport { HeaderConnectWalletButton } from '../common/HeaderConnectWalletButton'\nimport { ProviderName, trackEvent } from '../../util/AnalyticsUtils'\nimport { onDisconnectHandler } from '../../util/walletConnectUtils'\nimport { addressIsSmartContract } from '../../util/AddressUtils'\n\ndeclare global {\n  interface Window {\n    Cypress?: any\n  }\n}\n\nconst rainbowkitTheme = merge(darkTheme(), {\n  colors: {\n    accentColor: 'var(--blue-link)'\n  },\n  fonts: {\n    body: 'Roboto, sans-serif'\n  }\n} as Theme)\n\nconst ArbTokenBridgeStoreSyncWrapper = (): JSX.Element | null => {\n  const actions = useActions()\n  const {\n    app: { selectedToken }\n  } = useAppState()\n  const [networks] = useNetworks()\n  const { childChain, childChainProvider, parentChain, parentChainProvider } =\n    useNetworksRelationship(networks)\n  const nativeCurrency = useNativeCurrency({ provider: childChainProvider })\n\n  // We want to be sure this fetch is completed by the time we open the USDC modals\n  useCCTPIsBlocked()\n\n  const [tokenBridgeParams, setTokenBridgeParams] =\n    useState<TokenBridgeParams | null>(null)\n\n  useEffect(() => {\n    if (!nativeCurrency.isCustom) {\n      return\n    }\n\n    const selectedTokenAddress = selectedToken?.address.toLowerCase()\n    const selectedTokenL2Address = selectedToken?.l2Address?.toLowerCase()\n    // This handles a super weird edge case where, for example:\n    //\n    // Your setup is: from Arbitrum One to Mainnet, and you have $ARB selected as the token you want to bridge over.\n    // You then switch your destination network to a network that has $ARB as its native currency.\n    // For this network, $ARB can only be bridged as the native currency, and not as a standard ERC-20, which is why we have to reset the selected token.\n    if (\n      selectedTokenAddress === nativeCurrency.address ||\n      selectedTokenL2Address === nativeCurrency.address\n    ) {\n      actions.app.setSelectedToken(null)\n    }\n  }, [selectedToken, nativeCurrency])\n\n  // Listen for account and network changes\n  useEffect(() => {\n    // Any time one of those changes\n    setTokenBridgeParams(null)\n    actions.app.setConnectionState(ConnectionState.LOADING)\n\n    const {\n      isArbitrum: isConnectedToArbitrum,\n      isOrbitChain: isConnectedToOrbitChain\n    } = isNetwork(networks.sourceChain.id)\n    const isParentChainEthereum = isNetwork(\n      parentChain.id\n    ).isEthereumMainnetOrTestnet\n\n    actions.app.reset(networks.sourceChain.id)\n    actions.app.setChainIds({\n      l1NetworkChainId: parentChain.id,\n      l2NetworkChainId: childChain.id\n    })\n\n    if (\n      (isParentChainEthereum && isConnectedToArbitrum) ||\n      isConnectedToOrbitChain\n    ) {\n      console.info('Withdrawal mode detected:')\n      actions.app.setConnectionState(ConnectionState.L2_CONNECTED)\n    } else {\n      console.info('Deposit mode detected:')\n      actions.app.setConnectionState(ConnectionState.L1_CONNECTED)\n    }\n\n    setTokenBridgeParams({\n      l1: {\n        network: parentChain,\n        provider: parentChainProvider\n      },\n      l2: {\n        network: childChain,\n        provider: childChainProvider\n      }\n    })\n  }, [\n    networks.sourceChain.id,\n    parentChain.id,\n    childChain.id,\n    parentChain,\n    childChain,\n    parentChainProvider,\n    childChainProvider\n  ])\n\n  useEffect(() => {\n    axios\n      .get(\n        'https://raw.githubusercontent.com/OffchainLabs/arb-token-lists/aff40a59608678cfd9b034dd198011c90b65b8b6/src/WarningList/warningTokens.json'\n      )\n      .then(res => {\n        actions.app.setWarningTokens(res.data)\n      })\n      .catch(err => {\n        console.warn('Failed to fetch warning tokens:', err)\n      })\n  }, [])\n\n  if (!tokenBridgeParams) {\n    return null\n  }\n\n  return <ArbTokenBridgeStoreSync tokenBridgeParams={tokenBridgeParams} />\n}\n\n// connector names: https://github.com/wagmi-dev/wagmi/blob/b17c07443e407a695dfe9beced2148923b159315/docs/pages/core/connectors/_meta.en-US.json#L4\nfunction getWalletName(connectorName: string): ProviderName {\n  switch (connectorName) {\n    case 'MetaMask':\n    case 'Coinbase Wallet':\n    case 'Trust Wallet':\n    case 'Safe':\n    case 'Injected':\n    case 'Ledger':\n      return connectorName\n\n    case 'WalletConnectLegacy':\n    case 'WalletConnect':\n      return 'WalletConnect'\n\n    default:\n      return 'Other'\n  }\n}\n\n/** given our RPC url, sanitize it before logging to Sentry, to only pass the url and not the keys */\nfunction getBaseUrl(url: string) {\n  try {\n    const urlObject = new URL(url)\n    return `${urlObject.protocol}//${urlObject.hostname}`\n  } catch {\n    // if invalid url passed\n    return ''\n  }\n}\n\nfunction AppContent() {\n  const [networks] = useNetworks()\n  const { parentChain, childChain } = useNetworksRelationship(networks)\n  const { address, isConnected, connector } = useAccount()\n  const { isBlocked } = useAccountIsBlocked()\n  const [tosAccepted] = useLocalStorage<boolean>(TOS_LOCALSTORAGE_KEY, false)\n  const { openConnectModal } = useConnectModal()\n\n  useEffect(() => {\n    if (tosAccepted && !isConnected) {\n      openConnectModal?.()\n    }\n  }, [isConnected, tosAccepted, openConnectModal])\n\n  useEffect(() => {\n    if (isConnected && connector) {\n      const walletName = getWalletName(connector.name)\n      trackEvent('Connect Wallet Click', { walletName })\n    }\n\n    // set a custom tag in sentry to filter issues by connected wallet.name\n    Sentry.setTag('wallet.name', connector?.name ?? '')\n  }, [isConnected, connector])\n\n  useEffect(() => {\n    Sentry.setTag('network.parent_chain_id', parentChain.id)\n    Sentry.setTag(\n      'network.parent_chain_rpc_url',\n      getBaseUrl(rpcURLs[parentChain.id] ?? '')\n    )\n    Sentry.setTag('network.child_chain_id', childChain.id)\n    Sentry.setTag(\n      'network.child_chain_rpc_url',\n      getBaseUrl(rpcURLs[childChain.id] ?? '')\n    )\n  }, [childChain.id, parentChain.id])\n\n  if (!tosAccepted) {\n    return (\n      <>\n        <Header />\n        <WelcomeDialog />\n      </>\n    )\n  }\n\n  if (!isConnected) {\n    return (\n      <>\n        <Header>\n          <HeaderConnectWalletButton />\n        </Header>\n\n        <div className=\"flex flex-col items-start gap-4 px-6 pb-8 pt-12 text-white\">\n          <p className=\"text-5xl\">No wallet connected</p>\n          <p className=\"text-xl\">\n            Please connect your wallet to use the bridge.\n          </p>\n        </div>\n      </>\n    )\n  }\n\n  if (address && isBlocked) {\n    return (\n      <BlockedDialog\n        address={address}\n        isOpen={true}\n        closeable={false}\n        // ignoring until we use the package\n        // https://github.com/OffchainLabs/config-monorepo/pull/11\n        //\n        // eslint-disable-next-line\n        onClose={() => {}}\n      />\n    )\n  }\n\n  return (\n    <>\n      <Header>\n        <HeaderAccountPopover />\n      </Header>\n      <TokenListSyncer />\n      <BalanceUpdater />\n      <ArbTokenBridgeStoreSyncWrapper />\n      <MainContent />\n    </>\n  )\n}\n\n// We're doing this as a workaround so users can select their preferred chain on WalletConnect.\n//\n// https://github.com/orgs/WalletConnect/discussions/2733\n// https://github.com/wagmi-dev/references/blob/main/packages/connectors/src/walletConnect.ts#L114\nconst searchParams = new URLSearchParams(window.location.search)\nconst targetChainKey = searchParams.get('sourceChain')\n\nconst { wagmiConfigProps, rainbowKitProviderProps } = getProps(targetChainKey)\n\n// Clear cache for everything related to WalletConnect v2.\n//\n// TODO: Remove this once the fix for the infinite loop / memory leak is identified.\nObject.keys(localStorage).forEach(key => {\n  if (\n    key === 'wagmi.requestedChains' ||\n    key === 'wagmi.store' ||\n    key.startsWith('wc@2')\n  ) {\n    localStorage.removeItem(key)\n  }\n})\n\nfunction ConnectedChainSyncer() {\n  const { address } = useAccount()\n  const [shouldSync, setShouldSync] = useState(false)\n  const [didSync, setDidSync] = useState(false)\n  const { disconnect } = useDisconnect({\n    onSettled: onDisconnectHandler\n  })\n\n  const [{ sourceChain, destinationChain }, setQueryParams] =\n    useArbQueryParams()\n  const { chain } = useNetwork()\n\n  const setSourceChainToConnectedChain = useCallback(() => {\n    if (typeof chain === 'undefined') {\n      return\n    }\n\n    const { sourceChainId: sourceChain, destinationChainId: destinationChain } =\n      sanitizeQueryParams({\n        sourceChainId: chain.id,\n        destinationChainId: undefined\n      })\n\n    setQueryParams({ sourceChain, destinationChain })\n  }, [chain, setQueryParams])\n\n  useEffect(() => {\n    async function checkCorrectChainForSmartContractWallet() {\n      if (typeof chain === 'undefined') {\n        return\n      }\n      if (!address) {\n        return\n      }\n      const isSmartContractWallet = await addressIsSmartContract(\n        address,\n        chain.id\n      )\n      if (isSmartContractWallet && sourceChain !== chain.id) {\n        const chainName = getNetworkName(chain.id)\n\n        setSourceChainToConnectedChain()\n\n        window.alert(\n          `You're connected to the app with a smart contract wallet on ${chainName}. In order to properly enable transfers, the app will now reload.\\n\\nPlease reconnect after the reload.`\n        )\n        disconnect()\n      }\n    }\n\n    checkCorrectChainForSmartContractWallet()\n  }, [\n    address,\n    chain,\n    disconnect,\n    setQueryParams,\n    setSourceChainToConnectedChain,\n    sourceChain\n  ])\n\n  useEffect(() => {\n    if (shouldSync) {\n      return\n    }\n\n    // Only sync connected chain to query params if the query params were not initially provided\n    if (\n      typeof sourceChain === 'undefined' &&\n      typeof destinationChain === 'undefined'\n    ) {\n      setShouldSync(true)\n    }\n  }, [shouldSync, sourceChain, destinationChain])\n\n  useEffect(() => {\n    // When the chain is connected and we should sync, and we haven't synced yet, sync the connected chain to the query params\n    if (chain && shouldSync && !didSync) {\n      setSourceChainToConnectedChain()\n      setDidSync(true)\n    }\n  }, [\n    chain,\n    shouldSync,\n    didSync,\n    setQueryParams,\n    setSourceChainToConnectedChain\n  ])\n\n  return null\n}\n\nexport default function App() {\n  const [overmind] = useState<Overmind<typeof config>>(createOvermind(config))\n\n  return (\n    <Provider value={overmind}>\n      <ArbQueryParamProvider>\n        <WagmiConfig {...wagmiConfigProps}>\n          <RainbowKitProvider\n            theme={rainbowkitTheme}\n            {...rainbowKitProviderProps}\n          >\n            <ConnectedChainSyncer />\n            <AppContextProvider>\n              <AppContent />\n            </AppContextProvider>\n          </RainbowKitProvider>\n        </WagmiConfig>\n      </ArbQueryParamProvider>\n    </Provider>\n  )\n}\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"names":["TransactionHistoryTab","WhiteListState","DepositStatus","WithdrawalStatus","AssetType","NodeBlockDeadlineStatusTypes","DestinationAddressErrors","Panel","MaximumFractionDigits","ImportTokenModalStatus","ImportStatus","ChainDomain","FastBridgeNames","StatusLabel","TransferReadinessRichErrorMessage","NetworkType","ChainGroupName","SelectedTabName","TargetChainKey","ExternalLink","param","children","href","props","jsx_runtime","jsx","a","target","rel","Button","forwardRef","ref","variant","loading","loadingProps","disabled","className","customClassName","hovered","setHovered","useState","truncate","jsxs","button","type","twMerge","getClassNameForVariant","onMouseEnter","onMouseLeave","div","textLeft","showArrow","showLoader","Loader","color","loaderColor","size","loaderSize","span","ArrowRightIcon","width","captureSentryErrorWithExtraData","error","originFunction","additionalData","Sentry","scope","setTag","setTags","WelcomeDialog","setTosAccepted","useLocalStorage","TOS_LOCALSTORAGE_KEY","openConnectModal","useConnectModal","closeHandler","useCallback","errorToast","p","onClick","aria-label","displayName","useDialog","params","resolveRef","useRef","isOpen","setIsOpen","defaultIsOpen","didOpen","setDidOpen","openDialog","Promise","resolve","current","onClose","confirmed","onCloseData","Dialog","isFooterHidden","closeable","cancelButtonRef","isClosing","setIsClosing","isConfirmed","setIsConfirmed","handleCloseStart","handleCloseEnd","setTimeout","Transition","show","as","Fragment","HeadlessUIDialog","open","initialFocus","Child","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","aria-hidden","afterLeave","Title","title","XMarkIcon","cancelButtonProps","actionButtonProps","actionButtonTitle","BlockedDialog","ExclamationTriangleIcon","height","address","toLowerCase","GET_HELP_LINK","initialState","layout","isTransferPanelVisible","isTransferring","isTransactionHistoryPanelVisible","AppContext","createContext","reducer","state","action","payload","AppContextProvider","dispatch","useReducer","Provider","value","useAppContextState","useContext","useAppContextActions","dispatchContext","dispatchOverride","setTransferring","openTransactionHistoryPanel","closeTransactionHistoryPanel","arbTokenBridge","warningTokens","connectionState","ConnectionState","LOADING","l1NetworkChainId","l2NetworkChainId","verifying","selectedToken","arbTokenBridgeLoaded","setConnectionState","app","setChainIds","setSelectedToken","token","reset","newChainId","ALLOWED","setWarningTokens","setWhitelistState","setArbTokenBridgeLoaded","loaded","setArbTokenBridge","atb","actions","config","namespaced","useAppState","createStateHook","useActions","createActionsHook","createEffectsHook","iconClassName","wrapperClassNames","info","warning","NoteBox","InformationCircleIcon","XCircleIcon","getWagmiChain","chainId","customChain","getCustomChainFromLocalStorageById","orbitChain","orbitChains","chainToWagmiChain","ChainId","Ethereum","mainnet","ArbitrumOne","arbitrum","ArbitrumNova","arbitrumNova","Sepolia","sepolia","Holesky","holesky","ArbitrumSepolia","arbitrumSepolia","Local","localL1Network","ArbitrumLocal","localL2Network","L3Local","localL3Network","concat","addressIsSmartContract","provider","getProviderForChainId","getCode","length","_","addressIsDenylisted","denylistResponse","fetch","getAPIBaseUrl","method","headers","json","data","console","isTeleport","TELEPORT_ALLOWLIST","sourceChainId","destinationChainId","includes","getL2ConfigForTeleport","destinationChainProvider","l2ChainId","l3Network","getArbitrumNetwork","parentChainId","l2Provider","fetchTeleportStatusFromTxId","txId","sourceChainProvider","isNativeCurrencyTransfer","l1l3Bridger","EthL1L3Bridger","Erc20L1L3Bridger","getDepositStatus","txHash","l1Provider","l3Provider","tryGetInboxFromRouter","getChainIdFromProvider","maybeRouter","L1GatewayRouter__factory","connect","inbox","e","code","getChainIdFromInbox","IInbox__factory","bridge","IBridge__factory","rollup","IRollupCore__factory","Number","chainIdBigNumber","toString","getChainIdFromInboxOrRouter","maybeInbox","cache","getL3ChainIdFromTeleportEvents","l2l3RouterOrInbox","l1l2Router","cacheKey","cachedValue","l3ChainId","fetchTeleportInputParametersFromTxId","getDepositParameters","getAddressFromSigner","signer","getAddress","network","getNetwork","getBridgeTransferProperties","isSourceChainEthereumMainnetOrTestnet","isNetwork","isEthereumMainnetOrTestnet","isDestinationChainEthereumMainnetOrTestnet","isSourceChainArbitrum","isArbitrum","isDestinationChainArbitrum","isSourceChainOrbit","isOrbitChain","isDestinationChainOrbit","isDeposit","isWithdrawal","isTeleportTransfer","sourceChainErc20Address","isSupported","percentIncrease","num","increase","add","mul","getBridger","EthBridger","fromProvider","Erc20Bridger","getProviderForChainCache","cachedProvider","createProviderWithCache","rpcUrl","rpcURLs","StaticJsonRpcProvider","isSupportedChainId","customChainIds","getCustomChainsFromLocalStorage","map","chain","id","arbitrumLocal","l3Local","local","getOrbitChains","sanitizeQueryParams","defaultSourceChainId","getDestinationChainIds","defaultDestinationChainId","useNetworks","sourceChain","destinationChain","setQueryParams","useArbQueryParams","validSourceChainId","validDestinationChainId","setState","newSourceChainId","newDestinationChainId","useMemo","TokenDepositCheckDialog","symbol","networks","networkName","getNetworkName","textContent","ol","li","DOCS_DOMAIN","CommonAddress","USDC","tokenMessengerContractAddress","CU","TokenType","erc20DataCacheLocalStorageKey","getErc20DataCacheKey","getErc20DataCache","JSON","parse","localStorage","getItem","fetchErc20Data","cachedErc20Data","name","decimals","multiCaller","MultiCaller","tokenData","getTokenData","erc20","ERC20__factory","all","erc20Data","getDefaultTokenName","lowercased","substring","getDefaultTokenSymbol","setErc20DataCache","setItem","stringify","warn","token_address_on_this_chain","isValidErc20","balanceOf","totalSupply","err","fetchErc20Allowance","owner","spender","allowance","constants","getL1ERC20Address","erc20L2Address","erc20Bridger","getParentErc20Address","fetchErc20ParentChainGatewayAddress","erc20ParentChainAddress","parentChainProvider","childChainProvider","getParentGatewayAddress","fetchErc20L2GatewayAddress","erc20L1Address","getChildGatewayAddress","getL2ERC20Address","getChildErc20Address","getL3ERC20Address","getL3Erc20Address","l1TokenIsDisabled","isErc20Bridger","bridger","isDepositDisabled","isTokenArbitrumOneCU","tokenAddress","isTokenMainnetUSDC","isTokenArbitrumOneUSDCe","isTokenSepoliaUSDC","isTokenArbitrumSepoliaUSDCe","isTokenArbitrumOneNativeUSDC","isTokenArbitrumSepoliaNativeUSDC","isTokenNativeUSDC","sanitizeTokenSymbol","tokenSymbol","options","isArbitrumOne","isArbitrumSepolia","erc20DataToErc20BridgeToken","ERC20","listIds","Set","isGatewayRegistered","isRegistered","erc20ParentAddress","parentProvider","childProvider","useERC20L1Address","eitherL1OrL2Address","isValidating","useSWRImmutable","_ref","shouldRetryOnError","errorRetryCount","errorRetryInterval","isLoading","uniswap","cmc","coinGecko","ArbitrumLogo","BRIDGE_TOKEN_LISTS","originChainID","url","isDefault","logoURI","isArbitrumTokenTokenList","UniswapLogo","CoinGeckoLogo","CMCLogo","listIdsToNames","forEach","bridgeTokenList","validateTokenList","ajv","Ajv","addFormats","schema","properties","tokens","maxItems","validate","compile","tokenList","addBridgeTokenListToBridge","fetchTokenListFromURL","then","isValid","addTokensFromList","tokenListURL","axios","get","find","list","undefined","useTokenLists","forL2ChainId","_forL2ChainId","requestListArray","filter","responses","index","bridgeTokenListId","useNetworksRelationship","_isDepositMode","isDepositMode","isSourceChainEthereum","isTeleportMode","childChain","parentChain","useTokensFromLists","tokenLists","l1ChainId","String","reduce","acc","stringifiedChainId","accAddress","l2Address","extensions","bridgeInfo","l1Bridge","addressOnL1","useTokensFromUser","bridgeTokens","storage","Object","keys","bridgeToken","_address","withdrawOnlyTokens","l2CustomAddr","l1Address","isWithdrawOnlyToken","parentChainErc20Address","childChainId","transferDisabledTokens","isTransferDisabledToken","useTransferDisabledDialogStore","create","set","closeDialog","TransferDisabledDialog","isOpenTransferDisabledDialog","closeTransferDisabledDialog","unsupportedToken","l2ChainIdForTeleport","setL2ChainIdForTeleport","useEffect","updateL2ChainIdForTeleport","sourceChainName","destinationChainName","l2ChainIdForTeleportName","isGHO","_token","shortenAddress","addressLength","isTestingEnvironment","window","Cypress","ArbOneNativeUSDC","L2NativeTokens","merge","key","fetcher","useSWRConfig","extendedFetcher","newBalances","oldData","unstable_serialize","useSWRNext","useBalance","walletAddress","walletAddressLowercased","utils","queryKey","fetchErc20","addresses","addressesBalances","account","balance","token_addresses","dataEth","mutate","updateEthBalance","useSWR","_walletAddress","_chainId","_provider","getBalance","refreshInterval","dataErc20","mutateErc20","_walletAddressLowercased","use","eth","populateCache","result","currentData","revalidate","useAccountType","isConnected","useAccount","isSmartContractWallet","isEOA","getDurationClassName","speed","enterSpeed","leaveSpeed","unmountOnLeave","HeadlessUiTransition","unmount","DestinationAddressWarnings","useDestinationAddressStore","destinationAddress","setError","setDestinationAddress","getDestinationAddressError","isAddress","getDestinationAddressWarning","destinationIsSmartContract","AdvancedSettings","collapsed","setCollapsed","inputLocked","setInputLocked","setWarning","updateError","isSubscribed","updateWarning","collapsible","ChevronDownIcon","input","placeholder","spellCheck","onChange","trim","LockClosedIcon","LockOpenIcon","getExplorerUrl","ArrowDownTrayIcon","strokeWidth","useBalances","parentWalletAddress","childWalletAddress","arguments","destinationAddressOrWalletAddress","ethParentBalance","updateEthParentBalance","erc20ParentBalances","updateErc20ParentBalances","ethChildBalance","updateEthChildBalance","erc20ChildBalances","updateErc20ChildBalances","useUpdateUSDCBalances","updateErc20ParentBalance","updateErc20ChildBalance","updateUSDCBalances","parentChainUsdcAddress","childChainUsdcAddress","isEthereumMainnet","isSepolia","nativeCurrencyEther","ether","logoUrl","ETHER_TOKEN_LOGO","isCustom","useNativeCurrency","fetchNativeCurrency","getBridgeUiConfigForChain","ethBridger","nativeToken","nativeTokenData","SearchPanelTable","searchInputPlaceholder","searchInputValue","searchInputOnChange","SearchInputButton","onSubmit","event","preventDefault","errorMessage","dataCy","form","MagnifyingGlassIcon","data-cy","usePanel","panel","currentPanel","setCurrentPanel","SearchPanelContext","setPanel","isActivePanel","SearchPanel","provided","MainPageCTA","showSecondaryPage","onClickHandler","CloseButton","MainPage","shouldShowMain","PageTitle","SecondaryPage","shouldShowSecondary","SecondaryPageCTA","showMainPage","ArrowSmallLeftIcon","LoaderWithMessage","loadingMessage","formatUSD","formattedValue","toLocaleString","minimumFractionDigits","isInteger","maximumFractionDigits","formatNumber","number","Intl","NumberFormat","format","formatAmount","BigNumber","isBigNumber","parseFloat","suffix","isShortSymbol","Math","pow","repeat","notation","countDecimals","floor","decimalPart","split","truncateExtraDecimals","amount","slice","SafeImage","fallback","src","imgProps","validImageSrc","setValidImageSrc","image","Image","sanitizedImageSrc","sanitizeImageSrc","onerror","onload","img","alt","Tooltip","content","wrapperClassName","theme","Tippy","variants","blue","yellow","green","red","gray","StatusBadge","useBalanceOnSourceChain","erc20SourceChainBalances","ethSourceChainBalance","childChainNativeCurrency","tokenChildChainAddress","tokenListIdsToNames","ids","tokenListId","join","StyledLoader","BlockExplorerTokenLink","stopPropagation","TokenListInfo","childChainNativeCurrencyIsCustom","tokenListInfo","listIdsSize","listIdsArray","Array","from","firstList","more","nativeTokenChain","isL2Native","useTokenInfo","nativeCurrency","sanitizeTokenName","tokenName","isArbitrumToken","has","isPotentialFakeArbitrumToken","startsWith","isBridgeable","ArbitrumTokenBadge","CheckCircleIcon","TokenBalance","isLoadingAccountType","isArbitrumNativeUSDC","TokenContractLink","TokenRow","style","onTokenSelected","tokenLogoURI","tokenIsBridgeable","minHeight","TokenLogoFallback","ExclamationCircleIcon","getWarningTokenDescription","warningTokenType","useTokenFromSearchParams","tokenFromSearchParams","setTokenQueryParam","Switch","label","description","checked","HeadlessSwitch","Group","Label","Description","teleportEnabledTokens","allowedL3ChainIds","isTeleportEnabledToken","ARB_ONE_NATIVE_USDC_TOKEN","ARB_SEPOLIA_NATIVE_USDC_TOKEN","TokenListRow","toggleTokenList","isActive","removeTokensFromList","some","switchOnClick","TokenListsPanel","closePanel","listsToShow","NATIVE_CURRENCY_IDENTIFIER","TokensPanel","isParentChainArbitrumOne","isParentChainArbitrumSepolia","tokensFromUser","tokensFromLists","newToken","setNewToken","setErrorMessage","isAddingToken","setIsAddingToken","tokensToShow","tokenSearch","tokenAddresses","push","gt","sort","address1","address2","bal1","bal2","storeNewToken","isSuccessful","addL2NativeToken","ex","addNewToken","log","onSearchInputChange","rowRenderer","virtualizedProps","AddButton","AutoSizer","List","rowCount","rowHeight","TokenSearch","close","openTransferDisabledDialog","isFetchingTokenLists","selectToken","updateTokenData","warningToast","TokenInfo","showFullAddress","tokenAddressLowercased","tokenLogo","useTokenImportDialogStore","TokenImportDialog","latestTokensFromUser","useLatest","latestTokensFromLists","latestBridgeTokens","status","setStatus","isImportingToken","setIsImportingToken","tokenToImport","setTokenToImport","isDialogVisible","setIsDialogVisible","isL1AddressLoading","modalTitle","getL1TokenDataFromL1Address","erc20Params","searchForTokenInLists","currentBridgeTokens","found","l1Token","catch","searchResult1","foundToken","hidden","Checkbox","CheckIcon","useETHPrice","res","ethToUSD","etherValue","isNaN","ethPrice","useGasPrice","useChainId","setChainId","cancelled","updateChainId","gasPrice","getGasPrice","BridgeTransferStarter","constructor","destinationChainErc20Address","TokenMinterAbi","inputs","internalType","stateMutability","anonymous","indexed","outputs","process","env","THE_GRAPH_NETWORK_API_KEY","SELF_HOSTED_SUBGRAPH_API_KEY","MessageTransmitterAbi","contracts","targetChainDomain","targetChainId","usdcContractAddress","messageTransmitterContractAddress","attestationApiUrl","tokenMinterContractAddress","getCctpContracts","getCctpUtils","fetchAttestation","attestationHash","response","accept","waitForAttestation","attestation","r","receiveMessage","messageBytes","prepareWriteContract","abi","functionName","args","writeContract","TokenMessengerAbi","CctpTransferStarter","approveNativeCurrencyEstimateGas","requiresTokenApproval","lt","approveToken","contract","functions","approve","approveTokenEstimateGas","estimateGas","transferEstimateGas","transfer","burnLimit","fetchPerMessageBurnLimit","readContract","formatedLimit","Error","mintRecipient","depositForBurnTx","transferType","sourceChainTransaction","requiresNativeCurrencyApproval","approveNativeCurrency","customFeeTokenAllowanceIsInsufficient","l2Network","customFeeTokenAllowanceForInbox","ethBridge","depositEthEstimateGas","customFeeToken","estimatedParentChainGas","estimatedChildChainGas","estimatedChildChainSubmissionCost","depositRequest","getDepositRequest","txRequest","EthDepositStarter","childNetwork","getApproveGasTokenRequest","approveGasToken","parentSigner","gasLimit","deposit","overrides","fetchTokenFallbackGasEstimates","inboxAddress","l1BaseFee","Inbox__factory","calculateRetryableSubmissionFee","childChainTokenAddress","addressIsCustomGatewayToken","allowanceIsInsufficient","l1Gateway","allowanceForL1Gateway","depositTokenEstimateGas","retryableData","retryableGasOverrides","maxSubmissionCost","childChainNetwork","parentChainGatewayAddress","tokenBridge","parentCustomGateway","DEFAULT_GAS_PRICE_PERCENT_INCREASE","Erc20DepositStarter","getSourceChainGatewayAddress","sourceChainGatewayAddress","customFeeTokenAllowanceForSourceChainGateway","gasEstimates","destinationChainGasPrice","estimatedDestinationChainGasFeeEth","estimatedDestinationChainGasFee","allowanceForSourceChainGateway","withdrawInitTxEstimateGas","isToken","withdrawalRequest","getWithdrawalRequest","ceil","erc20_address_on_parent_chain","withdrawal_type","EthWithdrawalStarter","request","tx","withdraw","childSigner","L2ApproveTokens","Erc20WithdrawalStarter","getDestinationChainErc20Address","gatewayAddress","EthTeleportStarter","getL2Provider","l1Signer","Erc20TeleportStarter","l1TeleporterAddress","teleporter","l1Teleporter","allowanceForTeleporter","BridgeTransferStarterFactory","initProps","cacheValue","TokenApprovalDialog","isCctp","isTestnet","useSigner","setChecked","estimatedGas","setEstimatedGas","contractAddress","setContractAddress","estimatedGasFees","ethFeeText","usdFeeText","usd","approvalFeeText","getEstimatedGas","gasEstimate","cctpTransferStarter","bridgeTransferStarter","getContractAddress","l1L3Bridger","shortenTxHash","txHashLength","TOKEN_APPROVAL_ARTICLE_LINK","TabButton","Tab","trackEvent","posthog","capture","BridgesTable","favorites","setFavorites","bridgeName","selectedNonCanonicalToken","isFavorite","sortedFastBridges","bridgeList","b","isFavoriteA","isFavoriteB","table","thead","tr","th","tbody","td","favorite","StarIconSolid","StarIconOutline","imageSrc","ArrowTopRightOnSquareIcon","hop","celer","connext","across","stargate","synapse","SpecialTokenSymbol","USDC_LEARN_MORE_LINK","USDCFastBridges","Celer","getHref","transferMode","to","fromTokenAddress","toTokenAddress","SecurityGuaranteed","SecurityNotGuaranteed","mapCCTPTransfer","cctpTransfer","messageSent","fetchCCTP","pageNumber","pageSize","urlParams","URLSearchParams","pending","completed","parsedResponse","fetchCCTPDeposits","fetchCCTPWithdrawals","deprecatedTxTypes","isTeleporterTransaction","l2ToL3MsgData","updateStatus","txID","newState","findIndex","txn","transaction","localStorageReducer","transactions","currentTxIds","txsToAdd","updateBlockNumber","blockNumber","updateResolvedTimestamp","timestamp","timestampResolved","updateTxnL1ToL2Msg","l1ToL2MsgData","previousL1ToL2MsgData","parentToChildMsgData","retryableCreationTxID","fetchingUpdate","stateForCache","hooks_useTransactions","cachedTransactions","updateTxnL1ToL2MsgData","setTransactionSuccess","setTransactionBlock","setResolvedTimestamp","setTransactionFailure","addTransaction","timestampCreated","Date","toISOString","updateTransaction","txReceipt","transactionHash","getExecutedMessagesCacheKey","isClassicL2ToL1TransactionEvent","batchNumber","indexInBatch","position","getUniqueIdOrHashFromEvent","hash","anyEvent","uniqueId","TokenDisabledError","msg","useArbTokenBridge","l1","l2","setBridgeTokens","updateErc20L1Balance","updateErc20L2Balance","updateErc20L1CustomDestinationBalance","updateErc20CustomDestinationL2Balance","executedMessagesCache","setExecutedMessagesCache","l1NetworkID","useTransactions","arbTokenList","listId","l1ChainID","l2ChainID","bridgeTokensToAdd","candidateUnbridgedTokensToAdd","obj","every","l1AddressesOfBridgedTokens","l1TokenData","oldBridgeTokens","l1Addresses","l2Addresses","tokenToAdd","oldListIds","addToken","erc20L1orL2Address","lowercasedErc20L1orL2Address","maybeL1Address","l1AddressLowerCased","newBridgeTokens","addToExecutedMessagesCache","events","added","triggerOutbox","messageWriter","ChildToParentMessage","fromEvent","execute","rec","wait","getL2NativeToken","prevBridgeTokens","delete","listID","getRetryableTicket","parentChainTxHash","retryableCreationId","childChainSigner","parentChainTxReceipt","ParentTransactionReceipt","getTransactionReceipt","retryableTicket","getParentToChildMessages","m","l1L2RetryableRequiresRedeem","ParentToChildMessageStatus","FUNDS_DEPOSITED_ON_CHILD","l2ForwarderRetryableRequiresRedeem","l2ForwarderRetryableTxID","firstRetryableLegRequiresRedeem","secondRetryableLegForTeleportRequiresRedeem","getChainIdForRedeemingRetryable","outgoingStateToString","OutgoingMessageState","UNCONFIRMED","CONFIRMED","EXECUTED","isMergedTransaction","direction","L1_FAILURE","L1_PENDING","L2_PENDING","L2_FAILURE","firstLegDepositStatus","getDepositStatusFromL1ToL2MessageStatus","L2_SUCCESS","secondLegDepositStatus","REDEEMED","NOT_YET_CREATED","CREATION_FAILED","EXPIRED","assetType","ETH","transformDeposit","sender","destination","createdAt","getStandardizedTimestamp","resolvedAt","asset","assetName","blockNum","childToParentMsgData","depositStatus","l2NetworkID","transformWithdrawal","uniqueIdOrHash","nodeBlockDeadline","EXECUTE_CALL_EXCEPTION","outgoingMessageState","toNumber","l2TxHash","ethers","ethBlockNum","isTokenDeposit","isDepositReadyToRedeem","date","dayjs","unix","hasL1Subgraph","fetchLatestSubgraphBlockNumber","shouldIncludeSentTxs","isConnectedToParentChain","shouldIncludeReceivedTxs","fetchWithdrawalsFromSubgraph","receiver","fromBlock","toBlock","searchString","page","search","hasL2Subgraph","fetchTokenWithdrawalsFromEventLogs","l2GatewayAddresses","promises","getWithdrawalEvents","Map","flat","item","values","fetchL2Gateways","childErc20Gateway","childCustomGateway","childWethGateway","gatewaysToUse","l2ArbReverseGateway","l2ArbReverseGatewayAddresses","l2DaiGateway","l2DaiGatewayAddresses","l2wstETHGateway","l2wstETHGatewayAddresses","l2LptGateway","l2LptGatewayAddresses","l2MoonGateway","l2MoonGatewayAddresses","attachTimestampToTokenWithdrawal","withdrawal","l2TxReceipt","ChildTransactionReceipt","getChildToParentEvents","mapETHWithdrawalToL2ToL1EventResult","callvalue","getOutgoingMessageState","caller","messageReader","ChildToParentMessageReader","isTokenWithdrawal","mapTokenWithdrawalFromEventLogsToL2ToL1EventResult","signatureHash","logs","topics","_amount","mapWithdrawalToL2ToL1EventResult","tokenAmount","ethValue","fetchWithdrawals","latestSubgraphBlockNumber","withdrawalsFromSubgraph","source","ethWithdrawalsFromEventLogs","tokenWithdrawalsFromEventLogs","fetchETHWithdrawalsFromEventLogs","mappedEthWithdrawalsFromEventLogs","mappedTokenWithdrawalsFromEventLogs","fetchDepositsFromSubgraph","fetchDeposits","depositsFromSubgraph","isEthDeposit","assetDetails","tokenDecimals","blockCreatedAt","isClassic","updateAdditionalDepositData","depositTx","getBlock","parentToChildMsg","l1ToL2Msg","getParentToChildMessageDataFromParentTxHash","depositTxId","fetchTeleporterDepositStatusData","updateClassicDepositStatusData","updateETHDepositStatusData","ethDepositMessage","updateTokenDepositStatusData","isDeposited","EthDepositMessageStatus","DEPOSITED","childTxHash","l2BlockNum","getTransaction","childTxId","updatedDepositTx","getSuccessfulRedeem","childTxReceipt","getTimestampResolved","l3TxHash","block","l2Retryable","isEthTeleport","l1l2TokenBridgeRetryable","l2ForwarderFactoryRetryable","l3Retryable","l2l3TokenBridgeRetryable","l1l2Redeem","l2L3Redeem","l3TxID","l2ForwarderRedeem","depositTxReceipt","parentTxReceipt","getClassicDepositMessage","getParentToChildMessagesClassic","getNitroDepositMessage","getEthDeposits","PARENT_CHAIN_TX_DETAILS_OF_CLAIM_TX","DEPOSITS_LOCAL_STORAGE_KEY","isCctpTransfer","isTxCompleted","cctpData","receiveMessageTransactionHash","isTxPending","isTxClaimable","isTxExpired","isTxFailed","FAILURE","isSameTransaction","txDetails_1","txDetails_2","getTxReceipt","getWithdrawalStatusFromEvents","withdrawalEvent","getDepositsWithoutStatusesFromCache","getUpdatedEthDeposit","receipt","newDeposit","valueOf","getUpdatedTokenDeposit","_l1ToL2Msg","getUpdatedWithdrawal","newStatus","getUpdatedCctpTransfer","requiredL1BlocksBeforeConfirmation","getBlockBeforeConfirmation","blockTime","getL1BlockTime","txWithTxId","getAttestationHashAndMessageFromReceipt","eventTopic","l","decode","diff","getUpdatedTeleportTransfer","updatedTx","getDestinationNetworkTxId","useIsTestnetMode","setNetworks","isTestnetMode","toggleTestnetMode","fetchEthTeleportsFromSubgraph","teleport_type","fetchErc20TeleportsFromSubgraph","hasTeleporterSubgraph","fetchTeleports","ethTeleportsFromSubgraph","erc20TeleportsFromSubgraph","isTransferTeleportFromSubgraph","transformTeleportFromSubgraph","depositParameters","l2l3TicketData","l2CallValue","l1TokenAddress","transactionDetails","getStandardizedTimestampByTx","isWithdrawalFromSubgraph","l2BlockTimestamp","sortByTimestampDescending","getMultiChainFetchList","getChains","flatMap","childChainIds","getChildChainIds","transformTransaction","useTransactionHistoryWithoutStatuses","cctpTransfersMainnet","cctpTransfersTestnet","cctpTypeToFetch","useNetwork","chainPair","useCctpFetching","combinedCctpTransfers","deposits","withdrawals","cctpLoading","isLoadingDeposits","isLoadingWithdrawals","failedChainPairs","addFailedChainPair","fetcherFn","includeSentTxs","includeReceivedTxs","prevFailedChainPairs","prevPair","shouldFetch","depositsData","depositsError","depositsLoading","withdrawalsData","withdrawalsError","withdrawalsLoading","useTransactionHistory","runFetcher","connector","fetching","setFetching","pauseCount","setPauseCount","isLoadingTxsWithoutStatus","getCacheKey","prevPageTxs","depositsFromCache","txPages","txPagesError","setSize","setPage","mutateTxPages","isLoadingFirstPage","useSWRInfinite","_page","_data","dedupedTransactions","dedupeTransactions","txs","getCacheKeyFromTransaction","startIndex","revalidateOnFocus","revalidateOnReconnect","revalidateIfStale","refreshWhenOffline","refreshWhenHidden","revalidateFirstPage","keepPreviousData","dedupingInterval","isLoadingMore","newTransactionsData","mutateNewTransactionsData","addPendingTransaction","currentNewTransactions","updateCachedTransaction","oldTx","newTx","prevTxPages","pageNumberToUpdate","oldPageToUpdate","updatedPage","updatePendingTransaction","pause","resume","prevPage","on","oldestTx","firstPage","lastPage","newestTx","oldestTxDaysAgo","prevPauseCount","getUSDCAddresses","parseTransferToMergedTransaction","messageReceived","parseInt","blockTimestamp","getSourceChainIdFromSourceDomain","sourceDomain","getDestinationChainIdFromSourceDomain","recipient","CCTP_DEFAULT_STATE","message","receiveMessageTimestamp","parseSWRResponse","pendingDeposit","completedDeposit","useCCTPDeposits","enabled","_l1ChainId","_pageNumber","_pageSize","isTransferConfirmed","useCCTPWithdrawals","useCctpStore","transfers","transfersIds","resetTransfers","setTransfers","t1","t2","isAfter","updateTransfer","prevTransfer","prevState","isL1Ethereum","isL1Sepolia","isL2ArbitrumOne","isL2ArbitrumSepolia","isValidChainPair","mutateDeposits","mutateWithdrawals","useCctpState","pendingIds","completedIds","depositIds","withdrawalIds","setPendingTransfer","existingTransfer","txData","resultCctpData","resultTxData","getConfirmedDate","DEPOSIT_TIME_MINUTES","testnet","TRANSFER_TIME_MINUTES_CCTP","DEPOSIT_TIME_MINUTES_ORBIT","useTransferDuration","estimatedMinutesLeftCctp","useRemainingTimeCctp","setEstimatedMinutesLeftCctp","canBeClaimedDate","setCanBeClaimedDate","useInterval","standardDepositDuration","getStandardDepositDuration","orbitDepositDuration","getOrbitDepositDuration","approximateDurationInMinutes","estimatedMinutesLeft","getRemainingMinutes","totalDuration","getCctpTransferDuration","withdrawalDuration","max","confirmationDate","withdrawalFromChainId","getWithdrawalConfirmationDate","createdAtDate","baseChainId","getBaseChainIdByChainId","confirmationSeconds","getConfirmPeriodBlocks","CONFIRMATION_BUFFER_MINUTES","estimatedCompletionTime","minutesToHumanReadableTime","minutes","fromNow","WithdrawalConfirmationDialog","selectedIndex","setSelectedIndex","destinationNetworkName","fastBridges","getFastBridges","chainIdToSlug","getBridgeDeepLink","Hop","Connext","Across","Stargate","Synapse","fastBridgeName","checkbox1Checked","setCheckbox1Checked","checkbox2Checked","setCheckbox2Checked","bothCheckboxesChecked","estimatedConfirmationDate","confirmationPeriod","isFastBridgesTab","CONFIRMATION_PERIOD_ARTICLE_LINK","getCalendarUrl","withdrawalDate","parsedWithdrawalDate","useSelectedTokenDecimals","INITIAL_GAS_SUMMARY_RESULT","estimatedParentChainGasFees","estimatedChildChainGasFees","useGasSummary","debouncedAmount","useDebounce","gasSummary","setGasSummary","amountBigNumber","correctDecimalsAmount","parentChainGasPrice","childChainGasPrice","setGasSummaryStatus","previousGasSummary","estimateGasResult","gasEstimatesError","useGasEstimates","sourceChainBalance","gte","_sourceChainId","_destinationChainId","_sourceChainErc20Address","_destinationChainErc20Address","sourceProvider","getSigner","createBlockExplorerUrlForToken","explorerLink","URL","pathname","isERC20BridgeToken","hasOwnProperty","TokenSymbolWithExplorerLink","tokenSymbolOverride","isParentChain","blockExplorers","default","useIsBridgingEth","NativeCurrencyPrice","showBrackets","getInsufficientFundsErrorMessage","getInsufficientFundsForGasFeesErrorMessage","getSmartContractWalletTeleportTransfersNotSupportedErrorMessage","DISABLED_CHAIN_IDS","ready","transferReady","notReady","TotalGasFees","gasSummaryStatus","parentChainNativeCurrency","gasSummaryLoading","sameNativeCurrency","estimatedTotalGasFees","TransferPanelSummaryContainer","isDisabled","TransferPanelSummary","isBridgingEth","isDestinationChainArbitrumOne","isDestinationChainArbitrumSepolia","isDepositingUSDCtoArbOneOrArbSepolia","OneNovaTransferDialog","sourceNetworkSlug","destinationNetworkSlug","bridgeDeepLink","fastBridgeList","commonUSDC","NetworkImage","imageSize","backgroundColor","logo","NetworkListbox","Listbox","Options","option","Option","forToken","prefix","GasFeeForClaimTxMessage","EstimatedGas","chainType","isSourceChain","parentChainName","showPrice","isDestinationArbOne","isDestinationArbSepolia","isWithdrawalParentChain","estimatedGasFee","layerGasFeeTooltipContent","getGasFeeTooltip","useSelectedTokenBalances","isSourceChainArbitrumOne","isSourceChainSepolia","isSourceChainArbitrumSepolia","isDestinationChainEthereum","isDestinationChainSepolia","isSepoliaArbSepoliaPair","isEthereumArbitrumOnePair","parentBalance","childBalance","DestinationNetworkBox","customFeeTokenBalances","showUsdcSpecificInfo","destinationNetworkListboxProps","selectedTokenBalances","NetworkContainer","bgLogoHeight","customAddress","NetworkListboxPlusBalancesContainer","BalancesContainer","ETHBalance","TestnetToggle","includeToggleStateOnLabel","labelText","wrapper","switch","panelWrapperClassnames","onPopoverClose","document","body","classList","remove","onPopoverButtonClick","chainGroupInfo","core","orbit","ShieldExclamationIcon","ChainTypeInfoRow","chainGroup","isCoreGroup","NetworkRow","AddCustomOrbitChainButton","settingsOpen","NetworksPanel","onNetworkRowClick","networkSearched","setNetworkSearched","debouncedNetworkSearched","listRef","chainIds","getSupportedChainIds","includeMainnets","includeTestnets","networksToShow","_networkSearched","isNetworkSearchResult","isArray","networkRowsWithChainInfoRows","getRowHeight","rowItemOrChainId","rowItem","recomputeRowHeights","networkOrChainTypeName","NetworkSelectionContainer","buttonClassName","buttonStyle","Popover","TokenButton","selectedAddress","useSetInputAmount","newAmount","MaxButton","rest","ethBalance","tokenBalance","isZero","TransferPanelInputField","setAmount","inputMode","ErrorMessage","GAS_ESTIMATION_FAILURE","TOKEN_WITHDRAW_ONLY","TOKEN_TRANSFER_DISABLED","TransferPanelMainInput","maxButtonOnClick","SourceNetworkBox","maxAmount","useMaxAmount","customFeeTokenParentBalance","nativeCurrencyBalance","nativeCurrencyBalanceFormatted","isMaxAmount","AmountQueryParamEnum","MAX","br","ETH_BALANCE_ARTICLE_LINK","SwitchNetworksButton","SwitchNetworkButtonBorderTop","ArrowDownIcon","ArrowsUpDownIcon","SwitchNetworkButtonBorderBottom","sourceNetworkColor","borderColor","destinationNetworkColor","CustomAddressBanner","networkLogo","isSmallScreen","useMedia","showCustomAddressBanner","backgroundImage","backgroundSize","TransferPanelMain","oneNovaTransferDialogProps","openOneNovaTransferDialog","oneNovaTransferDestinationNetworkId","setOneNovaTransferDestinationNetworkId","showUSDCSpecificInfo","useUpdateUSDCTokenData","isArbOneUSDC","isArbSepoliaUSDC","networkListboxProps","destinationChains","getDestinationChains","destinationChainIds","selectedChainIds","handleSwitchNetworkNotSupported","attemptedChainId","isSwitchingNetworkBeforeTx","targetTxName","handleSwitchNetworkError","context","isUserRejectedError","useSwitchNetworkWithConfig","useSwitchNetwork","throwForSwitchChainNotSupported","onMutate","onError","USDCDepositConfirmationDialogCheckbox","checkboxesChecked","onAllCheckboxesCheched","isBridgingNativeUSDC","setCheckboxesChecked","prevCheckboxesState","nativeEvent","stopImmediatePropagation","useCCTPIsBlocked","CctpTabContent","isCctpBlocked","isLoadingIsCctpBlocked","CCTP_DOCUMENTATION","defaultSelectedTabName","USDCDepositConfirmationDialog","allCheckboxesCheched","setAllCheckboxesChecked","selectedTabName","setSelectedTabName","usdceTokenDestinationAddress","handleActionButtonClick","USDCFastBridge","USDCWithdrawalConfirmationDialogCheckbox","USDCWithdrawalConfirmationDialog","CustomFeeTokenApprovalDialog","l1GasPrice","convertBridgeSdkToMergedTransaction","bridgeTransfer","convertBridgeSdkToPendingDepositTransaction","nonce","networkConnectionWarningToast","autoClose","TransferPanel","tokenDepositCheckDialogType","setTokenDepositCheckDialogType","importTokenModalStatus","setImportTokenModalStatus","IDLE","showSmartContractWalletTooltip","setShowSmartContractWalletTooltip","switchNetworkAsync","latestNetworks","latestEth","isConnectedToArbitrum","useIsConnectedToArbitrum","isConnectedToOrbitChain","useIsConnectedToOrbitChain","tokenImportDialogProps","tokenCheckDialogProps","openTokenCheckDialog","tokenApprovalDialogProps","openTokenApprovalDialog","customFeeTokenApprovalDialogProps","openCustomFeeTokenApprovalDialog","withdrawalConfirmationDialogProps","openWithdrawalConfirmationDialog","usdcWithdrawalConfirmationDialogProps","openUSDCWithdrawalConfirmationDialog","usdcDepositConfirmationDialogProps","openUSDCDepositConfirmationDialog","setIsCctp","useTransferReadiness","destinationAddressError","ethL1BalanceFloat","ethL2BalanceFloat","selectedTokenL1BalanceFloat","selectedTokenL2BalanceFloat","selectedTokenL2Address","isL2NativeUSDC","customFeeTokenL1BalanceFloat","getSmartContractWalletNativeCurrencyTransfersNotSupportedErrorMessage","ethBalanceFloat","selectedTokenBalanceFloat","customFeeTokenBalanceFloat","selectedTokenIsWithdrawOnly","selectedTokenIsDisabled","estimatedL1GasFees","estimatedL2GasFees","sanitizeEstimatedGasFees","total","destinationChainUIcolor","useImportTokenModal","openTokenImportDialog","L1_CONNECTED","L2_CONNECTED","isBridgingANewStandardToken","isUnbridgedToken","depositToken","dialogType","getDialogType","waitForInput","amountSafe","confirmUsdcDepositFromNormalOrCctpBridge","primaryButtonClicked","confirmUsdcWithdrawalForCctp","tokenAllowanceApprovalCctp","customFeeTokenApproval","tokenAllowanceApproval","showDelayInSmartContractTransaction","isUserAddedToken","firstTimeTokenBridgingConfirmation","confirmWithdrawal","showDelayedSmartContractTxRequest","transferCctp","childChainName","accountType","version","switchTargetChainId","_error_message","_error_message1","depositConfirmation","complete","newTransfer","signerUndefinedError","hasBothSigners","warningToken","depositRequiresChainSwitch","isParentChainEthereum","withdrawalRequiresChainSwitch","isConnectedToEthereum","connectedChainId","sourceChainEqualsConnectedChain","depositNetworkConnectionWarning","withdrawalNetworkConnectionWarning","approvalTx","onTxSubmit","transfer_type","now","addDepositToCache","cachedDeposits","cachedTx","newCachedDeposits","CLOSED","placement","maxWidth","onClickOutside","visible","SidePanel","heading","panelClassNameOverrides","scrollable","setOpen","emptyData","tps","fetchNetworkTPS","isArbitrumNova","explorerUrl","finalUrl","encodeURIComponent","html","tpsElement","$","load","text","replace","useNetworkTPS","_childChainId","statsLocalStorageKey","getActivityThresholdL1","getActivityThresholdL2","ArbitrumStats","setIsArbitrumStatsVisible","currentL1BlockNumber","useBlockNumber","watch","currentL2BlockNumber","tpsData","tpsLoading","currentL1GasPrice","currentL1GasPriceGwei","currentL1Activity","currentL2GasPrice","currentL2GasPriceGwei","currentL2Activity","toFixed","orbitConfigsLocalStorageKey","zAddress","z","string","refine","zChainId","int","positive","zParentChainId","supportedCustomOrbitParentChains","zContract","object","customGateway","multicall","proxyAdmin","router","standardGateway","weth","wethGateway","ZodOrbitConfig","chainInfo","minL2BaseFee","nonnegative","networkFeeReceiver","infrastructureFeeCollector","batchPoster","staker","chainOwner","chainName","optional","coreContracts","outbox","adminProxy","sequencerInbox","validatorWalletCreator","tokenBridgeContracts","l2Contracts","l3Contracts","getOrbitConfigsFromLocalStorage","configs","mapOrbitConfigToOrbitChain","_toNumber","RollupAdminLogic__factory","confirmPeriodBlocks","retryableLifetimeSeconds","parentErc20Gateway","parentGatewayRouter","parentMultiCall","parentProxyAdmin","parentWeth","parentWethGateway","childGatewayRouter","childMultiCall","childProxyAdmin","childWeth","fetchNativeToken","AddCustomChain","chainJson","setChainJson","addingChain","setAddingChain","customChains","onAddChain","registerCustomArbitrumNetwork","saveCustomChainToLocalStorage","saveOrbitConfigToLocalStorage","location","reload","textarea","pre","EllipsisHorizontalIcon","removeCustomChainFromLocalStorage","removeOrbitConfigFromLocalStorage","newConfigs","download","SectionTitle","SettingsDialog","isArbitrumStatsVisible","ORBIT_QUICKSTART_LINK","PendingDepositWarning","Disclosure","ChevronRightIcon","strong","TransferCountdown","firstLegOnly","textAfterTime","redeemRetryable","retryable","redeemTx","redeem","successfulRedeem","redeemTeleporterFirstLeg","teleportTransfer","txUpdateCallback","l1l2Retryable","l2ForwarderRetryable","updatedTeleportTransfer","redeemTeleporterSecondLeg","l2L3Retryable","redemptionReceipt","updatedTeleporterTx","TransactionsTableRowAction","isError","claim","isClaiming","useClaimWithdrawal","setIsClaiming","extendedEvent","isSuccess","setParentChainTxDetailsOfWithdrawalClaimTx","parentChainTxId","cachedClaimParentChainTxId","claimCctp","isClaimingCctp","useClaimCctp","receiveTx","receiveReceiptTx","currentNetworkName","isRedeeming","isRetryableRedeeming","useRedeemRetryable","setIsRedeeming","teleporterRedeem","isTeleporterRedeeming","useRedeemTeleporter","chainIdForRedeemingRetryable","redeemerNetworkName","isConnectedToCorrectNetworkForAction","handleRedeemRetryable","handleClaim","EthereumLogoRoundLight","TransactionsTableTokenImage","tokenAddressToLogoSrcMap","arrayOfTokens","tkn","tokenLogoSrc","nativeTokenLogoSrc","bridgeUiConfig","TransactionsTableExternalLink","setShow","destinationNetworkTxId","TransactionsTableRow","openTxDetails","useTxDetailsStore","txRelativeTime","setTxRelativeTime","isClaimableTx","data-testid","EmptyTransactionHistory","paused","tabType","ContentWrapper","HistoryLoader","LoadMoreButton","TableHeader","PlusCircleIcon","FailedChainPairsTooltip","ul","pair","TransactionHistoryTable","selectedTabIndex","oldestTxTimeAgoString","contentAboveTable","isTxHistoryEmpty","isPendingTab","tableHeight","setTableHeight","pendingTokenDepositsCount","topmostPendingTxId","currentRef","observer","ResizeObserver","entries","aboveHeight","contentRect","viewportHeight","innerHeight","observe","unobserve","disableHeight","Table","headerHeight","headerRowRenderer","columns","rowGetter","isLastRow","secondsPassed","isTopmostPendingTx","Column","dataKey","headerRenderer","CctpLogoColor","images_ArbitrumLogo","TeleportMiddleStepFailureExplanationNote","TransactionsTableDetailsTeleporterSteps","l2TxID","isFirstRetryableLegSucceeded","isFirstRetryableLegFailed","l2ForwarderRequiresRedeem","isFirstRetryableLegResolved","isSecondRetryableLegResolved","firstRetryableRedeemButton","firstTransactionExternalLink","firstTransactionActionItem","firstRetryableWaitingDuration","secondRetryableWaitingDuration","Step","done","endItem","failure","FirstRetryableLegLabel","extendHeight","l2NetworkName","TransactionFailedOnNetwork","claimable","borderColorClassName","textColorClassName","LastStepEndItem","isTeleportTx","TransactionsTableDetailsSteps","sourceNetworkName","isSourceChainDepositFailure","isDestinationChainFailure","destinationChainTxText","fundsArrivedText","needsToClaimTransfer","DetailsBox","header","h4","TransactionsTableDetails","txFromStore","t","showPriceInUsd","isDifferentSourceAddress","isDifferentDestinationAddress","tabClasses","TransactionHistory","toNow","groupedTransactions","settled","failed","pendingTransactions","settledTransactions","Panels","arrows","Content","numClaimableTransactions","numRetryablesToRedeem","numPendingTransactions","numClaimableTransactionsString","numRetryablesToRedeemString","numPendingTransactionsString","ArrowsIcon","DocumentTextIcon","TransactionStatusInfo","TransactionHistorySidePanel","transactionHistoryProps","interval","setInterval","clearInterval","MainContent","ArbTokenBridgeStoreSync","tokenBridgeParams","BalanceUpdater","latestTokenBridge","TokenListSyncer","tokenListsToSet","useDestinationChainStyle","orbitChainColor","onDisconnectHandler","indexedDB","deleteDatabase","udInfoDefaults","tryLookupUDName","UDresolution","Resolution","uns","locations","Layer1","Layer2","reverse","useAccountMenu","useProvider","disconnect","useDisconnect","onSettled","udInfo","setUDInfo","ensName","useEnsName","ensAvatar","useEnsAvatar","resolveUdName","accountShort","openTransactionHistory","pageElement","CustomBoringAvatar","BoringAvatar","colors","AccountMenuItem","MenuItemExpandable","isMobile","Icon","MenuItem","Cog6ToothIcon","ArrowLeftOnRectangleIcon","DynamicMobileSidebar","dynamic","__webpack_require__","bind","mod","MobileSidebar","ssr","AppMobileSidebar","usePostHog","logger","activeMenu","mobileToggleButtonClassOverrides","ConnectButton","Custom","Header","destinationChainStyle","ArbitrumLogoSmall","HeaderAccountPopover","isCorrectNetworkConnected","copyToClipboard","useCopyToClipboard","showCopied","setShowCopied","headerItemsClassName","role","DocumentDuplicateIcon","wagmiOrbitChains","chainList","projectId","NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID","appInfo","appName","isBlocked","NEXT_PUBLIC_IS_E2E_TEST","searchParams","ok","blocked","accountIsBlocked","HeaderConnectWalletButton","rainbowkitTheme","darkTheme","accentColor","fonts","ArbTokenBridgeStoreSyncWrapper","setTokenBridgeParams","selectedTokenAddress","getBaseUrl","urlObject","protocol","hostname","AppContent","useAccountIsBlocked","tosAccepted","walletName","getWalletName","connectorName","wagmiConfigProps","rainbowKitProviderProps","getProps","targetChainKey","chains","configureChains","getChainId","customInfuraProvider","publicProvider","wallets","getDefaultWallets","connectors","connectorsForWallets","groupName","trustWallet","okxWallet","client","createClient","autoConnect","ConnectedChainSyncer","shouldSync","setShouldSync","didSync","setDidSync","setSourceChainToConnectedChain","checkCorrectChainForSmartContractWallet","alert","App","overmind","createOvermind","ArbQueryParamProvider","WagmiConfig","RainbowKitProvider","removeItem"],"sourceRoot":""}